(function(){window.fastSearch={}}).call(this);(function(){function o(a){for(var e=-1,j=a.length,p=[];++e<j;)p.push(a[e]);return p}function f(){}function l(a){return a}function i(){return this}function g(){return true}function c(a){return typeof a=="function"?a:function(){return a}}function d(a,e,j){return function(){var p=j.apply(e,arguments);return arguments.length?a:p}}function b(a){return a!=null&&!isNaN(a)}function h(a){return a.length}function m(a){return a==null}function v(){}function w(a){function e(){for(var q=j,t=-1,z=q.length,x;++t<
z;)(x=q[t].on)&&x.apply(this,arguments);return a}var j=[],p=new f;return e.on=function(q,t){var z=p.get(q),x;return arguments.length<2?z&&z.on:(z&&(z.on=null,j=j.slice(0,x=j.indexOf(z)).concat(j.slice(x+1)),p.remove(q)),t&&j.push(p.set(q,{on:t})),a)},e}function s(a,e){return e-(a?1+Math.floor(Math.log(a+Math.pow(10,1+Math.floor(Math.log(a)/Math.LN10)-e))/Math.LN10):1)}function A(a){return a+""}function D(a){for(var e=a.lastIndexOf("."),j=e>=0?a.substring(e):(e=a.length,""),p=[];e>0;)p.push(a.substring(e-=
3,e+3));return p.reverse().join(",")+j}function y(a){return function(e){return e<=0?0:e>=1?1:a(e)}}function S(a){return function(e){return 1-a(1-e)}}function O(a){return function(e){return 0.5*(e<0.5?a(2*e):2-a(2-2*e))}}function G(a){return a}function X(a){return function(e){return Math.pow(e,a)}}function xa(a){return 1-Math.cos(a*Math.PI/2)}function $a(a){return Math.pow(2,10*(a-1))}function eb(a){return 1-Math.sqrt(1-a*a)}function ub(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+
0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375}function la(){d3.event.stopPropagation();d3.event.preventDefault()}function Qa(){for(var a=d3.event,e;e=a.sourceEvent;)a=e;return a}function K(a){for(var e=new v,j=0,p=arguments.length;++j<p;)e[arguments[j]]=w(e);return e.of=function(q,t){return function(z){try{var x=z.sourceEvent=d3.event;z.target=a;d3.event=z;e[z.type].apply(q,t)}finally{d3.event=x}}},e}function I(a){var e=[a.a,a.b],j=[a.c,a.d],p=aa(e),q=e[0]*j[0]+
e[1]*j[1],t=aa((j[0]+=-q*e[0],j[1]+=-q*e[1],j))||0;e[0]*j[1]<j[0]*e[1]&&(e[0]*=-1,e[1]*=-1,p*=-1,q*=-1);this.rotate=(p?Math.atan2(e[1],e[0]):Math.atan2(-j[0],j[1]))*he;this.translate=[a.e,a.f];this.scale=[p,t];this.skew=t?Math.atan2(q,t)*he:0}function aa(a){var e=Math.sqrt(a[0]*a[0]+a[1]*a[1]);return e&&(a[0]/=e,a[1]/=e),e}function sa(a){return a=="transform"?d3.interpolateTransform:d3.interpolate}function r(a,e){return e=e-(a=+a)?1/(e-a):0,function(j){return(j-a)*e}}function Ta(a,e){return e=e-(a=
+a)?1/(e-a):0,function(j){return Math.max(0,Math.min(1,(j-a)*e))}}function qa(a,e,j){return new Ja(a,e,j)}function Ja(a,e,j){this.r=a;this.g=e;this.b=j}function Ga(a){return a<16?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function La(a,e,j){var p=0,q=0,t=0,z,x,C;if(z=/([a-z]+)\((.*)\)/i.exec(a)){x=z[2].split(",");switch(z[1]){case "hsl":return j(parseFloat(x[0]),parseFloat(x[1])/100,parseFloat(x[2])/100);case "rgb":return e(gc(x[0]),gc(x[1]),gc(x[2]))}}return(C=Ad.get(a))?e(C.r,C.g,
C.b):(a!=null&&a.charAt(0)==="#"&&(a.length===4?(a.charAt(1),a.charAt(2),a.charAt(3)):a.length===7&&(p=a.substring(1,3),q=a.substring(3,5),t=a.substring(5,7)),p=parseInt(p,16),q=parseInt(q,16),t=parseInt(t,16)),e(p,q,t))}function pa(a,e,j){var p=Math.min(a/=255,e/=255,j/=255);a=Math.max(a,e,j);var q,t;return a-p||(t=q=0),Gb(q,t,(a+p)/2)}function kc(a,e,j){a=nc(a);e=nc(e);j=nc(j);var p=V((0.4124564*a+0.3575761*e+0.1804375*j)/ie),q=V((0.2126729*a+0.7151522*e+0.072175*j)/je);a=V((0.0193339*a+0.119192*
e+0.9503041*j)/ke);return new Ab(116*q-16,500*(p-q),200*(q-a))}function nc(a){return(a/=255)<=0.04045?a/12.92:Math.pow((a+0.055)/1.055,2.4)}function gc(a){var e=parseFloat(a);return a.charAt(a.length-1)==="%"?Math.round(e*2.55):e}function Gb(a,e,j){return new Hb(a,e,j)}function Hb(a,e,j){this.h=a;this.s=e;this.l=j}function Sb(a,e,j){function p(z){return z>360?z-=360:z<0&&(z+=360),z<60?q+(t-q)*z/60:z<180?t:z<240?q+(t-q)*(240-z)/60:q}var q,t;return a%=360,a<0&&(a+=360),e=e<0?0:e>1?1:e,j=j<0?0:j>1?1:
j,t=j<=0.5?j*(1+e):j+e-j*e,q=2*j-t,qa(Math.round(p(a+120)*255),Math.round(p(a)*255),Math.round(p(a-120)*255))}function mb(a,e,j){this.h=a;this.c=e;this.l=j}function Yb(a,e,j){var p=Math.cos(a*=Math.PI/180)*e;return new Ab(j,p,Math.sin(a)*e)}function Ab(a,e,j){this.l=a;this.a=e;this.b=j}function vb(a,e,j){a=(a+16)/116;e=a+e/500;j=a-j/200;return e=Bb(e)*ie,a=Bb(a)*je,j=Bb(j)*ke,qa(ga(3.2404542*e-1.5371385*a-0.4985314*j),ga(-0.969266*e+1.8760108*a+0.041556*j),ga(0.0556434*e-0.2040259*a+1.0572252*j))}
function vc(a,e,j){return new mb(Math.atan2(j,e)/Math.PI*180,Math.sqrt(e*e+j*j),a)}function Bb(a){return a>0.206893034?a*a*a:(a-4/29)/7.787037}function V(a){return a>0.008856?Math.pow(a,1/3):7.787037*a+4/29}function ga(a){return Math.round(255*(a<=0.00304?12.92*a:1.055*Math.pow(a,1/2.4)-0.055))}function ua(a){return Td(a,qb),a}function Za(a){return function(){return Bd(a,this)}}function Ra(a){return function(){return le(a,this)}}function Ha(a,e){function j(){this.removeAttribute(a)}function p(){this.removeAttributeNS(a.space,
a.local)}function q(){this.setAttribute(a,e)}function t(){this.setAttributeNS(a.space,a.local,e)}function z(){var C=e.apply(this,arguments);C==null?this.removeAttribute(a):this.setAttribute(a,C)}function x(){var C=e.apply(this,arguments);C==null?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,C)}return a=d3.ns.qualify(a),e==null?a.local?p:j:typeof e=="function"?a.local?x:z:a.local?t:q}function ba(a){return RegExp("(?:^|\\s+)"+d3.requote(a)+"(?:\\s+|$)","g")}function Ya(a,
e){function j(){for(var t=-1;++t<q;)a[t](this,e)}function p(){for(var t=-1,z=e.apply(this,arguments);++t<q;)a[t](this,z)}a=a.trim().split(/\s+/).map(nb);var q=a.length;return typeof e=="function"?p:j}function nb(a){var e=ba(a);return function(j,p){if(q=j.classList)return p?q.add(a):q.remove(a);var q=j.className,t=q.baseVal!=null,z=t?q.baseVal:q;if(p){e.lastIndex=0;e.test(z)||(z=(z+" "+a).trim().replace(/\s+/g," "),t?q.baseVal=z:j.className=z)}else if(z){z=z.replace(e," ").trim().replace(/\s+/g," ");
t?q.baseVal=z:j.className=z}}}function xb(a,e,j){function p(){this.style.removeProperty(a)}function q(){this.style.setProperty(a,e,j)}function t(){var z=e.apply(this,arguments);z==null?this.style.removeProperty(a):this.style.setProperty(a,z,j)}return e==null?p:typeof e=="function"?t:q}function Zb(a,e){function j(){delete this[a]}function p(){this[a]=e}function q(){var t=e.apply(this,arguments);t==null?delete this[a]:this[a]=t}return e==null?j:typeof e=="function"?q:p}function yb(a){return function(){return me(this,
a)}}function oc(a){return arguments.length||(a=d3.ascending),function(e,j){return a(e&&e.__data__,j&&j.__data__)}}function pc(a,e,j){function p(){var x=this[t];x&&(this.removeEventListener(a,x,x.$),delete this[t])}function q(){function x(T){var L=d3.event;d3.event=T;M[0]=C.__data__;try{e.apply(C,M)}finally{d3.event=L}}var C=this,M=arguments;p.call(this);this.addEventListener(a,this[t]=x,x.$=j);x._=e}var t="__on"+a,z=a.indexOf(".");return z>0&&(a=a.substring(0,z)),e?q:p}function Tb(a,e){for(var j=
0,p=a.length;j<p;j++)for(var q=a[j],t=0,z=q.length,x;t<z;t++)(x=q[t])&&e(x,t,j);return a}function hc(a){return Td(a,Zc),a}function wc(a,e,j){Td(a,$b);var p=new f,q=d3.dispatch("start","end"),t=Cd;return a.id=e,a.time=j,a.tween=function(z,x){return arguments.length<2?p.get(z):(x==null?p.remove(z):p.set(z,x),a)},a.ease=function(z){return arguments.length?(t=typeof z=="function"?z:d3.ease.apply(d3,arguments),a):t},a.each=function(z,x){return arguments.length<2?Oc.call(a,z):(q.on(z,x),a)},d3.timer(function(z){return Tb(a,
function(x,C){function M(ia){return ea.active>e?L():(ea.active=e,p.forEach(function(ja,ma){(ma=ma.call(x,na,C))&&P.push(ma)}),q.start.call(x,na,C),T(ia)||d3.timer(T,0,j),1)}function T(ia){if(ea.active!==e)return L();ia=(ia-U)/ka;for(var ja=t(ia),ma=P.length;ma>0;)P[--ma].call(x,ja);if(ia>=1)return L(),$c=e,q.end.call(x,na,C),$c=0,1}function L(){return--ea.count||delete x.__transition__,1}var P=[],U=x.delay,ka=x.duration,ea=(x=x.node).__transition__||(x.__transition__={active:0,count:0}),na=x.__data__;
++ea.count;U<=z?M(z):d3.timer(M,U,j)})},0,j),a}function Oc(a){var e=$c,j=Cd,p=Dd,q=Ed;return $c=this.id,Cd=this.ease(),Tb(this,function(t,z,x){Dd=t.delay;Ed=t.duration;a.call(t=t.node,t.__data__,z,x)}),$c=e,Cd=j,Dd=p,Ed=q,this}function ad(a,e,j){return j!=""&&rd}function Bc(){for(var a,e=Date.now(),j=bd;j;){a=e-j.then;a>=j.delay&&(j.flush=j.callback(a));j=j.next}a=ac()-e;a>24?(isFinite(a)&&(clearTimeout(Fd),Fd=setTimeout(Bc,a)),Gd=0):(Gd=1,ne(Bc))}function ac(){for(var a=null,e=bd,j=Infinity;e;)e.flush?
e=a?a.next=e.next:bd=e.next:(j=Math.min(j,e.then+e.delay),e=(a=e).next);return j}function ld(a,e){var j=a.ownerSVGElement||a;if(j.createSVGPoint){var p=j.createSVGPoint();if(Ud<0&&(window.scrollX||window.scrollY)){j=d3.select(document.body).append("svg").style("position","absolute").style("top",0).style("left",0);var q=j[0][0].getScreenCTM();Ud=!q.f&&!q.e;j.remove()}return Ud?(p.x=e.pageX,p.y=e.pageY):(p.x=e.clientX,p.y=e.clientY),p=p.matrixTransform(a.getScreenCTM().inverse()),[p.x,p.y]}j=a.getBoundingClientRect();
return[e.clientX-j.left-a.clientLeft,e.clientY-j.top-a.clientTop]}function ic(a){var e=a[0];a=a[a.length-1];return e<a?[e,a]:[a,e]}function Ub(a){return a.rangeExtent?a.rangeExtent():ic(a.range())}function Cc(a,e){var j=0,p=a.length-1,q=a[j],t=a[p],z;t<q&&(z=j,j=p,p=z,z=q,q=t,t=z);if(e=e(t-q)){a[j]=e.floor(q);a[p]=e.ceil(t)}return a}function sd(){return Math}function Db(a,e,j,p){function q(){var C=Math.min(a.length,e.length)>2?Dc:md,M=p?Ta:r;return z=C(a,e,M,j),x=C(e,a,M,d3.interpolate),t}function t(C){return z(C)}
var z,x;return t.invert=function(C){return x(C)},t.domain=function(C){return arguments.length?(a=C.map(Number),q()):a},t.range=function(C){return arguments.length?(e=C,q()):e},t.rangeRound=function(C){return t.range(C).interpolate(d3.interpolateRound)},t.clamp=function(C){return arguments.length?(p=C,q()):p},t.interpolate=function(C){return arguments.length?(j=C,q()):j},t.ticks=function(C){return zb(a,C)},t.tickFormat=function(C){return Eb(a,C)},t.nice=function(){return Cc(a,lc),q()},t.copy=function(){return Db(a,
e,j,p)},q()}function Pc(a,e){return d3.rebind(a,e,"range","rangeRound","interpolate","clamp")}function lc(a){return a=Math.pow(10,Math.round(Math.log(a)/Math.LN10)-1),a&&{floor:function(e){return Math.floor(e/a)*a},ceil:function(e){return Math.ceil(e/a)*a}}}function cd(a,e){var j=ic(a),p=j[1]-j[0],q=Math.pow(10,Math.floor(Math.log(p/e)/Math.LN10));p=e/p*q;return p<=0.15?q*=10:p<=0.35?q*=5:p<=0.75&&(q*=2),j[0]=Math.ceil(j[0]/q)*q,j[1]=Math.floor(j[1]/q)*q+q*0.5,j[2]=q,j}function zb(a,e){return d3.range.apply(d3,
cd(a,e))}function Eb(a,e){return d3.format(",."+Math.max(0,-Math.floor(Math.log(cd(a,e)[2])/Math.LN10+0.01))+"f")}function md(a,e,j,p){var q=j(a[0],a[1]),t=p(e[0],e[1]);return function(z){return t(q(z))}}function Dc(a,e,j,p){var q=[],t=[],z=0,x=Math.min(a.length,e.length)-1;for(a[x]<a[0]&&(a=a.slice().reverse(),e=e.slice().reverse());++z<=x;){q.push(j(a[z-1],a[z]));t.push(p(e[z-1],e[z]))}return function(C){var M=d3.bisect(a,C,1,x)-1;return t[M](q[M](C))}}function Ec(a,e){function j(q){return a(e(q))}
var p=e.pow;return j.invert=function(q){return p(a.invert(q))},j.domain=function(q){return arguments.length?(e=q[0]<0?Fc:Qc,p=e.pow,a.domain(q.map(e)),j):a.domain().map(p)},j.nice=function(){return a.domain(Cc(a.domain(),sd)),j},j.ticks=function(){var q=ic(a.domain()),t=[];if(q.every(isFinite)){var z=Math.floor(q[0]),x=Math.ceil(q[1]),C=p(q[0]);q=p(q[1]);if(e===Fc)for(t.push(p(z));z++<x;)for(var M=9;M>0;M--)t.push(p(z)*M);else{for(;z<x;z++)for(M=1;M<10;M++)t.push(p(z)*M);t.push(p(z))}for(z=0;t[z]<
C;z++);for(x=t.length;t[x-1]>q;x--);t=t.slice(z,x)}return t},j.tickFormat=function(q,t){arguments.length<2&&(t=Me);if(arguments.length<1)return t;var z=Math.max(0.1,q/j.ticks().length),x=e===Fc?(C=-1.0E-12,Math.floor):(C=1.0E-12,Math.ceil),C;return function(M){return M/p(x(e(M)+C))<=z?t(M):""}},j.copy=function(){return Ec(a.copy(),e)},Pc(j,a)}function Qc(a){return Math.log(a<0?0:a)/Math.LN10}function Fc(a){return-Math.log(a>0?0:-a)/Math.LN10}function bc(a,e){function j(t){return a(p(t))}var p=qc(e),
q=qc(1/e);return j.invert=function(t){return q(a.invert(t))},j.domain=function(t){return arguments.length?(a.domain(t.map(p)),j):a.domain().map(q)},j.ticks=function(t){return zb(j.domain(),t)},j.tickFormat=function(t){return Eb(j.domain(),t)},j.nice=function(){return j.domain(Cc(j.domain(),lc))},j.exponent=function(t){if(!arguments.length)return e;var z=j.domain();return p=qc(e=t),q=qc(1/e),j.domain(z)},j.copy=function(){return bc(a.copy(),e)},Pc(j,a)}function qc(a){return function(e){return e<0?
-Math.pow(-e,a):Math.pow(e,a)}}function Fb(a,e){function j(x){return t[((q.get(x)||q.set(x,a.push(x)))-1)%t.length]}function p(x,C){return d3.range(a.length).map(function(M){return x+C*M})}var q,t,z;return j.domain=function(x){if(!arguments.length)return a;a=[];q=new f;for(var C=-1,M=x.length,T;++C<M;)q.has(T=x[C])||q.set(T,a.push(T));return j[e.t].apply(j,e.a)},j.range=function(x){return arguments.length?(t=x,z=0,e={t:"range",a:arguments},j):t},j.rangePoints=function(x,C){arguments.length<2&&(C=
0);var M=x[0],T=x[1],L=(T-M)/(Math.max(1,a.length-1)+C);return t=p(a.length<2?(M+T)/2:M+L*C/2,L),z=0,e={t:"rangePoints",a:arguments},j},j.rangeBands=function(x,C,M){arguments.length<2&&(C=0);arguments.length<3&&(M=C);var T=x[1]<x[0],L=x[T-0],P=(x[1-T]-L)/(a.length-C+2*M);return t=p(L+P*M,P),T&&t.reverse(),z=P*(1-C),e={t:"rangeBands",a:arguments},j},j.rangeRoundBands=function(x,C,M){arguments.length<2&&(C=0);arguments.length<3&&(M=C);var T=x[1]<x[0],L=x[T-0],P=x[1-T],U=Math.floor((P-L)/(a.length-C+
2*M));return t=p(L+Math.round((P-L-(a.length-C)*U)/2),U),T&&t.reverse(),z=Math.round(U*(1-C)),e={t:"rangeRoundBands",a:arguments},j},j.rangeBand=function(){return z},j.rangeExtent=function(){return ic(e.a[0])},j.copy=function(){return Fb(a,e)},j.domain(a)}function Gc(a,e){function j(){var t=0,z=e.length;for(q=[];++t<z;)q[t-1]=d3.quantile(a,t/z);return p}function p(t){return isNaN(t=+t)?NaN:e[d3.bisect(q,t)]}var q;return p.domain=function(t){return arguments.length?(a=t.filter(function(z){return!isNaN(z)}).sort(d3.ascending),
j()):a},p.range=function(t){return arguments.length?(e=t,j()):e},p.quantiles=function(){return q},p.copy=function(){return Gc(a,e)},j()}function xc(a,e,j){function p(x){return j[Math.max(0,Math.min(z,Math.floor(t*(x-a))))]}function q(){return t=j.length/(e-a),z=j.length-1,p}var t,z;return p.domain=function(x){return arguments.length?(a=+x[0],e=+x[x.length-1],q()):[a,e]},p.range=function(x){return arguments.length?(j=x,q()):j},p.copy=function(){return xc(a,e,j)},q()}function Rc(a,e){function j(p){return e[d3.bisect(a,
p)]}return j.domain=function(p){return arguments.length?(a=p,j):a},j.range=function(p){return arguments.length?(e=p,j):e},j.copy=function(){return Rc(a,e)},j}function Sc(a){function e(j){return+j}return e.invert=e,e.domain=e.range=function(j){return arguments.length?(a=j.map(e),e):a},e.ticks=function(j){return zb(a,j)},e.tickFormat=function(j){return Eb(a,j)},e.copy=function(){return Sc(a)},e}function nd(a){return a.innerRadius}function od(a){return a.outerRadius}function dd(a){return a.startAngle}
function Tc(a){return a.endAngle}function Uc(a){function e(C){function M(){T.push("M",t(a(L),x))}for(var T=[],L=[],P=-1,U=C.length,ka,ea=c(j),na=c(p);++P<U;)q.call(this,ka=C[P],P)?L.push([+ea.call(this,ka,P),+na.call(this,ka,P)]):L.length&&(M(),L=[]);return L.length&&M(),T.length?T.join(""):null}var j=Hc,p=ed,q=g,t=Ib,z=t.key,x=0.7;return e.x=function(C){return arguments.length?(j=C,e):j},e.y=function(C){return arguments.length?(p=C,e):p},e.defined=function(C){return arguments.length?(q=C,e):q},e.interpolate=
function(C){return arguments.length?(typeof C=="function"?z=t=C:z=(t=Vd.get(C)||Ib).key,e):z},e.tension=function(C){return arguments.length?(x=C,e):x},e}function Hc(a){return a[0]}function ed(a){return a[1]}function Ib(a){return a.join("L")}function Vc(a){for(var e=0,j=a.length,p=a[0],q=[p[0],",",p[1]];++e<j;)q.push("V",(p=a[e])[1],"H",p[0]);return q.join("")}function Ic(a){for(var e=0,j=a.length,p=a[0],q=[p[0],",",p[1]];++e<j;)q.push("H",(p=a[e])[0],"V",p[1]);return q.join("")}function yc(a,e){if(e.length<
1||a.length!=e.length&&a.length!=e.length+2)return Ib(a);var j=a.length!=e.length,p="",q=a[0],t=a[1],z=e[0],x=z,C=1;j&&(p+="Q"+(t[0]-z[0]*2/3)+","+(t[1]-z[1]*2/3)+","+t[0]+","+t[1],q=a[1],C=2);if(e.length>1){x=e[1];t=a[C];C++;p+="C"+(q[0]+z[0])+","+(q[1]+z[1])+","+(t[0]-x[0])+","+(t[1]-x[1])+","+t[0]+","+t[1];for(q=2;q<e.length;q++,C++){t=a[C];x=e[q];p+="S"+(t[0]-x[0])+","+(t[1]-x[1])+","+t[0]+","+t[1]}}if(j){j=a[C];p+="Q"+(t[0]+x[0]*2/3)+","+(t[1]+x[1]*2/3)+","+j[0]+","+j[1]}return p}function zc(a,
e){for(var j=[],p=(1-e)/2,q,t=a[0],z=a[1],x=1,C=a.length;++x<C;){q=t;t=z;z=a[x];j.push([p*(z[0]-q[0]),p*(z[1]-q[1])])}return j}function Jc(a){if(a.length<3)return Ib(a);var e=1,j=a.length,p=a[0],q=p[0],t=p[1],z=[q,q,q,(p=a[1])[0]],x=[t,t,t,p[1]];q=[q,",",t];for(Vb(q,z,x);++e<j;){p=a[e];z.shift();z.push(p[0]);x.shift();x.push(p[1]);Vb(q,z,x)}for(e=-1;++e<2;){z.shift();z.push(p[0]);x.shift();x.push(p[1]);Vb(q,z,x)}return q.join("")}function Cb(a,e){return a[0]*e[0]+a[1]*e[1]+a[2]*e[2]+a[3]*e[3]}function Vb(a,
e,j){a.push("C",Cb(oe,e),",",Cb(oe,j),",",Cb(pe,e),",",Cb(pe,j),",",Cb(pd,e),",",Cb(pd,j))}function Kc(a,e){return(e[1]-a[1])/(e[0]-a[0])}function qd(a){for(var e,j=-1,p=a.length,q,t;++j<p;){e=a[j];q=e[0];t=e[1]+fd;e[0]=q*Math.cos(t);e[1]=q*Math.sin(t)}return a}function Pb(a){function e(P){function U(){ka.push("M",x(a(na),L),T,M(a(ea.reverse()),L),"Z")}for(var ka=[],ea=[],na=[],ia=-1,ja=P.length,ma,Ca=c(j),Fa=c(q),za=j===p?function(){return Xa}:c(p),Va=q===t?function(){return ab}:c(t),Xa,ab;++ia<
ja;)z.call(this,ma=P[ia],ia)?(ea.push([Xa=+Ca.call(this,ma,ia),ab=+Fa.call(this,ma,ia)]),na.push([+za.call(this,ma,ia),+Va.call(this,ma,ia)])):ea.length&&(U(),ea=[],na=[]);return ea.length&&U(),ka.length?ka.join(""):null}var j=Hc,p=Hc,q=0,t=ed,z=g,x=Ib,C=x.key,M=x,T="L",L=0.7;return e.x=function(P){return arguments.length?(j=p=P,e):p},e.x0=function(P){return arguments.length?(j=P,e):j},e.x1=function(P){return arguments.length?(p=P,e):p},e.y=function(P){return arguments.length?(q=t=P,e):t},e.y0=function(P){return arguments.length?
(q=P,e):q},e.y1=function(P){return arguments.length?(t=P,e):t},e.defined=function(P){return arguments.length?(z=P,e):z},e.interpolate=function(P){return arguments.length?(typeof P=="function"?C=x=P:C=(x=Vd.get(P)||Ib).key,M=x.reverse||x,T=x.closed?"M":"L",e):C},e.tension=function(P){return arguments.length?(L=P,e):L},e}function rc(a){return a.source}function Ac(a){return a.target}function Wc(a){return a.radius}function Qb(a){return[a.x,a.y]}function Lc(a){return function(){var e=a.apply(this,arguments),
j=e[0];e=e[1]+fd;return[j*Math.cos(e),j*Math.sin(e)]}}function Jb(){return 64}function cc(){return"circle"}function jc(a){a=Math.sqrt(a/Math.PI);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function dc(a,e){a.attr("transform",function(j){return"translate("+e(j)+",0)"})}function ec(a,e){a.attr("transform",function(j){return"translate(0,"+e(j)+")"})}function Mc(a,e,j){p=[];if(j&&e.length>1){a=ic(a.domain());for(var p,q=-1,t=e.length,z=(e[1]-e[0])/++j,x,C;++q<t;)for(x=j;--x>
0;)(C=+e[q]-x*z)>=a[0]&&p.push(C);--q;for(x=0;++x<j&&(C=+e[q]+x*z)<a[1];)p.push(C)}return p}function Xc(){td||(td=d3.select("body").append("div").style("visibility","hidden").style("top",0).style("height",0).style("width",0).style("overflow-y","scroll").append("div").style("height","2000px").node().parentNode);var a=d3.event,e;try{td.scrollTop=1E3;td.dispatchEvent(a);e=1E3-td.scrollTop}catch(j){e=a.wheelDelta||-a.detail*5}return e}function Mb(a){var e=a.source;a=a.target;var j;var p=a;if(e===p)j=
e;else{j=gd(e);p=gd(p);for(var q=j.pop(),t=p.pop(),z=null;q===t;){z=q;q=j.pop();t=p.pop()}j=z}for(p=[e];e!==j;){e=e.parent;p.push(e)}for(e=p.length;a!==j;){p.splice(e,0,a);a=a.parent}return p}function gd(a){for(var e=[],j=a.parent;j!=null;){e.push(a);a=j;j=j.parent}return e.push(a),e}function k(a){a.fixed|=2}function n(a){a.fixed&=1}function B(a){a.fixed|=4}function E(a){a.fixed&=3}function H(a,e,j){var p=0,q=0;a.charge=0;if(!a.leaf)for(var t=a.nodes,z=t.length,x=-1,C;++x<z;){C=t[x];if(C!=null){H(C,
e,j);a.charge+=C.charge;p+=C.charge*C.cx;q+=C.charge*C.cy}}if(a.point){a.leaf||(a.point.x+=Math.random()-0.5,a.point.y+=Math.random()-0.5);e*=j[a.point.index];a.charge+=a.pointCharge=e;p+=e*a.point.x;q+=e*a.point.y}a.cx=p/a.charge;a.cy=q/a.charge}function N(){return 20}function W(){return 1}function da(a){return a.x}function ha(a){return a.y}function ya(a,e,j){a.y0=e;a.y=j}function Ma(a){return d3.range(a.length)}function Aa(a){var e=-1;a=a[0].length;for(var j=[];++e<a;)j[e]=0;return j}function Ua(a){for(var e=
1,j=0,p=a[0][1],q,t=a.length;e<t;++e)(q=a[e][1])>p&&(j=e,p=q);return j}function Oa(a){return a.reduce(gb,0)}function gb(a,e){return a+e[1]}function ib(a,e){return jb(a,Math.ceil(Math.log(e.length)/Math.LN2+1))}function jb(a,e){for(var j=-1,p=+a[0],q=(a[1]-p)/e,t=[];++j<=e;)t[j]=q*j+p;return t}function lb(a){return[d3.min(a),d3.max(a)]}function Nb(a,e){return d3.rebind(a,e,"sort","children","value"),a.links=R,a.nodes=function(j){return Wd=true,(a.nodes=a)(j)},a}function Ob(a){return a.children}function fb(a){return a.value}
function Kb(a,e){return e.value-a.value}function R(a){return d3.merge(a.map(function(e){return(e.children||[]).map(function(j){return{source:e,target:j}})}))}function Y(a,e){return a.value-e.value}function oa(a,e){var j=a._pack_next;a._pack_next=e;e._pack_prev=a;e._pack_next=j;j._pack_prev=e}function ta(a,e){a._pack_next=e;e._pack_prev=a}function wa(a,e){var j=e.x-a.x,p=e.y-a.y,q=a.r+e.r;return q*q-j*j-p*p>0.001}function Da(a){function e(ia){p=Math.min(ia.x-ia.r,p);q=Math.max(ia.x+ia.r,q);t=Math.min(ia.y-
ia.r,t);z=Math.max(ia.y+ia.r,z)}if((j=a.children)&&(U=j.length)){var j,p=Infinity,q=-Infinity,t=Infinity,z=-Infinity,x,C,M,T,L,P,U;j.forEach(Wa);x=j[0];x.x=-x.r;x.y=0;e(x);if(U>1){C=j[1];C.x=C.r;C.y=0;e(C);if(U>2){M=j[2];ca(x,C,M);e(M);oa(x,M);x._pack_prev=M;oa(M,C);C=x._pack_next;for(T=3;T<U;T++){ca(x,C,M=j[T]);var ka=0,ea=1,na=1;for(L=C._pack_next;L!==C;L=L._pack_next,ea++)if(wa(L,M)){ka=1;break}if(ka==1)for(P=x._pack_prev;P!==L._pack_prev;P=P._pack_prev,na++)if(wa(P,M))break;ka?(ea<na||ea==na&&
C.r<x.r?ta(x,C=L):ta(x=P,C),T--):(oa(x,M),C=M,e(M))}}}x=(p+q)/2;C=(t+z)/2;for(T=L=0;T<U;T++){M=j[T];M.x-=x;M.y-=C;L=Math.max(L,M.r+Math.sqrt(M.x*M.x+M.y*M.y))}a.r=L;j.forEach(Ka)}}function Wa(a){a._pack_next=a._pack_prev=a}function Ka(a){delete a._pack_next;delete a._pack_prev}function hb(a,e,j,p){var q=a.children;a.x=e+=p*a.x;a.y=j+=p*a.y;a.r*=p;if(q){a=-1;for(var t=q.length;++a<t;)hb(q[a],e,j,p)}}function ca(a,e,j){var p=a.r+j.r,q=e.x-a.x,t=e.y-a.y;if(p&&(q||t)){var z=e.r+j.r,x=q*q+t*t;z*=z;p*=
p;e=0.5+(p-z)/(2*x);z=Math.sqrt(Math.max(0,2*z*(p+x)-(p-=x)*p-z*z))/(2*x);j.x=a.x+e*q+z*t;j.y=a.y+e*t-z*q}else{j.x=a.x+p;j.y=a.y}}function Ba(a){return 1+d3.max(a,function(e){return e.y})}function Na(a){return a.reduce(function(e,j){return e+j.x},0)/a.length}function Ia(a){var e=a.children;return e&&e.length?Ia(e[0]):a}function db(a){var e=a.children,j;return e&&(j=e.length)?db(e[j-1]):a}function u(a,e){return a.parent==e.parent?1:2}function F(a){var e=a.children;return e&&e.length?e[0]:a._tree.thread}
function J(a){var e=a.children,j;return e&&(j=e.length)?e[j-1]:a._tree.thread}function Q(a,e){var j=a.children;if(j&&(q=j.length))for(var p,q,t=-1;++t<q;)e(p=Q(j[t],e),a)>0&&(a=p);return a}function Z(a,e){return a.x-e.x}function fa(a,e){return e.x-a.x}function ra(a,e){return a.depth-e.depth}function va(a,e){function j(p,q){var t=p.children;if(t&&(M=t.length))for(var z,x=null,C=-1,M;++C<M;){z=t[C];j(z,x);x=z}e(p,q)}j(a,null)}function Ea(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Pa(a,e){var j=
a.x+e[3],p=a.y+e[0],q=a.dx-e[1]-e[3],t=a.dy-e[0]-e[2];return q<0&&(j+=q/2,q=0),t<0&&(p+=t/2,t=0),{x:j,y:p,dx:q,dy:t}}function Sa(a,e){function j(C,M){d3.text(C,e,function(T){M(T&&j.parse(T))})}function p(C){return C.map(q).join(a)}function q(C){return z.test(C)?'"'+C.replace(/\"/g,'""')+'"':C}var t=RegExp("\r\n|["+a+"\r\n]","g"),z=RegExp('["'+a+"\n]"),x=a.charCodeAt(0);return j.parse=function(C){var M;return j.parseRows(C,function(T,L){if(L){for(var P={},U=-1,ka=M.length;++U<ka;)P[M[U]]=T[U];return P}return M=
T,null})},j.parseRows=function(C,M){function T(){if(t.lastIndex>=C.length)return P;if(na)return na=false,L;var ja=t.lastIndex;if(C.charCodeAt(ja)===34){for(var ma=ja;ma++<C.length;)if(C.charCodeAt(ma)===34){if(C.charCodeAt(ma+1)!==34)break;ma++}t.lastIndex=ma+2;var Ca=C.charCodeAt(ma+1);return Ca===13?(na=true,C.charCodeAt(ma+2)===10&&t.lastIndex++):Ca===10&&(na=true),C.substring(ja+1,ma).replace(/""/g,'"')}return(ma=t.exec(C))?(na=ma[0].charCodeAt(0)!==x,C.substring(ja,ma.index)):(t.lastIndex=C.length,
C.substring(ja))}var L={},P={},U=[],ka=0,ea,na;for(t.lastIndex=0;(ea=T())!==P;){for(var ia=[];ea!==L&&ea!==P;){ia.push(ea);ea=T()}M&&!(ia=M(ia,ka++))||U.push(ia)}return U},j.format=function(C){return C.map(p).join("\n")},j}function cb(a,e){return function(j){return j&&a.hasOwnProperty(j.type)?a[j.type](j):e}}function tb(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function pb(a,e){qe.hasOwnProperty(a.type)&&qe[a.type](a,e)}function rb(a,e){for(var j=a.coordinates,
p=0,q=j.length;p<q;p++)e.apply(null,j[p])}function ud(a){return a.source}function sc(a){return a.target}function Yc(){function a(ea){var na=Math.sin(ea*=U)*ka;ea=Math.sin(U-ea)*ka;var ia=ea*t+na*L,ja=ea*z+na*P;return[Math.atan2(ja,ia)/kb,Math.atan2(ea*q+na*T,Math.sqrt(ia*ia+ja*ja))/kb]}var e,j,p,q,t,z,x,C,M,T,L,P,U,ka;return a.distance=function(){return U==null&&(ka=1/Math.sin(U=Math.acos(Math.max(-1,Math.min(1,q*T+p*M*Math.cos(x-e)))))),U},a.source=function(ea){var na=Math.cos(e=ea[0]*kb),ia=Math.sin(e);
return p=Math.cos(j=ea[1]*kb),q=Math.sin(j),t=p*na,z=p*ia,U=null,a},a.target=function(ea){var na=Math.cos(x=ea[0]*kb),ia=Math.sin(x);return M=Math.cos(C=ea[1]*kb),T=Math.sin(C),L=M*na,P=M*ia,U=null,a},a}function hd(a,e){var j=Yc().source(a).target(e);return j.distance(),j}function Ne(a,e,j,p){var q,t,z,x,C,M,T;return q=p[a],t=q[0],z=q[1],q=p[e],x=q[0],C=q[1],q=p[j],M=q[0],T=q[1],(T-z)*(x-t)-(C-z)*(M-t)>0}function Xd(a,e,j){return(j[0]-e[0])*(a[1]-e[1])<(j[1]-e[1])*(a[0]-e[0])}function re(a,e,j,p){var q=
a[0],t=j[0];a=a[1];var z=j[1];j=e[0]-q;var x=p[0]-t;e=e[1]-a;p=p[1]-z;t=(x*(a-z)-p*(q-t))/(p*j-x*e);return[q+t*j,a+t*e]}function se(a,e){var j={list:a.map(function(ia,ja){return{index:ja,x:ia[0],y:ia[1]}}).sort(function(ia,ja){return ia.y<ja.y?-1:ia.y>ja.y?1:ia.x<ja.x?-1:ia.x>ja.x?1:0}),bottomSite:null},p={list:[],leftEnd:null,rightEnd:null,init:function(){p.leftEnd=p.createHalfEdge(null,"l");p.rightEnd=p.createHalfEdge(null,"l");p.leftEnd.r=p.rightEnd;p.rightEnd.l=p.leftEnd;p.list.unshift(p.leftEnd,
p.rightEnd)},createHalfEdge:function(ia,ja){return{edge:ia,side:ja,vertex:null,l:null,r:null}},insert:function(ia,ja){ja.l=ia;ja.r=ia.r;ia.r.l=ja;ia.r=ja},leftBound:function(ia){var ja=p.leftEnd;do ja=ja.r;while(ja!=p.rightEnd&&q.rightOf(ja,ia));return ja=ja.l,ja},del:function(ia){ia.l.r=ia.r;ia.r.l=ia.l;ia.edge=null},right:function(ia){return ia.r},left:function(ia){return ia.l},leftRegion:function(ia){return ia.edge==null?j.bottomSite:ia.edge.region[ia.side]},rightRegion:function(ia){return ia.edge==
null?j.bottomSite:ia.edge.region[Yd[ia.side]]}},q={bisect:function(ia,ja){var ma={region:{l:ia,r:ja},ep:{l:null,r:null}},Ca=ja.x-ia.x,Fa=ja.y-ia.y;return ma.c=ia.x*Ca+ia.y*Fa+(Ca*Ca+Fa*Fa)*0.5,(Ca>0?Ca:-Ca)>(Fa>0?Fa:-Fa)?(ma.a=1,ma.b=Fa/Ca,ma.c/=Ca):(ma.b=1,ma.a=Ca/Fa,ma.c/=Fa),ma},intersect:function(ia,ja){var ma=ia.edge,Ca=ja.edge;if(!ma||!Ca||ma.region.r==Ca.region.r)return null;var Fa=ma.a*Ca.b-ma.b*Ca.a;if(Math.abs(Fa)<1.0E-10)return null;var za=(ma.c*Ca.b-Ca.c*ma.b)/Fa;Fa=(Ca.c*ma.a-ma.c*Ca.a)/
Fa;var Va=ma.region.r,Xa=Ca.region.r,ab,bb;Va.y<Xa.y||Va.y==Xa.y&&Va.x<Xa.x?(ab=ia,bb=ma):(ab=ja,bb=Ca);return(ma=za>=bb.region.r.x)&&ab.side==="l"||!ma&&ab.side==="r"?null:{x:za,y:Fa}},rightOf:function(ia,ja){var ma=ia.edge,Ca=ma.region.r,Fa=ja.x>Ca.x;if(Fa&&ia.side==="l")return 1;if(!Fa&&ia.side==="r")return 0;if(ma.a===1){var za=ja.y-Ca.y,Va=ja.x-Ca.x,Xa=0,ab=0;!Fa&&ma.b<0||Fa&&ma.b>=0?ab=Xa=za>=ma.b*Va:(ab=ja.x+ja.y*ma.b>ma.c,ma.b<0&&(ab=!ab),ab||(Xa=1));if(!Xa){Ca=Ca.x-ma.region.l.x;ab=ma.b*
(Va*Va-za*za)<Ca*za*(1+2*Va/Ca+ma.b*ma.b);ma.b<0&&(ab=!ab)}}else{Va=ma.c-ma.a*ja.x;ma=ja.y-Va;za=ja.x-Ca.x;Ca=Va-Ca.y;ab=ma*ma>za*za+Ca*Ca}return ia.side==="l"?ab:!ab},endPoint:function(ia,ja,ma){ia.ep[ja]=ma;ia.ep[Yd[ja]]&&e(ia)},distance:function(ia,ja){var ma=ia.x-ja.x,Ca=ia.y-ja.y;return Math.sqrt(ma*ma+Ca*Ca)}},t={list:[],insert:function(ia,ja,ma){ia.vertex=ja;ia.ystar=ja.y+ma;ma=0;for(var Ca=t.list,Fa=Ca.length;ma<Fa;ma++){var za=Ca[ma];if(!(ia.ystar>za.ystar||ia.ystar==za.ystar&&ja.x>za.vertex.x))break}Ca.splice(ma,
0,ia)},del:function(ia){for(var ja=0,ma=t.list,Ca=ma.length;ja<Ca&&ma[ja]!=ia;++ja);ma.splice(ja,1)},empty:function(){return t.list.length===0},nextEvent:function(ia){for(var ja=0,ma=t.list,Ca=ma.length;ja<Ca;++ja)if(ma[ja]==ia)return ma[ja+1];return null},min:function(){var ia=t.list[0];return{x:ia.vertex.x,y:ia.ystar}},extractMin:function(){return t.list.shift()}};p.init();j.bottomSite=j.list.shift();for(var z=j.list.shift(),x,C,M,T,L,P,U,ka,ea,na;;){t.empty()||(x=t.min());if(z&&(t.empty()||z.y<
x.y||z.y==x.y&&z.x<x.x)){C=p.leftBound(z);M=p.right(C);U=p.rightRegion(C);na=q.bisect(U,z);P=p.createHalfEdge(na,"l");p.insert(C,P);(ea=q.intersect(C,P))&&(t.del(C),t.insert(C,ea,q.distance(ea,z)));C=P;P=p.createHalfEdge(na,"r");p.insert(C,P);(ea=q.intersect(P,M))&&t.insert(P,ea,q.distance(ea,z));z=j.list.shift()}else{if(t.empty())break;C=t.extractMin();T=p.left(C);M=p.right(C);L=p.right(M);U=p.leftRegion(C);P=p.rightRegion(M);ea=C.vertex;q.endPoint(C.edge,C.side,ea);q.endPoint(M.edge,M.side,ea);
p.del(C);t.del(M);p.del(M);C="l";U.y>P.y&&(ka=U,U=P,P=ka,C="r");na=q.bisect(U,P);P=p.createHalfEdge(na,C);p.insert(T,P);q.endPoint(na,Yd[C],ea);(ea=q.intersect(T,P))&&(t.del(T),t.insert(T,ea,q.distance(ea,U)));(ea=q.intersect(P,L))&&t.insert(P,ea,q.distance(ea,U))}}for(C=p.right(p.leftEnd);C!=p.rightEnd;C=p.right(C))e(C.edge)}function vd(a,e,j,p,q,t){if(!a(e,j,p,q,t)){var z=(j+q)*0.5,x=(p+t)*0.5;e=e.nodes;e[0]&&vd(a,e[0],j,p,z,x);e[1]&&vd(a,e[1],z,p,q,x);e[2]&&vd(a,e[2],j,x,z,t);e[3]&&vd(a,e[3],z,
x,q,t)}}function Oe(a){return{x:a[0],y:a[1]}}function id(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function te(a){return a.substring(0,3)}function Hd(a,e,j,p){for(var q,t=0,z=e.length,x=j.length;t<z;){if(p>=x)return-1;q=e.charCodeAt(t++);if(q==37){q=Pe[e.charAt(t++)];if(!q||(p=q(a,j,p))<0)return-1}else if(q!=j.charCodeAt(p++))return-1}return p}function Id(a){return RegExp("^(?:"+a.map(d3.requote).join("|")+")","i")}function ue(a){for(var e=new f,j=-1,p=a.length;++j<
p;)e.set(a[j].toLowerCase(),j);return e}function ve(a,e,j){Wb.lastIndex=0;return(e=Wb.exec(e.substring(j,j+2)))?(a.d=+e[0],j+e[0].length):-1}function we(a,e,j){Wb.lastIndex=0;return(e=Wb.exec(e.substring(j,j+2)))?(a.H=+e[0],j+e[0].length):-1}function Zd(a){return a.toISOString()}function jd(a,e,j){function p(C){var M=a(C),T=t(M,1);return C-M<T-C?M:T}function q(C){return e(C=a(new Xb(C-1)),1),C}function t(C,M){return e(C=new Xb(+C),M),C}function z(C,M,T){C=q(C);var L=[];if(T>1)for(;C<M;){j(C)%T||L.push(new Date(+C));
e(C,1)}else for(;C<M;){L.push(new Date(+C));e(C,1)}return L}a.floor=a;a.round=p;a.ceil=q;a.offset=t;a.range=z;var x=a.utc=Jd(a);return x.floor=x,x.round=Jd(p),x.ceil=Jd(q),x.offset=Jd(t),x.range=function(C,M,T){try{Xb=id;var L=new id;return L._=C,z(L,M,T)}finally{Xb=Date}},a}function Jd(a){return function(e,j){try{Xb=id;var p=new id;return p._=e,a(p,j)._}finally{Xb=Date}}}function $d(a,e,j){function p(q){return a(q)}return p.invert=function(q){return ae(a.invert(q))},p.domain=function(q){return arguments.length?
(a.domain(q),p):a.domain().map(ae)},p.nice=function(q){return p.domain(Cc(p.domain(),function(){return q}))},p.ticks=function(q,t){var z,x=p.domain();z=x[0];x=x[x.length-1];z=z<x?[z,x]:[x,z];if(typeof q!="function"){x=(z[1]-z[0])/q;var C=d3.bisect(Kd,x);if(C==Kd.length)return e.year(z,q);if(!C)return a.ticks(q).map(ae);Math.log(x/Kd[C-1])<Math.log(Kd[C]/x)&&--C;q=e[C];t=q[1];q=q[0].range}return q(z[0],new Date(+z[1]+1),t)},p.tickFormat=function(){return j},p.copy=function(){return $d(a.copy(),e,j)},
d3.rebind(p,a,"range","rangeRound","interpolate","clamp")}function ae(a){return new Date(a)}function xe(a){return function(e){for(var j=a.length-1,p=a[j];!p[1](e);)p=a[--j];return p[0](e)}}function be(a){var e=new Date(a,0,1);return e.setFullYear(a),e}function Qe(a){var e=a.getFullYear(),j=be(e),p=be(e+1);return e+(a-j)/(p-j)}function ce(a){var e=new Date(Date.UTC(a,0,1));return e.setUTCFullYear(a),e}function Re(a){var e=a.getUTCFullYear(),j=ce(e),p=ce(e+1);return e+(a-j)/(p-j)}Date.now||(Date.now=
function(){return+new Date});try{document.createElement("div").style.setProperty("opacity",0,"")}catch(wf){var Lb=CSSStyleDeclaration.prototype,Se=Lb.setProperty;Lb.setProperty=function(a,e,j){Se.call(this,a,e+"",j)}}d3={version:"2.10.1"};var wd=function(a){return Array.prototype.slice.call(a)};try{wd(document.documentElement.childNodes)}catch(xf){wd=o}var Td=[].__proto__?function(a,e){a.__proto__=e}:function(a,e){for(var j in e)a[j]=e[j]};d3.map=function(a){var e=new f,j;for(j in a)e.set(j,a[j]);
return e};(function(a,e){try{for(var j in e)Object.defineProperty(a.prototype,j,{value:e[j],enumerable:false})}catch(p){a.prototype=e}})(f,{has:function(a){return xd+a in this},get:function(a){return this[xd+a]},set:function(a,e){return this[xd+a]=e},remove:function(a){return a=xd+a,a in this&&delete this[a]},keys:function(){var a=[];return this.forEach(function(e){a.push(e)}),a},values:function(){var a=[];return this.forEach(function(e,j){a.push(j)}),a},entries:function(){var a=[];return this.forEach(function(e,
j){a.push({key:e,value:j})}),a},forEach:function(a){for(var e in this)e.charCodeAt(0)===Te&&a.call(this,e.substring(1),this[e])}});var xd="\u0000",Te=xd.charCodeAt(0);d3.functor=c;d3.rebind=function(a,e){for(var j=1,p=arguments.length,q;++j<p;)a[q=arguments[j]]=d(a,e,e[q]);return a};d3.ascending=function(a,e){return a<e?-1:a>e?1:a>=e?0:NaN};d3.descending=function(a,e){return e<a?-1:e>a?1:e>=a?0:NaN};d3.mean=function(a,e){var j=a.length,p,q=0,t=-1,z=0;if(arguments.length===1)for(;++t<j;)b(p=a[t])&&
(q+=(p-q)/++z);else for(;++t<j;)b(p=e.call(a,a[t],t))&&(q+=(p-q)/++z);return z?q:undefined};d3.median=function(a,e){return arguments.length>1&&(a=a.map(e)),a=a.filter(b),a.length?d3.quantile(a.sort(d3.ascending),0.5):undefined};d3.min=function(a,e){var j=-1,p=a.length,q,t;if(arguments.length===1){for(;++j<p&&((q=a[j])==null||q!=q);)q=undefined;for(;++j<p;)(t=a[j])!=null&&q>t&&(q=t)}else{for(;++j<p&&((q=e.call(a,a[j],j))==null||q!=q);)q=undefined;for(;++j<p;)(t=e.call(a,a[j],j))!=null&&q>t&&(q=t)}return q};
d3.max=function(a,e){var j=-1,p=a.length,q,t;if(arguments.length===1){for(;++j<p&&((q=a[j])==null||q!=q);)q=undefined;for(;++j<p;)(t=a[j])!=null&&t>q&&(q=t)}else{for(;++j<p&&((q=e.call(a,a[j],j))==null||q!=q);)q=undefined;for(;++j<p;)(t=e.call(a,a[j],j))!=null&&t>q&&(q=t)}return q};d3.extent=function(a,e){var j=-1,p=a.length,q,t,z;if(arguments.length===1){for(;++j<p&&((q=z=a[j])==null||q!=q);)q=z=undefined;for(;++j<p;)(t=a[j])!=null&&(q>t&&(q=t),z<t&&(z=t))}else{for(;++j<p&&((q=z=e.call(a,a[j],j))==
null||q!=q);)q=undefined;for(;++j<p;)(t=e.call(a,a[j],j))!=null&&(q>t&&(q=t),z<t&&(z=t))}return[q,z]};d3.random={normal:function(a,e){var j=arguments.length;return j<2&&(e=1),j<1&&(a=0),function(){var p,q;do{p=Math.random()*2-1;q=Math.random()*2-1;q=p*p+q*q}while(!q||q>1);return a+e*p*Math.sqrt(-2*Math.log(q)/q)}},logNormal:function(a,e){var j=arguments.length;j<2&&(e=1);j<1&&(a=0);var p=d3.random.normal();return function(){return Math.exp(a+e*p())}},irwinHall:function(a){return function(){for(var e=
0,j=0;j<a;j++)e+=Math.random();return e/a}}};d3.sum=function(a,e){var j=0,p=a.length,q,t=-1;if(arguments.length===1)for(;++t<p;)isNaN(q=+a[t])||(j+=q);else for(;++t<p;)isNaN(q=+e.call(a,a[t],t))||(j+=q);return j};d3.quantile=function(a,e){var j=(a.length-1)*e+1,p=Math.floor(j),q=a[p-1];j-=p;return j?q+j*(a[p]-q):q};d3.transpose=function(a){return d3.zip.apply(d3,a)};d3.zip=function(){if(!(q=arguments.length))return[];for(var a=-1,e=d3.min(arguments,h),j=Array(e);++a<e;)for(var p=-1,q,t=j[a]=Array(q);++p<
q;)t[p]=arguments[p][a];return j};d3.bisector=function(a){return{left:function(e,j,p,q){arguments.length<3&&(p=0);for(arguments.length<4&&(q=e.length);p<q;){var t=p+q>>>1;a.call(e,e[t],t)<j?p=t+1:q=t}return p},right:function(e,j,p,q){arguments.length<3&&(p=0);for(arguments.length<4&&(q=e.length);p<q;){var t=p+q>>>1;j<a.call(e,e[t],t)?q=t:p=t+1}return p}}};Lb=d3.bisector(function(a){return a});d3.bisectLeft=Lb.left;d3.bisect=d3.bisectRight=Lb.right;d3.first=function(a,e){var j=0,p=a.length,q=a[0],
t;for(arguments.length===1&&(e=d3.ascending);++j<p;)e.call(a,q,t=a[j])>0&&(q=t);return q};d3.last=function(a,e){var j=0,p=a.length,q=a[0],t;for(arguments.length===1&&(e=d3.ascending);++j<p;)e.call(a,q,t=a[j])<=0&&(q=t);return q};d3.nest=function(){function a(x,C){if(C>=p.length)return z?z.call(j,x):t?x.sort(t):x;for(var M=-1,T=x.length,L=p[C++],P,U,ka=new f,ea,na={};++M<T;)(ea=ka.get(P=L(U=x[M])))?ea.push(U):ka.set(P,[U]);return ka.forEach(function(ia,ja){na[ia]=a(ja,C)}),na}function e(x,C){if(C>=
p.length)return x;var M=[],T=q[C++],L;for(L in x)M.push({key:L,values:e(x[L],C)});return T&&M.sort(function(P,U){return T(P.key,U.key)}),M}var j={},p=[],q=[],t,z;return j.map=function(x){return a(x,0)},j.entries=function(x){return e(a(x,0),0)},j.key=function(x){return p.push(x),j},j.sortKeys=function(x){return q[p.length-1]=x,j},j.sortValues=function(x){return t=x,j},j.rollup=function(x){return z=x,j},j};d3.keys=function(a){var e=[],j;for(j in a)e.push(j);return e};d3.values=function(a){var e=[],
j;for(j in a)e.push(a[j]);return e};d3.entries=function(a){var e=[],j;for(j in a)e.push({key:j,value:a[j]});return e};d3.permute=function(a,e){for(var j=[],p=-1,q=e.length;++p<q;)j[p]=a[e[p]];return j};d3.merge=function(a){return Array.prototype.concat.apply([],a)};d3.split=function(a,e){var j=[],p=[],q,t=-1,z=a.length;for(arguments.length<2&&(e=m);++t<z;)e.call(p,q=a[t],t)?p=[]:(p.length||j.push(p),p.push(q));return j};d3.range=function(a,e,j){arguments.length<3&&(j=1,arguments.length<2&&(e=a,a=
0));if((e-a)/j===Infinity)throw Error("infinite range");var p=[],q;for(q=1;Math.abs(j)*q%1;)q*=10;var t=-1,z;a*=q;e*=q;j*=q;if(j<0)for(;(z=a+j*++t)>e;)p.push(z/q);else for(;(z=a+j*++t)<e;)p.push(z/q);return p};d3.requote=function(a){return a.replace(Ue,"\\$&")};var Ue=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;d3.round=function(a,e){return e?Math.round(a*(e=Math.pow(10,e)))/e:Math.round(a)};d3.xhr=function(a,e,j){var p=new XMLHttpRequest;arguments.length<3?(j=e,e=null):e&&p.overrideMimeType&&p.overrideMimeType(e);
p.open("GET",a,true);e&&p.setRequestHeader("Accept",e);p.onreadystatechange=function(){if(p.readyState===4){var q=p.status;j(!q&&p.response||q>=200&&q<300||q===304?p:null)}};p.send(null)};d3.text=function(a,e,j){arguments.length<3&&(j=e,e=null);d3.xhr(a,e,function(p){j(p&&p.responseText)})};d3.json=function(a,e){d3.text(a,"application/json",function(j){e(j?JSON.parse(j):null)})};d3.html=function(a,e){d3.text(a,"text/html",function(j){if(j!=null){var p=document.createRange();p.selectNode(document.body);
j=p.createContextualFragment(j)}e(j)})};d3.xml=function(a,e,j){arguments.length<3&&(j=e,e=null);d3.xhr(a,e,function(p){j(p&&p.responseXML)})};var de={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};d3.ns={prefix:de,qualify:function(a){var e=a.indexOf(":"),j=a;return e>=0&&(j=a.substring(0,e),a=a.substring(e+1)),de.hasOwnProperty(j)?{space:de[j],local:a}:a}};
d3.dispatch=function(){for(var a=new v,e=-1,j=arguments.length;++e<j;)a[arguments[e]]=w(a);return a};v.prototype.on=function(a,e){var j=a.indexOf("."),p="";return j>0&&(p=a.substring(j+1),a=a.substring(0,j)),arguments.length<2?this[a].on(p):this[a].on(p,e)};d3.format=function(a){a=Ve.exec(a);var e=a[1]||" ",j=a[3]||"",p=a[5],q=+a[6],t=a[7],z=a[8],x=a[9],C=1,M="",T=false;z&&(z=+z.substring(1));p&&(e="0",t&&(q-=Math.floor((q-1)/4)));switch(x){case "n":t=true;x="g";break;case "%":C=100;M="%";x="f";break;
case "p":C=100;M="%";x="r";break;case "d":T=true;z=0;break;case "s":C=-1;x="r"}return x=="r"&&!z&&(x="g"),x=We.get(x)||A,function(L){if(T&&L%1)return"";var P=L<0&&(L=-L)?"-":j;if(C<0){var U=d3.formatPrefix(L,z);L=U.scale(L);M=U.symbol}else L*=C;L=x(L,z);if(p){U=L.length+P.length;U<q&&(L=Array(q-U+1).join(e)+L);t&&(L=D(L));L=P+L}else{t&&(L=D(L));L=P+L;U=L.length;U<q&&(L=Array(q-U+1).join(e)+L)}return L+M}};var Ve=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/,We=d3.map({g:function(a,
e){return a.toPrecision(e)},e:function(a,e){return a.toExponential(e)},f:function(a,e){return a.toFixed(e)},r:function(a,e){return d3.round(a,e=s(a,e)).toFixed(Math.max(0,Math.min(20,e)))}}),Xe=["y","z","a","f","p","n","\u03bc","m","","k","M","G","T","P","E","Z","Y"].map(function(a,e){var j=Math.pow(10,Math.abs(8-e)*3);return{scale:e>8?function(p){return p/j}:function(p){return p*j},symbol:a}});d3.formatPrefix=function(a,e){var j=0;return a&&(a<0&&(a*=-1),e&&(a=d3.round(a,s(a,e))),j=1+Math.floor(1.0E-12+
Math.log(a)/Math.LN10),j=Math.max(-24,Math.min(24,Math.floor((j<=0?j+1:j-1)/3)*3))),Xe[8+j/3]};var Ye=X(2),Ze=X(3),ye=function(){return G},$e=d3.map({linear:ye,poly:X,quad:function(){return Ye},cubic:function(){return Ze},sin:function(){return xa},exp:function(){return $a},circle:function(){return eb},elastic:function(a,e){var j;return arguments.length<2&&(e=0.45),arguments.length<1?(a=1,j=e/4):j=e/(2*Math.PI)*Math.asin(1/a),function(p){return 1+a*Math.pow(2,10*-p)*Math.sin((p-j)*2*Math.PI/e)}},back:function(a){return a||
(a=1.70158),function(e){return e*e*((a+1)*e-a)}},bounce:function(){return ub}}),af=d3.map({"in":G,out:S,"in-out":O,"out-in":function(a){return O(S(a))}});d3.ease=function(a){var e=a.indexOf("-"),j=e>=0?a.substring(0,e):a;e=e>=0?a.substring(e+1):"in";return j=$e.get(j)||ye,e=af.get(e)||G,y(e(j.apply(null,Array.prototype.slice.call(arguments,1))))};d3.event=null;d3.transform=function(a){var e=document.createElementNS(d3.ns.prefix.svg,"g");return(d3.transform=function(j){e.setAttribute("transform",j);
j=e.transform.baseVal.consolidate();return new I(j?j.matrix:bf)})(a)};I.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var he=180/Math.PI,bf={a:1,b:0,c:0,d:1,e:0,f:0};d3.interpolate=function(a,e){for(var j=d3.interpolators.length,p;--j>=0&&!(p=d3.interpolators[j](a,e)););return p};d3.interpolateNumber=function(a,e){return e-=a,function(j){return a+e*j}};d3.interpolateRound=function(a,e){return e-=a,function(j){return Math.round(a+
e*j)}};d3.interpolateString=function(a,e){var j,p,q=0,t=[],z=[],x,C;for(p=Ld.lastIndex=0;j=Ld.exec(e);++p){j.index&&t.push(e.substring(q,j.index));z.push({i:t.length,x:j[0]});t.push(null);q=Ld.lastIndex}q<e.length&&t.push(e.substring(q));p=0;for(x=z.length;(j=Ld.exec(a))&&p<x;++p){C=z[p];if(C.x==j[0]){if(C.i)if(t[C.i+1]==null){t[C.i-1]+=C.x;t.splice(C.i,1);for(j=p+1;j<x;++j)z[j].i--}else{t[C.i-1]+=C.x+t[C.i+1];t.splice(C.i,2);for(j=p+1;j<x;++j)z[j].i-=2}else if(t[C.i+1]==null)t[C.i]=C.x;else{t[C.i]=
C.x+t[C.i+1];t.splice(C.i+1,1);for(j=p+1;j<x;++j)z[j].i--}z.splice(p,1);x--;p--}else C.x=d3.interpolateNumber(parseFloat(j[0]),parseFloat(C.x))}for(;p<x;){C=z.pop();t[C.i+1]==null?t[C.i]=C.x:(t[C.i]=C.x+t[C.i+1],t.splice(C.i+1,1));x--}return t.length===1?t[0]==null?z[0].x:function(){return e}:function(M){for(p=0;p<x;++p)t[(C=z[p]).i]=C.x(M);return t.join("")}};d3.interpolateTransform=function(a,e){var j=[],p=[],q,t=d3.transform(a),z=d3.transform(e),x=t.translate,C=z.translate,M=t.rotate,T=z.rotate,
L=t.skew,P=z.skew;t=t.scale;z=z.scale;return x[0]!=C[0]||x[1]!=C[1]?(j.push("translate(",null,",",null,")"),p.push({i:1,x:d3.interpolateNumber(x[0],C[0])},{i:3,x:d3.interpolateNumber(x[1],C[1])})):C[0]||C[1]?j.push("translate("+C+")"):j.push(""),M!=T?(M-T>180?T+=360:T-M>180&&(M+=360),p.push({i:j.push(j.pop()+"rotate(",null,")")-2,x:d3.interpolateNumber(M,T)})):T&&j.push(j.pop()+"rotate("+T+")"),L!=P?p.push({i:j.push(j.pop()+"skewX(",null,")")-2,x:d3.interpolateNumber(L,P)}):P&&j.push(j.pop()+"skewX("+
P+")"),t[0]!=z[0]||t[1]!=z[1]?(q=j.push(j.pop()+"scale(",null,",",null,")"),p.push({i:q-4,x:d3.interpolateNumber(t[0],z[0])},{i:q-2,x:d3.interpolateNumber(t[1],z[1])})):(z[0]!=1||z[1]!=1)&&j.push(j.pop()+"scale("+z+")"),q=p.length,function(U){for(var ka=-1,ea;++ka<q;)j[(ea=p[ka]).i]=ea.x(U);return j.join("")}};d3.interpolateRgb=function(a,e){a=d3.rgb(a);e=d3.rgb(e);var j=a.r,p=a.g,q=a.b,t=e.r-j,z=e.g-p,x=e.b-q;return function(C){return"#"+Ga(Math.round(j+t*C))+Ga(Math.round(p+z*C))+Ga(Math.round(q+
x*C))}};d3.interpolateHsl=function(a,e){a=d3.hsl(a);e=d3.hsl(e);var j=a.h,p=a.s,q=a.l,t=e.h-j,z=e.s-p,x=e.l-q;return t>180?t-=360:t<-180&&(t+=360),function(C){return Sb(j+t*C,p+z*C,q+x*C)+""}};d3.interpolateLab=function(a,e){a=d3.lab(a);e=d3.lab(e);var j=a.l,p=a.a,q=a.b,t=e.l-j,z=e.a-p,x=e.b-q;return function(C){return vb(j+t*C,p+z*C,q+x*C)+""}};d3.interpolateHcl=function(a,e){a=d3.hcl(a);e=d3.hcl(e);var j=a.h,p=a.c,q=a.l,t=e.h-j,z=e.c-p,x=e.l-q;return t>180?t-=360:t<-180&&(t+=360),function(C){return Yb(j+
t*C,p+z*C,q+x*C)+""}};d3.interpolateArray=function(a,e){var j=[],p=[],q=a.length,t=e.length,z=Math.min(a.length,e.length),x;for(x=0;x<z;++x)j.push(d3.interpolate(a[x],e[x]));for(;x<q;++x)p[x]=a[x];for(;x<t;++x)p[x]=e[x];return function(C){for(x=0;x<z;++x)p[x]=j[x](C);return p}};d3.interpolateObject=function(a,e){var j={},p={},q;for(q in a)q in e?j[q]=sa(q)(a[q],e[q]):p[q]=a[q];for(q in e)q in a||(p[q]=e[q]);return function(t){for(q in j)p[q]=j[q](t);return p}};var Ld=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;
d3.interpolators=[d3.interpolateObject,function(a,e){return e instanceof Array&&d3.interpolateArray(a,e)},function(a,e){return(typeof a=="string"||typeof e=="string")&&d3.interpolateString(a+"",e+"")},function(a,e){return(typeof e=="string"?Ad.has(e)||/^(#|rgb\(|hsl\()/.test(e):e instanceof Ja||e instanceof Hb)&&d3.interpolateRgb(a,e)},function(a,e){return!isNaN(a=+a)&&!isNaN(e=+e)&&d3.interpolateNumber(a,e)}];d3.rgb=function(a,e,j){return arguments.length===1?a instanceof Ja?qa(a.r,a.g,a.b):La(""+
a,qa,Sb):qa(~~a,~~e,~~j)};Ja.prototype.brighter=function(a){a=Math.pow(0.7,arguments.length?a:1);var e=this.r,j=this.g,p=this.b;return!e&&!j&&!p?qa(30,30,30):(e&&e<30&&(e=30),j&&j<30&&(j=30),p&&p<30&&(p=30),qa(Math.min(255,Math.floor(e/a)),Math.min(255,Math.floor(j/a)),Math.min(255,Math.floor(p/a))))};Ja.prototype.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),qa(Math.floor(a*this.r),Math.floor(a*this.g),Math.floor(a*this.b))};Ja.prototype.hsl=function(){return pa(this.r,this.g,this.b)};
Ja.prototype.toString=function(){return"#"+Ga(this.r)+Ga(this.g)+Ga(this.b)};var Ad=d3.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",
darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",
floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",
lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",
mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",
royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});Ad.forEach(function(a,
e){Ad.set(a,La(e,qa,Sb))});d3.hsl=function(a,e,j){return arguments.length===1?a instanceof Hb?Gb(a.h,a.s,a.l):La(""+a,pa,Gb):Gb(+a,+e,+j)};Hb.prototype.brighter=function(a){return a=Math.pow(0.7,arguments.length?a:1),Gb(this.h,this.s,this.l/a)};Hb.prototype.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),Gb(this.h,this.s,a*this.l)};Hb.prototype.rgb=function(){return Sb(this.h,this.s,this.l)};Hb.prototype.toString=function(){return this.rgb().toString()};d3.hcl=function(a,e,j){return arguments.length===
1?a instanceof mb?new mb(a.h,a.c,a.l):a instanceof Ab?vc(a.l,a.a,a.b):vc((a=kc((a=d3.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new mb(+a,+e,+j)};mb.prototype.brighter=function(a){return new mb(this.h,this.c,Math.min(100,this.l+Md*(arguments.length?a:1)))};mb.prototype.darker=function(a){return new mb(this.h,this.c,Math.max(0,this.l-Md*(arguments.length?a:1)))};mb.prototype.rgb=function(){return Yb(this.h,this.c,this.l).rgb()};mb.prototype.toString=function(){return this.rgb()+""};d3.lab=function(a,e,j){return arguments.length===
1?a instanceof Ab?new Ab(a.l,a.a,a.b):a instanceof mb?Yb(a.l,a.c,a.h):kc((a=d3.rgb(a)).r,a.g,a.b):new Ab(+a,+e,+j)};var Md=18,ie=0.95047,je=1,ke=1.08883;Ab.prototype.brighter=function(a){return new Ab(Math.min(100,this.l+Md*(arguments.length?a:1)),this.a,this.b)};Ab.prototype.darker=function(a){return new Ab(Math.max(0,this.l-Md*(arguments.length?a:1)),this.a,this.b)};Ab.prototype.rgb=function(){return vb(this.l,this.a,this.b)};Ab.prototype.toString=function(){return this.rgb()+""};var Bd=function(a,
e){return e.querySelector(a)},le=function(a,e){return e.querySelectorAll(a)};Lb=document.documentElement;var cf=Lb.matchesSelector||Lb.webkitMatchesSelector||Lb.mozMatchesSelector||Lb.msMatchesSelector||Lb.oMatchesSelector,me=function(a,e){return cf.call(a,e)};typeof Sizzle=="function"&&(Bd=function(a,e){return Sizzle(a,e)[0]||null},le=function(a,e){return Sizzle.uniqueSort(Sizzle(a,e))},me=Sizzle.matchesSelector);var qb=[];d3.selection=function(){return yd};d3.selection.prototype=qb;qb.select=function(a){var e=
[],j,p,q,t;typeof a!="function"&&(a=Za(a));for(var z=-1,x=this.length;++z<x;){e.push(j=[]);j.parentNode=(q=this[z]).parentNode;for(var C=-1,M=q.length;++C<M;)(t=q[C])?(j.push(p=a.call(t,t.__data__,C)),p&&"__data__"in t&&(p.__data__=t.__data__)):j.push(null)}return ua(e)};qb.selectAll=function(a){var e=[],j,p;typeof a!="function"&&(a=Ra(a));for(var q=-1,t=this.length;++q<t;)for(var z=this[q],x=-1,C=z.length;++x<C;)if(p=z[x]){e.push(j=wd(a.call(p,p.__data__,x)));j.parentNode=p}return ua(e)};qb.attr=
function(a,e){if(arguments.length<2){if(typeof a=="string"){var j=this.node();return a=d3.ns.qualify(a),a.local?j.getAttributeNS(a.space,a.local):j.getAttribute(a)}for(e in a)this.each(Ha(e,a[e]));return this}return this.each(Ha(a,e))};qb.classed=function(a,e){if(arguments.length<2){if(typeof a=="string"){var j=this.node(),p=(a=a.trim().split(/^|\s+/g)).length,q=-1;if(e=j.classList)for(;++q<p;){if(!e.contains(a[q]))return false}else{e=j.className;for(e.baseVal!=null&&(e=e.baseVal);++q<p;)if(!ba(a[q]).test(e))return false}return true}for(e in a)this.each(Ya(e,
a[e]));return this}return this.each(Ya(a,e))};qb.style=function(a,e,j){var p=arguments.length;if(p<3){if(typeof a!="string"){p<2&&(e="");for(j in a)this.each(xb(j,a[j],e));return this}if(p<2)return window.getComputedStyle(this.node(),null).getPropertyValue(a);j=""}return this.each(xb(a,e,j))};qb.property=function(a,e){if(arguments.length<2){if(typeof a=="string")return this.node()[a];for(e in a)this.each(Zb(e,a[e]));return this}return this.each(Zb(a,e))};qb.text=function(a){return arguments.length<
1?this.node().textContent:this.each(typeof a=="function"?function(){var e=a.apply(this,arguments);this.textContent=e==null?"":e}:a==null?function(){this.textContent=""}:function(){this.textContent=a})};qb.html=function(a){return arguments.length<1?this.node().innerHTML:this.each(typeof a=="function"?function(){var e=a.apply(this,arguments);this.innerHTML=e==null?"":e}:a==null?function(){this.innerHTML=""}:function(){this.innerHTML=a})};qb.append=function(a){function e(){return this.appendChild(document.createElementNS(this.namespaceURI,
a))}function j(){return this.appendChild(document.createElementNS(a.space,a.local))}return a=d3.ns.qualify(a),this.select(a.local?j:e)};qb.insert=function(a,e){function j(){return this.insertBefore(document.createElementNS(this.namespaceURI,a),Bd(e,this))}function p(){return this.insertBefore(document.createElementNS(a.space,a.local),Bd(e,this))}return a=d3.ns.qualify(a),this.select(a.local?p:j)};qb.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})};qb.data=
function(a,e){function j(T,L){var P,U=T.length,ka=L.length,ea=Math.min(U,ka),na=Math.max(U,ka),ia=[],ja=[],ma=[],Ca,Fa;if(e){ea=new f;na=[];var za;Fa=L.length;for(P=-1;++P<U;){za=e.call(Ca=T[P],Ca.__data__,P);ea.has(za)?ma[Fa++]=Ca:ea.set(za,Ca);na.push(za)}for(P=-1;++P<ka;){za=e.call(L,Fa=L[P],P);ea.has(za)?(ia[P]=Ca=ea.get(za),Ca.__data__=Fa,ja[P]=ma[P]=null):(ja[P]={__data__:Fa},ia[P]=ma[P]=null);ea.remove(za)}for(P=-1;++P<U;)ea.has(na[P])&&(ma[P]=T[P])}else{for(P=-1;++P<ea;){Ca=T[P];Fa=L[P];Ca?
(Ca.__data__=Fa,ia[P]=Ca,ja[P]=ma[P]=null):(ja[P]={__data__:Fa},ia[P]=ma[P]=null)}for(;P<ka;++P){ja[P]={__data__:L[P]};ia[P]=ma[P]=null}for(;P<na;++P){ma[P]=T[P];ja[P]=ia[P]=null}}ja.update=ia;ja.parentNode=ia.parentNode=ma.parentNode=T.parentNode;x.push(ja);C.push(ia);M.push(ma)}var p=-1,q=this.length,t,z;if(!arguments.length){for(a=Array(q=(t=this[0]).length);++p<q;)if(z=t[p])a[p]=z.__data__;return a}var x=hc([]),C=ua([]),M=ua([]);if(typeof a=="function")for(;++p<q;)j(t=this[p],a.call(t,t.parentNode.__data__,
p));else for(;++p<q;)j(t=this[p],a);return C.enter=function(){return x},C.exit=function(){return M},C};qb.datum=qb.map=function(a){return arguments.length<1?this.property("__data__"):this.property("__data__",a)};qb.filter=function(a){var e=[],j,p,q;typeof a!="function"&&(a=yb(a));for(var t=0,z=this.length;t<z;t++){e.push(j=[]);j.parentNode=(p=this[t]).parentNode;for(var x=0,C=p.length;x<C;x++)(q=p[x])&&a.call(q,q.__data__,x)&&j.push(q)}return ua(e)};qb.order=function(){for(var a=-1,e=this.length;++a<
e;)for(var j=this[a],p=j.length-1,q=j[p],t;--p>=0;)if(t=j[p]){q&&q!==t.nextSibling&&q.parentNode.insertBefore(t,q);q=t}return this};qb.sort=function(a){a=oc.apply(this,arguments);for(var e=-1,j=this.length;++e<j;)this[e].sort(a);return this.order()};qb.on=function(a,e,j){var p=arguments.length;if(p<3){if(typeof a!="string"){p<2&&(e=false);for(j in a)this.each(pc(j,a[j],e));return this}if(p<2)return(p=this.node()["__on"+a])&&p._;j=false}return this.each(pc(a,e,j))};qb.each=function(a){return Tb(this,
function(e,j,p){a.call(e,e.__data__,j,p)})};qb.call=function(a){return a.apply(this,(arguments[0]=this,arguments)),this};qb.empty=function(){return!this.node()};qb.node=function(){for(var a=0,e=this.length;a<e;a++)for(var j=this[a],p=0,q=j.length;p<q;p++){var t=j[p];if(t)return t}return null};qb.transition=function(){for(var a=[],e,j,p=-1,q=this.length;++p<q;){a.push(e=[]);for(var t=this[p],z=-1,x=t.length;++z<x;)e.push((j=t[z])?{node:j,delay:Dd,duration:Ed}:null)}return wc(a,$c||++df,Date.now())};
var yd=ua([[document]]);yd[0].parentNode=Lb;d3.select=function(a){return typeof a=="string"?yd.select(a):ua([[a]])};d3.selectAll=function(a){return typeof a=="string"?yd.selectAll(a):ua([wd(a)])};var Zc=[];d3.selection.enter=hc;d3.selection.enter.prototype=Zc;Zc.append=qb.append;Zc.insert=qb.insert;Zc.empty=qb.empty;Zc.node=qb.node;Zc.select=function(a){for(var e=[],j,p,q,t,z,x=-1,C=this.length;++x<C;){q=(t=this[x]).update;e.push(j=[]);j.parentNode=t.parentNode;for(var M=-1,T=t.length;++M<T;)(z=t[M])?
(j.push(q[M]=p=a.call(t.parentNode,z.__data__,M)),p.__data__=z.__data__):j.push(null)}return ua(e)};var $b=[],df=0,$c=0,Dd=0,Ed=250,Cd=d3.ease("cubic-in-out");$b.call=qb.call;d3.transition=function(a){return arguments.length?$c?a.transition():a:yd.transition()};d3.transition.prototype=$b;$b.select=function(a){var e=[],j,p,q;typeof a!="function"&&(a=Za(a));for(var t=-1,z=this.length;++t<z;){e.push(j=[]);for(var x=this[t],C=-1,M=x.length;++C<M;)(q=x[C])&&(p=a.call(q.node,q.node.__data__,C))?("__data__"in
q.node&&(p.__data__=q.node.__data__),j.push({node:p,delay:q.delay,duration:q.duration})):j.push(null)}return wc(e,this.id,this.time).ease(this.ease())};$b.selectAll=function(a){var e=[],j,p,q;typeof a!="function"&&(a=Ra(a));for(var t=-1,z=this.length;++t<z;)for(var x=this[t],C=-1,M=x.length;++C<M;)if(q=x[C]){p=a.call(q.node,q.node.__data__,C);e.push(j=[]);for(var T=-1,L=p.length;++T<L;)j.push({node:p[T],delay:q.delay,duration:q.duration})}return wc(e,this.id,this.time).ease(this.ease())};$b.filter=
function(a){var e=[],j,p,q;typeof a!="function"&&(a=yb(a));for(var t=0,z=this.length;t<z;t++){e.push(j=[]);p=this[t];for(var x=0,C=p.length;x<C;x++)(q=p[x])&&a.call(q.node,q.node.__data__,x)&&j.push(q)}return wc(e,this.id,this.time).ease(this.ease())};$b.attr=function(a,e){if(arguments.length<2){for(e in a)this.attrTween(e,d3.tween(a[e],sa(e)));return this}return this.attrTween(a,d3.tween(e,sa(a)))};$b.attrTween=function(a,e){function j(t,z){var x=e.call(this,t,z,this.getAttribute(q));return x===
rd?(this.removeAttribute(q),null):x&&function(C){this.setAttribute(q,x(C))}}function p(t,z){var x=e.call(this,t,z,this.getAttributeNS(q.space,q.local));return x===rd?(this.removeAttributeNS(q.space,q.local),null):x&&function(C){this.setAttributeNS(q.space,q.local,x(C))}}var q=d3.ns.qualify(a);return this.tween("attr."+a,q.local?p:j)};$b.style=function(a,e,j){var p=arguments.length;if(p<3){if(typeof a!="string"){p<2&&(e="");for(j in a)this.styleTween(j,d3.tween(a[j],sa(j)),e);return this}j=""}return this.styleTween(a,
d3.tween(e,sa(a)),j)};$b.styleTween=function(a,e,j){return arguments.length<3&&(j=""),this.tween("style."+a,function(p,q){var t=e.call(this,p,q,window.getComputedStyle(this,null).getPropertyValue(a));return t===rd?(this.style.removeProperty(a),null):t&&function(z){this.style.setProperty(a,t(z),j)}})};$b.text=function(a){return this.tween("text",function(e,j){this.textContent=typeof a=="function"?a.call(this,e,j):a})};$b.remove=function(){return this.each("end.transition",function(){var a;!this.__transition__&&
(a=this.parentNode)&&a.removeChild(this)})};$b.delay=function(a){return Tb(this,typeof a=="function"?function(e,j,p){e.delay=a.call(e=e.node,e.__data__,j,p)|0}:(a|=0,function(e){e.delay=a}))};$b.duration=function(a){return Tb(this,typeof a=="function"?function(e,j,p){e.duration=Math.max(1,a.call(e=e.node,e.__data__,j,p)|0)}:(a=Math.max(1,a|0),function(e){e.duration=a}))};$b.transition=function(){return this.select(i)};d3.tween=function(a,e){function j(q,t,z){q=a.call(this,q,t);return q==null?z!=""&&
rd:z!=q&&e(z,q)}function p(q,t,z){return z!=a&&e(z,a)}return typeof a=="function"?j:a==null?ad:(a+="",p)};var rd={},bd=null,Gd,Fd;d3.timer=function(a,e,j){var p=false,q=bd;if(arguments.length<3){if(arguments.length<2)e=0;else if(!isFinite(e))return;j=Date.now()}for(;q;){if(q.callback===a){q.then=j;q.delay=e;p=true;break}q=q.next}p||(bd={callback:a,then:j,delay:e,next:bd});Gd||(Fd=clearTimeout(Fd),Gd=1,ne(Bc))};d3.timer.flush=function(){for(var a,e=Date.now(),j=bd;j;){a=e-j.then;j.delay||(j.flush=
j.callback(a));j=j.next}ac()};var ne=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,17)};d3.mouse=function(a){return ld(a,Qa())};var Ud=/WebKit/.test(navigator.userAgent)?-1:0;d3.touches=function(a,e){return arguments.length<2&&(e=Qa().touches),e?wd(e).map(function(j){var p=ld(a,j);return p.identifier=j.identifier,p}):[]};d3.scale={};d3.scale.linear=function(){return Db([0,
1],[0,1],d3.interpolate,false)};d3.scale.log=function(){return Ec(d3.scale.linear(),Qc)};var Me=d3.format(".0e");Qc.pow=function(a){return Math.pow(10,a)};Fc.pow=function(a){return-Math.pow(10,-a)};d3.scale.pow=function(){return bc(d3.scale.linear(),1)};d3.scale.sqrt=function(){return d3.scale.pow().exponent(0.5)};d3.scale.ordinal=function(){return Fb([],{t:"range",a:[[]]})};d3.scale.category10=function(){return d3.scale.ordinal().range(ef)};d3.scale.category20=function(){return d3.scale.ordinal().range(ff)};
d3.scale.category20b=function(){return d3.scale.ordinal().range(gf)};d3.scale.category20c=function(){return d3.scale.ordinal().range(hf)};var ef=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],ff=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],gf=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939",
"#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],hf=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];d3.scale.quantile=function(){return Gc([],[])};d3.scale.quantize=function(){return xc(0,1,[0,1])};d3.scale.threshold=function(){return Rc([0.5],[0,
1])};d3.scale.identity=function(){return Sc([0,1])};d3.svg={};d3.svg.arc=function(){function a(){var t=e.apply(this,arguments),z=j.apply(this,arguments),x=p.apply(this,arguments)+fd,C=q.apply(this,arguments)+fd,M=(C<x&&(M=x,x=C,C=M),C-x),T=M<Math.PI?"0":"1",L=Math.cos(x);x=Math.sin(x);var P=Math.cos(C);C=Math.sin(C);return M>=jf?t?"M0,"+z+"A"+z+","+z+" 0 1,1 0,"+-z+"A"+z+","+z+" 0 1,1 0,"+z+"M0,"+t+"A"+t+","+t+" 0 1,0 0,"+-t+"A"+t+","+t+" 0 1,0 0,"+t+"Z":"M0,"+z+"A"+z+","+z+" 0 1,1 0,"+-z+"A"+z+","+
z+" 0 1,1 0,"+z+"Z":t?"M"+z*L+","+z*x+"A"+z+","+z+" 0 "+T+",1 "+z*P+","+z*C+"L"+t*P+","+t*C+"A"+t+","+t+" 0 "+T+",0 "+t*L+","+t*x+"Z":"M"+z*L+","+z*x+"A"+z+","+z+" 0 "+T+",1 "+z*P+","+z*C+"L0,0Z"}var e=nd,j=od,p=dd,q=Tc;return a.innerRadius=function(t){return arguments.length?(e=c(t),a):e},a.outerRadius=function(t){return arguments.length?(j=c(t),a):j},a.startAngle=function(t){return arguments.length?(p=c(t),a):p},a.endAngle=function(t){return arguments.length?(q=c(t),a):q},a.centroid=function(){var t=
(e.apply(this,arguments)+j.apply(this,arguments))/2,z=(p.apply(this,arguments)+q.apply(this,arguments))/2+fd;return[Math.cos(z)*t,Math.sin(z)*t]},a};var fd=-Math.PI/2,jf=2*Math.PI-1.0E-6;d3.svg.line=function(){return Uc(l)};var Vd=d3.map({linear:Ib,"linear-closed":function(a){return Ib(a)+"Z"},"step-before":Vc,"step-after":Ic,basis:Jc,"basis-open":function(a){if(a.length<4)return Ib(a);for(var e=[],j=-1,p=a.length,q,t=[0],z=[0];++j<3;){q=a[j];t.push(q[0]);z.push(q[1])}e.push(Cb(pd,t)+","+Cb(pd,z));
for(--j;++j<p;){q=a[j];t.shift();t.push(q[0]);z.shift();z.push(q[1]);Vb(e,t,z)}return e.join("")},"basis-closed":function(a){for(var e,j=-1,p=a.length,q=p+4,t,z=[],x=[];++j<4;){t=a[j%p];z.push(t[0]);x.push(t[1])}e=[Cb(pd,z),",",Cb(pd,x)];for(--j;++j<q;){t=a[j%p];z.shift();z.push(t[0]);x.shift();x.push(t[1]);Vb(e,z,x)}return e.join("")},bundle:function(a,e){var j=a.length-1;if(j)for(var p=a[0][0],q=a[0][1],t=a[j][0]-p,z=a[j][1]-q,x=-1,C,M;++x<=j;){C=a[x];M=x/j;C[0]=e*C[0]+(1-e)*(p+M*t);C[1]=e*C[1]+
(1-e)*(q+M*z)}return Jc(a)},cardinal:function(a,e){return a.length<3?Ib(a):a[0]+yc(a,zc(a,e))},"cardinal-open":function(a,e){return a.length<4?Ib(a):a[1]+yc(a.slice(1,a.length-1),zc(a,e))},"cardinal-closed":function(a,e){return a.length<3?Ib(a):a[0]+yc((a.push(a[0]),a),zc([a[a.length-2]].concat(a,[a[1]]),e))},monotone:function(a){if(a.length<3)a=Ib(a);else{var e=a[0],j=[],p,q,t,z,x;p=0;x=a.length-1;for(var C=[],M=a[1],T=C[0]=Kc(a[0],M);++p<x;)C[p]=(T+(T=Kc(M,M=a[p+1])))/2;x=(C[p]=T,C);C=-1;for(M=
a.length-1;++C<M;){p=Kc(a[C],a[C+1]);Math.abs(p)<1.0E-6?x[C]=x[C+1]=0:(q=x[C]/p,t=x[C+1]/p,z=q*q+t*t,z>9&&(z=p*3/Math.sqrt(z),x[C]=z*q,x[C+1]=z*t))}for(C=-1;++C<=M;){z=(a[Math.min(M,C+1)][0]-a[Math.max(0,C-1)][0])/(6*(1+x[C]*x[C]));j.push([z||0,x[C]*z||0])}a=e+yc(a,j)}return a}});Vd.forEach(function(a,e){e.key=a;e.closed=/-closed$/.test(a)});var oe=[0,2/3,1/3,0],pe=[0,1/3,2/3,0],pd=[0,1/6,2/3,1/6];d3.svg.line.radial=function(){var a=Uc(qd);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a};
Vc.reverse=Ic;Ic.reverse=Vc;d3.svg.area=function(){return Pb(l)};d3.svg.area.radial=function(){var a=Pb(qd);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a};d3.svg.chord=function(){function a(x,C){var M=e(this,j,x,C),T=e(this,p,x,C);return"M"+M.p0+("A"+M.r+","+M.r+" 0 "+ +(M.a1-M.a0>Math.PI)+",1 "+M.p1)+(M.a0==T.a0&&M.a1==T.a1?"Q 0,0 "+M.p0:"Q 0,0 "+T.p0+("A"+T.r+","+T.r+
" 0 "+ +(T.a1-T.a0>Math.PI)+",1 "+T.p1)+("Q 0,0 "+M.p0))+"Z"}function e(x,C,M,T){var L=C.call(x,M,T);C=q.call(x,L,T);M=t.call(x,L,T)+fd;x=z.call(x,L,T)+fd;return{r:C,a0:M,a1:x,p0:[C*Math.cos(M),C*Math.sin(M)],p1:[C*Math.cos(x),C*Math.sin(x)]}}var j=rc,p=Ac,q=Wc,t=dd,z=Tc;return a.radius=function(x){return arguments.length?(q=c(x),a):q},a.source=function(x){return arguments.length?(j=c(x),a):j},a.target=function(x){return arguments.length?(p=c(x),a):p},a.startAngle=function(x){return arguments.length?
(t=c(x),a):t},a.endAngle=function(x){return arguments.length?(z=c(x),a):z},a};d3.svg.diagonal=function(){function a(q,t){var z=e.call(this,q,t),x=j.call(this,q,t),C=(z.y+x.y)/2;z=[z,{x:z.x,y:C},{x:x.x,y:C},x];return z=z.map(p),"M"+z[0]+"C"+z[1]+" "+z[2]+" "+z[3]}var e=rc,j=Ac,p=Qb;return a.source=function(q){return arguments.length?(e=c(q),a):e},a.target=function(q){return arguments.length?(j=c(q),a):j},a.projection=function(q){return arguments.length?(p=q,a):p},a};d3.svg.diagonal.radial=function(){var a=
d3.svg.diagonal(),e=Qb,j=a.projection;return a.projection=function(p){return arguments.length?j(Lc(e=p)):e},a};d3.svg.mouse=d3.mouse;d3.svg.touches=d3.touches;d3.svg.symbol=function(){function a(p,q){return(ze.get(e.call(this,p,q))||jc)(j.call(this,p,q))}var e=cc,j=Jb;return a.type=function(p){return arguments.length?(e=c(p),a):e},a.size=function(p){return arguments.length?(j=c(p),a):j},a};var ze=d3.map({circle:jc,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+
-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*Ae));var e=a*Ae;return"M0,"+-a+"L"+e+",0 0,"+a+" "+-e+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/Nd);var e=a*Nd/2;return"M0,"+e+"L"+a+","+-e+" "+-a+","+-e+"Z"},"triangle-up":function(a){a=Math.sqrt(a/Nd);var e=a*Nd/2;return"M0,"+-e+"L"+a+","+e+" "+-a+","+e+"Z"}});d3.svg.symbolTypes=ze.keys();var Nd=Math.sqrt(3),
Ae=Math.tan(30*Math.PI/180);d3.svg.axis=function(){function a(L){L.each(function(){var P=d3.select(this),U=C==null?e.ticks?e.ticks.apply(e,x):e.domain():C,ka=M==null?e.tickFormat?e.tickFormat.apply(e,x):String:M,ea=Mc(e,U,T),na=P.selectAll(".minor").data(ea,String);ea=na.enter().insert("line","g").attr("class","tick minor").style("opacity",1.0E-6);var ia=d3.transition(na.exit()).style("opacity",1.0E-6).remove();na=d3.transition(na).style("opacity",1);var ja=P.selectAll("g").data(U,String);U=ja.enter().insert("g",
"path").style("opacity",1.0E-6);var ma=d3.transition(ja.exit()).style("opacity",1.0E-6).remove(),Ca=d3.transition(ja).style("opacity",1),Fa,za=Ub(e);P=P.selectAll(".domain").data([0]);P.enter().append("path").attr("class","domain");P=d3.transition(P);var Va=e.copy(),Xa=this.__chart__||Va;this.__chart__=Va;U.append("line").attr("class","tick");U.append("text");var ab=U.select("line"),bb=Ca.select("line");ka=ja.select("text").text(ka);ja=U.select("text");var wb=Ca.select("text");switch(j){case "bottom":Fa=
dc;ea.attr("y2",q);na.attr("x2",0).attr("y2",q);ab.attr("y2",p);ja.attr("y",Math.max(p,0)+z);bb.attr("x2",0).attr("y2",p);wb.attr("x",0).attr("y",Math.max(p,0)+z);ka.attr("dy",".71em").attr("text-anchor","middle");P.attr("d","M"+za[0]+","+t+"V0H"+za[1]+"V"+t);break;case "top":Fa=dc;ea.attr("y2",-q);na.attr("x2",0).attr("y2",-q);ab.attr("y2",-p);ja.attr("y",-(Math.max(p,0)+z));bb.attr("x2",0).attr("y2",-p);wb.attr("x",0).attr("y",-(Math.max(p,0)+z));ka.attr("dy","0em").attr("text-anchor","middle");
P.attr("d","M"+za[0]+","+-t+"V0H"+za[1]+"V"+-t);break;case "left":Fa=ec;ea.attr("x2",-q);na.attr("x2",-q).attr("y2",0);ab.attr("x2",-p);ja.attr("x",-(Math.max(p,0)+z));bb.attr("x2",-p).attr("y2",0);wb.attr("x",-(Math.max(p,0)+z)).attr("y",0);ka.attr("dy",".32em").attr("text-anchor","end");P.attr("d","M"+-t+","+za[0]+"H0V"+za[1]+"H"+-t);break;case "right":Fa=ec;ea.attr("x2",q);na.attr("x2",q).attr("y2",0);ab.attr("x2",p);ja.attr("x",Math.max(p,0)+z);bb.attr("x2",p).attr("y2",0);wb.attr("x",Math.max(p,
0)+z).attr("y",0);ka.attr("dy",".32em").attr("text-anchor","start");P.attr("d","M"+t+","+za[0]+"H0V"+za[1]+"H"+t)}if(e.ticks){U.call(Fa,Xa);Ca.call(Fa,Va);ma.call(Fa,Va);ea.call(Fa,Xa);na.call(Fa,Va);ia.call(Fa,Va)}else{var ob=Va.rangeBand()/2;ea=function(sb){return Va(sb)+ob};U.call(Fa,ea);Ca.call(Fa,ea)}})}var e=d3.scale.linear(),j="bottom",p=6,q=6,t=6,z=3,x=[10],C=null,M,T=0;return a.scale=function(L){return arguments.length?(e=L,a):e},a.orient=function(L){return arguments.length?(j=L,a):j},a.ticks=
function(){return arguments.length?(x=arguments,a):x},a.tickValues=function(L){return arguments.length?(C=L,a):C},a.tickFormat=function(L){return arguments.length?(M=L,a):M},a.tickSize=function(L,P){if(!arguments.length)return p;var U=arguments.length-1;return p=+L,q=U>1?+P:p,t=U>0?+arguments[U]:p,a},a.tickPadding=function(L){return arguments.length?(z=+L,a):z},a.tickSubdivide=function(L){return arguments.length?(T=+L,a):T},a};d3.svg.brush=function(){function a(L){L.each(function(){var P=d3.select(this),
U=P.selectAll(".background").data([0]),ka=P.selectAll(".extent").data([0]),ea=P.selectAll(".resize").data(C,String),na;P.style("pointer-events","all").on("mousedown.brush",q).on("touchstart.brush",q);U.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");ka.enter().append("rect").attr("class","extent").style("cursor","move");ea.enter().append("g").attr("class",function(ia){return"resize "+ia}).style("cursor",function(ia){return kf[ia]}).append("rect").attr("x",
function(ia){return/[ew]$/.test(ia)?-3:null}).attr("y",function(ia){return/^[ns]/.test(ia)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");ea.style("display",a.empty()?"none":null);ea.exit().remove();z&&(na=Ub(z),U.attr("x",na[0]).attr("width",na[1]-na[0]),j(P));x&&(na=Ub(x),U.attr("y",na[0]).attr("height",na[1]-na[0]),p(P));e(P)})}function e(L){L.selectAll(".resize").attr("transform",function(P){return"translate("+M[+/e$/.test(P)][0]+","+M[+/^s/.test(P)][1]+")"})}function j(L){L.select(".extent").attr("x",
M[0][0]);L.selectAll(".extent,.n>rect,.s>rect").attr("width",M[1][0]-M[0][0])}function p(L){L.select(".extent").attr("y",M[0][1]);L.selectAll(".extent,.e>rect,.w>rect").attr("height",M[1][1]-M[0][1])}function q(){function L(){var ob=d3.event.changedTouches;return ob?d3.touches(ea,ob)[0]:d3.mouse(ea)}function P(){var ob=L(),sb=false;ab&&(ob[0]+=ab[0],ob[1]+=ab[1]);za||(d3.event.altKey?(Va||(Va=[(M[0][0]+M[1][0])/2,(M[0][1]+M[1][1])/2]),Xa[0]=M[+(ob[0]<Va[0])][0],Xa[1]=M[+(ob[1]<Va[1])][1]):Va=null);
Ca&&U(ob,z,0)&&(j(ja),sb=true);Fa&&U(ob,x,1)&&(p(ja),sb=true);sb&&(e(ja),ia({type:"brush",mode:za?"move":"resize"}))}function U(ob,sb,Rb){var mc=Ub(sb);sb=mc[0];mc=mc[1];var fc=Xa[Rb],zd=M[1][Rb]-M[0][Rb],tc;za&&(sb-=fc,mc-=zd+fc);ob=Math.max(sb,Math.min(mc,ob[Rb]));za?tc=(ob+=fc)+zd:(Va&&(fc=Math.max(sb,Math.min(mc,2*Va[Rb]-ob))),fc<ob?(tc=ob,ob=fc):tc=fc);if(M[0][Rb]!==ob||M[1][Rb]!==tc)return T=null,M[0][Rb]=ob,M[1][Rb]=tc,true}function ka(){P();ja.style("pointer-events","all").selectAll(".resize").style("display",
a.empty()?"none":null);d3.select("body").style("cursor",null);bb.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);ia({type:"brushend"});la()}var ea=this,na=d3.select(d3.event.target),ia=t.of(ea,arguments),ja=d3.select(ea),ma=na.datum(),Ca=!/^(n|s)$/.test(ma)&&z,Fa=!/^(e|w)$/.test(ma)&&x,za=na.classed("extent"),Va,Xa=L(),ab,bb=d3.select(window).on("mousemove.brush",P).on("mouseup.brush",ka).on("touchmove.brush",
P).on("touchend.brush",ka).on("keydown.brush",function(){d3.event.keyCode==32&&(za||(Va=null,Xa[0]-=M[1][0],Xa[1]-=M[1][1],za=2),la())}).on("keyup.brush",function(){d3.event.keyCode==32&&za==2&&(Xa[0]+=M[1][0],Xa[1]+=M[1][1],za=0,la())});if(za){Xa[0]=M[0][0]-Xa[0];Xa[1]=M[0][1]-Xa[1]}else if(ma){var wb=+/w$/.test(ma);ma=+/^n/.test(ma);ab=[M[1-wb][0]-Xa[0],M[1-ma][1]-Xa[1]];Xa[0]=M[wb][0];Xa[1]=M[ma][1]}else d3.event.altKey&&(Va=Xa.slice());ja.style("pointer-events","none").selectAll(".resize").style("display",
null);d3.select("body").style("cursor",na.style("cursor"));ia({type:"brushstart"});P();la()}var t=K(a,"brushstart","brush","brushend"),z=null,x=null,C=ee[0],M=[[0,0],[0,0]],T;return a.x=function(L){return arguments.length?(z=L,C=ee[!z<<1|!x],a):z},a.y=function(L){return arguments.length?(x=L,C=ee[!z<<1|!x],a):x},a.extent=function(L){var P,U,ka,ea,na;return arguments.length?(T=[[0,0],[0,0]],z&&(P=L[0],U=L[1],x&&(P=P[0],U=U[0]),T[0][0]=P,T[1][0]=U,z.invert&&(P=z(P),U=z(U)),U<P&&(na=P,P=U,U=na),M[0][0]=
P|0,M[1][0]=U|0),x&&(ka=L[0],ea=L[1],z&&(ka=ka[1],ea=ea[1]),T[0][1]=ka,T[1][1]=ea,x.invert&&(ka=x(ka),ea=x(ea)),ea<ka&&(na=ka,ka=ea,ea=na),M[0][1]=ka|0,M[1][1]=ea|0),a):(L=T||M,z&&(T||(P=M[0][0],U=M[1][0],z.invert&&(P=z.invert(P),U=z.invert(U)),U<P&&(na=P,P=U,U=na))),x&&(T||(ka=M[0][1],ea=M[1][1],x.invert&&(ka=x.invert(ka),ea=x.invert(ea)),ea<ka&&(na=ka,ka=ea,ea=na))),z&&x?[[P,ka],[U,ea]]:z?[P,U]:x&&[ka,ea])},a.clear=function(){return T=null,M[0][0]=M[0][1]=M[1][0]=M[1][1]=0,a},a.empty=function(){return z&&
M[0][0]===M[1][0]||x&&M[0][1]===M[1][1]},d3.rebind(a,t,"on")};var kf={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ee=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];d3.behavior={};d3.behavior.drag=function(){function a(){this.on("mousedown.drag",e).on("touchstart.drag",e)}function e(){function q(){var ea=x.parentNode;return T?d3.touches(ea).filter(function(na){return na.identifier===T})[0]:d3.mouse(ea)}
function t(){C({type:"dragend"});U&&(la(),d3.event.target===M&&ka.on("click.drag",z,true));ka.on(T?"touchmove.drag-"+T:"mousemove.drag",null).on(T?"touchend.drag-"+T:"mouseup.drag",null)}function z(){la();ka.on("click.drag",null)}var x=this,C=j.of(x,arguments),M=d3.event.target,T=d3.event.touches&&d3.event.changedTouches[0].identifier,L,P=q(),U=0,ka=d3.select(window).on(T?"touchmove.drag-"+T:"mousemove.drag",function(){if(!x.parentNode)return t();var ea=q(),na=ea[0]-P[0],ia=ea[1]-P[1];U|=na|ia;P=
ea;la();C({type:"drag",x:ea[0]+L[0],y:ea[1]+L[1],dx:na,dy:ia})}).on(T?"touchend.drag-"+T:"mouseup.drag",t,true);p?(L=p.apply(x,arguments),L=[L.x-P[0],L.y-P[1]]):L=[0,0];T||la();C({type:"dragstart"})}var j=K(a,"drag","dragstart","dragend"),p=null;return a.origin=function(q){return arguments.length?(p=q,a):p},d3.rebind(a,j,"on")};d3.behavior.zoom=function(){function a(){this.on("mousedown.zoom",t).on("mousewheel.zoom",z).on("mousemove.zoom",x).on("DOMMouseScroll.zoom",z).on("dblclick.zoom",C).on("touchstart.zoom",
M).on("touchmove.zoom",T).on("touchend.zoom",M)}function e(za){return[(za[0]-L[0])/U,(za[1]-L[1])/U]}function j(za){U=Math.max(ea[0],Math.min(ea[1],za))}function p(za,Va){Va=[Va[0]*U+L[0],Va[1]*U+L[1]];L[0]+=za[0]-Va[0];L[1]+=za[1]-Va[1]}function q(za){ja&&ja.domain(ia.range().map(function(Va){return(Va-L[0])/U}).map(ia.invert));Ca&&Ca.domain(ma.range().map(function(Va){return(Va-L[1])/U}).map(ma.invert));d3.event.preventDefault();za({type:"zoom",scale:U,translate:L})}function t(){function za(){la();
wb.on("click.zoom",null)}var Va=this,Xa=na.of(Va,arguments),ab=d3.event.target,bb=0,wb=d3.select(window).on("mousemove.zoom",function(){bb=1;p(d3.mouse(Va),ob);q(Xa)}).on("mouseup.zoom",function(){bb&&la();wb.on("mousemove.zoom",null).on("mouseup.zoom",null);bb&&d3.event.target===ab&&wb.on("click.zoom",za,true)}),ob=e(d3.mouse(Va));window.focus();la()}function z(){P||(P=e(d3.mouse(this)));j(Math.pow(2,Xc()*0.002)*U);p(d3.mouse(this),P);q(na.of(this,arguments))}function x(){P=null}function C(){var za=
d3.mouse(this),Va=e(za);j(d3.event.shiftKey?U/2:U*2);p(za,Va);q(na.of(this,arguments))}function M(){var za=d3.touches(this),Va=Date.now();ka=U;P={};za.forEach(function(ab){P[ab.identifier]=e(ab)});la();if(za.length===1){if(Va-Fa<500){var Xa=za[0];za=e(za[0]);j(U*2);p(Xa,za);q(na.of(this,arguments))}Fa=Va}}function T(){var za=d3.touches(this),Va=za[0],Xa=P[Va.identifier];if(za=za[1]){var ab=P[za.identifier];Va=[(Va[0]+za[0])/2,(Va[1]+za[1])/2];Xa=[(Xa[0]+ab[0])/2,(Xa[1]+ab[1])/2];j(d3.event.scale*
ka)}p(Va,Xa);Fa=null;q(na.of(this,arguments))}var L=[0,0],P,U=1,ka,ea=Be,na=K(a,"zoom"),ia,ja,ma,Ca,Fa;return a.translate=function(za){return arguments.length?(L=za.map(Number),a):L},a.scale=function(za){return arguments.length?(U=+za,a):U},a.scaleExtent=function(za){return arguments.length?(ea=za==null?Be:za.map(Number),a):ea},a.x=function(za){return arguments.length?(ja=za,ia=za.copy(),a):ja},a.y=function(za){return arguments.length?(Ca=za,ma=za.copy(),a):Ca},d3.rebind(a,na,"on")};var td,Be=[0,
Infinity];d3.layout={};d3.layout.bundle=function(){return function(a){for(var e=[],j=-1,p=a.length;++j<p;)e.push(Mb(a[j]));return e}};d3.layout.chord=function(){function a(){var L={},P=[],U=d3.range(z),ka=[],ea,na,ia,ja,ma;p=[];q=[];ea=0;for(ja=-1;++ja<z;){na=0;for(ma=-1;++ma<z;)na+=t[ja][ma];P.push(na);ka.push(d3.range(z));ea+=na}C&&U.sort(function(ab,bb){return C(P[ab],P[bb])});M&&ka.forEach(function(ab,bb){ab.sort(function(wb,ob){return M(t[bb][wb],t[bb][ob])})});ea=(2*Math.PI-x*z)/ea;na=0;for(ja=
-1;++ja<z;){ia=na;for(ma=-1;++ma<z;){var Ca=U[ja],Fa=ka[Ca][ma],za=t[Ca][Fa],Va=na,Xa=na+=za*ea;L[Ca+"-"+Fa]={index:Ca,subindex:Fa,startAngle:Va,endAngle:Xa,value:za}}q[Ca]={index:Ca,startAngle:ia,endAngle:na,value:(na-ia)/ea};na+=x}for(ja=-1;++ja<z;)for(ma=ja-1;++ma<z;){U=L[ja+"-"+ma];ka=L[ma+"-"+ja];(U.value||ka.value)&&p.push(U.value<ka.value?{source:ka,target:U}:{source:U,target:ka})}T&&e()}function e(){p.sort(function(L,P){return T((L.source.value+L.target.value)/2,(P.source.value+P.target.value)/
2)})}var j={},p,q,t,z,x=0,C,M,T;return j.matrix=function(L){return arguments.length?(z=(t=L)&&t.length,p=q=null,j):t},j.padding=function(L){return arguments.length?(x=L,p=q=null,j):x},j.sortGroups=function(L){return arguments.length?(C=L,p=q=null,j):C},j.sortSubgroups=function(L){return arguments.length?(M=L,p=null,j):M},j.sortChords=function(L){return arguments.length?(T=L,p&&e(),j):T},j.chords=function(){return p||a(),p},j.groups=function(){return q||a(),q},j};d3.layout.force=function(){function a(ja){return function(ma,
Ca,Fa,za){if(ma.point!==ja){Fa=ma.cx-ja.x;var Va=ma.cy-ja.y,Xa=1/Math.sqrt(Fa*Fa+Va*Va);if((za-Ca)*Xa<P){Ca=ma.charge*Xa*Xa;return ja.px-=Fa*Ca,ja.py-=Va*Ca,true}if(ma.point&&isFinite(Xa)){Ca=ma.pointCharge*Xa*Xa;ja.px-=Fa*Ca;ja.py-=Va*Ca}}return!ma.charge}}function e(ja){ja.px=d3.event.x;ja.py=d3.event.y;j.resume()}var j={},p=d3.dispatch("start","tick","end"),q=[1,1],t,z,x=0.9,C=N,M=W,T=-30,L=0.1,P=0.8,U=[],ka=[],ea,na,ia;return j.tick=function(){if((z*=0.99)<0.005)return p.end({type:"end",alpha:z=
0}),true;var ja=U.length,ma=ka.length,Ca,Fa,za,Va,Xa,ab,bb;for(Ca=0;Ca<ma;++Ca){Fa=ka[Ca];za=Fa.source;Va=Fa.target;ab=Va.x-za.x;bb=Va.y-za.y;if(Xa=ab*ab+bb*bb){Xa=z*na[Ca]*((Xa=Math.sqrt(Xa))-ea[Ca])/Xa;ab*=Xa;bb*=Xa;Va.x-=ab*(Xa=za.weight/(Va.weight+za.weight));Va.y-=bb*Xa;za.x+=ab*(Xa=1-Xa);za.y+=bb*Xa}}if(Xa=z*L){ab=q[0]/2;bb=q[1]/2;Ca=-1;if(Xa)for(;++Ca<ja;){Fa=U[Ca];Fa.x+=(ab-Fa.x)*Xa;Fa.y+=(bb-Fa.y)*Xa}}if(T){H(ma=d3.geom.quadtree(U),z,ia);for(Ca=-1;++Ca<ja;)(Fa=U[Ca]).fixed||ma.visit(a(Fa))}for(Ca=
-1;++Ca<ja;){Fa=U[Ca];Fa.fixed?(Fa.x=Fa.px,Fa.y=Fa.py):(Fa.x-=(Fa.px-(Fa.px=Fa.x))*x,Fa.y-=(Fa.py-(Fa.py=Fa.y))*x)}p.tick({type:"tick",alpha:z})},j.nodes=function(ja){return arguments.length?(U=ja,j):U},j.links=function(ja){return arguments.length?(ka=ja,j):ka},j.size=function(ja){return arguments.length?(q=ja,j):q},j.linkDistance=function(ja){return arguments.length?(C=c(ja),j):C},j.distance=j.linkDistance,j.linkStrength=function(ja){return arguments.length?(M=c(ja),j):M},j.friction=function(ja){return arguments.length?
(x=ja,j):x},j.charge=function(ja){return arguments.length?(T=typeof ja=="function"?ja:+ja,j):T},j.gravity=function(ja){return arguments.length?(L=ja,j):L},j.theta=function(ja){return arguments.length?(P=ja,j):P},j.alpha=function(ja){return arguments.length?(z?ja>0?z=ja:z=0:ja>0&&(p.start({type:"start",alpha:z=ja}),d3.timer(j.tick)),j):z},j.start=function(){function ja(wb,ob){var sb;if(!ab){ab=[];for(Ca=0;Ca<Fa;++Ca)ab[Ca]=[];for(Ca=0;Ca<za;++Ca){sb=ka[Ca];ab[sb.source.index].push(sb.target);ab[sb.target.index].push(sb.source)}}sb=
ab[ma];for(var Rb=-1,mc=sb.length,fc;++Rb<mc;)if(!isNaN(fc=sb[Rb][wb]))return fc;return Math.random()*ob}var ma,Ca,Fa=U.length,za=ka.length,Va=q[0],Xa=q[1],ab,bb;for(ma=0;ma<Fa;++ma){(bb=U[ma]).index=ma;bb.weight=0}ea=[];na=[];for(ma=0;ma<za;++ma){bb=ka[ma];typeof bb.source=="number"&&(bb.source=U[bb.source]);typeof bb.target=="number"&&(bb.target=U[bb.target]);ea[ma]=C.call(this,bb,ma);na[ma]=M.call(this,bb,ma);++bb.source.weight;++bb.target.weight}for(ma=0;ma<Fa;++ma){bb=U[ma];isNaN(bb.x)&&(bb.x=
ja("x",Va));isNaN(bb.y)&&(bb.y=ja("y",Xa));isNaN(bb.px)&&(bb.px=bb.x);isNaN(bb.py)&&(bb.py=bb.y)}ia=[];if(typeof T=="function")for(ma=0;ma<Fa;++ma)ia[ma]=+T.call(this,U[ma],ma);else for(ma=0;ma<Fa;++ma)ia[ma]=T;return j.resume()},j.resume=function(){return j.alpha(0.1)},j.stop=function(){return j.alpha(0)},j.drag=function(){t||(t=d3.behavior.drag().origin(l).on("dragstart",k).on("drag",e).on("dragend",n));this.on("mouseover.force",B).on("mouseout.force",E).call(t)},d3.rebind(j,p,"on")};d3.layout.partition=
function(){function a(t,z,x,C){var M=t.children;t.x=z;t.y=t.depth*C;t.dx=x;t.dy=C;if(M&&(L=M.length)){var T=-1,L,P;for(x=t.value?x/t.value:0;++T<L;){a(P=M[T],z,t=P.value*x,C);z+=t}}}function e(t){t=t.children;var z=0;if(t&&(C=t.length))for(var x=-1,C;++x<C;)z=Math.max(z,e(t[x]));return 1+z}function j(t,z){var x=p.call(this,t,z);return a(x[0],0,q[0],q[1]/e(x[0])),x}var p=d3.layout.hierarchy(),q=[1,1];return j.size=function(t){return arguments.length?(q=t,j):q},Nb(j,p)};d3.layout.pie=function(){function a(t){var z=
t.map(function(L,P){return+e.call(a,L,P)}),x=+(typeof p=="function"?p.apply(this,arguments):p),C=((typeof q=="function"?q.apply(this,arguments):q)-p)/d3.sum(z),M=d3.range(t.length);j!=null&&M.sort(j===Ce?function(L,P){return z[P]-z[L]}:function(L,P){return j(t[L],t[P])});var T=[];return M.forEach(function(L){var P;T[L]={data:t[L],value:P=z[L],startAngle:x,endAngle:x+=P*C}}),T}var e=Number,j=Ce,p=0,q=2*Math.PI;return a.value=function(t){return arguments.length?(e=t,a):e},a.sort=function(t){return arguments.length?
(j=t,a):j},a.startAngle=function(t){return arguments.length?(p=t,a):p},a.endAngle=function(t){return arguments.length?(q=t,a):q},a};var Ce={};d3.layout.stack=function(){function a(x,C){var M=x.map(function(ia,ja){return e.call(a,ia,ja)}),T=M.map(function(ia){return ia.map(function(ja,ma){return[t.call(a,ja,ma),z.call(a,ja,ma)]})}),L=j.call(a,T,C);M=d3.permute(M,L);T=d3.permute(T,L);L=p.call(a,T,C);var P=M.length,U=M[0].length,ka,ea,na;for(ea=0;ea<U;++ea){q.call(a,M[0][ea],na=L[ea],T[0][ea][1]);for(ka=
1;ka<P;++ka)q.call(a,M[ka][ea],na+=T[ka-1][ea][1],T[ka][ea][1])}return x}var e=l,j=Ma,p=Aa,q=ya,t=da,z=ha;return a.values=function(x){return arguments.length?(e=x,a):e},a.order=function(x){return arguments.length?(j=typeof x=="function"?x:lf.get(x)||Ma,a):j},a.offset=function(x){return arguments.length?(p=typeof x=="function"?x:mf.get(x)||Aa,a):p},a.x=function(x){return arguments.length?(t=x,a):t},a.y=function(x){return arguments.length?(z=x,a):z},a.out=function(x){return arguments.length?(q=x,a):
q},a};var lf=d3.map({"inside-out":function(a){var e=a.length,j,p=a.map(Ua),q=a.map(Oa),t=d3.range(e).sort(function(T,L){return p[T]-p[L]}),z=0,x=0,C=[],M=[];for(a=0;a<e;++a){j=t[a];z<x?(z+=q[j],C.push(j)):(x+=q[j],M.push(j))}return M.reverse().concat(C)},reverse:function(a){return d3.range(a.length).reverse()},"default":Ma}),mf=d3.map({silhouette:function(a){var e=a.length,j=a[0].length,p=[],q=0,t,z,x,C=[];for(z=0;z<j;++z){for(x=t=0;t<e;t++)x+=a[t][z][1];x>q&&(q=x);p.push(x)}for(z=0;z<j;++z)C[z]=
(q-p[z])/2;return C},wiggle:function(a){var e=a.length,j=a[0],p=j.length,q,t,z,x,C,M,T,L,P,U=[];U[0]=L=P=0;for(t=1;t<p;++t){for(x=q=0;q<e;++q)x+=a[q][t][1];C=q=0;for(T=j[t][0]-j[t-1][0];q<e;++q){z=0;for(M=(a[q][t][1]-a[q][t-1][1])/(2*T);z<q;++z)M+=(a[z][t][1]-a[z][t-1][1])/T;C+=M*a[q][t][1]}U[t]=L-=x?C/x*T:0;L<P&&(P=L)}for(t=0;t<p;++t)U[t]-=P;return U},expand:function(a){var e=a.length,j=a[0].length,p=1/e,q,t,z,x=[];for(t=0;t<j;++t){for(z=q=0;q<e;q++)z+=a[q][t][1];if(z)for(q=0;q<e;q++)a[q][t][1]/=
z;else for(q=0;q<e;q++)a[q][t][1]=p}for(t=0;t<j;++t)x[t]=0;return x},zero:Aa});d3.layout.histogram=function(){function a(t,z){var x=[],C=t.map(j,this),M=p.call(this,C,z),T=q.call(this,M,C,z),L;z=-1;for(var P=C.length,U=T.length-1,ka=e?1:1/P,ea;++z<U;){L=x[z]=[];L.dx=T[z+1]-(L.x=T[z]);L.y=0}if(U>0)for(z=-1;++z<P;){ea=C[z];ea>=M[0]&&ea<=M[1]&&(L=x[d3.bisect(T,ea,1,U)-1],L.y+=ka,L.push(t[z]))}return x}var e=true,j=Number,p=lb,q=ib;return a.value=function(t){return arguments.length?(j=t,a):j},a.range=
function(t){return arguments.length?(p=c(t),a):p},a.bins=function(t){return arguments.length?(q=typeof t=="number"?function(z){return jb(z,t)}:c(t),a):q},a.frequency=function(t){return arguments.length?(e=!!t,a):e},a};d3.layout.hierarchy=function(){function a(z,x,C){var M=q.call(j,z,x),T=Wd?z:{data:z};T.depth=x;C.push(T);if(M&&(L=M.length)){z=-1;var L,P=T.children=[],U=0;x+=1;for(var ka;++z<L;){ka=a(M[z],x,C);ka.parent=T;P.push(ka);U+=ka.value}p&&P.sort(p);t&&(T.value=U)}else t&&(T.value=+t.call(j,
z,x)||0);return T}function e(z,x){var C=z.children,M=0;if(C&&(L=C.length))for(var T=-1,L,P=x+1;++T<L;)M+=e(C[T],P);else t&&(M=+t.call(j,Wd?z:z.data,x)||0);return t&&(z.value=M),M}function j(z){var x=[];return a(z,0,x),x}var p=Kb,q=Ob,t=fb;return j.sort=function(z){return arguments.length?(p=z,j):p},j.children=function(z){return arguments.length?(q=z,j):q},j.value=function(z){return arguments.length?(t=z,j):t},j.revalue=function(z){return e(z,0),z},j};var Wd=false;d3.layout.pack=function(){function a(q,
t){var z=e.call(this,q,t),x=z[0];x.x=0;x.y=0;va(x,function(P){P.r=Math.sqrt(P.value)});va(x,Da);var C=p[0],M=p[1],T=Math.max(2*x.r/C,2*x.r/M);if(j>0){var L=j*T/2;va(x,function(P){P.r+=L});va(x,Da);va(x,function(P){P.r-=L});T=Math.max(2*x.r/C,2*x.r/M)}return hb(x,C/2,M/2,1/T),z}var e=d3.layout.hierarchy().sort(Y),j=0,p=[1,1];return a.size=function(q){return arguments.length?(p=q,a):p},a.padding=function(q){return arguments.length?(j=+q,a):j},Nb(a,e)};d3.layout.cluster=function(){function a(q,t){var z=
e.call(this,q,t),x=z[0],C,M=0;va(x,function(ka){var ea=ka.children;ea&&ea.length?(ka.x=Na(ea),ka.y=Ba(ea)):(ka.x=C?M+=j(ka,C):0,ka.y=0,C=ka)});var T=Ia(x),L=db(x),P=T.x-j(T,L)/2,U=L.x+j(L,T)/2;return va(x,function(ka){ka.x=(ka.x-P)/(U-P)*p[0];ka.y=(1-(x.y?ka.y/x.y:1))*p[1]}),z}var e=d3.layout.hierarchy().sort(null).value(null),j=u,p=[1,1];return a.separation=function(q){return arguments.length?(j=q,a):j},a.size=function(q){return arguments.length?(p=q,a):p},Nb(a,e)};d3.layout.tree=function(){function a(q,
t){function z(na,ia){var ja=na.children,ma=na._tree;if(ja&&(Ca=ja.length)){for(var Ca,Fa=ja[0],za,Va=Fa,Xa,ab=-1;++ab<Ca;){Xa=ja[ab];z(Xa,za);var bb=Xa;if(za){for(var wb=bb,ob=bb,sb=bb.parent.children[0],Rb=wb._tree.mod,mc=ob._tree.mod,fc=za._tree.mod,zd=sb._tree.mod,tc=void 0;za=J(za),wb=F(wb),za&&wb;){sb=F(sb);ob=J(ob);ob._tree.ancestor=bb;tc=za._tree.prelim+fc-wb._tree.prelim-Rb+j(za,wb);if(tc>0){var Od=za._tree.ancestor.parent==bb.parent?za._tree.ancestor:Va,kd=bb,Pd=tc;Od=Od._tree;kd=kd._tree;
var De=Pd/(kd.number-Od.number);Od.change+=De;kd.change-=De;kd.shift+=Pd;kd.prelim+=Pd;kd.mod+=Pd;Rb+=tc;mc+=tc}fc+=za._tree.mod;Rb+=wb._tree.mod;zd+=sb._tree.mod;mc+=ob._tree.mod}za&&!J(ob)&&(ob._tree.thread=za,ob._tree.mod+=fc-mc);wb&&!F(sb)&&(sb._tree.thread=wb,sb._tree.mod+=Rb-zd,Va=bb)}za=Xa}Ca=ja=0;ab=na.children;for(bb=ab.length;--bb>=0;){Va=ab[bb]._tree;Va.prelim+=ja;Va.mod+=ja;ja+=Va.shift+(Ca+=Va.change)}Fa=0.5*(Fa._tree.prelim+Xa._tree.prelim);ia?(ma.prelim=ia._tree.prelim+j(na,ia),ma.mod=
ma.prelim-Fa):ma.prelim=Fa}else ia&&(ma.prelim=ia._tree.prelim+j(na,ia))}function x(na,ia){na.x=na._tree.prelim+ia;var ja=na.children;if(ja&&(Ca=ja.length)){var ma=-1,Ca;for(ia+=na._tree.mod;++ma<Ca;)x(ja[ma],ia)}}var C=e.call(this,q,t),M=C[0];va(M,function(na,ia){na._tree={ancestor:na,prelim:0,mod:0,change:0,shift:0,number:ia?ia._tree.number+1:0}});z(M);x(M,-M._tree.prelim);var T=Q(M,fa),L=Q(M,Z),P=Q(M,ra),U=T.x-j(T,L)/2,ka=L.x+j(L,T)/2,ea=P.depth||1;return va(M,function(na){na.x=(na.x-U)/(ka-U)*
p[0];na.y=na.depth/ea*p[1];delete na._tree}),C}var e=d3.layout.hierarchy().sort(null).value(null),j=u,p=[1,1];return a.separation=function(q){return arguments.length?(j=q,a):j},a.size=function(q){return arguments.length?(p=q,a):p},Nb(a,e)};d3.layout.treemap=function(){function a(U,ka){for(var ea=-1,na=U.length,ia,ja;++ea<na;){ja=(ia=U[ea]).value*(ka<0?0:ka);ia.area=isNaN(ja)||ja<=0?0:ja}}function e(U){var ka=U.children;if(ka&&ka.length){var ea=M(U),na=[],ia=ka.slice(),ja=Infinity,ma,Ca=Math.min(ea.dx,
ea.dy);a(ia,ea.dx*ea.dy/U.value);for(na.area=0;(U=ia.length)>0;){na.push(U=ia[U-1]);na.area+=U.area;U=Ca;for(var Fa=na.area,za=void 0,Va=0,Xa=Infinity,ab=-1,bb=na.length;++ab<bb;)if(za=na[ab].area){za<Xa&&(Xa=za);za>Va&&(Va=za)}(ma=(Fa*=Fa,U*=U,Fa?Math.max(U*Va*P/Fa,Fa/(U*Xa*P)):Infinity))<=ja?(ia.pop(),ja=ma):(na.area-=na.pop().area,p(na,Ca,ea,false),Ca=Math.min(ea.dx,ea.dy),na.length=na.area=0,ja=Infinity)}na.length&&(p(na,Ca,ea,true),na.length=na.area=0);ka.forEach(e)}}function j(U){var ka=U.children;
if(ka&&ka.length){var ea=M(U),na=ka.slice(),ia=[];a(na,ea.dx*ea.dy/U.value);for(ia.area=0;U=na.pop();){ia.push(U);ia.area+=U.area;U.z!=null&&(p(ia,U.z?ea.dx:ea.dy,ea,!na.length),ia.length=ia.area=0)}ka.forEach(j)}}function p(U,ka,ea,na){var ia=-1,ja=U.length,ma=ea.x,Ca=ea.y,Fa=ka?z(U.area/ka):0,za;if(ka==ea.dx){if(na||Fa>ea.dy)Fa=ea.dy;for(;++ia<ja;){za=U[ia];za.x=ma;za.y=Ca;za.dy=Fa;ma+=za.dx=Math.min(ea.x+ea.dx-ma,Fa?z(za.area/Fa):0)}za.z=true;za.dx+=ea.x+ea.dx-ma;ea.y+=Fa;ea.dy-=Fa}else{if(na||
Fa>ea.dx)Fa=ea.dx;for(;++ia<ja;){za=U[ia];za.x=ma;za.y=Ca;za.dx=Fa;Ca+=za.dy=Math.min(ea.y+ea.dy-Ca,Fa?z(za.area/Fa):0)}za.z=false;za.dy+=ea.y+ea.dy-Ca;ea.x+=Fa;ea.dx-=Fa}}function q(U){U=L||t(U);var ka=U[0];return ka.x=0,ka.y=0,ka.dx=x[0],ka.dy=x[1],L&&t.revalue(ka),a([ka],ka.dx*ka.dy/ka.value),(L?j:e)(ka),T&&(L=U),U}var t=d3.layout.hierarchy(),z=Math.round,x=[1,1],C=null,M=Ea,T=false,L,P=0.5*(1+Math.sqrt(5));return q.size=function(U){return arguments.length?(x=U,q):x},q.padding=function(U){function ka(ia){var ja=
U.call(q,ia,ia.depth);return ja==null?Ea(ia):Pa(ia,typeof ja=="number"?[ja,ja,ja,ja]:ja)}function ea(ia){return Pa(ia,U)}if(!arguments.length)return C;var na;return M=(C=U)==null?Ea:(na=typeof U)==="function"?ka:na==="number"?(U=[U,U,U,U],ea):ea,q},q.round=function(U){return arguments.length?(z=U?Math.round:Number,q):z!=Number},q.sticky=function(U){return arguments.length?(T=U,L=null,q):T},q.ratio=function(U){return arguments.length?(P=U,q):P},Nb(q,t)};d3.csv=Sa(",","text/csv");d3.tsv=Sa("\t","text/tab-separated-values");
d3.geo={};var kb=Math.PI/180;d3.geo.azimuthal=function(){function a(M){var T=M[0]*kb-t,L=M[1]*kb;M=Math.cos(T);T=Math.sin(T);var P=Math.cos(L);L=Math.sin(L);var U=e!=="orthographic"?C*L+x*P*M:null,ka;U=e==="stereographic"?1/(1+U):e==="gnomonic"?1/U:e==="equidistant"?(ka=Math.acos(U),ka?ka/Math.sin(ka):0):e==="equalarea"?Math.sqrt(2/(1+U)):1;return[p*U*P*T+q[0],p*U*(C*P*M-x*L)+q[1]]}var e="orthographic",j,p=200,q=[480,250],t,z,x,C;return a.invert=function(M){var T=(M[0]-q[0])/p;M=(M[1]-q[1])/p;var L=
Math.sqrt(T*T+M*M),P=e==="stereographic"?2*Math.atan(L):e==="gnomonic"?Math.atan(L):e==="equidistant"?L:e==="equalarea"?2*Math.asin(0.5*L):Math.asin(L),U=Math.sin(P);P=Math.cos(P);return[(t+Math.atan2(T*U,L*x*P+M*C*U))/kb,Math.asin(P*C-(L?M*U*x/L:0))/kb]},a.mode=function(M){return arguments.length?(e=M+"",a):e},a.origin=function(M){return arguments.length?(j=M,t=j[0]*kb,z=j[1]*kb,x=Math.cos(z),C=Math.sin(z),a):j},a.scale=function(M){return arguments.length?(p=+M,a):p},a.translate=function(M){return arguments.length?
(q=[+M[0],+M[1]],a):q},a.origin([0,0])};d3.geo.albers=function(){function a(T){var L=x*(kb*T[0]-z);T=Math.sqrt(C-2*x*Math.sin(kb*T[1]))/x;return[q*T*Math.sin(L)+t[0],q*(T*Math.cos(L)-M)+t[1]]}function e(){var T=kb*p[0],L=kb*p[1],P=kb*j[1],U=Math.sin(T);T=Math.cos(T);return z=kb*j[0],x=0.5*(U+Math.sin(L)),C=T*T+2*x*U,M=Math.sqrt(C-2*x*Math.sin(P))/x,a}var j=[-98,38],p=[29.5,45.5],q=1E3,t=[480,250],z,x,C,M;return a.invert=function(T){var L=(T[0]-t[0])/q;T=M+(T[1]-t[1])/q;var P=Math.sqrt(L*L+T*T);return[(z+
Math.atan2(L,T)/x)/kb,Math.asin((C-P*P*x*x)/(2*x))/kb]},a.origin=function(T){return arguments.length?(j=[+T[0],+T[1]],e()):j},a.parallels=function(T){return arguments.length?(p=[+T[0],+T[1]],e()):p},a.scale=function(T){return arguments.length?(q=+T,a):q},a.translate=function(T){return arguments.length?(t=[+T[0],+T[1]],a):t},e()};d3.geo.albersUsa=function(){function a(t){var z=t[0],x=t[1];return(x>50?j:z<-140?p:x<21?q:e)(t)}var e=d3.geo.albers(),j=d3.geo.albers().origin([-160,60]).parallels([55,65]),
p=d3.geo.albers().origin([-160,20]).parallels([8,18]),q=d3.geo.albers().origin([-60,10]).parallels([8,18]);return a.scale=function(t){return arguments.length?(e.scale(t),j.scale(t*0.6),p.scale(t),q.scale(t*1.5),a.translate(e.translate())):e.scale()},a.translate=function(t){if(!arguments.length)return e.translate();var z=e.scale()/1E3,x=t[0],C=t[1];return e.translate(t),j.translate([x-400*z,C+170*z]),p.translate([x-190*z,C+200*z]),q.translate([x+580*z,C+430*z]),a},a.scale(e.scale())};d3.geo.bonne=
function(){function a(x){var C=x[0]*kb-p,M=x[1]*kb-q;if(t){x=z+t-M;M=C*Math.cos(M)/x;C=x*Math.sin(M);M=x*Math.cos(M)-z}else{C*=Math.cos(M);M*=-1}return[e*C+j[0],e*M+j[1]]}var e=200,j=[480,250],p,q,t,z;return a.invert=function(x){var C=(x[0]-j[0])/e;x=(x[1]-j[1])/e;if(t){var M=z+x,T=Math.sqrt(C*C+M*M);x=z+t-T;C=p+T*Math.atan2(C,M)/Math.cos(x)}else{x*=-1;C/=Math.cos(x)}return[C/kb,x/kb]},a.parallel=function(x){return arguments.length?(z=1/Math.tan(t=x*kb),a):t/kb},a.origin=function(x){return arguments.length?
(p=x[0]*kb,q=x[1]*kb,a):[p/kb,q/kb]},a.scale=function(x){return arguments.length?(e=+x,a):e},a.translate=function(x){return arguments.length?(j=[+x[0],+x[1]],a):j},a.origin([0,0]).parallel(45)};d3.geo.equirectangular=function(){function a(p){return[e*(p[0]/360)+j[0],e*(-p[1]/360)+j[1]]}var e=500,j=[480,250];return a.invert=function(p){return[360*((p[0]-j[0])/e),-360*((p[1]-j[1])/e)]},a.scale=function(p){return arguments.length?(e=+p,a):e},a.translate=function(p){return arguments.length?(j=[+p[0],
+p[1]],a):j},a};d3.geo.mercator=function(){function a(p){return[e*(p[0]/360)+j[0],e*Math.max(-0.5,Math.min(0.5,-(Math.log(Math.tan(Math.PI/4+p[1]*kb/2))/kb)/360))+j[1]]}var e=500,j=[480,250];return a.invert=function(p){return[360*((p[0]-j[0])/e),2*Math.atan(Math.exp(-360*((p[1]-j[1])/e)*kb))/kb-90]},a.scale=function(p){return arguments.length?(e=+p,a):e},a.translate=function(p){return arguments.length?(j=[+p[0],+p[1]],a):j},a};d3.geo.path=function(){function a(L){typeof q=="function"&&(t=tb(q.apply(this,
arguments)));C(L);var P=x.length?x.join(""):null;return x=[],P}function e(L){return z(L).join(",")}function j(L){for(var P=Math.abs(d3.geom.polygon(L[0].map(z)).area()),U=0,ka=L.length;++U<ka;)P-=Math.abs(d3.geom.polygon(L[U].map(z)).area());return P}function p(L){var P=d3.geom.polygon(L[0].map(z)),U=P.area();P=P.centroid(U<0?(U*=-1,1):-1);for(var ka=P[0],ea=P[1],na=U,ia=0,ja=L.length;++ia<ja;){P=d3.geom.polygon(L[ia].map(z));U=P.area();P=P.centroid(U<0?(U*=-1,1):-1);ka-=P[0];ea-=P[1];na-=U}return[ka,
ea,6*na]}var q=4.5,t=tb(q),z=d3.geo.albersUsa(),x=[],C=cb({FeatureCollection:function(L){L=L.features;for(var P=-1,U=L.length;++P<U;)x.push(C(L[P].geometry))},Feature:function(L){C(L.geometry)},Point:function(L){x.push("M",e(L.coordinates),t)},MultiPoint:function(L){L=L.coordinates;for(var P=-1,U=L.length;++P<U;)x.push("M",e(L[P]),t)},LineString:function(L){L=L.coordinates;var P=-1,U=L.length;for(x.push("M");++P<U;)x.push(e(L[P]),"L");x.pop()},MultiLineString:function(L){L=L.coordinates;for(var P=
-1,U=L.length,ka,ea,na;++P<U;){ka=L[P];ea=-1;na=ka.length;for(x.push("M");++ea<na;)x.push(e(ka[ea]),"L");x.pop()}},Polygon:function(L){L=L.coordinates;for(var P=-1,U=L.length,ka,ea,na;++P<U;){ka=L[P];ea=-1;if((na=ka.length-1)>0){for(x.push("M");++ea<na;)x.push(e(ka[ea]),"L");x[x.length-1]="Z"}}},MultiPolygon:function(L){L=L.coordinates;for(var P=-1,U=L.length,ka,ea,na,ia,ja,ma;++P<U;){ka=L[P];ea=-1;for(na=ka.length;++ea<na;){ia=ka[ea];ja=-1;if((ma=ia.length-1)>0){for(x.push("M");++ja<ma;)x.push(e(ia[ja]),
"L");x[x.length-1]="Z"}}}},GeometryCollection:function(L){L=L.geometries;for(var P=-1,U=L.length;++P<U;)x.push(C(L[P]))}}),M=a.area=cb({FeatureCollection:function(L){var P=0;L=L.features;for(var U=-1,ka=L.length;++U<ka;)P+=M(L[U]);return P},Feature:function(L){return M(L.geometry)},Polygon:function(L){return j(L.coordinates)},MultiPolygon:function(L){var P=0;L=L.coordinates;for(var U=-1,ka=L.length;++U<ka;)P+=j(L[U]);return P},GeometryCollection:function(L){var P=0;L=L.geometries;for(var U=-1,ka=
L.length;++U<ka;)P+=M(L[U]);return P}},0),T=a.centroid=cb({Feature:function(L){return T(L.geometry)},Polygon:function(L){L=p(L.coordinates);return[L[0]/L[2],L[1]/L[2]]},MultiPolygon:function(L){L=L.coordinates;for(var P,U=0,ka=0,ea=0,na=-1,ia=L.length;++na<ia;){P=p(L[na]);U+=P[0];ka+=P[1];ea+=P[2]}return[U/ea,ka/ea]}});return a.projection=function(L){return z=L,a},a.pointRadius=function(L){return typeof L=="function"?q=L:(q=+L,t=tb(q)),a},a};d3.geo.bounds=function(a){var e=Infinity,j=Infinity,p=-Infinity,
q=-Infinity;return pb(a,function(t,z){t<e&&(e=t);t>p&&(p=t);z<j&&(j=z);z>q&&(q=z)}),[[e,j],[p,q]]};var qe={Feature:function(a,e){pb(a.geometry,e)},FeatureCollection:function(a,e){for(var j=a.features,p=0,q=j.length;p<q;p++)pb(j[p].geometry,e)},GeometryCollection:function(a,e){for(var j=a.geometries,p=0,q=j.length;p<q;p++)pb(j[p],e)},LineString:rb,MultiLineString:function(a,e){for(var j=a.coordinates,p=0,q=j.length;p<q;p++)for(var t=j[p],z=0,x=t.length;z<x;z++)e.apply(null,t[z])},MultiPoint:rb,MultiPolygon:function(a,
e){for(var j=a.coordinates,p=0,q=j.length;p<q;p++)for(var t=j[p][0],z=0,x=t.length;z<x;z++)e.apply(null,t[z])},Point:function(a,e){e.apply(null,a.coordinates)},Polygon:function(a,e){for(var j=a.coordinates[0],p=0,q=j.length;p<q;p++)e.apply(null,j[p])}};d3.geo.circle=function(){function a(){}function e(C){return z.distance(C)<t}function j(C){for(var M=-1,T=C.length,L=[],P,U,ka,ea,na;++M<T;){na=z.distance(ka=C[M]);na<t?(U&&L.push(hd(U,ka)((ea-t)/(ea-na))),L.push(ka),P=U=null):(U=ka,!P&&L.length&&(L.push(hd(L[L.length-
1],U)((t-ea)/(na-ea))),P=U));ea=na}P=C[0];(U=L[0])&&ka[0]===P[0]&&ka[1]===P[1]&&(ka[0]!==U[0]||ka[1]!==U[1])&&L.push(U);C=0;U=(M=L.length)?[L[0]]:L;for(ea=z.source();++C<M;){ka=z.source(L[C-1])(L[C]).coordinates;T=0;for(P=ka.length;++T<P;)U.push(ka[T])}return z.source(ea),U}var p=[0,0],q=89.99,t=q*kb,z=d3.geo.greatArc().source(p).target(l);a.clip=function(C){return typeof p=="function"&&z.source(p.apply(this,arguments)),x(C)||null};var x=cb({FeatureCollection:function(C){var M=C.features.map(x).filter(l);
return M&&(C=Object.create(C),C.features=M,C)},Feature:function(C){var M=x(C.geometry);return M&&(C=Object.create(C),C.geometry=M,C)},Point:function(C){return e(C.coordinates)&&C},MultiPoint:function(C){var M=C.coordinates.filter(e);return M.length&&{type:C.type,coordinates:M}},LineString:function(C){var M=j(C.coordinates);return M.length&&(C=Object.create(C),C.coordinates=M,C)},MultiLineString:function(C){var M=C.coordinates.map(j).filter(function(T){return T.length});return M.length&&(C=Object.create(C),
C.coordinates=M,C)},Polygon:function(C){var M=C.coordinates.map(j);return M[0].length&&(C=Object.create(C),C.coordinates=M,C)},MultiPolygon:function(C){var M=C.coordinates.map(function(T){return T.map(j)}).filter(function(T){return T[0].length});return M.length&&(C=Object.create(C),C.coordinates=M,C)},GeometryCollection:function(C){var M=C.geometries.map(x).filter(l);return M.length&&(C=Object.create(C),C.geometries=M,C)}});return a.origin=function(C){return arguments.length?(p=C,typeof p!="function"&&
z.source(p),a):p},a.angle=function(C){return arguments.length?(t=(q=+C)*kb,a):q},d3.rebind(a,z,"precision")};d3.geo.greatArc=function(){function a(){var x=a.distance.apply(this,arguments),C=0;x=t/x;for(var M=[j];(C+=x)<1;)M.push(z(C));return M.push(q),{type:"LineString",coordinates:M}}var e=ud,j,p=sc,q,t=6*kb,z=Yc();return a.distance=function(){return typeof e=="function"&&z.source(j=e.apply(this,arguments)),typeof p=="function"&&z.target(q=p.apply(this,arguments)),z.distance()},a.source=function(x){return arguments.length?
(e=x,typeof e!="function"&&z.source(j=e),a):e},a.target=function(x){return arguments.length?(p=x,typeof p!="function"&&z.target(q=p),a):p},a.precision=function(x){return arguments.length?(t=x*kb,a):t/kb},a};d3.geo.greatCircle=d3.geo.circle;d3.geom={};d3.geom.contour=function(a,e){var j;if(!(j=e))a:{for(var p=j=0;;){if(a(j,p)){j=[j,p];break a}j===0?(j=p+1,p=0):(j-=1,p+=1)}j=void 0}p=[];var q=j[0],t=j[1],z=0,x=0,C=NaN,M=NaN,T=0;do{T=0;a(q-1,t-1)&&(T+=1);a(q,t-1)&&(T+=2);a(q-1,t)&&(T+=4);a(q,t)&&(T+=
8);T===6?(z=M===-1?-1:1,x=0):T===9?(z=0,x=C===1?-1:1):(z=nf[T],x=of[T]);z!=C&&x!=M&&(p.push([q,t]),C=z,M=x);q+=z;t+=x}while(j[0]!=q||j[1]!=t);return p};var nf=[1,0,1,1,-1,0,-1,1,0,0,0,0,-1,0,-1,NaN],of=[0,-1,0,0,0,-1,0,0,1,-1,1,1,0,-1,0,NaN];d3.geom.hull=function(a){if(a.length<3)return[];var e=a.length,j=e-1,p=[],q=[],t,z=0,x,C,M,T,L,P,U;for(t=1;t<e;++t)a[t][1]<a[z][1]?z=t:a[t][1]==a[z][1]&&(z=a[t][0]<a[z][0]?t:z);for(t=0;t<e;++t)if(t!==z){C=a[t][1]-a[z][1];x=a[t][0]-a[z][0];p.push({angle:Math.atan2(C,
x),index:t})}p.sort(function(ka,ea){return ka.angle-ea.angle});U=p[0].angle;P=p[0].index;L=0;for(t=1;t<j;++t){e=p[t].index;U==p[t].angle?(x=a[P][0]-a[z][0],C=a[P][1]-a[z][1],M=a[e][0]-a[z][0],T=a[e][1]-a[z][1],x*x+C*C>=M*M+T*T?p[t].index=-1:(p[L].index=-1,U=p[t].angle,L=t,P=e)):(U=p[t].angle,L=t,P=e)}q.push(z);for(e=t=0;t<2;++e)p[e].index!==-1&&(q.push(p[e].index),t++);for(z=q.length;e<j;++e)if(p[e].index!==-1){for(;!Ne(q[z-2],q[z-1],p[e].index,a);)--z;q[z++]=p[e].index}j=[];for(t=0;t<z;++t)j.push(a[q[t]]);
return j};d3.geom.polygon=function(a){return a.area=function(){for(var e=0,j=a.length,p=a[j-1][0]*a[0][1],q=a[j-1][1]*a[0][0];++e<j;){p+=a[e-1][0]*a[e][1];q+=a[e-1][1]*a[e][0]}return(q-p)*0.5},a.centroid=function(e){var j=-1,p=a.length,q=0,t=0,z,x=a[p-1],C;for(arguments.length||(e=-1/(6*a.area()));++j<p;){z=x;x=a[j];C=z[0]*x[1]-x[0]*z[1];q+=(z[0]+x[0])*C;t+=(z[1]+x[1])*C}return[q*e,t*e]},a.clip=function(e){for(var j,p=-1,q=a.length,t,z,x=a[q-1],C,M,T;++p<q;){j=e.slice();e.length=0;C=a[p];M=j[(z=j.length)-
1];for(t=-1;++t<z;){T=j[t];Xd(T,x,C)?(Xd(M,x,C)||e.push(re(M,T,x,C)),e.push(T)):Xd(M,x,C)&&e.push(re(M,T,x,C));M=T}x=C}return e},a};d3.geom.voronoi=function(a){var e=a.map(function(){return[]});return se(a,function(j){var p,q,t,z,x,C;j.a===1&&j.b>=0?(p=j.ep.r,q=j.ep.l):(p=j.ep.l,q=j.ep.r);j.a===1?(x=p?p.y:-1E6,t=j.c-j.b*x,C=q?q.y:1E6,z=j.c-j.b*C):(t=p?p.x:-1E6,x=j.c-j.a*t,z=q?q.x:1E6,C=j.c-j.a*z);p=[t,x];z=[z,C];e[j.region.l.index].push(p,z);e[j.region.r.index].push(p,z)}),e.map(function(j,p){var q=
a[p][0],t=a[p][1];return j.forEach(function(z){z.angle=Math.atan2(z[0]-q,z[1]-t)}),j.sort(function(z,x){return z.angle-x.angle}).filter(function(z,x){return!x||z.angle-j[x-1].angle>1.0E-10})})};var Yd={l:"r",r:"l"};d3.geom.delaunay=function(a){var e=a.map(function(){return[]}),j=[];return se(a,function(p){e[p.region.l.index].push(a[p.region.r.index])}),e.forEach(function(p,q){var t=a[q],z=t[0],x=t[1];p.forEach(function(T){T.angle=Math.atan2(T[0]-z,T[1]-x)});p.sort(function(T,L){return T.angle-L.angle});
for(var C=0,M=p.length-1;C<M;C++)j.push([t,p[C],p[C+1]])}),j};d3.geom.quadtree=function(a,e,j,p,q){function t(L,P,U,ka,ea,na){if(!(isNaN(P.x)||isNaN(P.y)))if(L.leaf){var ia=L.point;ia?Math.abs(ia.x-P.x)+Math.abs(ia.y-P.y)<0.01?z(L,P,U,ka,ea,na):(L.point=null,z(L,ia,U,ka,ea,na),z(L,P,U,ka,ea,na)):L.point=P}else z(L,P,U,ka,ea,na)}function z(L,P,U,ka,ea,na){var ia=(U+ea)*0.5,ja=(ka+na)*0.5,ma=P.x>=ia,Ca=P.y>=ja,Fa=(Ca<<1)+ma;L.leaf=false;L=L.nodes[Fa]||(L.nodes[Fa]={leaf:true,nodes:[],point:null});ma?
U=ia:ea=ia;Ca?ka=ja:na=ja;t(L,P,U,ka,ea,na)}var x,C=-1,M=a.length;M&&isNaN(a[0].x)&&(a=a.map(Oe));if(arguments.length<5)if(arguments.length===3){q=p=j;j=e}else{e=j=Infinity;for(p=q=-Infinity;++C<M;){x=a[C];x.x<e&&(e=x.x);x.y<j&&(j=x.y);x.x>p&&(p=x.x);x.y>q&&(q=x.y)}x=p-e;C=q-j;x>C?q=j+x:p=e+C}var T={leaf:true,nodes:[],point:null};return T.add=function(L){t(T,L,e,j,p,q)},T.visit=function(L){vd(L,T,e,j,p,q)},a.forEach(T.add),T};d3.time={};var Xb=Date,Qd=["Sunday","Monday","Tuesday","Wednesday","Thursday",
"Friday","Saturday"];id.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},
valueOf:function(){return this._.valueOf()},setDate:function(){Nc.setUTCDate.apply(this._,arguments)},setDay:function(){Nc.setUTCDay.apply(this._,arguments)},setFullYear:function(){Nc.setUTCFullYear.apply(this._,arguments)},setHours:function(){Nc.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Nc.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Nc.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Nc.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Nc.setUTCSeconds.apply(this._,
arguments)},setTime:function(){Nc.setTime.apply(this._,arguments)}};var Nc=Date.prototype,Ee=Qd.map(te),Rd=["January","February","March","April","May","June","July","August","September","October","November","December"],fe=Rd.map(te);d3.time.format=function(a){function e(p){for(var q=[],t=-1,z=0,x,C;++t<j;)a.charCodeAt(t)==37&&(q.push(a.substring(z,t),(C=Sd[x=a.charAt(++t)])?C(p):x),z=t+1);return q.push(a.substring(z,t)),q.join("")}var j=a.length;return e.parse=function(p){var q={y:1900,m:0,d:1,H:0,
M:0,S:0,L:0};if(Hd(q,a,p,0)!=p.length)return null;"p"in q&&(q.H=q.H%12+q.p*12);p=new Xb;return p.setFullYear(q.y,q.m,q.d),p.setHours(q.H,q.M,q.S,q.L),p},e.toString=function(){return a},e};var uc=d3.format("02d"),Fe=d3.format("03d"),pf=d3.format("04d"),qf=d3.format("2d"),Ge=Id(Qd),He=Id(Ee),Ie=Id(Rd),rf=ue(Rd),Je=Id(fe),sf=ue(fe),Sd={a:function(a){return Ee[a.getDay()]},A:function(a){return Qd[a.getDay()]},b:function(a){return fe[a.getMonth()]},B:function(a){return Rd[a.getMonth()]},c:d3.time.format("%a %b %e %H:%M:%S %Y"),
d:function(a){return uc(a.getDate())},e:function(a){return qf(a.getDate())},H:function(a){return uc(a.getHours())},I:function(a){return uc(a.getHours()%12||12)},j:function(a){return Fe(1+d3.time.dayOfYear(a))},L:function(a){return Fe(a.getMilliseconds())},m:function(a){return uc(a.getMonth()+1)},M:function(a){return uc(a.getMinutes())},p:function(a){return a.getHours()>=12?"PM":"AM"},S:function(a){return uc(a.getSeconds())},U:function(a){return uc(d3.time.sundayOfYear(a))},w:function(a){return a.getDay()},
W:function(a){return uc(d3.time.mondayOfYear(a))},x:d3.time.format("%m/%d/%y"),X:d3.time.format("%H:%M:%S"),y:function(a){return uc(a.getFullYear()%100)},Y:function(a){return pf(a.getFullYear()%1E4)},Z:function(a){a=a.getTimezoneOffset();var e=Math.abs(a)%60;return(a>0?"-":"+")+uc(~~(Math.abs(a)/60))+uc(e)},"%":function(){return"%"}},Pe={a:function(a,e,j){He.lastIndex=0;return(a=He.exec(e.substring(j)))?j+a[0].length:-1},A:function(a,e,j){Ge.lastIndex=0;return(a=Ge.exec(e.substring(j)))?j+a[0].length:
-1},b:function(a,e,j){Je.lastIndex=0;return(e=Je.exec(e.substring(j)))?(a.m=sf.get(e[0].toLowerCase()),j+e[0].length):-1},B:function(a,e,j){Ie.lastIndex=0;return(e=Ie.exec(e.substring(j)))?(a.m=rf.get(e[0].toLowerCase()),j+e[0].length):-1},c:function(a,e,j){return Hd(a,Sd.c.toString(),e,j)},d:ve,e:ve,H:we,I:we,L:function(a,e,j){Wb.lastIndex=0;return(e=Wb.exec(e.substring(j,j+3)))?(a.L=+e[0],j+e[0].length):-1},m:function(a,e,j){Wb.lastIndex=0;return(e=Wb.exec(e.substring(j,j+2)))?(a.m=e[0]-1,j+e[0].length):
-1},M:function(a,e,j){Wb.lastIndex=0;return(e=Wb.exec(e.substring(j,j+2)))?(a.M=+e[0],j+e[0].length):-1},p:function(a,e,j){e=tf.get(e.substring(j,j+=2).toLowerCase());return e==null?-1:(a.p=e,j)},S:function(a,e,j){Wb.lastIndex=0;return(e=Wb.exec(e.substring(j,j+2)))?(a.S=+e[0],j+e[0].length):-1},x:function(a,e,j){return Hd(a,Sd.x.toString(),e,j)},X:function(a,e,j){return Hd(a,Sd.X.toString(),e,j)},y:function(a,e,j){Wb.lastIndex=0;return(e=Wb.exec(e.substring(j,j+2)))?(a.y=+e[0]+(+e[0]>68?1900:2E3),
j+e[0].length):-1},Y:function(a,e,j){Wb.lastIndex=0;return(e=Wb.exec(e.substring(j,j+4)))?(a.y=+e[0],j+e[0].length):-1}},Wb=/^\s*\d+/,tf=d3.map({am:0,pm:1});d3.time.format.utc=function(a){function e(p){try{Xb=id;var q=new Xb;return q._=p,j(q)}finally{Xb=Date}}var j=d3.time.format(a);return e.parse=function(p){try{Xb=id;var q=j.parse(p);return q&&q._}finally{Xb=Date}},e.toString=j.toString,e};Lb=d3.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");d3.time.format.iso=Date.prototype.toISOString?Zd:Lb;Zd.parse=
function(a){a=new Date(a);return isNaN(a)?null:a};Zd.toString=Lb.toString;d3.time.second=jd(function(a){return new Xb(Math.floor(a/1E3)*1E3)},function(a,e){a.setTime(a.getTime()+Math.floor(e)*1E3)},function(a){return a.getSeconds()});d3.time.seconds=d3.time.second.range;d3.time.seconds.utc=d3.time.second.utc.range;d3.time.minute=jd(function(a){return new Xb(Math.floor(a/6E4)*6E4)},function(a,e){a.setTime(a.getTime()+Math.floor(e)*6E4)},function(a){return a.getMinutes()});d3.time.minutes=d3.time.minute.range;
d3.time.minutes.utc=d3.time.minute.utc.range;d3.time.hour=jd(function(a){var e=a.getTimezoneOffset()/60;return new Xb((Math.floor(a/36E5-e)+e)*36E5)},function(a,e){a.setTime(a.getTime()+Math.floor(e)*36E5)},function(a){return a.getHours()});d3.time.hours=d3.time.hour.range;d3.time.hours.utc=d3.time.hour.utc.range;d3.time.day=jd(function(a){var e=new Xb(1970,0);return e.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),e},function(a,e){a.setDate(a.getDate()+e)},function(a){return a.getDate()-1});
d3.time.days=d3.time.day.range;d3.time.days.utc=d3.time.day.utc.range;d3.time.dayOfYear=function(a){var e=d3.time.year(a);return Math.floor((a-e-(a.getTimezoneOffset()-e.getTimezoneOffset())*6E4)/864E5)};Qd.forEach(function(a,e){a=a.toLowerCase();e=7-e;var j=d3.time[a]=jd(function(p){return(p=d3.time.day(p)).setDate(p.getDate()-(p.getDay()+e)%7),p},function(p,q){p.setDate(p.getDate()+Math.floor(q)*7)},function(p){var q=d3.time.year(p).getDay();return Math.floor((d3.time.dayOfYear(p)+(q+e)%7)/7)-(q!==
e)});d3.time[a+"s"]=j.range;d3.time[a+"s"].utc=j.utc.range;d3.time[a+"OfYear"]=function(p){var q=d3.time.year(p).getDay();return Math.floor((d3.time.dayOfYear(p)+(q+e)%7)/7)}});d3.time.week=d3.time.sunday;d3.time.weeks=d3.time.sunday.range;d3.time.weeks.utc=d3.time.sunday.utc.range;d3.time.weekOfYear=d3.time.sundayOfYear;d3.time.month=jd(function(a){return a=d3.time.day(a),a.setDate(1),a},function(a,e){a.setMonth(a.getMonth()+e)},function(a){return a.getMonth()});d3.time.months=d3.time.month.range;
d3.time.months.utc=d3.time.month.utc.range;d3.time.year=jd(function(a){return a=d3.time.day(a),a.setMonth(0,1),a},function(a,e){a.setFullYear(a.getFullYear()+e)},function(a){return a.getFullYear()});d3.time.years=d3.time.year.range;d3.time.years.utc=d3.time.year.utc.range;var Kd=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],ge=[[d3.time.second,1],[d3.time.second,5],[d3.time.second,15],[d3.time.second,30],[d3.time.minute,1],[d3.time.minute,5],
[d3.time.minute,15],[d3.time.minute,30],[d3.time.hour,1],[d3.time.hour,3],[d3.time.hour,6],[d3.time.hour,12],[d3.time.day,1],[d3.time.day,2],[d3.time.week,1],[d3.time.month,1],[d3.time.month,3],[d3.time.year,1]];Lb=[[d3.time.format("%Y"),function(){return true}],[d3.time.format("%B"),function(a){return a.getMonth()}],[d3.time.format("%b %d"),function(a){return a.getDate()!=1}],[d3.time.format("%a %d"),function(a){return a.getDay()&&a.getDate()!=1}],[d3.time.format("%I %p"),function(a){return a.getHours()}],
[d3.time.format("%I:%M"),function(a){return a.getMinutes()}],[d3.time.format(":%S"),function(a){return a.getSeconds()}],[d3.time.format(".%L"),function(a){return a.getMilliseconds()}]];var Ke=d3.scale.linear(),uf=xe(Lb);ge.year=function(a,e){return Ke.domain(a.map(Qe)).ticks(e).map(be)};d3.time.scale=function(){return $d(d3.scale.linear(),ge,uf)};var Le=ge.map(function(a){return[a[0].utc,a[1]]});Lb=[[d3.time.format.utc("%Y"),function(){return true}],[d3.time.format.utc("%B"),function(a){return a.getUTCMonth()}],
[d3.time.format.utc("%b %d"),function(a){return a.getUTCDate()!=1}],[d3.time.format.utc("%a %d"),function(a){return a.getUTCDay()&&a.getUTCDate()!=1}],[d3.time.format.utc("%I %p"),function(a){return a.getUTCHours()}],[d3.time.format.utc("%I:%M"),function(a){return a.getUTCMinutes()}],[d3.time.format.utc(":%S"),function(a){return a.getUTCSeconds()}],[d3.time.format.utc(".%L"),function(a){return a.getUTCMilliseconds()}]];var vf=xe(Lb);Le.year=function(a,e){return Ke.domain(a.map(Re)).ticks(e).map(ce)};
d3.time.scale.utc=function(){return $d(d3.scale.linear(),Le,vf)}})();(function(o,f){function l(k){var n=Ta[k]={},B,E;k=k.split(/\s+/);B=0;for(E=k.length;B<E;B++)n[k[B]]=true;return n}function i(k,n,B){if(B===f&&k.nodeType===1){B="data-"+n.replace(Ga,"-$1").toLowerCase();B=k.getAttribute(B);if(typeof B==="string"){try{B=B==="true"?true:B==="false"?false:B==="null"?null:r.isNumeric(B)?parseFloat(B):Ja.test(B)?r.parseJSON(B):B}catch(E){}r.data(k,n,B)}else B=f}return B}function g(k){for(var n in k)if(!(n==="data"&&r.isEmptyObject(k[n])))if(n!=="toJSON")return false;return true}
function c(k,n,B){var E=n+"defer",H=n+"queue",N=n+"mark",W=r._data(k,E);if(W&&(B==="queue"||!r._data(k,H))&&(B==="mark"||!r._data(k,N)))setTimeout(function(){if(!r._data(k,H)&&!r._data(k,N)){r.removeData(k,E,true);W.fire()}},0)}function d(){return false}function b(){return true}function h(k,n,B){n=n||0;if(r.isFunction(n))return r.grep(k,function(H,N){return!!n.call(H,N,H)===B});else if(n.nodeType)return r.grep(k,function(H){return H===n===B});else if(typeof n==="string"){var E=r.grep(k,function(H){return H.nodeType===
1});if(xb.test(n))return r.filter(n,E,!B);else n=r.filter(n,E)}return r.grep(k,function(H){return r.inArray(H,n)>=0===B})}function m(k){var n=pc.split("|");k=k.createDocumentFragment();if(k.createElement)for(;n.length;)k.createElement(n.pop());return k}function v(k,n){if(!(n.nodeType!==1||!r.hasData(k))){var B,E,H;E=r._data(k);var N=r._data(n,E),W=E.events;if(W){delete N.handle;N.events={};for(B in W){E=0;for(H=W[B].length;E<H;E++)r.event.add(n,B+(W[B][E].namespace?".":"")+W[B][E].namespace,W[B][E],
W[B][E].data)}}if(N.data)N.data=r.extend({},N.data)}}function w(k,n){var B;if(n.nodeType===1){n.clearAttributes&&n.clearAttributes();n.mergeAttributes&&n.mergeAttributes(k);B=n.nodeName.toLowerCase();if(B==="object")n.outerHTML=k.outerHTML;else if(B==="input"&&(k.type==="checkbox"||k.type==="radio")){if(k.checked)n.defaultChecked=n.checked=k.checked;if(n.value!==k.value)n.value=k.value}else if(B==="option")n.selected=k.defaultSelected;else if(B==="input"||B==="textarea")n.defaultValue=k.defaultValue;
n.removeAttribute(r.expando)}}function s(k){return typeof k.getElementsByTagName!=="undefined"?k.getElementsByTagName("*"):typeof k.querySelectorAll!=="undefined"?k.querySelectorAll("*"):[]}function A(k){if(k.type==="checkbox"||k.type==="radio")k.defaultChecked=k.checked}function D(k){var n=(k.nodeName||"").toLowerCase();if(n==="input")A(k);else n!=="script"&&typeof k.getElementsByTagName!=="undefined"&&r.grep(k.getElementsByTagName("input"),A)}function y(k,n){n.src?r.ajax({url:n.src,async:false,
dataType:"script"}):r.globalEval((n.text||n.textContent||n.innerHTML||"").replace(sd,"/*$0*/"));n.parentNode&&n.parentNode.removeChild(n)}function S(k,n,B){var E=n==="width"?k.offsetWidth:k.offsetHeight,H=n==="width"?Qc:Fc,N=0,W=H.length;if(E>0){if(B!=="border")for(;N<W;N++){B||(E-=parseFloat(r.css(k,"padding"+H[N]))||0);if(B==="margin")E+=parseFloat(r.css(k,B+H[N]))||0;else E-=parseFloat(r.css(k,"border"+H[N]+"Width"))||0}return E+"px"}E=bc(k,n,n);if(E<0||E==null)E=k.style[n]||0;E=parseFloat(E)||
0;if(B)for(;N<W;N++){E+=parseFloat(r.css(k,"padding"+H[N]))||0;if(B!=="padding")E+=parseFloat(r.css(k,"border"+H[N]+"Width"))||0;if(B==="margin")E+=parseFloat(r.css(k,B+H[N]))||0}return E+"px"}function O(k){return function(n,B){if(typeof n!=="string"){B=n;n="*"}if(r.isFunction(B))for(var E=n.toLowerCase().split(Ib),H=0,N=E.length,W,da;H<N;H++){W=E[H];if(da=/^\+/.test(W))W=W.substr(1)||"*";W=k[W]=k[W]||[];W[da?"unshift":"push"](B)}}}function G(k,n,B,E,H,N){H=H||n.dataTypes[0];N=N||{};N[H]=true;H=k[H];
for(var W=0,da=H?H.length:0,ha=k===zc,ya;W<da&&(ha||!ya);W++){ya=H[W](n,B,E);if(typeof ya==="string")if(!ha||N[ya])ya=f;else{n.dataTypes.unshift(ya);ya=G(k,n,B,E,ya,N)}}if((ha||!ya)&&!N["*"])ya=G(k,n,B,E,"*",N);return ya}function X(k,n){var B,E,H=r.ajaxSettings.flatOptions||{};for(B in n)if(n[B]!==f)(H[B]?k:E||(E={}))[B]=n[B];E&&r.extend(true,k,E)}function xa(k,n,B,E){if(r.isArray(n))r.each(n,function(N,W){B||xc.test(k)?E(k,W):xa(k+"["+(typeof W==="object"||r.isArray(W)?N:"")+"]",W,B,E)});else if(!B&&
n!=null&&typeof n==="object")for(var H in n)xa(k+"["+H+"]",n[H],B,E);else E(k,n)}function $a(){try{return new o.XMLHttpRequest}catch(k){}}function eb(){setTimeout(ub,0);return Xc=r.now()}function ub(){Xc=f}function la(k,n){var B={};r.each(Mc.concat.apply([],Mc.slice(0,n)),function(){B[this]=k});return B}function Qa(k){if(!Lc[k]){var n=I.body,B=r("<"+k+">").appendTo(n),E=B.css("display");B.remove();if(E==="none"||E===""){if(!Jb){Jb=I.createElement("iframe");Jb.frameBorder=Jb.width=Jb.height=0}n.appendChild(Jb);
if(!cc||!Jb.createElement){cc=(Jb.contentWindow||Jb.contentDocument).document;cc.write((I.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>");cc.close()}B=cc.createElement(k);cc.body.appendChild(B);E=r.css(B,"display");n.removeChild(Jb)}Lc[k]=E}return Lc[k]}function K(k){return r.isWindow(k)?k:k.nodeType===9?k.defaultView||k.parentWindow:false}var I=o.document,aa=o.navigator,sa=o.location,r=function(){function k(){if(!n.isReady){try{I.documentElement.doScroll("left")}catch(ca){setTimeout(k,
1);return}n.ready()}}var n=function(ca,Ba){return new n.fn.init(ca,Ba,H)},B=o.jQuery,E=o.$,H,N=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,W=/\S/,da=/^\s+/,ha=/\s+$/,ya=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,Ma=/^[\],:{}\s]*$/,Aa=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,Ua=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Oa=/(?:^|:|,)(?:\s*\[)+/g,gb=/(webkit)[ \/]([\w.]+)/,ib=/(opera)(?:.*version)?[ \/]([\w.]+)/,jb=/(msie) ([\w.]+)/,lb=/(mozilla)(?:.*? rv:([\w.]+))?/,Nb=/-([a-z]|[0-9])/ig,Ob=
/^-ms-/,fb=function(ca,Ba){return(Ba+"").toUpperCase()},Kb=aa.userAgent,R,Y,oa=Object.prototype.toString,ta=Object.prototype.hasOwnProperty,wa=Array.prototype.push,Da=Array.prototype.slice,Wa=String.prototype.trim,Ka=Array.prototype.indexOf,hb={};n.fn=n.prototype={constructor:n,init:function(ca,Ba,Na){var Ia;if(!ca)return this;if(ca.nodeType){this.context=this[0]=ca;this.length=1;return this}if(ca==="body"&&!Ba&&I.body){this.context=I;this[0]=I.body;this.selector=ca;this.length=1;return this}if(typeof ca===
"string")if((Ia=ca.charAt(0)==="<"&&ca.charAt(ca.length-1)===">"&&ca.length>=3?[null,ca,null]:N.exec(ca))&&(Ia[1]||!Ba))if(Ia[1]){Na=(Ba=Ba instanceof n?Ba[0]:Ba)?Ba.ownerDocument||Ba:I;if(ca=ya.exec(ca))if(n.isPlainObject(Ba)){ca=[I.createElement(ca[1])];n.fn.attr.call(ca,Ba,true)}else ca=[Na.createElement(ca[1])];else{ca=n.buildFragment([Ia[1]],[Na]);ca=(ca.cacheable?n.clone(ca.fragment):ca.fragment).childNodes}return n.merge(this,ca)}else{if((Ba=I.getElementById(Ia[2]))&&Ba.parentNode){if(Ba.id!==
Ia[2])return Na.find(ca);this.length=1;this[0]=Ba}this.context=I;this.selector=ca;return this}else return!Ba||Ba.jquery?(Ba||Na).find(ca):this.constructor(Ba).find(ca);else if(n.isFunction(ca))return Na.ready(ca);if(ca.selector!==f){this.selector=ca.selector;this.context=ca.context}return n.makeArray(ca,this)},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return Da.call(this,0)},get:function(ca){return ca==null?this.toArray():ca<0?this[this.length+ca]:
this[ca]},pushStack:function(ca,Ba,Na){var Ia=this.constructor();n.isArray(ca)?wa.apply(Ia,ca):n.merge(Ia,ca);Ia.prevObject=this;Ia.context=this.context;if(Ba==="find")Ia.selector=this.selector+(this.selector?" ":"")+Na;else if(Ba)Ia.selector=this.selector+"."+Ba+"("+Na+")";return Ia},each:function(ca,Ba){return n.each(this,ca,Ba)},ready:function(ca){n.bindReady();R.add(ca);return this},eq:function(ca){ca=+ca;return ca===-1?this.slice(ca):this.slice(ca,ca+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},
slice:function(){return this.pushStack(Da.apply(this,arguments),"slice",Da.call(arguments).join(","))},map:function(ca){return this.pushStack(n.map(this,function(Ba,Na){return ca.call(Ba,Na,Ba)}))},end:function(){return this.prevObject||this.constructor(null)},push:wa,sort:[].sort,splice:[].splice};n.fn.init.prototype=n.fn;n.extend=n.fn.extend=function(){var ca,Ba,Na,Ia,db,u=arguments[0]||{},F=1,J=arguments.length,Q=false;if(typeof u==="boolean"){Q=u;u=arguments[1]||{};F=2}if(typeof u!=="object"&&
!n.isFunction(u))u={};if(J===F){u=this;--F}for(;F<J;F++)if((ca=arguments[F])!=null)for(Ba in ca){Na=u[Ba];Ia=ca[Ba];if(u!==Ia)if(Q&&Ia&&(n.isPlainObject(Ia)||(db=n.isArray(Ia)))){if(db){db=false;Na=Na&&n.isArray(Na)?Na:[]}else Na=Na&&n.isPlainObject(Na)?Na:{};u[Ba]=n.extend(Q,Na,Ia)}else if(Ia!==f)u[Ba]=Ia}return u};n.extend({noConflict:function(ca){if(o.$===n)o.$=E;if(ca&&o.jQuery===n)o.jQuery=B;return n},isReady:false,readyWait:1,holdReady:function(ca){if(ca)n.readyWait++;else n.ready(true)},ready:function(ca){if(ca===
true&&!--n.readyWait||ca!==true&&!n.isReady){if(!I.body)return setTimeout(n.ready,1);n.isReady=true;if(!(ca!==true&&--n.readyWait>0)){R.fireWith(I,[n]);n.fn.trigger&&n(I).trigger("ready").off("ready")}}},bindReady:function(){if(!R){R=n.Callbacks("once memory");if(I.readyState==="complete")return setTimeout(n.ready,1);if(I.addEventListener){I.addEventListener("DOMContentLoaded",Y,false);o.addEventListener("load",n.ready,false)}else if(I.attachEvent){I.attachEvent("onreadystatechange",Y);o.attachEvent("onload",
n.ready);var ca=false;try{ca=o.frameElement==null}catch(Ba){}I.documentElement.doScroll&&ca&&k()}}},isFunction:function(ca){return n.type(ca)==="function"},isArray:Array.isArray||function(ca){return n.type(ca)==="array"},isWindow:function(ca){return ca&&typeof ca==="object"&&"setInterval"in ca},isNumeric:function(ca){return!isNaN(parseFloat(ca))&&isFinite(ca)},type:function(ca){return ca==null?String(ca):hb[oa.call(ca)]||"object"},isPlainObject:function(ca){if(!ca||n.type(ca)!=="object"||ca.nodeType||
n.isWindow(ca))return false;try{if(ca.constructor&&!ta.call(ca,"constructor")&&!ta.call(ca.constructor.prototype,"isPrototypeOf"))return false}catch(Ba){return false}for(var Na in ca);return Na===f||ta.call(ca,Na)},isEmptyObject:function(ca){for(var Ba in ca)return false;return true},error:function(ca){throw Error(ca);},parseJSON:function(ca){if(typeof ca!=="string"||!ca)return null;ca=n.trim(ca);if(o.JSON&&o.JSON.parse)return o.JSON.parse(ca);if(Ma.test(ca.replace(Aa,"@").replace(Ua,"]").replace(Oa,
"")))return(new Function("return "+ca))();n.error("Invalid JSON: "+ca)},parseXML:function(ca){var Ba,Na;try{if(o.DOMParser){Na=new DOMParser;Ba=Na.parseFromString(ca,"text/xml")}else{Ba=new ActiveXObject("Microsoft.XMLDOM");Ba.async="false";Ba.loadXML(ca)}}catch(Ia){Ba=f}if(!Ba||!Ba.documentElement||Ba.getElementsByTagName("parsererror").length)n.error("Invalid XML: "+ca);return Ba},noop:function(){},globalEval:function(ca){if(ca&&W.test(ca))(o.execScript||function(Ba){o.eval.call(o,Ba)})(ca)},camelCase:function(ca){return ca.replace(Ob,
"ms-").replace(Nb,fb)},nodeName:function(ca,Ba){return ca.nodeName&&ca.nodeName.toUpperCase()===Ba.toUpperCase()},each:function(ca,Ba,Na){var Ia,db=0,u=ca.length,F=u===f||n.isFunction(ca);if(Na)if(F)for(Ia in ca){if(Ba.apply(ca[Ia],Na)===false)break}else for(;db<u;){if(Ba.apply(ca[db++],Na)===false)break}else if(F)for(Ia in ca){if(Ba.call(ca[Ia],Ia,ca[Ia])===false)break}else for(;db<u;)if(Ba.call(ca[db],db,ca[db++])===false)break;return ca},trim:Wa?function(ca){return ca==null?"":Wa.call(ca)}:function(ca){return ca==
null?"":ca.toString().replace(da,"").replace(ha,"")},makeArray:function(ca,Ba){var Na=Ba||[];if(ca!=null){var Ia=n.type(ca);ca.length==null||Ia==="string"||Ia==="function"||Ia==="regexp"||n.isWindow(ca)?wa.call(Na,ca):n.merge(Na,ca)}return Na},inArray:function(ca,Ba,Na){var Ia;if(Ba){if(Ka)return Ka.call(Ba,ca,Na);Ia=Ba.length;for(Na=Na?Na<0?Math.max(0,Ia+Na):Na:0;Na<Ia;Na++)if(Na in Ba&&Ba[Na]===ca)return Na}return-1},merge:function(ca,Ba){var Na=ca.length,Ia=0;if(typeof Ba.length==="number")for(var db=
Ba.length;Ia<db;Ia++)ca[Na++]=Ba[Ia];else for(;Ba[Ia]!==f;)ca[Na++]=Ba[Ia++];ca.length=Na;return ca},grep:function(ca,Ba,Na){var Ia=[],db;Na=!!Na;for(var u=0,F=ca.length;u<F;u++){db=!!Ba(ca[u],u);Na!==db&&Ia.push(ca[u])}return Ia},map:function(ca,Ba,Na){var Ia,db,u=[],F=0,J=ca.length;if(ca instanceof n||J!==f&&typeof J==="number"&&(J>0&&ca[0]&&ca[J-1]||J===0||n.isArray(ca)))for(;F<J;F++){Ia=Ba(ca[F],F,Na);if(Ia!=null)u[u.length]=Ia}else for(db in ca){Ia=Ba(ca[db],db,Na);if(Ia!=null)u[u.length]=Ia}return u.concat.apply([],
u)},guid:1,proxy:function(ca,Ba){if(typeof Ba==="string"){var Na=ca[Ba];Ba=ca;ca=Na}if(!n.isFunction(ca))return f;var Ia=Da.call(arguments,2);Na=function(){return ca.apply(Ba,Ia.concat(Da.call(arguments)))};Na.guid=ca.guid=ca.guid||Na.guid||n.guid++;return Na},access:function(ca,Ba,Na,Ia,db,u){var F=ca.length;if(typeof Ba==="object"){for(var J in Ba)n.access(ca,J,Ba[J],Ia,db,Na);return ca}if(Na!==f){Ia=!u&&Ia&&n.isFunction(Na);for(J=0;J<F;J++)db(ca[J],Ba,Ia?Na.call(ca[J],J,db(ca[J],Ba)):Na,u);return ca}return F?
db(ca[0],Ba):f},now:function(){return(new Date).getTime()},uaMatch:function(ca){ca=ca.toLowerCase();ca=gb.exec(ca)||ib.exec(ca)||jb.exec(ca)||ca.indexOf("compatible")<0&&lb.exec(ca)||[];return{browser:ca[1]||"",version:ca[2]||"0"}},sub:function(){function ca(Na,Ia){return new ca.fn.init(Na,Ia)}n.extend(true,ca,this);ca.superclass=this;ca.fn=ca.prototype=this();ca.fn.constructor=ca;ca.sub=this.sub;ca.fn.init=function(Na,Ia){if(Ia&&Ia instanceof n&&!(Ia instanceof ca))Ia=ca(Ia);return n.fn.init.call(this,
Na,Ia,Ba)};ca.fn.init.prototype=ca.fn;var Ba=ca(I);return ca},browser:{}});n.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(ca,Ba){hb["[object "+Ba+"]"]=Ba.toLowerCase()});Kb=n.uaMatch(Kb);if(Kb.browser){n.browser[Kb.browser]=true;n.browser.version=Kb.version}if(n.browser.webkit)n.browser.safari=true;if(W.test("\u00a0")){da=/^[\s\xA0]+/;ha=/[\s\xA0]+$/}H=n(I);if(I.addEventListener)Y=function(){I.removeEventListener("DOMContentLoaded",Y,false);n.ready()};else if(I.attachEvent)Y=
function(){if(I.readyState==="complete"){I.detachEvent("onreadystatechange",Y);n.ready()}};return n}(),Ta={};r.Callbacks=function(k){k=k?Ta[k]||l(k):{};var n=[],B=[],E,H,N,W,da,ha=function(Aa){var Ua,Oa,gb,ib;Ua=0;for(Oa=Aa.length;Ua<Oa;Ua++){gb=Aa[Ua];ib=r.type(gb);if(ib==="array")ha(gb);else if(ib==="function")if(!k.unique||!Ma.has(gb))n.push(gb)}},ya=function(Aa,Ua){Ua=Ua||[];E=!k.memory||[Aa,Ua];H=true;da=N||0;N=0;for(W=n.length;n&&da<W;da++)if(n[da].apply(Aa,Ua)===false&&k.stopOnFalse){E=true;
break}H=false;if(n)if(k.once)if(E===true)Ma.disable();else n=[];else if(B&&B.length){E=B.shift();Ma.fireWith(E[0],E[1])}},Ma={add:function(){if(n){var Aa=n.length;ha(arguments);if(H)W=n.length;else if(E&&E!==true){N=Aa;ya(E[0],E[1])}}return this},remove:function(){if(n)for(var Aa=arguments,Ua=0,Oa=Aa.length;Ua<Oa;Ua++)for(var gb=0;gb<n.length;gb++)if(Aa[Ua]===n[gb]){if(H)if(gb<=W){W--;gb<=da&&da--}n.splice(gb--,1);if(k.unique)break}return this},has:function(Aa){if(n)for(var Ua=0,Oa=n.length;Ua<Oa;Ua++)if(Aa===
n[Ua])return true;return false},empty:function(){n=[];return this},disable:function(){n=B=E=f;return this},disabled:function(){return!n},lock:function(){B=f;if(!E||E===true)Ma.disable();return this},locked:function(){return!B},fireWith:function(Aa,Ua){if(B)if(H)k.once||B.push([Aa,Ua]);else k.once&&E||ya(Aa,Ua);return this},fire:function(){Ma.fireWith(this,arguments);return this},fired:function(){return!!E}};return Ma};var qa=[].slice;r.extend({Deferred:function(k){var n=r.Callbacks("once memory"),
B=r.Callbacks("once memory"),E=r.Callbacks("memory"),H="pending",N={resolve:n,reject:B,notify:E},W={done:n.add,fail:B.add,progress:E.add,state:function(){return H},isResolved:n.fired,isRejected:B.fired,then:function(ya,Ma,Aa){da.done(ya).fail(Ma).progress(Aa);return this},always:function(){da.done.apply(da,arguments).fail.apply(da,arguments);return this},pipe:function(ya,Ma,Aa){return r.Deferred(function(Ua){r.each({done:[ya,"resolve"],fail:[Ma,"reject"],progress:[Aa,"notify"]},function(Oa,gb){var ib=
gb[0],jb=gb[1],lb;if(r.isFunction(ib))da[Oa](function(){if((lb=ib.apply(this,arguments))&&r.isFunction(lb.promise))lb.promise().then(Ua.resolve,Ua.reject,Ua.notify);else Ua[jb+"With"](this===da?Ua:this,[lb])});else da[Oa](Ua[jb])})}).promise()},promise:function(ya){if(ya==null)ya=W;else for(var Ma in W)ya[Ma]=W[Ma];return ya}},da=W.promise({}),ha;for(ha in N){da[ha]=N[ha].fire;da[ha+"With"]=N[ha].fireWith}da.done(function(){H="resolved"},B.disable,E.lock).fail(function(){H="rejected"},n.disable,E.lock);
k&&k.call(da,da);return da},when:function(k){function n(Ma){return function(Aa){E[Ma]=arguments.length>1?qa.call(arguments,0):Aa;--da||ha.resolveWith(ha,E)}}function B(Ma){return function(Aa){W[Ma]=arguments.length>1?qa.call(arguments,0):Aa;ha.notifyWith(ya,W)}}var E=qa.call(arguments,0),H=0,N=E.length,W=Array(N),da=N,ha=N<=1&&k&&r.isFunction(k.promise)?k:r.Deferred(),ya=ha.promise();if(N>1){for(;H<N;H++)if(E[H]&&E[H].promise&&r.isFunction(E[H].promise))E[H].promise().then(n(H),ha.reject,B(H));else--da;
da||ha.resolveWith(ha,E)}else if(ha!==k)ha.resolveWith(ha,N?[k]:[]);return ya}});r.support=function(){var k,n,B,E,H,N,W,da,ha=I.createElement("div");ha.setAttribute("className","t");ha.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";n=ha.getElementsByTagName("*");B=ha.getElementsByTagName("a")[0];if(!n||!n.length||!B)return{};E=I.createElement("select");H=E.appendChild(I.createElement("option"));n=ha.getElementsByTagName("input")[0];
k={leadingWhitespace:ha.firstChild.nodeType===3,tbody:!ha.getElementsByTagName("tbody").length,htmlSerialize:!!ha.getElementsByTagName("link").length,style:/top/.test(B.getAttribute("style")),hrefNormalized:B.getAttribute("href")==="/a",opacity:/^0.55/.test(B.style.opacity),cssFloat:!!B.style.cssFloat,checkOn:n.value==="on",optSelected:H.selected,getSetAttribute:ha.className!=="t",enctype:!!I.createElement("form").enctype,html5Clone:I.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",
submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true};n.checked=true;k.noCloneChecked=n.cloneNode(true).checked;E.disabled=true;k.optDisabled=!H.disabled;try{delete ha.test}catch(ya){k.deleteExpando=false}if(!ha.addEventListener&&ha.attachEvent&&ha.fireEvent){ha.attachEvent("onclick",function(){k.noCloneEvent=false});ha.cloneNode(true).fireEvent("onclick")}n=I.createElement("input");
n.value="t";n.setAttribute("type","radio");k.radioValue=n.value==="t";n.setAttribute("checked","checked");ha.appendChild(n);B=I.createDocumentFragment();B.appendChild(ha.lastChild);k.checkClone=B.cloneNode(true).cloneNode(true).lastChild.checked;k.appendChecked=n.checked;B.removeChild(n);B.appendChild(ha);ha.innerHTML="";if(o.getComputedStyle){n=I.createElement("div");n.style.width="0";n.style.marginRight="0";ha.style.width="2px";ha.appendChild(n);k.reliableMarginRight=(parseInt((o.getComputedStyle(n,
null)||{marginRight:0}).marginRight,10)||0)===0}if(ha.attachEvent)for(W in{submit:1,change:1,focusin:1}){n="on"+W;da=n in ha;if(!da){ha.setAttribute(n,"return;");da=typeof ha[n]==="function"}k[W+"Bubbles"]=da}B.removeChild(ha);B=E=H=n=ha=n=null;r(function(){var Ma,Aa,Ua,Oa,gb=I.getElementsByTagName("body")[0];if(gb){Ma=I.createElement("div");Ma.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px";gb.insertBefore(Ma,gb.firstChild);ha=I.createElement("div");
Ma.appendChild(ha);ha.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";N=ha.getElementsByTagName("td");da=N[0].offsetHeight===0;N[0].style.display="";N[1].style.display="none";k.reliableHiddenOffsets=da&&N[0].offsetHeight===0;ha.innerHTML="";ha.style.width=ha.style.paddingLeft="1px";r.boxModel=k.boxModel=ha.offsetWidth===2;if(typeof ha.style.zoom!=="undefined"){ha.style.display="inline";ha.style.zoom=1;k.inlineBlockNeedsLayout=ha.offsetWidth===2;ha.style.display=
"";ha.innerHTML="<div style='width:4px;'></div>";k.shrinkWrapBlocks=ha.offsetWidth!==2}ha.style.cssText="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;visibility:hidden;border:0;";ha.innerHTML="<div style='position:absolute;top:0;left:0;width:1px;height:1px;margin:0;border:5px solid #000;padding:0;'><div></div></div><table style='position:absolute;top:0;left:0;width:1px;height:1px;margin:0;border:5px solid #000;padding:0;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";
Aa=ha.firstChild;Ua=Aa.firstChild;Oa={doesNotAddBorder:Ua.offsetTop!==5,doesAddBorderForTableAndCells:Aa.nextSibling.firstChild.firstChild.offsetTop===5};Ua.style.position="fixed";Ua.style.top="20px";Oa.fixedPosition=Ua.offsetTop===20||Ua.offsetTop===15;Ua.style.position=Ua.style.top="";Aa.style.overflow="hidden";Aa.style.position="relative";Oa.subtractsBorderForOverflowNotVisible=Ua.offsetTop===-5;Oa.doesNotIncludeMarginInBodyOffset=gb.offsetTop!==1;gb.removeChild(Ma);ha=null;r.extend(k,Oa)}});return k}();
var Ja=/^(?:\{.*\}|\[.*\])$/,Ga=/([A-Z])/g;r.extend({cache:{},uuid:0,expando:"jQuery"+(r.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(k){k=k.nodeType?r.cache[k[r.expando]]:k[r.expando];return!!k&&!g(k)},data:function(k,n,B,E){if(r.acceptData(k)){var H;H=r.expando;var N=typeof n==="string",W=k.nodeType,da=W?r.cache:k,ha=W?k[H]:k[H]&&H,ya=n==="events";if(!((!ha||!da[ha]||!ya&&!E&&!da[ha].data)&&N&&B===
f)){if(!ha)if(W)k[H]=ha=++r.uuid;else ha=H;if(!da[ha]){da[ha]={};if(!W)da[ha].toJSON=r.noop}if(typeof n==="object"||typeof n==="function")if(E)da[ha]=r.extend(da[ha],n);else da[ha].data=r.extend(da[ha].data,n);H=k=da[ha];if(!E){if(!k.data)k.data={};k=k.data}if(B!==f)k[r.camelCase(n)]=B;if(ya&&!k[n])return H.events;if(N){B=k[n];if(B==null)B=k[r.camelCase(n)]}else B=k;return B}}},removeData:function(k,n,B){if(r.acceptData(k)){var E,H,N,W=r.expando,da=k.nodeType,ha=da?r.cache:k,ya=da?k[W]:W;if(ha[ya]){if(n)if(E=
B?ha[ya]:ha[ya].data){if(!r.isArray(n))if(n in E)n=[n];else{n=r.camelCase(n);n=n in E?[n]:n.split(" ")}H=0;for(N=n.length;H<N;H++)delete E[n[H]];if(!(B?g:r.isEmptyObject)(E))return}if(!B){delete ha[ya].data;if(!g(ha[ya]))return}if(r.support.deleteExpando||!ha.setInterval)delete ha[ya];else ha[ya]=null;if(da)if(r.support.deleteExpando)delete k[W];else if(k.removeAttribute)k.removeAttribute(W);else k[W]=null}}},_data:function(k,n,B){return r.data(k,n,B,true)},acceptData:function(k){if(k.nodeName){var n=
r.noData[k.nodeName.toLowerCase()];if(n)return!(n===true||k.getAttribute("classid")!==n)}return true}});r.fn.extend({data:function(k,n){var B,E,H,N=null;if(typeof k==="undefined"){if(this.length){N=r.data(this[0]);if(this[0].nodeType===1&&!r._data(this[0],"parsedAttrs")){E=this[0].attributes;for(var W=0,da=E.length;W<da;W++){H=E[W].name;if(H.indexOf("data-")===0){H=r.camelCase(H.substring(5));i(this[0],H,N[H])}}r._data(this[0],"parsedAttrs",true)}}return N}else if(typeof k==="object")return this.each(function(){r.data(this,
k)});B=k.split(".");B[1]=B[1]?"."+B[1]:"";if(n===f){N=this.triggerHandler("getData"+B[1]+"!",[B[0]]);if(N===f&&this.length){N=r.data(this[0],k);N=i(this[0],k,N)}return N===f&&B[1]?this.data(B[0]):N}else return this.each(function(){var ha=r(this),ya=[B[0],n];ha.triggerHandler("setData"+B[1]+"!",ya);r.data(this,k,n);ha.triggerHandler("changeData"+B[1]+"!",ya)})},removeData:function(k){return this.each(function(){r.removeData(this,k)})}});r.extend({_mark:function(k,n){if(k){n=(n||"fx")+"mark";r._data(k,
n,(r._data(k,n)||0)+1)}},_unmark:function(k,n,B){if(k!==true){B=n;n=k;k=false}if(n){B=B||"fx";var E=B+"mark";if(k=k?0:(r._data(n,E)||1)-1)r._data(n,E,k);else{r.removeData(n,E,true);c(n,B,"mark")}}},queue:function(k,n,B){var E;if(k){n=(n||"fx")+"queue";E=r._data(k,n);if(B)if(!E||r.isArray(B))E=r._data(k,n,r.makeArray(B));else E.push(B);return E||[]}},dequeue:function(k,n){n=n||"fx";var B=r.queue(k,n),E=B.shift(),H={};if(E==="inprogress")E=B.shift();if(E){n==="fx"&&B.unshift("inprogress");r._data(k,
n+".run",H);E.call(k,function(){r.dequeue(k,n)},H)}if(!B.length){r.removeData(k,n+"queue "+n+".run",true);c(k,n,"queue")}}});r.fn.extend({queue:function(k,n){if(typeof k!=="string"){n=k;k="fx"}if(n===f)return r.queue(this[0],k);return this.each(function(){var B=r.queue(this,k,n);k==="fx"&&B[0]!=="inprogress"&&r.dequeue(this,k)})},dequeue:function(k){return this.each(function(){r.dequeue(this,k)})},delay:function(k,n){k=r.fx?r.fx.speeds[k]||k:k;return this.queue(n||"fx",function(B,E){var H=setTimeout(B,
k);E.stop=function(){clearTimeout(H)}})},clearQueue:function(k){return this.queue(k||"fx",[])},promise:function(k){function n(){--N||B.resolveWith(E,[E])}if(typeof k!=="string")k=f;k=k||"fx";var B=r.Deferred(),E=this,H=E.length,N=1,W=k+"defer",da=k+"queue";k+="mark";for(var ha;H--;)if(ha=r.data(E[H],W,f,true)||(r.data(E[H],da,f,true)||r.data(E[H],k,f,true))&&r.data(E[H],W,r.Callbacks("once memory"),true)){N++;ha.add(n)}n();return B.promise()}});var La=/[\n\t\r]/g,pa=/\s+/,kc=/\r/g,nc=/^(?:button|input)$/i,
gc=/^(?:button|input|object|select|textarea)$/i,Gb=/^a(?:rea)?$/i,Hb=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Sb=r.support.getSetAttribute,mb,Yb,Ab;r.fn.extend({attr:function(k,n){return r.access(this,k,n,true,r.attr)},removeAttr:function(k){return this.each(function(){r.removeAttr(this,k)})},prop:function(k,n){return r.access(this,k,n,true,r.prop)},removeProp:function(k){k=r.propFix[k]||k;return this.each(function(){try{this[k]=
f;delete this[k]}catch(n){}})},addClass:function(k){var n,B,E,H,N,W,da;if(r.isFunction(k))return this.each(function(ha){r(this).addClass(k.call(this,ha,this.className))});if(k&&typeof k==="string"){n=k.split(pa);B=0;for(E=this.length;B<E;B++){H=this[B];if(H.nodeType===1)if(!H.className&&n.length===1)H.className=k;else{N=" "+H.className+" ";W=0;for(da=n.length;W<da;W++)~N.indexOf(" "+n[W]+" ")||(N+=n[W]+" ");H.className=r.trim(N)}}}return this},removeClass:function(k){var n,B,E,H,N,W,da;if(r.isFunction(k))return this.each(function(ha){r(this).removeClass(k.call(this,
ha,this.className))});if(k&&typeof k==="string"||k===f){n=(k||"").split(pa);B=0;for(E=this.length;B<E;B++){H=this[B];if(H.nodeType===1&&H.className)if(k){N=(" "+H.className+" ").replace(La," ");W=0;for(da=n.length;W<da;W++)N=N.replace(" "+n[W]+" "," ");H.className=r.trim(N)}else H.className=""}}return this},toggleClass:function(k,n){var B=typeof k,E=typeof n==="boolean";if(r.isFunction(k))return this.each(function(H){r(this).toggleClass(k.call(this,H,this.className,n),n)});return this.each(function(){if(B===
"string")for(var H,N=0,W=r(this),da=n,ha=k.split(pa);H=ha[N++];){da=E?da:!W.hasClass(H);W[da?"addClass":"removeClass"](H)}else if(B==="undefined"||B==="boolean"){this.className&&r._data(this,"__className__",this.className);this.className=this.className||k===false?"":r._data(this,"__className__")||""}})},hasClass:function(k){k=" "+k+" ";for(var n=0,B=this.length;n<B;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(La," ").indexOf(k)>-1)return true;return false},val:function(k){var n,
B,E,H=this[0];if(arguments.length){E=r.isFunction(k);return this.each(function(N){var W=r(this);if(this.nodeType===1){N=E?k.call(this,N,W.val()):k;if(N==null)N="";else if(typeof N==="number")N+="";else if(r.isArray(N))N=r.map(N,function(da){return da==null?"":da+""});n=r.valHooks[this.nodeName.toLowerCase()]||r.valHooks[this.type];if(!n||!("set"in n)||n.set(this,N,"value")===f)this.value=N}})}else if(H){if((n=r.valHooks[H.nodeName.toLowerCase()]||r.valHooks[H.type])&&"get"in n&&(B=n.get(H,"value"))!==
f)return B;B=H.value;return typeof B==="string"?B.replace(kc,""):B==null?"":B}}});r.extend({valHooks:{option:{get:function(k){var n=k.attributes.value;return!n||n.specified?k.value:k.text}},select:{get:function(k){var n,B,E=k.selectedIndex,H=[],N=k.options,W=k.type==="select-one";if(E<0)return null;k=W?E:0;for(B=W?E+1:N.length;k<B;k++){n=N[k];if(n.selected&&(r.support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!r.nodeName(n.parentNode,"optgroup"))){n=r(n).val();
if(W)return n;H.push(n)}}if(W&&!H.length&&N.length)return r(N[E]).val();return H},set:function(k,n){var B=r.makeArray(n);r(k).find("option").each(function(){this.selected=r.inArray(r(this).val(),B)>=0});if(!B.length)k.selectedIndex=-1;return B}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(k,n,B,E){var H,N,W=k.nodeType;if(!(!k||W===3||W===8||W===2)){if(E&&n in r.attrFn)return r(k)[n](B);if(typeof k.getAttribute==="undefined")return r.prop(k,
n,B);if(E=W!==1||!r.isXMLDoc(k)){n=n.toLowerCase();N=r.attrHooks[n]||(Hb.test(n)?Yb:mb)}if(B!==f)if(B===null)r.removeAttr(k,n);else if(N&&"set"in N&&E&&(H=N.set(k,B,n))!==f)return H;else{k.setAttribute(n,""+B);return B}else if(N&&"get"in N&&E&&(H=N.get(k,n))!==null)return H;else{H=k.getAttribute(n);return H===null?f:H}}},removeAttr:function(k,n){var B,E,H,N,W=0;if(n&&k.nodeType===1){E=n.toLowerCase().split(pa);for(N=E.length;W<N;W++)if(H=E[W]){B=r.propFix[H]||H;r.attr(k,H,"");k.removeAttribute(Sb?
H:B);if(Hb.test(H)&&B in k)k[B]=false}}},attrHooks:{type:{set:function(k,n){if(nc.test(k.nodeName)&&k.parentNode)r.error("type property can't be changed");else if(!r.support.radioValue&&n==="radio"&&r.nodeName(k,"input")){var B=k.value;k.setAttribute("type",n);if(B)k.value=B;return n}}},value:{get:function(k,n){if(mb&&r.nodeName(k,"button"))return mb.get(k,n);return n in k?k.value:null},set:function(k,n,B){if(mb&&r.nodeName(k,"button"))return mb.set(k,n,B);k.value=n}}},propFix:{tabindex:"tabIndex",
readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(k,n,B){var E,H,N=k.nodeType;if(!(!k||N===3||N===8||N===2)){if(N!==1||!r.isXMLDoc(k)){n=r.propFix[n]||n;H=r.propHooks[n]}return B!==f?H&&"set"in H&&(E=H.set(k,B,n))!==f?E:k[n]=B:H&&"get"in H&&(E=H.get(k,n))!==null?E:k[n]}},propHooks:{tabIndex:{get:function(k){var n=
k.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):gc.test(k.nodeName)||Gb.test(k.nodeName)&&k.href?0:f}}}});r.attrHooks.tabindex=r.propHooks.tabIndex;Yb={get:function(k,n){var B,E=r.prop(k,n);return E===true||typeof E!=="boolean"&&(B=k.getAttributeNode(n))&&B.nodeValue!==false?n.toLowerCase():f},set:function(k,n,B){if(n===false)r.removeAttr(k,B);else{n=r.propFix[B]||B;if(n in k)k[n]=true;k.setAttribute(B,B.toLowerCase())}return B}};if(!Sb){Ab={name:true,id:true};mb=r.valHooks.button=
{get:function(k,n){var B;return(B=k.getAttributeNode(n))&&(Ab[n]?B.nodeValue!=="":B.specified)?B.nodeValue:f},set:function(k,n,B){var E=k.getAttributeNode(B);if(!E){E=I.createAttribute(B);k.setAttributeNode(E)}return E.nodeValue=n+""}};r.attrHooks.tabindex.set=mb.set;r.each(["width","height"],function(k,n){r.attrHooks[n]=r.extend(r.attrHooks[n],{set:function(B,E){if(E===""){B.setAttribute(n,"auto");return E}}})});r.attrHooks.contenteditable={get:mb.get,set:function(k,n,B){if(n==="")n="false";mb.set(k,
n,B)}}}r.support.hrefNormalized||r.each(["href","src","width","height"],function(k,n){r.attrHooks[n]=r.extend(r.attrHooks[n],{get:function(B){B=B.getAttribute(n,2);return B===null?f:B}})});if(!r.support.style)r.attrHooks.style={get:function(k){return k.style.cssText.toLowerCase()||f},set:function(k,n){return k.style.cssText=""+n}};if(!r.support.optSelected)r.propHooks.selected=r.extend(r.propHooks.selected,{get:function(){return null}});if(!r.support.enctype)r.propFix.enctype="encoding";r.support.checkOn||
r.each(["radio","checkbox"],function(){r.valHooks[this]={get:function(k){return k.getAttribute("value")===null?"on":k.value}}});r.each(["radio","checkbox"],function(){r.valHooks[this]=r.extend(r.valHooks[this],{set:function(k,n){if(r.isArray(n))return k.checked=r.inArray(r(k).val(),n)>=0}})});var vb=/^(?:textarea|input|select)$/i,vc=/^([^\.]*)?(?:\.(.+))?$/,Bb=/\bhover(\.\S+)?\b/,V=/^key/,ga=/^(?:mouse|contextmenu)|click/,ua=/^(?:focusinfocus|focusoutblur)$/,Za=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,
Ra=function(k){if(k=Za.exec(k)){k[1]=(k[1]||"").toLowerCase();k[3]=k[3]&&RegExp("(?:^|\\s)"+k[3]+"(?:\\s|$)")}return k},Ha=function(k){return r.event.special.hover?k:k.replace(Bb,"mouseenter$1 mouseleave$1")};r.event={add:function(k,n,B,E,H){var N,W,da,ha,ya,Ma,Aa,Ua,Oa;if(!(k.nodeType===3||k.nodeType===8||!n||!B||!(N=r._data(k)))){if(B.handler){Aa=B;B=Aa.handler}if(!B.guid)B.guid=r.guid++;da=N.events;if(!da)N.events=da={};W=N.handle;if(!W){N.handle=W=function(gb){return typeof r!=="undefined"&&(!gb||
r.event.triggered!==gb.type)?r.event.dispatch.apply(W.elem,arguments):f};W.elem=k}n=r.trim(Ha(n)).split(" ");for(N=0;N<n.length;N++){ha=vc.exec(n[N])||[];ya=ha[1];Ma=(ha[2]||"").split(".").sort();Oa=r.event.special[ya]||{};ya=(H?Oa.delegateType:Oa.bindType)||ya;Oa=r.event.special[ya]||{};ha=r.extend({type:ya,origType:ha[1],data:E,handler:B,guid:B.guid,selector:H,quick:Ra(H),namespace:Ma.join(".")},Aa);Ua=da[ya];if(!Ua){Ua=da[ya]=[];Ua.delegateCount=0;if(!Oa.setup||Oa.setup.call(k,E,Ma,W)===false)if(k.addEventListener)k.addEventListener(ya,
W,false);else k.attachEvent&&k.attachEvent("on"+ya,W)}if(Oa.add){Oa.add.call(k,ha);if(!ha.handler.guid)ha.handler.guid=B.guid}H?Ua.splice(Ua.delegateCount++,0,ha):Ua.push(ha);r.event.global[ya]=true}k=null}},global:{},remove:function(k,n,B,E,H){var N=r.hasData(k)&&r._data(k),W,da,ha,ya,Ma,Aa,Ua,Oa,gb,ib;if(N&&(Ua=N.events)){n=r.trim(Ha(n||"")).split(" ");for(W=0;W<n.length;W++){da=vc.exec(n[W])||[];ha=ya=da[1];da=da[2];if(ha){Oa=r.event.special[ha]||{};ha=(E?Oa.delegateType:Oa.bindType)||ha;gb=Ua[ha]||
[];Ma=gb.length;da=da?RegExp("(^|\\.)"+da.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(Aa=0;Aa<gb.length;Aa++){ib=gb[Aa];if((H||ya===ib.origType)&&(!B||B.guid===ib.guid)&&(!da||da.test(ib.namespace))&&(!E||E===ib.selector||E==="**"&&ib.selector)){gb.splice(Aa--,1);ib.selector&&gb.delegateCount--;Oa.remove&&Oa.remove.call(k,ib)}}if(gb.length===0&&Ma!==gb.length){if(!Oa.teardown||Oa.teardown.call(k,da)===false)r.removeEvent(k,ha,N.handle);delete Ua[ha]}}else for(ha in Ua)r.event.remove(k,
ha+n[W],B,E,true)}if(r.isEmptyObject(Ua)){if(n=N.handle)n.elem=null;r.removeData(k,["events","handle"],true)}}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(k,n,B,E){if(!(B&&(B.nodeType===3||B.nodeType===8))){var H=k.type||k,N=[],W,da,ha,ya,Ma;if(!ua.test(H+r.event.triggered)){if(H.indexOf("!")>=0){H=H.slice(0,-1);W=true}if(H.indexOf(".")>=0){N=H.split(".");H=N.shift();N.sort()}if(!((!B||r.event.customEvent[H])&&!r.event.global[H])){k=typeof k==="object"?k[r.expando]?k:
new r.Event(H,k):new r.Event(H);k.type=H;k.isTrigger=true;k.exclusive=W;k.namespace=N.join(".");k.namespace_re=k.namespace?RegExp("(^|\\.)"+N.join("\\.(?:.*\\.)?")+"(\\.|$)"):null;W=H.indexOf(":")<0?"on"+H:"";if(B){k.result=f;if(!k.target)k.target=B;n=n!=null?r.makeArray(n):[];n.unshift(k);ha=r.event.special[H]||{};if(!(ha.trigger&&ha.trigger.apply(B,n)===false)){Ma=[[B,ha.bindType||H]];if(!E&&!ha.noBubble&&!r.isWindow(B)){ya=ha.delegateType||H;N=ua.test(ya+H)?B:B.parentNode;for(da=null;N;N=N.parentNode){Ma.push([N,
ya]);da=N}if(da&&da===B.ownerDocument)Ma.push([da.defaultView||da.parentWindow||o,ya])}for(da=0;da<Ma.length&&!k.isPropagationStopped();da++){N=Ma[da][0];k.type=Ma[da][1];(ya=(r._data(N,"events")||{})[k.type]&&r._data(N,"handle"))&&ya.apply(N,n);(ya=W&&N[W])&&r.acceptData(N)&&ya.apply(N,n)===false&&k.preventDefault()}k.type=H;if(!E&&!k.isDefaultPrevented())if((!ha._default||ha._default.apply(B.ownerDocument,n)===false)&&!(H==="click"&&r.nodeName(B,"a"))&&r.acceptData(B))if(W&&B[H]&&(H!=="focus"&&
H!=="blur"||k.target.offsetWidth!==0)&&!r.isWindow(B)){if(da=B[W])B[W]=null;r.event.triggered=H;B[H]();r.event.triggered=f;if(da)B[W]=da}return k.result}}else{B=r.cache;for(da in B)B[da].events&&B[da].events[H]&&r.event.trigger(k,n,B[da].handle.elem,true)}}}}},dispatch:function(k){k=r.event.fix(k||o.event);var n=(r._data(this,"events")||{})[k.type]||[],B=n.delegateCount,E=[].slice.call(arguments,0),H=!k.exclusive&&!k.namespace,N=[],W,da,ha,ya,Ma,Aa,Ua;E[0]=k;k.delegateTarget=this;if(B&&!k.target.disabled&&
!(k.button&&k.type==="click")){ha=r(this);ha.context=this.ownerDocument||this;for(da=k.target;da!=this;da=da.parentNode||this){Ma={};Aa=[];ha[0]=da;for(W=0;W<B;W++){ya=n[W];Ua=ya.selector;if(Ma[Ua]===f){var Oa=Ma,gb=Ua,ib;if(ya.quick){ib=ya.quick;var jb=da.attributes||{};ib=(!ib[1]||da.nodeName.toLowerCase()===ib[1])&&(!ib[2]||(jb.id||{}).value===ib[2])&&(!ib[3]||ib[3].test((jb["class"]||{}).value))}else ib=ha.is(Ua);Oa[gb]=ib}Ma[Ua]&&Aa.push(ya)}Aa.length&&N.push({elem:da,matches:Aa})}}n.length>
B&&N.push({elem:this,matches:n.slice(B)});for(W=0;W<N.length&&!k.isPropagationStopped();W++){B=N[W];k.currentTarget=B.elem;for(n=0;n<B.matches.length&&!k.isImmediatePropagationStopped();n++){ya=B.matches[n];if(H||!k.namespace&&!ya.namespace||k.namespace_re&&k.namespace_re.test(ya.namespace)){k.data=ya.data;k.handleObj=ya;ya=((r.event.special[ya.origType]||{}).handle||ya.handler).apply(B.elem,E);if(ya!==f){k.result=ya;if(ya===false){k.preventDefault();k.stopPropagation()}}}}}return k.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(k,n){if(k.which==null)k.which=n.charCode!=null?n.charCode:n.keyCode;return k}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(k,n){var B,E,H=n.button,N=n.fromElement;if(k.pageX==null&&n.clientX!=null){B=k.target.ownerDocument||I;E=B.documentElement;B=B.body;k.pageX=n.clientX+(E&&E.scrollLeft||B&&B.scrollLeft||0)-(E&&E.clientLeft||
B&&B.clientLeft||0);k.pageY=n.clientY+(E&&E.scrollTop||B&&B.scrollTop||0)-(E&&E.clientTop||B&&B.clientTop||0)}if(!k.relatedTarget&&N)k.relatedTarget=N===k.target?n.toElement:N;if(!k.which&&H!==f)k.which=H&1?1:H&2?3:H&4?2:0;return k}},fix:function(k){if(k[r.expando])return k;var n,B,E=k,H=r.event.fixHooks[k.type]||{},N=H.props?this.props.concat(H.props):this.props;k=r.Event(E);for(n=N.length;n;){B=N[--n];k[B]=E[B]}if(!k.target)k.target=E.srcElement||I;if(k.target.nodeType===3)k.target=k.target.parentNode;
if(k.metaKey===f)k.metaKey=k.ctrlKey;return H.filter?H.filter(k,E):k},special:{ready:{setup:r.bindReady},load:{noBubble:true},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(k,n,B){if(r.isWindow(this))this.onbeforeunload=B},teardown:function(k,n){if(this.onbeforeunload===n)this.onbeforeunload=null}}},simulate:function(k,n,B,E){k=r.extend(new r.Event,B,{type:k,isSimulated:true,originalEvent:{}});E?r.event.trigger(k,null,n):r.event.dispatch.call(n,k);k.isDefaultPrevented()&&
B.preventDefault()}};r.event.handle=r.event.dispatch;r.removeEvent=I.removeEventListener?function(k,n,B){k.removeEventListener&&k.removeEventListener(n,B,false)}:function(k,n,B){k.detachEvent&&k.detachEvent("on"+n,B)};r.Event=function(k,n){if(!(this instanceof r.Event))return new r.Event(k,n);if(k&&k.type){this.originalEvent=k;this.type=k.type;this.isDefaultPrevented=k.defaultPrevented||k.returnValue===false||k.getPreventDefault&&k.getPreventDefault()?b:d}else this.type=k;n&&r.extend(this,n);this.timeStamp=
k&&k.timeStamp||r.now();this[r.expando]=true};r.Event.prototype={preventDefault:function(){this.isDefaultPrevented=b;var k=this.originalEvent;if(k)if(k.preventDefault)k.preventDefault();else k.returnValue=false},stopPropagation:function(){this.isPropagationStopped=b;var k=this.originalEvent;if(k){k.stopPropagation&&k.stopPropagation();k.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=b;this.stopPropagation()},isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d};
r.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(k,n){r.event.special[k]={delegateType:n,bindType:n,handle:function(B){var E=B.relatedTarget,H=B.handleObj,N;if(!E||E!==this&&!r.contains(this,E)){B.type=H.origType;N=H.handler.apply(this,arguments);B.type=n}return N}}});if(!r.support.submitBubbles)r.event.special.submit={setup:function(){if(r.nodeName(this,"form"))return false;r.event.add(this,"click._submit keypress._submit",function(k){k=k.target;if((k=r.nodeName(k,"input")||r.nodeName(k,
"button")?k.form:f)&&!k._submit_attached){r.event.add(k,"submit._submit",function(n){this.parentNode&&!n.isTrigger&&r.event.simulate("submit",this.parentNode,n,true)});k._submit_attached=true}})},teardown:function(){if(r.nodeName(this,"form"))return false;r.event.remove(this,"._submit")}};if(!r.support.changeBubbles)r.event.special.change={setup:function(){if(vb.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){r.event.add(this,"propertychange._change",function(k){if(k.originalEvent.propertyName===
"checked")this._just_changed=true});r.event.add(this,"click._change",function(k){if(this._just_changed&&!k.isTrigger){this._just_changed=false;r.event.simulate("change",this,k,true)}})}return false}r.event.add(this,"beforeactivate._change",function(k){k=k.target;if(vb.test(k.nodeName)&&!k._change_attached){r.event.add(k,"change._change",function(n){this.parentNode&&!n.isSimulated&&!n.isTrigger&&r.event.simulate("change",this.parentNode,n,true)});k._change_attached=true}})},handle:function(k){var n=
k.target;if(this!==n||k.isSimulated||k.isTrigger||n.type!=="radio"&&n.type!=="checkbox")return k.handleObj.handler.apply(this,arguments)},teardown:function(){r.event.remove(this,"._change");return vb.test(this.nodeName)}};r.support.focusinBubbles||r.each({focus:"focusin",blur:"focusout"},function(k,n){var B=0,E=function(H){r.event.simulate(n,H.target,r.event.fix(H),true)};r.event.special[n]={setup:function(){B++===0&&I.addEventListener(k,E,true)},teardown:function(){--B===0&&I.removeEventListener(k,
E,true)}}});r.fn.extend({on:function(k,n,B,E,H){var N,W;if(typeof k==="object"){if(typeof n!=="string"){B=n;n=f}for(W in k)this.on(W,n,B,k[W],H);return this}if(B==null&&E==null){E=n;B=n=f}else if(E==null)if(typeof n==="string"){E=B;B=f}else{E=B;B=n;n=f}if(E===false)E=d;else if(!E)return this;if(H===1){N=E;E=function(da){r().off(da);return N.apply(this,arguments)};E.guid=N.guid||(N.guid=r.guid++)}return this.each(function(){r.event.add(this,k,E,B,n)})},one:function(k,n,B,E){return this.on.call(this,
k,n,B,E,1)},off:function(k,n,B){if(k&&k.preventDefault&&k.handleObj){var E=k.handleObj;r(k.delegateTarget).off(E.namespace?E.type+"."+E.namespace:E.type,E.selector,E.handler);return this}if(typeof k==="object"){for(E in k)this.off(E,n,k[E]);return this}if(n===false||typeof n==="function"){B=n;n=f}if(B===false)B=d;return this.each(function(){r.event.remove(this,k,B,n)})},bind:function(k,n,B){return this.on(k,null,n,B)},unbind:function(k,n){return this.off(k,null,n)},live:function(k,n,B){r(this.context).on(k,
this.selector,n,B);return this},die:function(k,n){r(this.context).off(k,this.selector||"**",n);return this},delegate:function(k,n,B,E){return this.on(n,k,B,E)},undelegate:function(k,n,B){return arguments.length==1?this.off(k,"**"):this.off(n,k,B)},trigger:function(k,n){return this.each(function(){r.event.trigger(k,n,this)})},triggerHandler:function(k,n){if(this[0])return r.event.trigger(k,n,this[0],true)},toggle:function(k){var n=arguments,B=k.guid||r.guid++,E=0,H=function(N){var W=(r._data(this,
"lastToggle"+k.guid)||0)%E;r._data(this,"lastToggle"+k.guid,W+1);N.preventDefault();return n[W].apply(this,arguments)||false};for(H.guid=B;E<n.length;)n[E++].guid=B;return this.click(H)},hover:function(k,n){return this.mouseenter(k).mouseleave(n||k)}});r.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(k,n){r.fn[n]=function(B,
E){if(E==null){E=B;B=null}return arguments.length>0?this.on(n,null,B,E):this.trigger(n)};if(r.attrFn)r.attrFn[n]=true;if(V.test(n))r.event.fixHooks[n]=r.event.keyHooks;if(ga.test(n))r.event.fixHooks[n]=r.event.mouseHooks});(function(){function k(R,Y,oa,ta,wa,Da){wa=0;for(var Wa=ta.length;wa<Wa;wa++){var Ka=ta[wa];if(Ka){var hb=false;for(Ka=Ka[R];Ka;){if(Ka[E]===oa){hb=ta[Ka.sizset];break}if(Ka.nodeType===1&&!Da){Ka[E]=oa;Ka.sizset=wa}if(Ka.nodeName.toLowerCase()===Y){hb=Ka;break}Ka=Ka[R]}ta[wa]=hb}}}
function n(R,Y,oa,ta,wa,Da){wa=0;for(var Wa=ta.length;wa<Wa;wa++){var Ka=ta[wa];if(Ka){var hb=false;for(Ka=Ka[R];Ka;){if(Ka[E]===oa){hb=ta[Ka.sizset];break}if(Ka.nodeType===1){if(!Da){Ka[E]=oa;Ka.sizset=wa}if(typeof Y!=="string"){if(Ka===Y){hb=true;break}}else if(Aa.filter(Y,[Ka]).length>0){hb=Ka;break}}Ka=Ka[R]}ta[wa]=hb}}}var B=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,E="sizcache"+(Math.random()+"").replace(".",
""),H=0,N=Object.prototype.toString,W=false,da=true,ha=/\\/g,ya=/\r\n/g,Ma=/\W/;[0,0].sort(function(){da=false;return 0});var Aa=function(R,Y,oa,ta){oa=oa||[];var wa=Y=Y||I;if(Y.nodeType!==1&&Y.nodeType!==9)return[];if(!R||typeof R!=="string")return oa;var Da,Wa,Ka,hb,ca,Ba=true,Na=Aa.isXML(Y),Ia=[],db=R;do{B.exec("");if(Da=B.exec(db)){db=Da[3];Ia.push(Da[1]);if(Da[2]){hb=Da[3];break}}}while(Da);if(Ia.length>1&&gb.exec(R))if(Ia.length===2&&Oa.relative[Ia[0]])Wa=Kb(Ia[0]+Ia[1],Y,ta);else for(Wa=Oa.relative[Ia[0]]?
[Y]:Aa(Ia.shift(),Y);Ia.length;){R=Ia.shift();if(Oa.relative[R])R+=Ia.shift();Wa=Kb(R,Wa,ta)}else{if(!ta&&Ia.length>1&&Y.nodeType===9&&!Na&&Oa.match.ID.test(Ia[0])&&!Oa.match.ID.test(Ia[Ia.length-1])){Da=Aa.find(Ia.shift(),Y,Na);Y=Da.expr?Aa.filter(Da.expr,Da.set)[0]:Da.set[0]}if(Y){Da=ta?{expr:Ia.pop(),set:lb(ta)}:Aa.find(Ia.pop(),Ia.length===1&&(Ia[0]==="~"||Ia[0]==="+")&&Y.parentNode?Y.parentNode:Y,Na);Wa=Da.expr?Aa.filter(Da.expr,Da.set):Da.set;if(Ia.length>0)Ka=lb(Wa);else Ba=false;for(;Ia.length;){Da=
ca=Ia.pop();if(Oa.relative[ca])Da=Ia.pop();else ca="";if(Da==null)Da=Y;Oa.relative[ca](Ka,Da,Na)}}else Ka=[]}Ka||(Ka=Wa);Ka||Aa.error(ca||R);if(N.call(Ka)==="[object Array]")if(Ba)if(Y&&Y.nodeType===1)for(R=0;Ka[R]!=null;R++){if(Ka[R]&&(Ka[R]===true||Ka[R].nodeType===1&&Aa.contains(Y,Ka[R])))oa.push(Wa[R])}else for(R=0;Ka[R]!=null;R++)Ka[R]&&Ka[R].nodeType===1&&oa.push(Wa[R]);else oa.push.apply(oa,Ka);else lb(Ka,oa);if(hb){Aa(hb,wa,oa,ta);Aa.uniqueSort(oa)}return oa};Aa.uniqueSort=function(R){if(Ob){W=
da;R.sort(Ob);if(W)for(var Y=1;Y<R.length;Y++)R[Y]===R[Y-1]&&R.splice(Y--,1)}return R};Aa.matches=function(R,Y){return Aa(R,null,null,Y)};Aa.matchesSelector=function(R,Y){return Aa(Y,null,null,[R]).length>0};Aa.find=function(R,Y,oa){var ta,wa,Da,Wa,Ka,hb;if(!R)return[];wa=0;for(Da=Oa.order.length;wa<Da;wa++){Ka=Oa.order[wa];if(Wa=Oa.leftMatch[Ka].exec(R)){hb=Wa[1];Wa.splice(1,1);if(hb.substr(hb.length-1)!=="\\"){Wa[1]=(Wa[1]||"").replace(ha,"");ta=Oa.find[Ka](Wa,Y,oa);if(ta!=null){R=R.replace(Oa.match[Ka],
"");break}}}}ta||(ta=typeof Y.getElementsByTagName!=="undefined"?Y.getElementsByTagName("*"):[]);return{set:ta,expr:R}};Aa.filter=function(R,Y,oa,ta){for(var wa,Da,Wa,Ka,hb,ca,Ba,Na,Ia=R,db=[],u=Y,F=Y&&Y[0]&&Aa.isXML(Y[0]);R&&Y.length;){for(Wa in Oa.filter)if((wa=Oa.leftMatch[Wa].exec(R))!=null&&wa[2]){ca=Oa.filter[Wa];hb=wa[1];Da=false;wa.splice(1,1);if(hb.substr(hb.length-1)!=="\\"){if(u===db)db=[];if(Oa.preFilter[Wa])if(wa=Oa.preFilter[Wa](wa,u,oa,db,ta,F)){if(wa===true)continue}else Da=Ka=true;
if(wa)for(Ba=0;(hb=u[Ba])!=null;Ba++)if(hb){Ka=ca(hb,wa,Ba,u);Na=ta^Ka;if(oa&&Ka!=null)if(Na)Da=true;else u[Ba]=false;else if(Na){db.push(hb);Da=true}}if(Ka!==f){oa||(u=db);R=R.replace(Oa.match[Wa],"");if(!Da)return[];break}}}if(R===Ia)if(Da==null)Aa.error(R);else break;Ia=R}return u};Aa.error=function(R){throw Error("Syntax error, unrecognized expression: "+R);};var Ua=Aa.getText=function(R){var Y,oa;Y=R.nodeType;var ta="";if(Y)if(Y===1||Y===9)if(typeof R.textContent==="string")return R.textContent;
else if(typeof R.innerText==="string")return R.innerText.replace(ya,"");else for(R=R.firstChild;R;R=R.nextSibling)ta+=Ua(R);else{if(Y===3||Y===4)return R.nodeValue}else for(Y=0;oa=R[Y];Y++)if(oa.nodeType!==8)ta+=Ua(oa);return ta},Oa=Aa.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,
TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(R){return R.getAttribute("href")},type:function(R){return R.getAttribute("type")}},relative:{"+":function(R,Y){var oa=
typeof Y==="string",ta=oa&&!Ma.test(Y);oa=oa&&!ta;if(ta)Y=Y.toLowerCase();ta=0;for(var wa=R.length,Da;ta<wa;ta++)if(Da=R[ta]){for(;(Da=Da.previousSibling)&&Da.nodeType!==1;);R[ta]=oa||Da&&Da.nodeName.toLowerCase()===Y?Da||false:Da===Y}oa&&Aa.filter(Y,R,true)},">":function(R,Y){var oa,ta=typeof Y==="string",wa=0,Da=R.length;if(ta&&!Ma.test(Y))for(Y=Y.toLowerCase();wa<Da;wa++){if(oa=R[wa]){oa=oa.parentNode;R[wa]=oa.nodeName.toLowerCase()===Y?oa:false}}else{for(;wa<Da;wa++)if(oa=R[wa])R[wa]=ta?oa.parentNode:
oa.parentNode===Y;ta&&Aa.filter(Y,R,true)}},"":function(R,Y,oa){var ta,wa=H++,Da=n;if(typeof Y==="string"&&!Ma.test(Y)){ta=Y=Y.toLowerCase();Da=k}Da("parentNode",Y,wa,R,ta,oa)},"~":function(R,Y,oa){var ta,wa=H++,Da=n;if(typeof Y==="string"&&!Ma.test(Y)){ta=Y=Y.toLowerCase();Da=k}Da("previousSibling",Y,wa,R,ta,oa)}},find:{ID:function(R,Y,oa){if(typeof Y.getElementById!=="undefined"&&!oa)return(R=Y.getElementById(R[1]))&&R.parentNode?[R]:[]},NAME:function(R,Y){if(typeof Y.getElementsByName!=="undefined"){for(var oa=
[],ta=Y.getElementsByName(R[1]),wa=0,Da=ta.length;wa<Da;wa++)ta[wa].getAttribute("name")===R[1]&&oa.push(ta[wa]);return oa.length===0?null:oa}},TAG:function(R,Y){if(typeof Y.getElementsByTagName!=="undefined")return Y.getElementsByTagName(R[1])}},preFilter:{CLASS:function(R,Y,oa,ta,wa,Da){R=" "+R[1].replace(ha,"")+" ";if(Da)return R;Da=0;for(var Wa;(Wa=Y[Da])!=null;Da++)if(Wa)if(wa^(Wa.className&&(" "+Wa.className+" ").replace(/[\t\n\r]/g," ").indexOf(R)>=0))oa||ta.push(Wa);else if(oa)Y[Da]=false;
return false},ID:function(R){return R[1].replace(ha,"")},TAG:function(R){return R[1].replace(ha,"").toLowerCase()},CHILD:function(R){if(R[1]==="nth"){R[2]||Aa.error(R[0]);R[2]=R[2].replace(/^\+|\s*/g,"");var Y=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(R[2]==="even"&&"2n"||R[2]==="odd"&&"2n+1"||!/\D/.test(R[2])&&"0n+"+R[2]||R[2]);R[2]=Y[1]+(Y[2]||1)-0;R[3]=Y[3]-0}else R[2]&&Aa.error(R[0]);R[0]=H++;return R},ATTR:function(R,Y,oa,ta,wa,Da){Y=R[1]=R[1].replace(ha,"");if(!Da&&Oa.attrMap[Y])R[1]=Oa.attrMap[Y];
R[4]=(R[4]||R[5]||"").replace(ha,"");if(R[2]==="~=")R[4]=" "+R[4]+" ";return R},PSEUDO:function(R,Y,oa,ta,wa){if(R[1]==="not")if((B.exec(R[3])||"").length>1||/^\w/.test(R[3]))R[3]=Aa(R[3],null,null,Y);else{R=Aa.filter(R[3],Y,oa,true^wa);oa||ta.push.apply(ta,R);return false}else if(Oa.match.POS.test(R[0])||Oa.match.CHILD.test(R[0]))return true;return R},POS:function(R){R.unshift(true);return R}},filters:{enabled:function(R){return R.disabled===false&&R.type!=="hidden"},disabled:function(R){return R.disabled===
true},checked:function(R){return R.checked===true},selected:function(R){return R.selected===true},parent:function(R){return!!R.firstChild},empty:function(R){return!R.firstChild},has:function(R,Y,oa){return!!Aa(oa[3],R).length},header:function(R){return/h\d/i.test(R.nodeName)},text:function(R){var Y=R.getAttribute("type"),oa=R.type;return R.nodeName.toLowerCase()==="input"&&"text"===oa&&(Y===oa||Y===null)},radio:function(R){return R.nodeName.toLowerCase()==="input"&&"radio"===R.type},checkbox:function(R){return R.nodeName.toLowerCase()===
"input"&&"checkbox"===R.type},file:function(R){return R.nodeName.toLowerCase()==="input"&&"file"===R.type},password:function(R){return R.nodeName.toLowerCase()==="input"&&"password"===R.type},submit:function(R){var Y=R.nodeName.toLowerCase();return(Y==="input"||Y==="button")&&"submit"===R.type},image:function(R){return R.nodeName.toLowerCase()==="input"&&"image"===R.type},reset:function(R){var Y=R.nodeName.toLowerCase();return(Y==="input"||Y==="button")&&"reset"===R.type},button:function(R){var Y=
R.nodeName.toLowerCase();return Y==="input"&&"button"===R.type||Y==="button"},input:function(R){return/input|select|textarea|button/i.test(R.nodeName)},focus:function(R){return R===R.ownerDocument.activeElement}},setFilters:{first:function(R,Y){return Y===0},last:function(R,Y,oa,ta){return Y===ta.length-1},even:function(R,Y){return Y%2===0},odd:function(R,Y){return Y%2===1},lt:function(R,Y,oa){return Y<oa[3]-0},gt:function(R,Y,oa){return Y>oa[3]-0},nth:function(R,Y,oa){return oa[3]-0===Y},eq:function(R,
Y,oa){return oa[3]-0===Y}},filter:{PSEUDO:function(R,Y,oa,ta){var wa=Y[1],Da=Oa.filters[wa];if(Da)return Da(R,oa,Y,ta);else if(wa==="contains")return(R.textContent||R.innerText||Ua([R])||"").indexOf(Y[3])>=0;else if(wa==="not"){Y=Y[3];oa=0;for(ta=Y.length;oa<ta;oa++)if(Y[oa]===R)return false;return true}else Aa.error(wa)},CHILD:function(R,Y){var oa,ta,wa,Da,Wa,Ka;oa=Y[1];Ka=R;switch(oa){case "only":case "first":for(;Ka=Ka.previousSibling;)if(Ka.nodeType===1)return false;if(oa==="first")return true;
Ka=R;case "last":for(;Ka=Ka.nextSibling;)if(Ka.nodeType===1)return false;return true;case "nth":oa=Y[2];ta=Y[3];if(oa===1&&ta===0)return true;wa=Y[0];if((Da=R.parentNode)&&(Da[E]!==wa||!R.nodeIndex)){Wa=0;for(Ka=Da.firstChild;Ka;Ka=Ka.nextSibling)if(Ka.nodeType===1)Ka.nodeIndex=++Wa;Da[E]=wa}Ka=R.nodeIndex-ta;return oa===0?Ka===0:Ka%oa===0&&Ka/oa>=0}},ID:function(R,Y){return R.nodeType===1&&R.getAttribute("id")===Y},TAG:function(R,Y){return Y==="*"&&R.nodeType===1||!!R.nodeName&&R.nodeName.toLowerCase()===
Y},CLASS:function(R,Y){return(" "+(R.className||R.getAttribute("class"))+" ").indexOf(Y)>-1},ATTR:function(R,Y){var oa=Y[1];oa=Aa.attr?Aa.attr(R,oa):Oa.attrHandle[oa]?Oa.attrHandle[oa](R):R[oa]!=null?R[oa]:R.getAttribute(oa);var ta=oa+"",wa=Y[2],Da=Y[4];return oa==null?wa==="!=":!wa&&Aa.attr?oa!=null:wa==="="?ta===Da:wa==="*="?ta.indexOf(Da)>=0:wa==="~="?(" "+ta+" ").indexOf(Da)>=0:!Da?ta&&oa!==false:wa==="!="?ta!==Da:wa==="^="?ta.indexOf(Da)===0:wa==="$="?ta.substr(ta.length-Da.length)===Da:wa===
"|="?ta===Da||ta.substr(0,Da.length+1)===Da+"-":false},POS:function(R,Y,oa,ta){var wa=Oa.setFilters[Y[2]];if(wa)return wa(R,oa,Y,ta)}}},gb=Oa.match.POS,ib=function(R,Y){return"\\"+(Y-0+1)},jb;for(jb in Oa.match){Oa.match[jb]=RegExp(Oa.match[jb].source+/(?![^\[]*\])(?![^\(]*\))/.source);Oa.leftMatch[jb]=RegExp(/(^(?:.|\r|\n)*?)/.source+Oa.match[jb].source.replace(/\\(\d+)/g,ib))}var lb=function(R,Y){R=Array.prototype.slice.call(R,0);if(Y){Y.push.apply(Y,R);return Y}return R};try{Array.prototype.slice.call(I.documentElement.childNodes,
0)}catch(Nb){lb=function(R,Y){var oa=0,ta=Y||[];if(N.call(R)==="[object Array]")Array.prototype.push.apply(ta,R);else if(typeof R.length==="number")for(var wa=R.length;oa<wa;oa++)ta.push(R[oa]);else for(;R[oa];oa++)ta.push(R[oa]);return ta}}var Ob,fb;if(I.documentElement.compareDocumentPosition)Ob=function(R,Y){if(R===Y){W=true;return 0}if(!R.compareDocumentPosition||!Y.compareDocumentPosition)return R.compareDocumentPosition?-1:1;return R.compareDocumentPosition(Y)&4?-1:1};else{Ob=function(R,Y){if(R===
Y){W=true;return 0}else if(R.sourceIndex&&Y.sourceIndex)return R.sourceIndex-Y.sourceIndex;var oa,ta,wa=[],Da=[];oa=R.parentNode;ta=Y.parentNode;var Wa=oa;if(oa===ta)return fb(R,Y);else if(oa){if(!ta)return 1}else return-1;for(;Wa;){wa.unshift(Wa);Wa=Wa.parentNode}for(Wa=ta;Wa;){Da.unshift(Wa);Wa=Wa.parentNode}oa=wa.length;ta=Da.length;for(Wa=0;Wa<oa&&Wa<ta;Wa++)if(wa[Wa]!==Da[Wa])return fb(wa[Wa],Da[Wa]);return Wa===oa?fb(R,Da[Wa],-1):fb(wa[Wa],Y,1)};fb=function(R,Y,oa){if(R===Y)return oa;for(R=
R.nextSibling;R;){if(R===Y)return-1;R=R.nextSibling}return 1}}(function(){var R=I.createElement("div"),Y="script"+(new Date).getTime(),oa=I.documentElement;R.innerHTML="<a name='"+Y+"'/>";oa.insertBefore(R,oa.firstChild);if(I.getElementById(Y)){Oa.find.ID=function(ta,wa,Da){if(typeof wa.getElementById!=="undefined"&&!Da)return(wa=wa.getElementById(ta[1]))?wa.id===ta[1]||typeof wa.getAttributeNode!=="undefined"&&wa.getAttributeNode("id").nodeValue===ta[1]?[wa]:f:[]};Oa.filter.ID=function(ta,wa){var Da=
typeof ta.getAttributeNode!=="undefined"&&ta.getAttributeNode("id");return ta.nodeType===1&&Da&&Da.nodeValue===wa}}oa.removeChild(R);oa=R=null})();(function(){var R=I.createElement("div");R.appendChild(I.createComment(""));if(R.getElementsByTagName("*").length>0)Oa.find.TAG=function(Y,oa){var ta=oa.getElementsByTagName(Y[1]);if(Y[1]==="*"){for(var wa=[],Da=0;ta[Da];Da++)ta[Da].nodeType===1&&wa.push(ta[Da]);ta=wa}return ta};R.innerHTML="<a href='#'></a>";if(R.firstChild&&typeof R.firstChild.getAttribute!==
"undefined"&&R.firstChild.getAttribute("href")!=="#")Oa.attrHandle.href=function(Y){return Y.getAttribute("href",2)};R=null})();I.querySelectorAll&&function(){var R=Aa,Y=I.createElement("div");Y.innerHTML="<p class='TEST'></p>";if(!(Y.querySelectorAll&&Y.querySelectorAll(".TEST").length===0)){Aa=function(ta,wa,Da,Wa){wa=wa||I;if(!Wa&&!Aa.isXML(wa)){var Ka=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(ta);if(Ka&&(wa.nodeType===1||wa.nodeType===9))if(Ka[1])return lb(wa.getElementsByTagName(ta),Da);else if(Ka[2]&&
Oa.find.CLASS&&wa.getElementsByClassName)return lb(wa.getElementsByClassName(Ka[2]),Da);if(wa.nodeType===9){if(ta==="body"&&wa.body)return lb([wa.body],Da);else if(Ka&&Ka[3]){var hb=wa.getElementById(Ka[3]);if(hb&&hb.parentNode){if(hb.id===Ka[3])return lb([hb],Da)}else return lb([],Da)}try{return lb(wa.querySelectorAll(ta),Da)}catch(ca){}}else if(wa.nodeType===1&&wa.nodeName.toLowerCase()!=="object"){Ka=wa;var Ba=(hb=wa.getAttribute("id"))||"__sizzle__",Na=wa.parentNode,Ia=/^\s*[+~]/.test(ta);if(hb)Ba=
Ba.replace(/'/g,"\\$&");else wa.setAttribute("id",Ba);if(Ia&&Na)wa=wa.parentNode;try{if(!Ia||Na)return lb(wa.querySelectorAll("[id='"+Ba+"'] "+ta),Da)}catch(db){}finally{hb||Ka.removeAttribute("id")}}}return R(ta,wa,Da,Wa)};for(var oa in R)Aa[oa]=R[oa];Y=null}}();(function(){var R=I.documentElement,Y=R.matchesSelector||R.mozMatchesSelector||R.webkitMatchesSelector||R.msMatchesSelector;if(Y){var oa=!Y.call(I.createElement("div"),"div"),ta=false;try{Y.call(I.documentElement,"[test!='']:sizzle")}catch(wa){ta=
true}Aa.matchesSelector=function(Da,Wa){Wa=Wa.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!Aa.isXML(Da))try{if(ta||!Oa.match.PSEUDO.test(Wa)&&!/!=/.test(Wa)){var Ka=Y.call(Da,Wa);if(Ka||!oa||Da.document&&Da.document.nodeType!==11)return Ka}}catch(hb){}return Aa(Wa,null,null,[Da]).length>0}}})();(function(){var R=I.createElement("div");R.innerHTML="<div class='test e'></div><div class='test'></div>";if(!(!R.getElementsByClassName||R.getElementsByClassName("e").length===0)){R.lastChild.className="e";
if(R.getElementsByClassName("e").length!==1){Oa.order.splice(1,0,"CLASS");Oa.find.CLASS=function(Y,oa,ta){if(typeof oa.getElementsByClassName!=="undefined"&&!ta)return oa.getElementsByClassName(Y[1])};R=null}}})();Aa.contains=I.documentElement.contains?function(R,Y){return R!==Y&&(R.contains?R.contains(Y):true)}:I.documentElement.compareDocumentPosition?function(R,Y){return!!(R.compareDocumentPosition(Y)&16)}:function(){return false};Aa.isXML=function(R){return(R=(R?R.ownerDocument||R:0).documentElement)?
R.nodeName!=="HTML":false};var Kb=function(R,Y,oa){var ta,wa=[],Da="";for(Y=Y.nodeType?[Y]:Y;ta=Oa.match.PSEUDO.exec(R);){Da+=ta[0];R=R.replace(Oa.match.PSEUDO,"")}R=Oa.relative[R]?R+"*":R;ta=0;for(var Wa=Y.length;ta<Wa;ta++)Aa(R,Y[ta],wa,oa);return Aa.filter(Da,wa)};Aa.attr=r.attr;Aa.selectors.attrMap={};r.find=Aa;r.expr=Aa.selectors;r.expr[":"]=r.expr.filters;r.unique=Aa.uniqueSort;r.text=Aa.getText;r.isXMLDoc=Aa.isXML;r.contains=Aa.contains})();var ba=/Until$/,Ya=/^(?:parents|prevUntil|prevAll)/,
nb=/,/,xb=/^.[^:#\[\.,]*$/,Zb=Array.prototype.slice,yb=r.expr.match.POS,oc={children:true,contents:true,next:true,prev:true};r.fn.extend({find:function(k){var n=this,B,E;if(typeof k!=="string")return r(k).filter(function(){B=0;for(E=n.length;B<E;B++)if(r.contains(n[B],this))return true});var H=this.pushStack("","find",k),N,W,da;B=0;for(E=this.length;B<E;B++){N=H.length;r.find(k,this[B],H);if(B>0)for(W=N;W<H.length;W++)for(da=0;da<N;da++)if(H[da]===H[W]){H.splice(W--,1);break}}return H},has:function(k){var n=
r(k);return this.filter(function(){for(var B=0,E=n.length;B<E;B++)if(r.contains(this,n[B]))return true})},not:function(k){return this.pushStack(h(this,k,false),"not",k)},filter:function(k){return this.pushStack(h(this,k,true),"filter",k)},is:function(k){return!!k&&(typeof k==="string"?yb.test(k)?r(k,this.context).index(this[0])>=0:r.filter(k,this).length>0:this.filter(k).length>0)},closest:function(k,n){var B=[],E,H,N=this[0];if(r.isArray(k)){for(H=1;N&&N.ownerDocument&&N!==n;){for(E=0;E<k.length;E++)r(N).is(k[E])&&
B.push({selector:k[E],elem:N,level:H});N=N.parentNode;H++}return B}var W=yb.test(k)||typeof k!=="string"?r(k,n||this.context):0;E=0;for(H=this.length;E<H;E++)for(N=this[E];N;)if(W?W.index(N)>-1:r.find.matchesSelector(N,k)){B.push(N);break}else{N=N.parentNode;if(!N||!N.ownerDocument||N===n||N.nodeType===11)break}B=B.length>1?r.unique(B):B;return this.pushStack(B,"closest",k)},index:function(k){if(!k)return this[0]&&this[0].parentNode?this.prevAll().length:-1;if(typeof k==="string")return r.inArray(this[0],
r(k));return r.inArray(k.jquery?k[0]:k,this)},add:function(k,n){var B=typeof k==="string"?r(k,n):r.makeArray(k&&k.nodeType?[k]:k),E=r.merge(this.get(),B);return this.pushStack(!B[0]||!B[0].parentNode||B[0].parentNode.nodeType===11||!E[0]||!E[0].parentNode||E[0].parentNode.nodeType===11?E:r.unique(E))},andSelf:function(){return this.add(this.prevObject)}});r.each({parent:function(k){return(k=k.parentNode)&&k.nodeType!==11?k:null},parents:function(k){return r.dir(k,"parentNode")},parentsUntil:function(k,
n,B){return r.dir(k,"parentNode",B)},next:function(k){return r.nth(k,2,"nextSibling")},prev:function(k){return r.nth(k,2,"previousSibling")},nextAll:function(k){return r.dir(k,"nextSibling")},prevAll:function(k){return r.dir(k,"previousSibling")},nextUntil:function(k,n,B){return r.dir(k,"nextSibling",B)},prevUntil:function(k,n,B){return r.dir(k,"previousSibling",B)},siblings:function(k){return r.sibling(k.parentNode.firstChild,k)},children:function(k){return r.sibling(k.firstChild)},contents:function(k){return r.nodeName(k,
"iframe")?k.contentDocument||k.contentWindow.document:r.makeArray(k.childNodes)}},function(k,n){r.fn[k]=function(B,E){var H=r.map(this,n,B);ba.test(k)||(E=B);if(E&&typeof E==="string")H=r.filter(E,H);H=this.length>1&&!oc[k]?r.unique(H):H;if((this.length>1||nb.test(E))&&Ya.test(k))H=H.reverse();return this.pushStack(H,k,Zb.call(arguments).join(","))}});r.extend({filter:function(k,n,B){if(B)k=":not("+k+")";return n.length===1?r.find.matchesSelector(n[0],k)?[n[0]]:[]:r.find.matches(k,n)},dir:function(k,
n,B){var E=[];for(k=k[n];k&&k.nodeType!==9&&(B===f||k.nodeType!==1||!r(k).is(B));){k.nodeType===1&&E.push(k);k=k[n]}return E},nth:function(k,n,B){n=n||1;for(var E=0;k;k=k[B])if(k.nodeType===1&&++E===n)break;return k},sibling:function(k,n){for(var B=[];k;k=k.nextSibling)k.nodeType===1&&k!==n&&B.push(k);return B}});var pc="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Tb=/ jQuery\d+="(?:\d+|null)"/g,
hc=/^\s+/,wc=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Oc=/<([\w:]+)/,ad=/<tbody/i,Bc=/<|&#?\w+;/,ac=/<(?:script|style)/i,ld=/<(?:script|object|embed|option|style)/i,ic=RegExp("<(?:"+pc+")","i"),Ub=/checked\s*(?:[^=]|=\s*.checked.)/i,Cc=/\/(java|ecma)script/i,sd=/^\s*<!(?:\[CDATA\[|\-\-)/,Db={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>",
"</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Pc=m(I);Db.optgroup=Db.option;Db.tbody=Db.tfoot=Db.colgroup=Db.caption=Db.thead;Db.th=Db.td;if(!r.support.htmlSerialize)Db._default=[1,"div<div>","</div>"];r.fn.extend({text:function(k){if(r.isFunction(k))return this.each(function(n){var B=r(this);B.text(k.call(this,n,B.text()))});if(typeof k!=="object"&&k!==f)return this.empty().append((this[0]&&this[0].ownerDocument||
I).createTextNode(k));return r.text(this)},wrapAll:function(k){if(r.isFunction(k))return this.each(function(B){r(this).wrapAll(k.call(this,B))});if(this[0]){var n=r(k,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&n.insertBefore(this[0]);n.map(function(){for(var B=this;B.firstChild&&B.firstChild.nodeType===1;)B=B.firstChild;return B}).append(this)}return this},wrapInner:function(k){if(r.isFunction(k))return this.each(function(n){r(this).wrapInner(k.call(this,n))});return this.each(function(){var n=
r(this),B=n.contents();B.length?B.wrapAll(k):n.append(k)})},wrap:function(k){var n=r.isFunction(k);return this.each(function(B){r(this).wrapAll(n?k.call(this,B):k)})},unwrap:function(){return this.parent().each(function(){r.nodeName(this,"body")||r(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(k){this.nodeType===1&&this.appendChild(k)})},prepend:function(){return this.domManip(arguments,true,function(k){this.nodeType===1&&this.insertBefore(k,
this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(n){this.parentNode.insertBefore(n,this)});else if(arguments.length){var k=r.clean(arguments);k.push.apply(k,this.toArray());return this.pushStack(k,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(n){this.parentNode.insertBefore(n,this.nextSibling)});else if(arguments.length){var k=this.pushStack(this,"after",arguments);
k.push.apply(k,r.clean(arguments));return k}},remove:function(k,n){for(var B=0,E;(E=this[B])!=null;B++)if(!k||r.filter(k,[E]).length){if(!n&&E.nodeType===1){r.cleanData(E.getElementsByTagName("*"));r.cleanData([E])}E.parentNode&&E.parentNode.removeChild(E)}return this},empty:function(){for(var k=0,n;(n=this[k])!=null;k++)for(n.nodeType===1&&r.cleanData(n.getElementsByTagName("*"));n.firstChild;)n.removeChild(n.firstChild);return this},clone:function(k,n){k=k==null?false:k;n=n==null?k:n;return this.map(function(){return r.clone(this,
k,n)})},html:function(k){if(k===f)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(Tb,""):null;else if(typeof k==="string"&&!ac.test(k)&&(r.support.leadingWhitespace||!hc.test(k))&&!Db[(Oc.exec(k)||["",""])[1].toLowerCase()]){k=k.replace(wc,"<$1></$2>");try{for(var n=0,B=this.length;n<B;n++)if(this[n].nodeType===1){r.cleanData(this[n].getElementsByTagName("*"));this[n].innerHTML=k}}catch(E){this.empty().append(k)}}else r.isFunction(k)?this.each(function(H){var N=r(this);N.html(k.call(this,
H,N.html()))}):this.empty().append(k);return this},replaceWith:function(k){if(this[0]&&this[0].parentNode){if(r.isFunction(k))return this.each(function(n){var B=r(this),E=B.html();B.replaceWith(k.call(this,n,E))});if(typeof k!=="string")k=r(k).detach();return this.each(function(){var n=this.nextSibling,B=this.parentNode;r(this).remove();n?r(n).before(k):r(B).append(k)})}else return this.length?this.pushStack(r(r.isFunction(k)?k():k),"replaceWith",k):this},detach:function(k){return this.remove(k,true)},
domManip:function(k,n,B){var E,H,N,W=k[0],da=[];if(!r.support.checkClone&&arguments.length===3&&typeof W==="string"&&Ub.test(W))return this.each(function(){r(this).domManip(k,n,B,true)});if(r.isFunction(W))return this.each(function(Ma){var Aa=r(this);k[0]=W.call(this,Ma,n?Aa.html():f);Aa.domManip(k,n,B)});if(this[0]){E=W&&W.parentNode;E=r.support.parentNode&&E&&E.nodeType===11&&E.childNodes.length===this.length?{fragment:E}:r.buildFragment(k,this,da);N=E.fragment;if(H=N.childNodes.length===1?N=N.firstChild:
N.firstChild){n=n&&r.nodeName(H,"tr");H=0;for(var ha=this.length,ya=ha-1;H<ha;H++)B.call(n?r.nodeName(this[H],"table")?this[H].getElementsByTagName("tbody")[0]||this[H].appendChild(this[H].ownerDocument.createElement("tbody")):this[H]:this[H],E.cacheable||ha>1&&H<ya?r.clone(N,true,true):N)}da.length&&r.each(da,y)}return this}});r.buildFragment=function(k,n,B){var E,H,N,W,da=k[0];if(n&&n[0])W=n[0].ownerDocument||n[0];W.createDocumentFragment||(W=I);if(k.length===1&&typeof da==="string"&&da.length<
512&&W===I&&da.charAt(0)==="<"&&!ld.test(da)&&(r.support.checkClone||!Ub.test(da))&&(r.support.html5Clone||!ic.test(da))){H=true;if((N=r.fragments[da])&&N!==1)E=N}if(!E){E=W.createDocumentFragment();r.clean(k,W,E,B)}if(H)r.fragments[da]=N?E:1;return{fragment:E,cacheable:H}};r.fragments={};r.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(k,n){r.fn[k]=function(B){var E=[];B=r(B);var H=this.length===1&&this[0].parentNode;if(H&&
H.nodeType===11&&H.childNodes.length===1&&B.length===1){B[n](this[0]);return this}else{H=0;for(var N=B.length;H<N;H++){var W=(H>0?this.clone(true):this).get();r(B[H])[n](W);E=E.concat(W)}return this.pushStack(E,k,B.selector)}}});r.extend({clone:function(k,n,B){var E,H,N;if(r.support.html5Clone||!ic.test("<"+k.nodeName))E=k.cloneNode(true);else{E=I.createElement("div");Pc.appendChild(E);E.innerHTML=k.outerHTML;E=E.firstChild}var W=E;if((!r.support.noCloneEvent||!r.support.noCloneChecked)&&(k.nodeType===
1||k.nodeType===11)&&!r.isXMLDoc(k)){w(k,W);E=s(k);H=s(W);for(N=0;E[N];++N)H[N]&&w(E[N],H[N])}if(n){v(k,W);if(B){E=s(k);H=s(W);for(N=0;E[N];++N)v(E[N],H[N])}}return W},clean:function(k,n,B,E){n=n||I;if(typeof n.createElement==="undefined")n=n.ownerDocument||n[0]&&n[0].ownerDocument||I;for(var H=[],N,W=0,da;(da=k[W])!=null;W++){if(typeof da==="number")da+="";if(da){if(typeof da==="string")if(Bc.test(da)){da=da.replace(wc,"<$1></$2>");N=(Oc.exec(da)||["",""])[1].toLowerCase();var ha=Db[N]||Db._default,
ya=ha[0],Ma=n.createElement("div");n===I?Pc.appendChild(Ma):m(n).appendChild(Ma);for(Ma.innerHTML=ha[1]+da+ha[2];ya--;)Ma=Ma.lastChild;if(!r.support.tbody){ya=ad.test(da);ha=N==="table"&&!ya?Ma.firstChild&&Ma.firstChild.childNodes:ha[1]==="<table>"&&!ya?Ma.childNodes:[];for(N=ha.length-1;N>=0;--N)r.nodeName(ha[N],"tbody")&&!ha[N].childNodes.length&&ha[N].parentNode.removeChild(ha[N])}!r.support.leadingWhitespace&&hc.test(da)&&Ma.insertBefore(n.createTextNode(hc.exec(da)[0]),Ma.firstChild);da=Ma.childNodes}else da=
n.createTextNode(da);var Aa;if(!r.support.appendChecked)if(da[0]&&typeof(Aa=da.length)==="number")for(N=0;N<Aa;N++)D(da[N]);else D(da);if(da.nodeType)H.push(da);else H=r.merge(H,da)}}if(B){k=function(Ua){return!Ua.type||Cc.test(Ua.type)};for(W=0;H[W];W++)if(E&&r.nodeName(H[W],"script")&&(!H[W].type||H[W].type.toLowerCase()==="text/javascript"))E.push(H[W].parentNode?H[W].parentNode.removeChild(H[W]):H[W]);else{if(H[W].nodeType===1){n=r.grep(H[W].getElementsByTagName("script"),k);H.splice.apply(H,
[W+1,0].concat(n))}B.appendChild(H[W])}}return H},cleanData:function(k){for(var n,B,E=r.cache,H=r.event.special,N=r.support.deleteExpando,W=0,da;(da=k[W])!=null;W++)if(!(da.nodeName&&r.noData[da.nodeName.toLowerCase()]))if(B=da[r.expando]){if((n=E[B])&&n.events){for(var ha in n.events)H[ha]?r.event.remove(da,ha):r.removeEvent(da,ha,n.handle);if(n.handle)n.handle.elem=null}if(N)delete da[r.expando];else da.removeAttribute&&da.removeAttribute(r.expando);delete E[B]}}});var lc=/alpha\([^)]*\)/i,cd=/opacity=([^)]*)/,
zb=/([A-Z]|^ms)/g,Eb=/^-?\d+(?:px)?$/i,md=/^-?\d/,Dc=/^([\-+])=([\-+.\de]+)/,Ec={position:"absolute",visibility:"hidden",display:"block"},Qc=["Left","Right"],Fc=["Top","Bottom"],bc,qc,Fb;r.fn.css=function(k,n){if(arguments.length===2&&n===f)return this;return r.access(this,k,n,true,function(B,E,H){return H!==f?r.style(B,E,H):r.css(B,E)})};r.extend({cssHooks:{opacity:{get:function(k,n){if(n){var B=bc(k,"opacity","opacity");return B===""?"1":B}else return k.style.opacity}}},cssNumber:{fillOpacity:true,
fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":r.support.cssFloat?"cssFloat":"styleFloat"},style:function(k,n,B,E){if(!(!k||k.nodeType===3||k.nodeType===8||!k.style)){var H,N=r.camelCase(n),W=k.style,da=r.cssHooks[N];n=r.cssProps[N]||N;if(B!==f){E=typeof B;if(E==="string"&&(H=Dc.exec(B))){B=+(H[1]+1)*+H[2]+parseFloat(r.css(k,n));E="number"}if(!(B==null||E==="number"&&isNaN(B))){if(E==="number"&&!r.cssNumber[N])B+="px";if(!da||!("set"in
da)||(B=da.set(k,B))!==f)try{W[n]=B}catch(ha){}}}else{if(da&&"get"in da&&(H=da.get(k,false,E))!==f)return H;return W[n]}}},css:function(k,n,B){var E,H;n=r.camelCase(n);H=r.cssHooks[n];n=r.cssProps[n]||n;if(n==="cssFloat")n="float";if(H&&"get"in H&&(E=H.get(k,true,B))!==f)return E;else if(bc)return bc(k,n)},swap:function(k,n,B){var E={},H;for(H in n){E[H]=k.style[H];k.style[H]=n[H]}B.call(k);for(H in n)k.style[H]=E[H]}});r.curCSS=r.css;r.each(["height","width"],function(k,n){r.cssHooks[n]={get:function(B,
E,H){var N;if(E){if(B.offsetWidth!==0)return S(B,n,H);else r.swap(B,Ec,function(){N=S(B,n,H)});return N}},set:function(B,E){if(Eb.test(E)){E=parseFloat(E);if(E>=0)return E+"px"}else return E}}});if(!r.support.opacity)r.cssHooks.opacity={get:function(k,n){return cd.test((n&&k.currentStyle?k.currentStyle.filter:k.style.filter)||"")?parseFloat(RegExp.$1)/100+"":n?"1":""},set:function(k,n){var B=k.style,E=k.currentStyle,H=r.isNumeric(n)?"alpha(opacity="+n*100+")":"",N=E&&E.filter||B.filter||"";B.zoom=
1;if(n>=1&&r.trim(N.replace(lc,""))===""){B.removeAttribute("filter");if(E&&!E.filter)return}B.filter=lc.test(N)?N.replace(lc,H):N+" "+H}};r(function(){if(!r.support.reliableMarginRight)r.cssHooks.marginRight={get:function(k,n){var B;r.swap(k,{display:"inline-block"},function(){B=n?bc(k,"margin-right","marginRight"):k.style.marginRight});return B}}});if(I.defaultView&&I.defaultView.getComputedStyle)qc=function(k,n){var B,E,H;n=n.replace(zb,"-$1").toLowerCase();if((E=k.ownerDocument.defaultView)&&
(H=E.getComputedStyle(k,null))){B=H.getPropertyValue(n);if(B===""&&!r.contains(k.ownerDocument.documentElement,k))B=r.style(k,n)}return B};if(I.documentElement.currentStyle)Fb=function(k,n){var B,E,H=k.currentStyle&&k.currentStyle[n],N=k.style;if(H===null&&N&&(B=N[n]))H=B;if(!Eb.test(H)&&md.test(H)){B=N.left;if(E=k.runtimeStyle&&k.runtimeStyle.left)k.runtimeStyle.left=k.currentStyle.left;N.left=n==="fontSize"?"1em":H||0;H=N.pixelLeft+"px";N.left=B;if(E)k.runtimeStyle.left=E}return H===""?"auto":H};
bc=qc||Fb;if(r.expr&&r.expr.filters){r.expr.filters.hidden=function(k){var n=k.offsetHeight;return k.offsetWidth===0&&n===0||!r.support.reliableHiddenOffsets&&(k.style&&k.style.display||r.css(k,"display"))==="none"};r.expr.filters.visible=function(k){return!r.expr.filters.hidden(k)}}var Gc=/%20/g,xc=/\[\]$/,Rc=/\r?\n/g,Sc=/#.*$/,nd=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,od=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,dd=/^(?:GET|HEAD)$/,
Tc=/^\/\//,Uc=/\?/,Hc=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,ed=/^(?:select|textarea)/i,Ib=/\s+/,Vc=/([?&])_=[^&]*/,Ic=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,yc=r.fn.load,zc={},Jc={},Cb,Vb,Kc=["*/"]+["*"];try{Cb=sa.href}catch(qd){Cb=I.createElement("a");Cb.href="";Cb=Cb.href}Vb=Ic.exec(Cb.toLowerCase())||[];r.fn.extend({load:function(k,n,B){if(typeof k!=="string"&&yc)return yc.apply(this,arguments);else if(!this.length)return this;var E=k.indexOf(" ");if(E>=0){var H=k.slice(E,
k.length);k=k.slice(0,E)}E="GET";if(n)if(r.isFunction(n)){B=n;n=f}else if(typeof n==="object"){n=r.param(n,r.ajaxSettings.traditional);E="POST"}var N=this;r.ajax({url:k,type:E,dataType:"html",data:n,complete:function(W,da,ha){ha=W.responseText;if(W.isResolved()){W.done(function(ya){ha=ya});N.html(H?r("<div>").append(ha.replace(Hc,"")).find(H):ha)}B&&N.each(B,[ha,da,W])}});return this},serialize:function(){return r.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?
r.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||ed.test(this.nodeName)||od.test(this.type))}).map(function(k,n){var B=r(this).val();return B==null?null:r.isArray(B)?r.map(B,function(E){return{name:n.name,value:E.replace(Rc,"\r\n")}}):{name:n.name,value:B.replace(Rc,"\r\n")}}).get()}});r.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(k,n){r.fn[n]=function(B){return this.on(n,B)}});r.each(["get","post"],
function(k,n){r[n]=function(B,E,H,N){if(r.isFunction(E)){N=N||H;H=E;E=f}return r.ajax({type:n,url:B,data:E,success:H,dataType:N})}});r.extend({getScript:function(k,n){return r.get(k,f,n,"script")},getJSON:function(k,n,B){return r.get(k,n,B,"json")},ajaxSetup:function(k,n){if(n)X(k,r.ajaxSettings);else{n=k;k=r.ajaxSettings}X(k,n);return k},ajaxSettings:{url:Cb,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(Vb[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded",
processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Kc},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":o.String,"text html":true,"text json":r.parseJSON,"text xml":r.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:O(zc),ajaxTransport:O(Jc),ajax:function(k,n){function B(Y,oa,ta,wa){if(lb!==2){lb=2;ib&&clearTimeout(ib);
gb=f;Ua=wa||"";fb.readyState=Y>0?4:0;var Da,Wa,Ka;wa=oa;if(ta){var hb=E,ca=fb,Ba=hb.contents,Na=hb.dataTypes,Ia=hb.responseFields,db,u,F,J;for(u in Ia)if(u in ta)ca[Ia[u]]=ta[u];for(;Na[0]==="*";){Na.shift();if(db===f)db=hb.mimeType||ca.getResponseHeader("content-type")}if(db)for(u in Ba)if(Ba[u]&&Ba[u].test(db)){Na.unshift(u);break}if(Na[0]in ta)F=Na[0];else{for(u in ta){if(!Na[0]||hb.converters[u+" "+Na[0]]){F=u;break}J||(J=u)}F=F||J}if(F){F!==Na[0]&&Na.unshift(F);ta=ta[F]}else ta=void 0}else ta=
f;if(Y>=200&&Y<300||Y===304){if(E.ifModified){if(db=fb.getResponseHeader("Last-Modified"))r.lastModified[ya]=db;if(db=fb.getResponseHeader("Etag"))r.etag[ya]=db}if(Y===304){wa="notmodified";Da=true}else try{db=E;if(db.dataFilter)ta=db.dataFilter(ta,db.dataType);var Q=db.dataTypes;u={};var Z,fa,ra=Q.length,va,Ea=Q[0],Pa,Sa,cb,tb,pb;for(Z=1;Z<ra;Z++){if(Z===1)for(fa in db.converters)if(typeof fa==="string")u[fa.toLowerCase()]=db.converters[fa];Pa=Ea;Ea=Q[Z];if(Ea==="*")Ea=Pa;else if(Pa!=="*"&&Pa!==
Ea){Sa=Pa+" "+Ea;cb=u[Sa]||u["* "+Ea];if(!cb){pb=f;for(tb in u){va=tb.split(" ");if(va[0]===Pa||va[0]==="*")if(pb=u[va[1]+" "+Ea]){tb=u[tb];if(tb===true)cb=pb;else if(pb===true)cb=tb;break}}}cb||pb||r.error("No conversion from "+Sa.replace(" "," to "));if(cb!==true)ta=cb?cb(ta):pb(tb(ta))}}Wa=ta;wa="success";Da=true}catch(rb){wa="parsererror";Ka=rb}}else{Ka=wa;if(!wa||Y){wa="error";if(Y<0)Y=0}}fb.status=Y;fb.statusText=""+(oa||wa);Da?W.resolveWith(H,[Wa,wa,fb]):W.rejectWith(H,[fb,wa,Ka]);fb.statusCode(ha);
ha=f;if(Nb)N.trigger("ajax"+(Da?"Success":"Error"),[fb,E,Da?Wa:Ka]);da.fireWith(H,[fb,wa]);if(Nb){N.trigger("ajaxComplete",[fb,E]);--r.active||r.event.trigger("ajaxStop")}}}if(typeof k==="object"){n=k;k=f}n=n||{};var E=r.ajaxSetup({},n),H=E.context||E,N=H!==E&&(H.nodeType||H instanceof r)?r(H):r.event,W=r.Deferred(),da=r.Callbacks("once memory"),ha=E.statusCode||{},ya,Ma={},Aa={},Ua,Oa,gb,ib,jb,lb=0,Nb,Ob,fb={readyState:0,setRequestHeader:function(Y,oa){if(!lb){var ta=Y.toLowerCase();Y=Aa[ta]=Aa[ta]||
Y;Ma[Y]=oa}return this},getAllResponseHeaders:function(){return lb===2?Ua:null},getResponseHeader:function(Y){var oa;if(lb===2){if(!Oa)for(Oa={};oa=nd.exec(Ua);)Oa[oa[1].toLowerCase()]=oa[2];oa=Oa[Y.toLowerCase()]}return oa===f?null:oa},overrideMimeType:function(Y){if(!lb)E.mimeType=Y;return this},abort:function(Y){Y=Y||"abort";gb&&gb.abort(Y);B(0,Y);return this}};W.promise(fb);fb.success=fb.done;fb.error=fb.fail;fb.complete=da.add;fb.statusCode=function(Y){if(Y){var oa;if(lb<2)for(oa in Y)ha[oa]=
[ha[oa],Y[oa]];else{oa=Y[fb.status];fb.then(oa,oa)}}return this};E.url=((k||E.url)+"").replace(Sc,"").replace(Tc,Vb[1]+"//");E.dataTypes=r.trim(E.dataType||"*").toLowerCase().split(Ib);if(E.crossDomain==null){jb=Ic.exec(E.url.toLowerCase());E.crossDomain=!!(jb&&(jb[1]!=Vb[1]||jb[2]!=Vb[2]||(jb[3]||(jb[1]==="http:"?80:443))!=(Vb[3]||(Vb[1]==="http:"?80:443))))}if(E.data&&E.processData&&typeof E.data!=="string")E.data=r.param(E.data,E.traditional);G(zc,E,n,fb);if(lb===2)return false;Nb=E.global;E.type=
E.type.toUpperCase();E.hasContent=!dd.test(E.type);Nb&&r.active++===0&&r.event.trigger("ajaxStart");if(!E.hasContent){if(E.data){E.url+=(Uc.test(E.url)?"&":"?")+E.data;delete E.data}ya=E.url;if(E.cache===false){jb=r.now();var Kb=E.url.replace(Vc,"$1_="+jb);E.url=Kb+(Kb===E.url?(Uc.test(E.url)?"&":"?")+"_="+jb:"")}}if(E.data&&E.hasContent&&E.contentType!==false||n.contentType)fb.setRequestHeader("Content-Type",E.contentType);if(E.ifModified){ya=ya||E.url;r.lastModified[ya]&&fb.setRequestHeader("If-Modified-Since",
r.lastModified[ya]);r.etag[ya]&&fb.setRequestHeader("If-None-Match",r.etag[ya])}fb.setRequestHeader("Accept",E.dataTypes[0]&&E.accepts[E.dataTypes[0]]?E.accepts[E.dataTypes[0]]+(E.dataTypes[0]!=="*"?", "+Kc+"; q=0.01":""):E.accepts["*"]);for(Ob in E.headers)fb.setRequestHeader(Ob,E.headers[Ob]);if(E.beforeSend&&(E.beforeSend.call(H,fb,E)===false||lb===2)){fb.abort();return false}for(Ob in{success:1,error:1,complete:1})fb[Ob](E[Ob]);if(gb=G(Jc,E,n,fb)){fb.readyState=1;Nb&&N.trigger("ajaxSend",[fb,
E]);if(E.async&&E.timeout>0)ib=setTimeout(function(){fb.abort("timeout")},E.timeout);try{lb=1;gb.send(Ma,B)}catch(R){if(lb<2)B(-1,R);else throw R;}}else B(-1,"No Transport");return fb},param:function(k,n){var B=[],E=function(N,W){W=r.isFunction(W)?W():W;B[B.length]=encodeURIComponent(N)+"="+encodeURIComponent(W)};if(n===f)n=r.ajaxSettings.traditional;if(r.isArray(k)||k.jquery&&!r.isPlainObject(k))r.each(k,function(){E(this.name,this.value)});else for(var H in k)xa(H,k[H],n,E);return B.join("&").replace(Gc,
"+")}});r.extend({active:0,lastModified:{},etag:{}});var Pb=r.now(),rc=/(\=)\?(&|$)|\?\?/i;r.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return r.expando+"_"+Pb++}});r.ajaxPrefilter("json jsonp",function(k,n,B){n=k.contentType==="application/x-www-form-urlencoded"&&typeof k.data==="string";if(k.dataTypes[0]==="jsonp"||k.jsonp!==false&&(rc.test(k.url)||n&&rc.test(k.data))){var E,H=k.jsonpCallback=r.isFunction(k.jsonpCallback)?k.jsonpCallback():k.jsonpCallback,N=o[H],W=k.url,da=k.data,ha="$1"+
H+"$2";if(k.jsonp!==false){W=W.replace(rc,ha);if(k.url===W){if(n)da=da.replace(rc,ha);if(k.data===da)W+=(/\?/.test(W)?"&":"?")+k.jsonp+"="+H}}k.url=W;k.data=da;o[H]=function(ya){E=[ya]};B.always(function(){o[H]=N;if(E&&r.isFunction(N))o[H](E[0])});k.converters["script json"]=function(){E||r.error(H+" was not called");return E[0]};k.dataTypes[0]="json";return"script"}});r.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},
converters:{"text script":function(k){r.globalEval(k);return k}}});r.ajaxPrefilter("script",function(k){if(k.cache===f)k.cache=false;if(k.crossDomain){k.type="GET";k.global=false}});r.ajaxTransport("script",function(k){if(k.crossDomain){var n,B=I.head||I.getElementsByTagName("head")[0]||I.documentElement;return{send:function(E,H){n=I.createElement("script");n.async="async";if(k.scriptCharset)n.charset=k.scriptCharset;n.src=k.url;n.onload=n.onreadystatechange=function(N,W){if(W||!n.readyState||/loaded|complete/.test(n.readyState)){n.onload=
n.onreadystatechange=null;B&&n.parentNode&&B.removeChild(n);n=f;W||H(200,"success")}};B.insertBefore(n,B.firstChild)},abort:function(){if(n)n.onload(0,1)}}}});var Ac=o.ActiveXObject?function(){for(var k in Qb)Qb[k](0,1)}:false,Wc=0,Qb;r.ajaxSettings.xhr=o.ActiveXObject?function(){var k;if(!(k=!this.isLocal&&$a()))a:{try{k=new o.ActiveXObject("Microsoft.XMLHTTP");break a}catch(n){}k=void 0}return k}:$a;(function(k){r.extend(r.support,{ajax:!!k,cors:!!k&&"withCredentials"in k})})(r.ajaxSettings.xhr());
r.support.ajax&&r.ajaxTransport(function(k){if(!k.crossDomain||r.support.cors){var n;return{send:function(B,E){var H=k.xhr(),N,W;k.username?H.open(k.type,k.url,k.async,k.username,k.password):H.open(k.type,k.url,k.async);if(k.xhrFields)for(W in k.xhrFields)H[W]=k.xhrFields[W];k.mimeType&&H.overrideMimeType&&H.overrideMimeType(k.mimeType);if(!k.crossDomain&&!B["X-Requested-With"])B["X-Requested-With"]="XMLHttpRequest";try{for(W in B)H.setRequestHeader(W,B[W])}catch(da){}H.send(k.hasContent&&k.data||
null);n=function(ha,ya){var Ma,Aa,Ua,Oa,gb;try{if(n&&(ya||H.readyState===4)){n=f;if(N){H.onreadystatechange=r.noop;Ac&&delete Qb[N]}if(ya)H.readyState!==4&&H.abort();else{Ma=H.status;Ua=H.getAllResponseHeaders();Oa={};if((gb=H.responseXML)&&gb.documentElement)Oa.xml=gb;Oa.text=H.responseText;try{Aa=H.statusText}catch(ib){Aa=""}if(!Ma&&k.isLocal&&!k.crossDomain)Ma=Oa.text?200:404;else if(Ma===1223)Ma=204}}}catch(jb){ya||E(-1,jb)}Oa&&E(Ma,Aa,Oa,Ua)};if(!k.async||H.readyState===4)n();else{N=++Wc;if(Ac){if(!Qb){Qb=
{};r(o).unload(Ac)}Qb[N]=n}H.onreadystatechange=n}},abort:function(){n&&n(0,1)}}}});var Lc={},Jb,cc,jc=/^(?:toggle|show|hide)$/,dc=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,ec,Mc=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],Xc;r.fn.extend({show:function(k,n,B){if(k||k===0)return this.animate(la("show",3),k,n,B);else{B=0;for(var E=this.length;B<E;B++){k=this[B];if(k.style){n=k.style.display;if(!r._data(k,
"olddisplay")&&n==="none")n=k.style.display="";n===""&&r.css(k,"display")==="none"&&r._data(k,"olddisplay",Qa(k.nodeName))}}for(B=0;B<E;B++){k=this[B];if(k.style){n=k.style.display;if(n===""||n==="none")k.style.display=r._data(k,"olddisplay")||""}}return this}},hide:function(k,n,B){if(k||k===0)return this.animate(la("hide",3),k,n,B);else{B=0;for(var E=this.length;B<E;B++){k=this[B];if(k.style){n=r.css(k,"display");n!=="none"&&!r._data(k,"olddisplay")&&r._data(k,"olddisplay",n)}}for(B=0;B<E;B++)if(this[B].style)this[B].style.display=
"none";return this}},_toggle:r.fn.toggle,toggle:function(k,n,B){var E=typeof k==="boolean";if(r.isFunction(k)&&r.isFunction(n))this._toggle.apply(this,arguments);else k==null||E?this.each(function(){var H=E?k:r(this).is(":hidden");r(this)[H?"show":"hide"]()}):this.animate(la("toggle",3),k,n,B);return this},fadeTo:function(k,n,B,E){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:n},k,B,E)},animate:function(k,n,B,E){function H(){N.queue===false&&r._mark(this);var W=r.extend({},
N),da=this.nodeType===1,ha=da&&r(this).is(":hidden"),ya,Ma,Aa,Ua,Oa;W.animatedProperties={};for(Aa in k){ya=r.camelCase(Aa);if(Aa!==ya){k[ya]=k[Aa];delete k[Aa]}Ma=k[ya];if(r.isArray(Ma)){W.animatedProperties[ya]=Ma[1];Ma=k[ya]=Ma[0]}else W.animatedProperties[ya]=W.specialEasing&&W.specialEasing[ya]||W.easing||"swing";if(Ma==="hide"&&ha||Ma==="show"&&!ha)return W.complete.call(this);if(da&&(ya==="height"||ya==="width")){W.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(r.css(this,
"display")==="inline"&&r.css(this,"float")==="none")if(!r.support.inlineBlockNeedsLayout||Qa(this.nodeName)==="inline")this.style.display="inline-block";else this.style.zoom=1}}if(W.overflow!=null)this.style.overflow="hidden";for(Aa in k){da=new r.fx(this,W,Aa);Ma=k[Aa];if(jc.test(Ma))if(ya=r._data(this,"toggle"+Aa)||(Ma==="toggle"?ha?"show":"hide":0)){r._data(this,"toggle"+Aa,ya==="show"?"hide":"show");da[ya]()}else da[Ma]();else{ya=dc.exec(Ma);Ua=da.cur();if(ya){Ma=parseFloat(ya[2]);Oa=ya[3]||(r.cssNumber[Aa]?
"":"px");if(Oa!=="px"){r.style(this,Aa,(Ma||1)+Oa);Ua*=(Ma||1)/da.cur();r.style(this,Aa,Ua+Oa)}if(ya[1])Ma=(ya[1]==="-="?-1:1)*Ma+Ua;da.custom(Ua,Ma,Oa)}else da.custom(Ua,Ma,"")}}return true}var N=r.speed(n,B,E);if(r.isEmptyObject(k))return this.each(N.complete,[false]);k=r.extend({},k);return N.queue===false?this.each(H):this.queue(N.queue,H)},stop:function(k,n,B){if(typeof k!=="string"){B=n;n=k;k=f}if(n&&k!==false)this.queue(k||"fx",[]);return this.each(function(){function E(ha,ya,Ma){ya=ya[Ma];
r.removeData(ha,Ma,true);ya.stop(B)}var H,N=false,W=r.timers,da=r._data(this);B||r._unmark(true,this);if(k==null)for(H in da)da[H]&&da[H].stop&&H.indexOf(".run")===H.length-4&&E(this,da,H);else if(da[H=k+".run"]&&da[H].stop)E(this,da,H);for(H=W.length;H--;)if(W[H].elem===this&&(k==null||W[H].queue===k)){if(B)W[H](true);else W[H].saveState();N=true;W.splice(H,1)}B&&N||r.dequeue(this,k)})}});r.each({slideDown:la("show",1),slideUp:la("hide",1),slideToggle:la("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},
fadeToggle:{opacity:"toggle"}},function(k,n){r.fn[k]=function(B,E,H){return this.animate(n,B,E,H)}});r.extend({speed:function(k,n,B){var E=k&&typeof k==="object"?r.extend({},k):{complete:B||!B&&n||r.isFunction(k)&&k,duration:k,easing:B&&n||n&&!r.isFunction(n)&&n};E.duration=r.fx.off?0:typeof E.duration==="number"?E.duration:E.duration in r.fx.speeds?r.fx.speeds[E.duration]:r.fx.speeds._default;if(E.queue==null||E.queue===true)E.queue="fx";E.old=E.complete;E.complete=function(H){r.isFunction(E.old)&&
E.old.call(this);if(E.queue)r.dequeue(this,E.queue);else H!==false&&r._unmark(this)};return E},easing:{linear:function(k,n,B,E){return B+E*k},swing:function(k,n,B,E){return(-Math.cos(k*Math.PI)/2+0.5)*E+B}},timers:[],fx:function(k,n,B){this.options=n;this.elem=k;this.prop=B;n.orig=n.orig||{}}});r.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(r.fx.step[this.prop]||r.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||
this.elem.style[this.prop]==null))return this.elem[this.prop];var k,n=r.css(this.elem,this.prop);return isNaN(k=parseFloat(n))?!n||n==="auto"?0:n:k},custom:function(k,n,B){function E(W){return H.step(W)}var H=this,N=r.fx;this.startTime=Xc||eb();this.end=n;this.now=this.start=k;this.pos=this.state=0;this.unit=B||this.unit||(r.cssNumber[this.prop]?"":"px");E.queue=this.options.queue;E.elem=this.elem;E.saveState=function(){H.options.hide&&r._data(H.elem,"fxshow"+H.prop)===f&&r._data(H.elem,"fxshow"+
H.prop,H.start)};if(E()&&r.timers.push(E)&&!ec)ec=setInterval(N.tick,N.interval)},show:function(){var k=r._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=k||r.style(this.elem,this.prop);this.options.show=true;k!==f?this.custom(this.cur(),k):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());r(this.elem).show()},hide:function(){this.options.orig[this.prop]=r._data(this.elem,"fxshow"+this.prop)||r.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),
0)},step:function(k){var n,B=Xc||eb(),E=true,H=this.elem,N=this.options;if(k||B>=N.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();N.animatedProperties[this.prop]=true;for(n in N.animatedProperties)if(N.animatedProperties[n]!==true)E=false;if(E){N.overflow!=null&&!r.support.shrinkWrapBlocks&&r.each(["","X","Y"],function(W,da){H.style["overflow"+da]=N.overflow[W]});N.hide&&r(H).hide();if(N.hide||N.show)for(n in N.animatedProperties){r.style(H,n,N.orig[n]);r.removeData(H,
"fxshow"+n,true);r.removeData(H,"toggle"+n,true)}if(k=N.complete){N.complete=false;k.call(H)}}return false}else{if(N.duration==Infinity)this.now=B;else{k=B-this.startTime;this.state=k/N.duration;this.pos=r.easing[N.animatedProperties[this.prop]](this.state,k,0,1,N.duration);this.now=this.start+(this.end-this.start)*this.pos}this.update()}return true}};r.extend(r.fx,{tick:function(){for(var k,n=r.timers,B=0;B<n.length;B++){k=n[B];!k()&&n[B]===k&&n.splice(B--,1)}n.length||r.fx.stop()},interval:13,stop:function(){clearInterval(ec);
ec=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(k){r.style(k.elem,"opacity",k.now)},_default:function(k){if(k.elem.style&&k.elem.style[k.prop]!=null)k.elem.style[k.prop]=k.now+k.unit;else k.elem[k.prop]=k.now}}});r.each(["width","height"],function(k,n){r.fx.step[n]=function(B){r.style(B.elem,n,Math.max(0,B.now)+B.unit)}});if(r.expr&&r.expr.filters)r.expr.filters.animated=function(k){return r.grep(r.timers,function(n){return k===n.elem}).length};var Mb=/^t(?:able|d|h)$/i,gd=
/^(?:body|html)$/i;r.fn.offset="getBoundingClientRect"in I.documentElement?function(k){var n=this[0],B;if(k)return this.each(function(W){r.offset.setOffset(this,k,W)});if(!n||!n.ownerDocument)return null;if(n===n.ownerDocument.body)return r.offset.bodyOffset(n);try{B=n.getBoundingClientRect()}catch(E){}var H=n.ownerDocument,N=H.documentElement;if(!B||!r.contains(N,n))return B?{top:B.top,left:B.left}:{top:0,left:0};n=H.body;H=K(H);return{top:B.top+(H.pageYOffset||r.support.boxModel&&N.scrollTop||n.scrollTop)-
(N.clientTop||n.clientTop||0),left:B.left+(H.pageXOffset||r.support.boxModel&&N.scrollLeft||n.scrollLeft)-(N.clientLeft||n.clientLeft||0)}}:function(k){var n=this[0];if(k)return this.each(function(ya){r.offset.setOffset(this,k,ya)});if(!n||!n.ownerDocument)return null;if(n===n.ownerDocument.body)return r.offset.bodyOffset(n);var B,E=n.offsetParent,H=n.ownerDocument,N=H.documentElement,W=H.body;B=(H=H.defaultView)?H.getComputedStyle(n,null):n.currentStyle;for(var da=n.offsetTop,ha=n.offsetLeft;(n=
n.parentNode)&&n!==W&&n!==N;){if(r.support.fixedPosition&&B.position==="fixed")break;B=H?H.getComputedStyle(n,null):n.currentStyle;da-=n.scrollTop;ha-=n.scrollLeft;if(n===E){da+=n.offsetTop;ha+=n.offsetLeft;if(r.support.doesNotAddBorder&&!(r.support.doesAddBorderForTableAndCells&&Mb.test(n.nodeName))){da+=parseFloat(B.borderTopWidth)||0;ha+=parseFloat(B.borderLeftWidth)||0}E=n.offsetParent}if(r.support.subtractsBorderForOverflowNotVisible&&B.overflow!=="visible"){da+=parseFloat(B.borderTopWidth)||
0;ha+=parseFloat(B.borderLeftWidth)||0}}if(B.position==="relative"||B.position==="static"){da+=W.offsetTop;ha+=W.offsetLeft}if(r.support.fixedPosition&&B.position==="fixed"){da+=Math.max(N.scrollTop,W.scrollTop);ha+=Math.max(N.scrollLeft,W.scrollLeft)}return{top:da,left:ha}};r.offset={bodyOffset:function(k){var n=k.offsetTop,B=k.offsetLeft;if(r.support.doesNotIncludeMarginInBodyOffset){n+=parseFloat(r.css(k,"marginTop"))||0;B+=parseFloat(r.css(k,"marginLeft"))||0}return{top:n,left:B}},setOffset:function(k,
n,B){var E=r.css(k,"position");if(E==="static")k.style.position="relative";var H=r(k),N=H.offset(),W=r.css(k,"top"),da=r.css(k,"left"),ha={},ya={};if((E==="absolute"||E==="fixed")&&r.inArray("auto",[W,da])>-1){ya=H.position();E=ya.top;da=ya.left}else{E=parseFloat(W)||0;da=parseFloat(da)||0}if(r.isFunction(n))n=n.call(k,B,N);if(n.top!=null)ha.top=n.top-N.top+E;if(n.left!=null)ha.left=n.left-N.left+da;"using"in n?n.using.call(k,ha):H.css(ha)}};r.fn.extend({position:function(){if(!this[0])return null;
var k=this[0],n=this.offsetParent(),B=this.offset(),E=gd.test(n[0].nodeName)?{top:0,left:0}:n.offset();B.top-=parseFloat(r.css(k,"marginTop"))||0;B.left-=parseFloat(r.css(k,"marginLeft"))||0;E.top+=parseFloat(r.css(n[0],"borderTopWidth"))||0;E.left+=parseFloat(r.css(n[0],"borderLeftWidth"))||0;return{top:B.top-E.top,left:B.left-E.left}},offsetParent:function(){return this.map(function(){for(var k=this.offsetParent||I.body;k&&!gd.test(k.nodeName)&&r.css(k,"position")==="static";)k=k.offsetParent;return k})}});
r.each(["Left","Top"],function(k,n){var B="scroll"+n;r.fn[B]=function(E){var H,N;if(E===f){H=this[0];if(!H)return null;return(N=K(H))?"pageXOffset"in N?N[k?"pageYOffset":"pageXOffset"]:r.support.boxModel&&N.document.documentElement[B]||N.document.body[B]:H[B]}return this.each(function(){if(N=K(this))N.scrollTo(!k?E:r(N).scrollLeft(),k?E:r(N).scrollTop());else this[B]=E})}});r.each(["Height","Width"],function(k,n){var B=n.toLowerCase();r.fn["inner"+n]=function(){var E=this[0];return E?E.style?parseFloat(r.css(E,
B,"padding")):this[B]():null};r.fn["outer"+n]=function(E){var H=this[0];return H?H.style?parseFloat(r.css(H,B,E?"margin":"border")):this[B]():null};r.fn[B]=function(E){var H=this[0];if(!H)return E==null?null:this;if(r.isFunction(E))return this.each(function(da){var ha=r(this);ha[B](E.call(this,da,ha[B]()))});if(r.isWindow(H)){var N=H.document.documentElement["client"+n],W=H.document.body;return H.document.compatMode==="CSS1Compat"&&N||W&&W["client"+n]||N}else if(H.nodeType===9)return Math.max(H.documentElement["client"+
n],H.body["scroll"+n],H.documentElement["scroll"+n],H.body["offset"+n],H.documentElement["offset"+n]);else if(E===f){H=r.css(H,B);N=parseFloat(H);return r.isNumeric(N)?N:H}else return this.css(B,typeof E==="string"?E:E+"px")}});o.jQuery=o.$=r;typeof define==="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return r})})(window);/*

 Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 Build: `lodash csp`
 Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 Available under MIT license <http://lodash.com/license>
*/
(function(){function o(Ha,ba,Ya){Ya=(Ya||0)-1;for(var nb=Ha?Ha.length:0;++Ya<nb;)if(Ha[Ya]===ba)return Ya;return-1}function f(Ha,ba){var Ya=typeof ba;Ha=Ha.cache;if(Ya=="boolean"||ba==null)return Ha[ba]?0:-1;if(Ya!="number"&&Ya!="string")Ya="object";var nb=Ya=="number"?ba:O+ba;Ha=(Ha=Ha[Ya])&&Ha[nb];return Ya=="object"?Ha&&o(Ha,ba)>-1?0:-1:Ha?0:-1}function l(Ha){var ba=this.cache,Ya=typeof Ha;if(Ya=="boolean"||Ha==null)ba[Ha]=true;else{if(Ya!="number"&&Ya!="string")Ya="object";var nb=Ya=="number"?
Ha:O+Ha;ba=ba[Ya]||(ba[Ya]={});if(Ya=="object")(ba[nb]||(ba[nb]=[])).push(Ha);else ba[nb]=true}}function i(Ha){return Ha.charCodeAt(0)}function g(Ha,ba){for(var Ya=Ha.criteria,nb=ba.criteria,xb=-1,Zb=Ya.length;++xb<Zb;){var yb=Ya[xb],oc=nb[xb];if(yb!==oc){if(yb>oc||typeof yb=="undefined")return 1;if(yb<oc||typeof oc=="undefined")return-1}}return Ha.index-ba.index}function c(Ha){var ba=-1,Ya=Ha.length,nb=Ha[0],xb=Ha[Ya/2|0],Zb=Ha[Ya-1];if(nb&&typeof nb=="object"&&xb&&typeof xb=="object"&&Zb&&typeof Zb==
"object")return false;nb=h();nb["false"]=nb["null"]=nb["true"]=nb.undefined=false;xb=h();xb.array=Ha;xb.cache=nb;for(xb.push=l;++ba<Ya;)xb.push(Ha[ba]);return xb}function d(Ha){return"\\"+vc[Ha]}function b(){return D.pop()||[]}function h(){return y.pop()||{array:null,cache:null,criteria:null,"false":false,index:0,"null":false,number:null,object:null,push:null,string:null,"true":false,undefined:false,value:null}}function m(Ha){Ha.length=0;D.length<X&&D.push(Ha)}function v(Ha){var ba=Ha.cache;ba&&v(ba);
Ha.array=Ha.cache=Ha.criteria=Ha.object=Ha.number=Ha.string=Ha.value=null;y.length<X&&y.push(Ha)}function w(Ha,ba,Ya){ba||(ba=0);if(typeof Ya=="undefined")Ya=Ha?Ha.length:0;var nb=-1;Ya=Ya-ba||0;for(var xb=Array(Ya<0?0:Ya);++nb<Ya;)xb[nb]=Ha[ba+nb];return xb}function s(Ha){function ba(u){return u&&typeof u=="object"&&!Y(u)&&N.call(u,"__wrapped__")?u:new Ya(u)}function Ya(u,F){this.__chain__=!!F;this.__wrapped__=u}function nb(u){function F(){if(Q){var fa=w(Q);W.apply(fa,arguments)}if(this instanceof
F){var ra=Zb(J.prototype);fa=J.apply(ra,fa||arguments);return Eb(fa)?fa:ra}return J.apply(Z,fa||arguments)}var J=u[0],Q=u[2],Z=u[4];R(F,u);return F}function xb(u,F,J,Q,Z){if(J){var fa=J(u);if(typeof fa!="undefined")return fa}if(Eb(u)){var ra=Mb.call(u);if(!mb[ra])return u;var va=fb[ra];switch(ra){case pa:case kc:return new va(+u);case gc:case Sb:return new va(u);case Hb:fa=va(u.source,Qa.exec(u));fa.lastIndex=u.lastIndex;return fa}}else return u;ra=Y(u);if(F){var Ea=!Q;Q||(Q=b());Z||(Z=b());for(var Pa=
Q.length;Pa--;)if(Q[Pa]==u)return Z[Pa];fa=ra?va(u.length):{}}else fa=ra?w(u):Ka({},u);if(ra){if(N.call(u,"index"))fa.index=u.index;if(N.call(u,"input"))fa.input=u.input}if(!F)return fa;Q.push(u);Z.push(fa);(ra?Fb:Ba)(u,function(Sa,cb){fa[cb]=xb(Sa,F,J,Q,Z)});if(Ea){m(Q);m(Z)}return fa}function Zb(u){return Eb(u)?Aa(u):{}}function yb(u,F,J){if(typeof u!="function")return Jc;if(typeof F=="undefined"||!("prototype"in u))return u;var Q=u.__bindData__;if(typeof Q=="undefined"){if(Kb.funcNames)Q=!u.name;
Q=Q||!Kb.funcDecomp;if(!Q){var Z=E.call(u);Kb.funcNames||(Q=!K.test(Z));if(!Q){Q=r.test(Z);R(u,Q)}}}if(Q===false||Q!==true&&Q[1]&1)return u;switch(J){case 1:return function(fa){return u.call(F,fa)};case 2:return function(fa,ra){return u.call(F,fa,ra)};case 3:return function(fa,ra,va){return u.call(F,fa,ra,va)};case 4:return function(fa,ra,va,Ea){return u.call(F,fa,ra,va,Ea)}}return yc(u,F)}function oc(u){function F(){var pb=Ea?ra:this;if(Z){var rb=w(Z);W.apply(rb,arguments)}if(fa||Sa){rb||(rb=w(arguments));
fa&&W.apply(rb,fa);if(Sa&&rb.length<va){Q|=16;return oc([J,cb?Q:Q&-4,rb,null,ra,va])}}rb||(rb=arguments);if(Pa)J=pb[tb];if(this instanceof F){pb=Zb(J.prototype);rb=J.apply(pb,rb);return Eb(rb)?rb:pb}return J.apply(pb,rb)}var J=u[0],Q=u[1],Z=u[2],fa=u[3],ra=u[4],va=u[5],Ea=Q&1,Pa=Q&2,Sa=Q&4,cb=Q&8,tb=J;R(F,u);return F}function pc(u,F){var J=-1,Q=ic(),Z=u?u.length:0,fa=Z>=G&&Q===o,ra=[];if(fa){var va=c(F);if(va){Q=f;F=va}else fa=false}for(;++J<Z;){va=u[J];Q(F,va)<0&&ra.push(va)}fa&&v(F);return ra}function Tb(u,
F,J,Q){Q=(Q||0)-1;for(var Z=u?u.length:0,fa=[];++Q<Z;){var ra=u[Q];if(ra&&typeof ra=="object"&&typeof ra.length=="number"&&(Y(ra)||Db(ra))){F||(ra=Tb(ra,F,J));var va=-1,Ea=ra.length,Pa=fa.length;for(fa.length+=Ea;++va<Ea;)fa[Pa++]=ra[va]}else J||fa.push(ra)}return fa}function hc(u,F,J,Q,Z,fa){if(J){var ra=J(u,F);if(typeof ra!="undefined")return!!ra}if(u===F)return u!==0||1/u==1/F;if(u===u&&!(u&&vb[typeof u])&&!(F&&vb[typeof F]))return false;if(u==null||F==null)return u===F;var va=Mb.call(u),Ea=Mb.call(F);
if(va==Ga)va=Gb;if(Ea==Ga)Ea=Gb;if(va!=Ea)return false;switch(va){case pa:case kc:return+u==+F;case gc:return u!=+u?F!=+F:u==0?1/u==1/F:u==+F;case Hb:case Sb:return u==jc(F)}Ea=va==La;if(!Ea){var Pa=N.call(u,"__wrapped__"),Sa=N.call(F,"__wrapped__");if(Pa||Sa)return hc(Pa?u.__wrapped__:u,Sa?F.__wrapped__:F,J,Q,Z,fa);if(va!=Gb)return false;va=u.constructor;Pa=F.constructor;if(va!=Pa&&!(zb(va)&&va instanceof va&&zb(Pa)&&Pa instanceof Pa)&&"constructor"in u&&"constructor"in F)return false}va=!Z;Z||(Z=
b());fa||(fa=b());for(Pa=Z.length;Pa--;)if(Z[Pa]==u)return fa[Pa]==F;var cb=0;ra=true;Z.push(u);fa.push(F);if(Ea){Pa=u.length;cb=F.length;if((ra=cb==Pa)||Q)for(;cb--;){Ea=Pa;Sa=F[cb];if(Q)for(;Ea--;){if(ra=hc(u[Ea],Sa,J,Q,Z,fa))break}else if(!(ra=hc(u[cb],Sa,J,Q,Z,fa)))break}}else{ca(F,function(tb,pb,rb){if(N.call(rb,pb)){cb++;return ra=N.call(u,pb)&&hc(u[pb],tb,J,Q,Z,fa)}});ra&&!Q&&ca(u,function(tb,pb,rb){if(N.call(rb,pb))return ra=--cb>-1})}Z.pop();fa.pop();if(va){m(Z);m(fa)}return ra}function wc(u,
F,J,Q,Z){(Y(F)?Fb:Ba)(F,function(fa,ra){var va,Ea,Pa=fa,Sa=u[ra];if(fa&&((Ea=Y(fa))||Na(fa))){for(Pa=Q.length;Pa--;)if(va=Q[Pa]==fa){Sa=Z[Pa];break}if(!va){var cb;if(J){Pa=J(Sa,fa);if(cb=typeof Pa!="undefined")Sa=Pa}cb||(Sa=Ea?Y(Sa)?Sa:[]:Na(Sa)?Sa:{});Q.push(fa);Z.push(Sa);cb||wc(Sa,fa,J,Q,Z)}}else{if(J){Pa=J(Sa,fa);if(typeof Pa=="undefined")Pa=fa}if(typeof Pa!="undefined")Sa=Pa}u[ra]=Sa})}function Oc(u,F){return u+B(Ob()*(F-u+1))}function ad(u,F,J){var Q=-1,Z=ic(),fa=u?u.length:0,ra=[],va=!F&&fa>=
G&&Z===o,Ea=J||va?b():ra;if(va){Ea=c(Ea);Z=f}for(;++Q<fa;){var Pa=u[Q],Sa=J?J(Pa,Q,u):Pa;if(F?!Q||Ea[Ea.length-1]!==Sa:Z(Ea,Sa)<0){if(J||va)Ea.push(Sa);ra.push(Pa)}}if(va){m(Ea.array);v(Ea)}else J&&m(Ea);return ra}function Bc(u){return function(F,J,Q){var Z={};J=ba.createCallback(J,Q,3);Q=-1;var fa=F?F.length:0;if(typeof fa=="number")for(;++Q<fa;){var ra=F[Q];u(Z,ra,J(ra,Q,F),F)}else Ba(F,function(va,Ea,Pa){u(Z,va,J(va,Ea,Pa),Pa)});return Z}}function ac(u,F,J,Q,Z,fa){var ra=F&1,va=F&4,Ea=F&16,Pa=
F&32;if(!(F&2)&&!zb(u))throw new dc;if(Ea&&!J.length){F&=-17;Ea=J=false}if(Pa&&!Q.length){F&=-33;Pa=Q=false}var Sa=u&&u.__bindData__;if(Sa&&Sa!==true){Sa=w(Sa);if(Sa[2])Sa[2]=w(Sa[2]);if(Sa[3])Sa[3]=w(Sa[3]);if(ra&&!(Sa[1]&1))Sa[4]=Z;if(!ra&&Sa[1]&1)F|=8;if(va&&!(Sa[1]&4))Sa[5]=fa;if(Ea)W.apply(Sa[2]||(Sa[2]=[]),J);if(Pa)ya.apply(Sa[3]||(Sa[3]=[]),Q);Sa[1]|=F;return ac.apply(null,Sa)}return(F==1||F===17?nb:oc)([u,F,J,Q,Z,fa])}function ld(u){return ta[u]}function ic(){var u=(u=ba.indexOf)===Uc?o:u;
return u}function Ub(u){return typeof u=="function"&&gd.test(u)}function Cc(u){var F,J;if(!(u&&Mb.call(u)==Gb)||(F=u.constructor,zb(F)&&!(F instanceof F)))return false;ca(u,function(Q,Z){J=Z});return typeof J=="undefined"||N.call(u,J)}function sd(u){return wa[u]}function Db(u){return u&&typeof u=="object"&&typeof u.length=="number"&&Mb.call(u)==Ga||false}function Pc(u,F,J){var Q=oa(u),Z=Q.length;for(F=yb(F,J,3);Z--;){J=Q[Z];if(F(u[J],J,u)===false)break}return u}function lc(u){var F=[];ca(u,function(J,
Q){zb(J)&&F.push(Q)});return F.sort()}function cd(u){for(var F=-1,J=oa(u),Q=J.length,Z={};++F<Q;){var fa=J[F];Z[u[fa]]=fa}return Z}function zb(u){return typeof u=="function"}function Eb(u){return!!(u&&vb[typeof u])}function md(u){return typeof u=="number"||u&&typeof u=="object"&&Mb.call(u)==gc||false}function Dc(u){return typeof u=="string"||u&&typeof u=="object"&&Mb.call(u)==Sb||false}function Ec(u){for(var F=-1,J=oa(u),Q=J.length,Z=Pb(Q);++F<Q;)Z[F]=u[J[F]];return Z}function Qc(u,F,J){var Q=-1,
Z=ic(),fa=u?u.length:0,ra=false;J=(J<0?jb(0,fa+J):J)||0;if(Y(u))ra=Z(u,F,J)>-1;else if(typeof fa=="number")ra=(Dc(u)?u.indexOf(F,J):Z(u,F,J))>-1;else Ba(u,function(va){if(++Q>=J)return!(ra=va===F)});return ra}function Fc(u,F,J){var Q=true;F=ba.createCallback(F,J,3);J=-1;var Z=u?u.length:0;if(typeof Z=="number")for(;++J<Z;){if(!(Q=!!F(u[J],J,u)))break}else Ba(u,function(fa,ra,va){return Q=!!F(fa,ra,va)});return Q}function bc(u,F,J){var Q=[];F=ba.createCallback(F,J,3);J=-1;var Z=u?u.length:0;if(typeof Z==
"number")for(;++J<Z;){var fa=u[J];F(fa,J,u)&&Q.push(fa)}else Ba(u,function(ra,va,Ea){F(ra,va,Ea)&&Q.push(ra)});return Q}function qc(u,F,J){F=ba.createCallback(F,J,3);J=-1;var Q=u?u.length:0;if(typeof Q=="number")for(;++J<Q;){var Z=u[J];if(F(Z,J,u))return Z}else{var fa;Ba(u,function(ra,va,Ea){if(F(ra,va,Ea)){fa=ra;return false}});return fa}}function Fb(u,F,J){var Q=-1,Z=u?u.length:0;F=F&&typeof J=="undefined"?F:yb(F,J,3);if(typeof Z=="number")for(;++Q<Z;){if(F(u[Q],Q,u)===false)break}else Ba(u,F);
return u}function Gc(u,F,J){var Q=u?u.length:0;F=F&&typeof J=="undefined"?F:yb(F,J,3);if(typeof Q=="number")for(;Q--;){if(F(u[Q],Q,u)===false)break}else{var Z=oa(u);Q=Z.length;Ba(u,function(fa,ra,va){ra=Z?Z[--Q]:--Q;return F(va[ra],ra,va)})}return u}function xc(u,F,J){var Q=-1,Z=u?u.length:0;F=ba.createCallback(F,J,3);if(typeof Z=="number")for(var fa=Pb(Z);++Q<Z;)fa[Q]=F(u[Q],Q,u);else{fa=[];Ba(u,function(ra,va,Ea){fa[++Q]=F(ra,va,Ea)})}return fa}function Rc(u,F,J){var Q=-Infinity,Z=Q;if(typeof F!=
"function"&&J&&J[F]===u)F=null;if(F==null&&Y(u)){J=-1;for(var fa=u.length;++J<fa;){var ra=u[J];if(ra>Z)Z=ra}}else{F=F==null&&Dc(u)?i:ba.createCallback(F,J,3);Fb(u,function(va,Ea,Pa){Ea=F(va,Ea,Pa);if(Ea>Q){Q=Ea;Z=va}})}return Z}function Sc(u,F,J,Q){if(!u)return J;var Z=arguments.length<3;F=ba.createCallback(F,Q,4);var fa=-1,ra=u.length;if(typeof ra=="number"){if(Z)J=u[++fa];for(;++fa<ra;)J=F(J,u[fa],fa,u)}else Ba(u,function(va,Ea,Pa){J=Z?(Z=false,va):F(J,va,Ea,Pa)});return J}function nd(u,F,J,Q){var Z=
arguments.length<3;F=ba.createCallback(F,Q,4);Gc(u,function(fa,ra,va){J=Z?(Z=false,fa):F(J,fa,ra,va)});return J}function od(u){var F=-1,J=u?u.length:0,Q=Pb(typeof J=="number"?J:0);Fb(u,function(Z){var fa=Oc(0,++F);Q[F]=Q[fa];Q[fa]=Z});return Q}function dd(u,F,J){var Q;F=ba.createCallback(F,J,3);J=-1;var Z=u?u.length:0;if(typeof Z=="number")for(;++J<Z;){if(Q=F(u[J],J,u))break}else Ba(u,function(fa,ra,va){return!(Q=F(fa,ra,va))});return!!Q}function Tc(u,F,J){var Q=0,Z=u?u.length:0;if(typeof F!="number"&&
F!=null){var fa=-1;for(F=ba.createCallback(F,J,3);++fa<Z&&F(u[fa],fa,u);)Q++}else{Q=F;if(Q==null||J)return u?u[0]:A}return w(u,0,lb(jb(0,Q),Z))}function Uc(u,F,J){if(typeof J=="number"){var Q=u?u.length:0;J=J<0?jb(0,Q+J):J||0}else if(J){J=ed(u,F);return u[J]===F?J:-1}return o(u,F,J)}function Hc(u,F,J){if(typeof F!="number"&&F!=null){var Q=0,Z=-1,fa=u?u.length:0;for(F=ba.createCallback(F,J,3);++Z<fa&&F(u[Z],Z,u);)Q++}else Q=F==null||J?1:jb(0,F);return w(u,Q)}function ed(u,F,J,Q){var Z=0,fa=u?u.length:
Z;J=J?ba.createCallback(J,Q,1):Jc;for(F=J(F);Z<fa;){Q=Z+fa>>>1;J(u[Q])<F?Z=Q+1:fa=Q}return Z}function Ib(u,F,J,Q){if(typeof F!="boolean"&&F!=null){Q=J;J=typeof F!="function"&&Q&&Q[F]===u?null:F;F=false}if(J!=null)J=ba.createCallback(J,Q,3);return ad(u,F,J)}function Vc(){for(var u=arguments.length>1?arguments:arguments[0],F=-1,J=u?Rc(Ia(u,"length")):0,Q=Pb(J<0?0:J);++F<J;)Q[F]=Ia(u,F);return Q}function Ic(u,F){var J=-1,Q=u?u.length:0,Z={};if(!F&&Q&&!Y(u[0]))F=[];for(;++J<Q;){var fa=u[J];if(F)Z[fa]=
F[J];else if(fa)Z[fa[0]]=fa[1]}return Z}function yc(u,F){return arguments.length>2?ac(u,17,w(arguments,2),null,F):ac(u,1,null,null,F)}function zc(u,F,J){var Q,Z,fa,ra,va,Ea,Pa,Sa=0,cb=false,tb=true;if(!zb(u))throw new dc;F=jb(0,F)||0;if(J===true){var pb=true;tb=false}else if(Eb(J)){pb=J.leading;cb="maxWait"in J&&(jb(F,J.maxWait)||0);tb="trailing"in J?J.trailing:tb}var rb=function(){var sc=F-(db()-ra);if(sc<=0){Z&&n(Z);sc=Pa;Z=Ea=Pa=A;if(sc){Sa=db();fa=u.apply(va,Q);if(!Ea&&!Z)Q=va=null}}else Ea=da(rb,
sc)},ud=function(){Ea&&n(Ea);Z=Ea=Pa=A;if(tb||cb!==F){Sa=db();fa=u.apply(va,Q);if(!Ea&&!Z)Q=va=null}};return function(){Q=arguments;ra=db();va=this;Pa=tb&&(Ea||!pb);if(cb===false)var sc=pb&&!Ea;else{if(!Z&&!pb)Sa=ra;var Yc=cb-(ra-Sa),hd=Yc<=0;if(hd){if(Z)Z=n(Z);Sa=ra;fa=u.apply(va,Q)}else Z||(Z=da(ud,Yc))}if(hd&&Ea)Ea=n(Ea);else if(!Ea&&F!==cb)Ea=da(rb,F);if(sc){hd=true;fa=u.apply(va,Q)}if(hd&&!Ea&&!Z)Q=va=null;return fa}}function Jc(u){return u}function Cb(u,F,J){var Q=true,Z=F&&lc(F);if(!F||!J&&
!Z.length){if(J==null)J=F;fa=Ya;F=u;u=ba;Z=lc(F)}if(J===false)Q=false;else if(Eb(J)&&"chain"in J)Q=J.chain;var fa=u,ra=zb(fa);Fb(Z,function(va){var Ea=u[va]=F[va];if(ra)fa.prototype[va]=function(){var Pa=this.__chain__,Sa=this.__wrapped__,cb=[Sa];W.apply(cb,arguments);cb=Ea.apply(u,cb);if(Q||Pa){if(Sa===cb&&Eb(cb))return this;cb=new fa(cb);cb.__chain__=Pa}return cb}})}function Vb(){}function Kc(u){return function(F){return F[u]}}function qd(){return this.__wrapped__}Ha=Ha?Ra.defaults(Bb.Object(),
Ha,Ra.pick(Bb,qa)):Bb;var Pb=Ha.Array,rc=Ha.Boolean,Ac=Ha.Date,Wc=Ha.Function,Qb=Ha.Math,Lc=Ha.Number,Jb=Ha.Object,cc=Ha.RegExp,jc=Ha.String,dc=Ha.TypeError,ec=[],Mc=Jb.prototype,Xc=Ha._,Mb=Mc.toString,gd=cc("^"+jc(Mb).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),k=Qb.ceil,n=Ha.clearTimeout,B=Qb.floor,E=Wc.prototype.toString,H=Ub(H=Jb.getPrototypeOf)&&H,N=Mc.hasOwnProperty,W=ec.push,da=Ha.setTimeout,ha=ec.splice,ya=ec.unshift,Ma=function(){try{var u={},F=Ub(F=
Jb.defineProperty)&&F,J=F(u,u,u)&&F}catch(Q){}return J}(),Aa=Ub(Aa=Jb.create)&&Aa,Ua=Ub(Ua=Pb.isArray)&&Ua,Oa=Ha.isFinite,gb=Ha.isNaN,ib=Ub(ib=Jb.keys)&&ib,jb=Qb.max,lb=Qb.min,Nb=Ha.parseInt,Ob=Qb.random,fb={};fb[La]=Pb;fb[pa]=rc;fb[kc]=Ac;fb[nc]=Wc;fb[Gb]=Jb;fb[gc]=Lc;fb[Hb]=cc;fb[Sb]=jc;Ya.prototype=ba.prototype;var Kb=ba.support={};Kb.funcDecomp=!Ub(Ha.WinRTError)&&r.test(s);Kb.funcNames=typeof Wc.name=="string";ba.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:I,
variable:"",imports:{_:ba}};Aa||(Zb=function(){function u(){}return function(F){if(Eb(F)){u.prototype=F;var J=new u;u.prototype=null}return J||Ha.Object()}}());var R=!Ma?Vb:function(u,F){Ab.value=F;Ma(u,"__bindData__",Ab)},Y=Ua||function(u){return u&&typeof u=="object"&&typeof u.length=="number"&&Mb.call(u)==La||false},oa=!ib?function(u){var F,J=[];if(!u)return J;if(!vb[typeof u])return J;for(F in u)N.call(u,F)&&J.push(F);return J}:function(u){if(!Eb(u))return[];return ib(u)},ta={"&":"&amp;","<":"&lt;",
">":"&gt;",'"':"&quot;","'":"&#39;"},wa=cd(ta),Da=cc("("+oa(wa).join("|")+")","g"),Wa=cc("["+oa(ta).join("")+"]","g"),Ka=function(u,F,J){var Q,Z=u,fa=Z;if(!Z)return fa;var ra=arguments,va=0,Ea=typeof J=="number"?2:ra.length;if(Ea>3&&typeof ra[Ea-2]=="function")var Pa=yb(ra[--Ea-1],ra[Ea--],2);else if(Ea>2&&typeof ra[Ea-1]=="function")Pa=ra[--Ea];for(;++va<Ea;)if((Z=ra[va])&&vb[typeof Z])for(var Sa=-1,cb=vb[typeof Z]&&oa(Z),tb=cb?cb.length:0;++Sa<tb;){Q=cb[Sa];fa[Q]=Pa?Pa(fa[Q],Z[Q]):Z[Q]}return fa},
hb=function(u,F,J){var Q,Z=u,fa=Z;if(!Z)return fa;for(var ra=arguments,va=0,Ea=typeof J=="number"?2:ra.length;++va<Ea;)if((Z=ra[va])&&vb[typeof Z])for(var Pa=-1,Sa=vb[typeof Z]&&oa(Z),cb=Sa?Sa.length:0;++Pa<cb;){Q=Sa[Pa];if(typeof fa[Q]=="undefined")fa[Q]=Z[Q]}return fa},ca=function(u,F,J){var Q;if(!u)return u;if(!vb[typeof u])return u;F=F&&typeof J=="undefined"?F:yb(F,J,3);for(Q in u)if(F(u[Q],Q,u)===false)break;return u},Ba=function(u,F,J){if(!u)return u;if(!vb[typeof u])return u;F=F&&typeof J==
"undefined"?F:yb(F,J,3);for(var Q=-1,Z=vb[typeof u]&&oa(u),fa=Z?Z.length:0;++Q<fa;){J=Z[Q];if(F(u[J],J,u)===false)break}return u},Na=!H?Cc:function(u){if(!(u&&Mb.call(u)==Gb))return false;var F=u.valueOf,J=Ub(F)&&(J=H(F))&&H(J);return J?u==J||H(u)==J:Cc(u)};rc=Bc(function(u,F,J){N.call(u,J)?u[J]++:u[J]=1});Qb=Bc(function(u,F,J){(N.call(u,J)?u[J]:u[J]=[]).push(F)});Lc=Bc(function(u,F,J){u[J]=F});var Ia=xc,db=Ub(db=Ac.now)&&db||function(){return(new Ac).getTime()};Mc=Nb(xa+"08")==8?Nb:function(u,F){return Nb(Dc(u)?
u.replace(aa,""):u,F||0)};ba.after=function(u,F){if(!zb(F))throw new dc;return function(){if(--u<1)return F.apply(this,arguments)}};ba.assign=Ka;ba.at=function(u){var F=arguments,J=-1,Q=Tb(F,true,false,1);F=F[2]&&F[2][F[1]]===u?1:Q.length;for(var Z=Pb(F);++J<F;)Z[J]=u[Q[J]];return Z};ba.bind=yc;ba.bindAll=function(u){for(var F=arguments.length>1?Tb(arguments,true,false,1):lc(u),J=-1,Q=F.length;++J<Q;){var Z=F[J];u[Z]=ac(u[Z],1,null,null,u)}return u};ba.bindKey=function(u,F){return arguments.length>
2?ac(F,19,w(arguments,2),null,u):ac(F,3,null,null,u)};ba.chain=function(u){u=new Ya(u);u.__chain__=true;return u};ba.compact=function(u){for(var F=-1,J=u?u.length:0,Q=[];++F<J;){var Z=u[F];Z&&Q.push(Z)}return Q};ba.compose=function(){for(var u=arguments,F=u.length;F--;)if(!zb(u[F]))throw new dc;return function(){for(var J=arguments,Q=u.length;Q--;)J=[u[Q].apply(this,J)];return J[0]}};ba.constant=function(u){return function(){return u}};ba.countBy=rc;ba.create=function(u,F){var J=Zb(u);return F?Ka(J,
F):J};ba.createCallback=function(u,F,J){var Q=typeof u;if(u==null||Q=="function")return yb(u,F,J);if(Q!="object")return Kc(u);var Z=oa(u),fa=Z[0],ra=u[fa];if(Z.length==1&&ra===ra&&!Eb(ra))return function(va){va=va[fa];return ra===va&&(ra!==0||1/ra==1/va)};return function(va){for(var Ea=Z.length,Pa=false;Ea--;)if(!(Pa=hc(va[Z[Ea]],u[Z[Ea]],null,true)))break;return Pa}};ba.curry=function(u,F){F=typeof F=="number"?F:+F||u.length;return ac(u,4,null,null,null,F)};ba.debounce=zc;ba.defaults=hb;ba.defer=
function(u){if(!zb(u))throw new dc;var F=w(arguments,1);return da(function(){u.apply(A,F)},1)};ba.delay=function(u,F){if(!zb(u))throw new dc;var J=w(arguments,2);return da(function(){u.apply(A,J)},F)};ba.difference=function(u){return pc(u,Tb(arguments,true,true,1))};ba.filter=bc;ba.flatten=function(u,F,J,Q){if(typeof F!="boolean"&&F!=null){Q=J;J=typeof F!="function"&&Q&&Q[F]===u?null:F;F=false}if(J!=null)u=xc(u,J,Q);return Tb(u,F)};ba.forEach=Fb;ba.forEachRight=Gc;ba.forIn=ca;ba.forInRight=function(u,
F,J){var Q=[];ca(u,function(fa,ra){Q.push(ra,fa)});var Z=Q.length;for(F=yb(F,J,3);Z--;)if(F(Q[Z--],Q[Z],u)===false)break;return u};ba.forOwn=Ba;ba.forOwnRight=Pc;ba.functions=lc;ba.groupBy=Qb;ba.indexBy=Lc;ba.initial=function(u,F,J){var Q=0,Z=u?u.length:0;if(typeof F!="number"&&F!=null){var fa=Z;for(F=ba.createCallback(F,J,3);fa--&&F(u[fa],fa,u);)Q++}else Q=F==null||J?1:F||Q;return w(u,0,lb(jb(0,Z-Q),Z))};ba.intersection=function(){for(var u=[],F=-1,J=arguments.length,Q=b(),Z=ic(),fa=Z===o,ra=b();++F<
J;){var va=arguments[F];if(Y(va)||Db(va)){u.push(va);Q.push(fa&&va.length>=G&&c(F?u[F]:ra))}}fa=u[0];var Ea=-1,Pa=fa?fa.length:0,Sa=[];a:for(;++Ea<Pa;){var cb=Q[0];va=fa[Ea];if((cb?f(cb,va):Z(ra,va))<0){F=J;for((cb||ra).push(va);--F;){cb=Q[F];if((cb?f(cb,va):Z(u[F],va))<0)continue a}Sa.push(va)}}for(;J--;)(cb=Q[J])&&v(cb);m(Q);m(ra);return Sa};ba.invert=cd;ba.invoke=function(u,F){var J=w(arguments,2),Q=-1,Z=typeof F=="function",fa=u?u.length:0,ra=Pb(typeof fa=="number"?fa:0);Fb(u,function(va){ra[++Q]=
(Z?F:va[F]).apply(va,J)});return ra};ba.keys=oa;ba.map=xc;ba.mapValues=function(u,F,J){var Q={};F=ba.createCallback(F,J,3);Ba(u,function(Z,fa,ra){Q[fa]=F(Z,fa,ra)});return Q};ba.max=Rc;ba.memoize=function(u,F){if(!zb(u))throw new dc;var J=function(){var Q=J.cache,Z=F?F.apply(this,arguments):O+arguments[0];return N.call(Q,Z)?Q[Z]:Q[Z]=u.apply(this,arguments)};J.cache={};return J};ba.merge=function(u){var F=arguments,J=2;if(!Eb(u))return u;if(typeof F[2]!="number")J=F.length;if(J>3&&typeof F[J-2]==
"function")var Q=yb(F[--J-1],F[J--],2);else if(J>2&&typeof F[J-1]=="function")Q=F[--J];F=w(arguments,1,J);for(var Z=-1,fa=b(),ra=b();++Z<J;)wc(u,F[Z],Q,fa,ra);m(fa);m(ra);return u};ba.min=function(u,F,J){var Q=Infinity,Z=Q;if(typeof F!="function"&&J&&J[F]===u)F=null;if(F==null&&Y(u)){J=-1;for(var fa=u.length;++J<fa;){var ra=u[J];if(ra<Z)Z=ra}}else{F=F==null&&Dc(u)?i:ba.createCallback(F,J,3);Fb(u,function(va,Ea,Pa){Ea=F(va,Ea,Pa);if(Ea<Q){Q=Ea;Z=va}})}return Z};ba.omit=function(u,F,J){var Q={};if(typeof F!=
"function"){var Z=[];ca(u,function(Ea,Pa){Z.push(Pa)});Z=pc(Z,Tb(arguments,true,false,1));for(var fa=-1,ra=Z.length;++fa<ra;){var va=Z[fa];Q[va]=u[va]}}else{F=ba.createCallback(F,J,3);ca(u,function(Ea,Pa,Sa){F(Ea,Pa,Sa)||(Q[Pa]=Ea)})}return Q};ba.once=function(u){var F,J;if(!zb(u))throw new dc;return function(){if(F)return J;F=true;J=u.apply(this,arguments);u=null;return J}};ba.pairs=function(u){for(var F=-1,J=oa(u),Q=J.length,Z=Pb(Q);++F<Q;){var fa=J[F];Z[F]=[fa,u[fa]]}return Z};ba.partial=function(u){return ac(u,
16,w(arguments,1))};ba.partialRight=function(u){return ac(u,32,null,w(arguments,1))};ba.pick=function(u,F,J){var Q={};if(typeof F!="function")for(var Z=-1,fa=Tb(arguments,true,false,1),ra=Eb(u)?fa.length:0;++Z<ra;){var va=fa[Z];if(va in u)Q[va]=u[va]}else{F=ba.createCallback(F,J,3);ca(u,function(Ea,Pa,Sa){if(F(Ea,Pa,Sa))Q[Pa]=Ea})}return Q};ba.pluck=Ia;ba.property=Kc;ba.pull=function(u){for(var F=arguments,J=0,Q=F.length,Z=u?u.length:0;++J<Q;)for(var fa=-1,ra=F[J];++fa<Z;)if(u[fa]===ra){ha.call(u,
fa--,1);Z--}return u};ba.range=function(u,F,J){u=+u||0;J=typeof J=="number"?J:+J||1;if(F==null){F=u;u=0}var Q=-1;F=jb(0,k((F-u)/(J||1)));for(var Z=Pb(F);++Q<F;){Z[Q]=u;u+=J}return Z};ba.reject=function(u,F,J){F=ba.createCallback(F,J,3);return bc(u,function(Q,Z,fa){return!F(Q,Z,fa)})};ba.remove=function(u,F,J){var Q=-1,Z=u?u.length:0,fa=[];for(F=ba.createCallback(F,J,3);++Q<Z;){J=u[Q];if(F(J,Q,u)){fa.push(J);ha.call(u,Q--,1);Z--}}return fa};ba.rest=Hc;ba.shuffle=od;ba.sortBy=function(u,F,J){var Q=
-1,Z=Y(F),fa=u?u.length:0,ra=Pb(typeof fa=="number"?fa:0);Z||(F=ba.createCallback(F,J,3));Fb(u,function(va,Ea,Pa){var Sa=ra[++Q]=h();if(Z)Sa.criteria=xc(F,function(cb){return va[cb]});else(Sa.criteria=b())[0]=F(va,Ea,Pa);Sa.index=Q;Sa.value=va});fa=ra.length;for(ra.sort(g);fa--;){u=ra[fa];ra[fa]=u.value;Z||m(u.criteria);v(u)}return ra};ba.tap=function(u,F){F(u);return u};ba.throttle=function(u,F,J){var Q=true,Z=true;if(!zb(u))throw new dc;if(J===false)Q=false;else if(Eb(J)){Q="leading"in J?J.leading:
Q;Z="trailing"in J?J.trailing:Z}Yb.leading=Q;Yb.maxWait=F;Yb.trailing=Z;return zc(u,F,Yb)};ba.times=function(u,F,J){u=(u=+u)>-1?u:0;var Q=-1,Z=Pb(u);for(F=yb(F,J,1);++Q<u;)Z[Q]=F(Q);return Z};ba.toArray=function(u){if(u&&typeof u.length=="number")return w(u);return Ec(u)};ba.transform=function(u,F,J,Q){var Z=Y(u);if(J==null)if(Z)J=[];else{var fa=u&&u.constructor;J=Zb(fa&&fa.prototype)}if(F){F=ba.createCallback(F,Q,4);(Z?Fb:Ba)(u,function(ra,va,Ea){return F(J,ra,va,Ea)})}return J};ba.union=function(){return ad(Tb(arguments,
true,true))};ba.uniq=Ib;ba.values=Ec;ba.where=bc;ba.without=function(u){return pc(u,w(arguments,1))};ba.wrap=function(u,F){return ac(F,16,[u])};ba.xor=function(){for(var u=-1,F=arguments.length;++u<F;){var J=arguments[u];if(Y(J)||Db(J))var Q=Q?ad(pc(Q,J).concat(pc(J,Q))):J}return Q||[]};ba.zip=Vc;ba.zipObject=Ic;ba.collect=xc;ba.drop=Hc;ba.each=Fb;ba.eachRight=Gc;ba.extend=Ka;ba.methods=lc;ba.object=Ic;ba.select=bc;ba.tail=Hc;ba.unique=Ib;ba.unzip=Vc;Cb(ba);ba.clone=function(u,F,J,Q){if(typeof F!=
"boolean"&&F!=null){Q=J;J=F;F=false}return xb(u,F,typeof J=="function"&&yb(J,Q,1))};ba.cloneDeep=function(u,F,J){return xb(u,true,typeof F=="function"&&yb(F,J,1))};ba.contains=Qc;ba.escape=function(u){return u==null?"":jc(u).replace(Wa,ld)};ba.every=Fc;ba.find=qc;ba.findIndex=function(u,F,J){var Q=-1,Z=u?u.length:0;for(F=ba.createCallback(F,J,3);++Q<Z;)if(F(u[Q],Q,u))return Q;return-1};ba.findKey=function(u,F,J){var Q;F=ba.createCallback(F,J,3);Ba(u,function(Z,fa,ra){if(F(Z,fa,ra)){Q=fa;return false}});
return Q};ba.findLast=function(u,F,J){var Q;F=ba.createCallback(F,J,3);Gc(u,function(Z,fa,ra){if(F(Z,fa,ra)){Q=Z;return false}});return Q};ba.findLastIndex=function(u,F,J){var Q=u?u.length:0;for(F=ba.createCallback(F,J,3);Q--;)if(F(u[Q],Q,u))return Q;return-1};ba.findLastKey=function(u,F,J){var Q;F=ba.createCallback(F,J,3);Pc(u,function(Z,fa,ra){if(F(Z,fa,ra)){Q=fa;return false}});return Q};ba.has=function(u,F){return u?N.call(u,F):false};ba.identity=Jc;ba.indexOf=Uc;ba.isArguments=Db;ba.isArray=
Y;ba.isBoolean=function(u){return u===true||u===false||u&&typeof u=="object"&&Mb.call(u)==pa||false};ba.isDate=function(u){return u&&typeof u=="object"&&Mb.call(u)==kc||false};ba.isElement=function(u){return u&&u.nodeType===1||false};ba.isEmpty=function(u){var F=true;if(!u)return F;var J=Mb.call(u),Q=u.length;if(J==La||J==Sb||J==Ga||J==Gb&&typeof Q=="number"&&zb(u.splice))return!Q;Ba(u,function(){return F=false});return F};ba.isEqual=function(u,F,J,Q){return hc(u,F,typeof J=="function"&&yb(J,Q,2))};
ba.isFinite=function(u){return Oa(u)&&!gb(parseFloat(u))};ba.isFunction=zb;ba.isNaN=function(u){return md(u)&&u!=+u};ba.isNull=function(u){return u===null};ba.isNumber=md;ba.isObject=Eb;ba.isPlainObject=Na;ba.isRegExp=function(u){return u&&typeof u=="object"&&Mb.call(u)==Hb||false};ba.isString=Dc;ba.isUndefined=function(u){return typeof u=="undefined"};ba.lastIndexOf=function(u,F,J){var Q=u?u.length:0;if(typeof J=="number")Q=(J<0?jb(0,Q+J):lb(J,Q-1))+1;for(;Q--;)if(u[Q]===F)return Q;return-1};ba.mixin=
Cb;ba.noConflict=function(){Ha._=Xc;return this};ba.noop=Vb;ba.now=db;ba.parseInt=Mc;ba.random=function(u,F,J){var Q=u==null,Z=F==null;if(J==null)if(typeof u=="boolean"&&Z){J=u;u=1}else if(!Z&&typeof F=="boolean"){J=F;Z=true}if(Q&&Z)F=1;u=+u||0;if(Z){F=u;u=0}else F=+F||0;if(J||u%1||F%1){J=Ob();return lb(u+J*(F-u+parseFloat("1e-"+((J+"").length-1))),F)}return Oc(u,F)};ba.reduce=Sc;ba.reduceRight=nd;ba.result=function(u,F){if(u){var J=u[F];return zb(J)?u[F]():J}};ba.runInContext=s;ba.size=function(u){var F=
u?u.length:0;return typeof F=="number"?F:oa(u).length};ba.some=dd;ba.sortedIndex=ed;ba.template=function(u,F,J){var Q=ba.templateSettings;u=jc(u||"");J=hb({},J,Q);var Z=hb({},J.imports,Q.imports);Q=oa(Z);Z=Ec(Z);var fa,ra=0,va=J.interpolate||sa,Ea="__p += '";va=cc((J.escape||sa).source+"|"+va.source+"|"+(va===I?la:sa).source+"|"+(J.evaluate||sa).source+"|$","g");u.replace(va,function(tb,pb,rb,ud,sc,Yc){rb||(rb=ud);Ea+=u.slice(ra,Yc).replace(Ta,d);if(pb)Ea+="' +\n__e("+pb+") +\n'";if(sc){fa=true;Ea+=
"';\n"+sc+";\n__p += '"}if(rb)Ea+="' +\n((__t = ("+rb+")) == null ? '' : __t) +\n'";ra=Yc+tb.length;return tb});Ea+="';\n";var Pa=va=J.variable;if(!Pa){va="obj";Ea="with ("+va+") {\n"+Ea+"\n}\n"}Ea=(fa?Ea.replace($a,""):Ea).replace(eb,"$1").replace(ub,"$1;");Ea="function("+va+") {\n"+(Pa?"":va+" || ("+va+" = {});\n")+"var __t, __p = '', __e = _.escape"+(fa?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Ea+"return __p\n}";J="\n/*\n//# sourceURL="+(J.sourceURL||
"/lodash/template/source["+Ja++ +"]")+"\n*/";try{var Sa=Wc(Q,"return "+Ea+J).apply(A,Z)}catch(cb){cb.source=Ea;throw cb;}if(F)return Sa(F);Sa.source=Ea;return Sa};ba.unescape=function(u){return u==null?"":jc(u).replace(Da,sd)};ba.uniqueId=function(u){var F=++S;return jc(u==null?"":u)+F};ba.all=Fc;ba.any=dd;ba.detect=qc;ba.findWhere=qc;ba.foldl=Sc;ba.foldr=nd;ba.include=Qc;ba.inject=Sc;Cb(function(){var u={};Ba(ba,function(F,J){ba.prototype[J]||(u[J]=F)});return u}(),false);ba.first=Tc;ba.last=function(u,
F,J){var Q=0,Z=u?u.length:0;if(typeof F!="number"&&F!=null){var fa=Z;for(F=ba.createCallback(F,J,3);fa--&&F(u[fa],fa,u);)Q++}else{Q=F;if(Q==null||J)return u?u[Z-1]:A}return w(u,jb(0,Z-Q))};ba.sample=function(u,F,J){if(u&&typeof u.length!="number")u=Ec(u);if(F==null||J)return u?u[Oc(0,u.length-1)]:A;u=od(u);u.length=lb(jb(0,F),u.length);return u};ba.take=Tc;ba.head=Tc;Ba(ba,function(u,F){var J=F!=="sample";ba.prototype[F]||(ba.prototype[F]=function(Q,Z){var fa=this.__chain__,ra=u(this.__wrapped__,
Q,Z);return!fa&&(Q==null||Z&&!(J&&typeof Q=="function"))?ra:new Ya(ra,fa)})});ba.VERSION="2.4.1";ba.prototype.chain=function(){this.__chain__=true;return this};ba.prototype.toString=function(){return jc(this.__wrapped__)};ba.prototype.value=qd;ba.prototype.valueOf=qd;Fb(["join","pop","shift"],function(u){var F=ec[u];ba.prototype[u]=function(){var J=this.__chain__,Q=F.apply(this.__wrapped__,arguments);return J?new Ya(Q,J):Q}});Fb(["push","reverse","sort","unshift"],function(u){var F=ec[u];ba.prototype[u]=
function(){F.apply(this.__wrapped__,arguments);return this}});Fb(["concat","slice","splice"],function(u){var F=ec[u];ba.prototype[u]=function(){return new Ya(F.apply(this.__wrapped__,arguments),this.__chain__)}});return ba}var A,D=[],y=[],S=0,O=+new Date+"",G=75,X=40,xa=" \t\u000b\u000c\u00a0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",$a=/\b__p \+= '';/g,eb=/\b(__p \+=) '' \+/g,ub=/(__e\(.*?\)|\b__t\)) \+\n'';/g,la=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,
Qa=/\w*$/,K=/^\s*function[ \n\r\t]+\w/,I=/<%=([\s\S]+?)%>/g,aa=RegExp("^["+xa+"]*0+(?=.$)"),sa=/($^)/,r=/\bthis\b/,Ta=/['\n\r\t\u2028\u2029\\]/g,qa=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],Ja=0,Ga="[object Arguments]",La="[object Array]",pa="[object Boolean]",kc="[object Date]",nc="[object Function]",gc="[object Number]",Gb="[object Object]",Hb="[object RegExp]",Sb="[object String]",
mb={};mb[nc]=false;mb[Ga]=mb[La]=mb[pa]=mb[kc]=mb[gc]=mb[Gb]=mb[Hb]=mb[Sb]=true;var Yb={leading:false,maxWait:0,trailing:false},Ab={configurable:false,enumerable:false,value:null,writable:false},vb={"boolean":false,"function":true,object:true,number:false,string:false,undefined:false},vc={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},Bb=vb[typeof window]&&window||this,V=vb[typeof exports]&&exports&&!exports.nodeType&&exports,ga=vb[typeof module]&&module&&!module.nodeType&&
module,ua=ga&&ga.exports===V&&V,Za=vb[typeof global]&&global;if(Za&&(Za.global===Za||Za.window===Za))Bb=Za;var Ra=s();if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){Bb._=Ra;define(function(){return Ra})}else if(V&&ga)if(ua)(ga.exports=Ra)._=Ra;else V._=Ra;else Bb._=Ra}).call(this);(function(o){function f(V,ga){return function(ua){return h(V.call(this,ua),ga)}}function l(V){return function(ga){return this.lang().ordinal(V.call(this,ga))}}function i(){}function g(V){d(this,V)}function c(V){var ga=this._data={},ua=V.years||V.year||V.y||0,Za=V.months||V.month||V.M||0,Ra=V.weeks||V.week||V.w||0,Ha=V.days||V.day||V.d||0,ba=V.hours||V.hour||V.h||0,Ya=V.minutes||V.minute||V.m||0,nb=V.seconds||V.second||V.s||0;V=V.milliseconds||V.millisecond||V.ms||0;this._milliseconds=V+nb*1E3+Ya*
6E4+ba*36E5;this._days=Ha+Ra*7;this._months=Za+ua*12;ga.milliseconds=V%1E3;nb+=b(V/1E3);ga.seconds=nb%60;Ya+=b(nb/60);ga.minutes=Ya%60;ba+=b(Ya/60);ga.hours=ba%24;Ha+=b(ba/24);Ha+=Ra*7;ga.days=Ha%30;Za+=b(Ha/30);ga.months=Za%12;ua+=b(Za/12);ga.years=ua}function d(V,ga){for(var ua in ga)if(ga.hasOwnProperty(ua))V[ua]=ga[ua];return V}function b(V){return V<0?Math.ceil(V):Math.floor(V)}function h(V,ga){for(var ua=V+"";ua.length<ga;)ua="0"+ua;return ua}function m(V,ga,ua){var Za=ga._milliseconds,Ra=ga._days;
ga=ga._months;Za&&V._d.setTime(+V+Za*ua);Ra&&V.date(V.date()+Ra*ua);if(ga){Za=V.date();V.date(1).month(V.month()+ga*ua).date(Math.min(Za,V.daysInMonth()))}}function v(V,ga){var ua=Math.min(V.length,ga.length),Za=Math.abs(V.length-ga.length),Ra=0,Ha;for(Ha=0;Ha<ua;Ha++)~~V[Ha]!==~~ga[Ha]&&Ra++;return Ra+Za}function w(V){if(!V)return la.fn._lang;!I[V]&&aa&&require("./lang/"+V);return I[V]}function s(V){if(V.match(/\[.*\]/))return V.replace(/^\[|\]$/g,"");return V.replace(/\\/g,"")}function A(V){var ga=
V.match(r),ua,Za;ua=0;for(Za=ga.length;ua<Za;ua++)ga[ua]=Bb[ga[ua]]?Bb[ga[ua]]:s(ga[ua]);return function(Ra){var Ha="";for(ua=0;ua<Za;ua++)Ha+=typeof ga[ua].call==="function"?ga[ua].call(Ra,V):ga[ua];return Ha}}function D(V,ga){function ua(Ra){return V.lang().longDateFormat(Ra)||Ra}for(var Za=5;Za--&&Ta.test(ga);)ga=ga.replace(Ta,ua);Ab[ga]||(Ab[ga]=A(ga));return Ab[ga](V)}function y(V){switch(V){case "DDDD":return Ga;case "YYYY":return La;case "YYYYY":return pa;case "S":case "SS":case "SSS":case "DDD":return Ja;
case "MMM":case "MMMM":case "dd":case "ddd":case "dddd":case "a":case "A":return kc;case "Z":case "ZZ":return nc;case "T":return gc;case "MM":case "DD":case "YY":case "HH":case "hh":case "mm":case "ss":case "M":case "D":case "d":case "H":case "h":case "m":case "s":return qa;default:return RegExp(V.replace("\\",""))}}function S(V){var ga,ua=[];for(ga=0;ga<7;ga++)V._a[ga]=ua[ga]=V._a[ga]==null?ga===2?1:0:V._a[ga];ua[3]+=V._tzh||0;ua[4]+=V._tzm||0;ga=new Date(0);if(V._useUTC){ga.setUTCFullYear(ua[0],
ua[1],ua[2]);ga.setUTCHours(ua[3],ua[4],ua[5],ua[6])}else{ga.setFullYear(ua[0],ua[1],ua[2]);ga.setHours(ua[3],ua[4],ua[5],ua[6])}V._d=ga}function O(V){var ga=V._f.match(r),ua=V._i,Za,Ra;V._a=[];for(Za=0;Za<ga.length;Za++){if(Ra=(y(ga[Za]).exec(ua)||[])[0])ua=ua.slice(ua.indexOf(Ra)+Ra.length);if(Bb[ga[Za]]){var Ha=V,ba=void 0,Ya=Ha._a;switch(ga[Za]){case "M":case "MM":Ya[1]=Ra==null?0:~~Ra-1;break;case "MMM":case "MMMM":ba=w(Ha._l).monthsParse(Ra);if(ba!=null)Ya[1]=ba;else Ha._isValid=false;break;
case "D":case "DD":case "DDD":case "DDDD":if(Ra!=null)Ya[2]=~~Ra;break;case "YY":Ya[0]=~~Ra+(~~Ra>68?1900:2E3);break;case "YYYY":case "YYYYY":Ya[0]=~~Ra;break;case "a":case "A":Ha._isPm=(Ra+"").toLowerCase()==="pm";break;case "H":case "HH":case "h":case "hh":Ya[3]=~~Ra;break;case "m":case "mm":Ya[4]=~~Ra;break;case "s":case "ss":Ya[5]=~~Ra;break;case "S":case "SS":case "SSS":Ya[6]=~~(("0."+Ra)*1E3);break;case "Z":case "ZZ":Ha._useUTC=true;if((ba=(Ra+"").match(Sb))&&ba[1])Ha._tzh=~~ba[1];if(ba&&ba[2])Ha._tzm=
~~ba[2];if(ba&&ba[0]==="+"){Ha._tzh=-Ha._tzh;Ha._tzm=-Ha._tzm}}if(Ra==null)Ha._isValid=false}}if(V._isPm&&V._a[3]<12)V._a[3]+=12;if(V._isPm===false&&V._a[3]===12)V._a[3]=0;S(V)}function G(V,ga,ua,Za,Ra){return Ra.relativeTime(ga||1,!!ua,V,Za)}function X(V,ga,ua){ga=ua-ga;ua-=V.day();if(ua>ga)ua-=7;if(ua<ga-7)ua+=7;return Math.ceil(la(V).add("d",ua).dayOfYear()/7)}function xa(V){var ga=V._i,ua=V._f;if(ga===null||ga==="")return null;if(typeof ga==="string")V._i=ga=w().preparse(ga);if(la.isMoment(ga)){V=
d({},ga);V._d=new Date(+ga._d)}else if(ua)if(Object.prototype.toString.call(ua)==="[object Array]"){ga=V;for(var Za,Ra,Ha=99;ga._f.length;){Za=d({},ga);Za._f=ga._f.pop();O(Za);ua=new g(Za);if(ua.isValid()){Ra=ua;break}Za=v(Za._a,ua.toArray());if(Za<Ha){Ha=Za;Ra=ua}}d(ga,Ra)}else O(V);else{Ra=V;ga=Ra._i;ua=sa.exec(ga);if(ga===o)Ra._d=new Date;else if(ua)Ra._d=new Date(+ua[1]);else if(typeof ga==="string"){ua=Ra._i;if(Gb.exec(ua)){Ra._f="YYYY-MM-DDT";for(ga=0;ga<4;ga++)if(Hb[ga][1].exec(ua)){Ra._f+=
Hb[ga][0];break}if(nc.exec(ua))Ra._f+=" Z";O(Ra)}else Ra._d=new Date(ua)}else if(Object.prototype.toString.call(ga)==="[object Array]"){Ra._a=ga.slice(0);S(Ra)}else Ra._d=ga instanceof Date?new Date(+ga):new Date(ga)}return new g(V)}function $a(V,ga){la.fn[V]=la.fn[V+"s"]=function(ua){var Za=this._isUTC?"UTC":"";if(ua!=null){this._d["set"+Za+ga](ua);return this}else return this._d["get"+Za+ga]()}}function eb(V){la.duration.fn[V]=function(){return this._data[V]}}function ub(V,ga){la.duration.fn["as"+
V]=function(){return+this/ga}}for(var la,Qa=Math.round,K,I={},aa=typeof module!=="undefined"&&module.exports,sa=/^\/?Date\((\-?\d+)/i,r=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?|.)/g,Ta=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,qa=/\d\d?/,Ja=/\d{1,3}/,Ga=/\d{3}/,La=/\d{1,4}/,pa=/[+\-]?\d{1,6}/,kc=/[0-9]*[a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF]+\s*?[\u0600-\u06FF]+/i,nc=/Z|[\+\-]\d\d:?\d\d/i,
gc=/T/i,Gb=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,Hb=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Sb=/([\+\-]|\d\d)/gi,mb="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Yb={Milliseconds:1,Seconds:1E3,Minutes:6E4,Hours:36E5,Days:864E5,Months:2592E6,Years:31536E6},Ab={},vb="DDD w W M D d".split(" "),vc="M D H h m s w W".split(" "),Bb={M:function(){return this.month()+
1},MMM:function(V){return this.lang().monthsShort(this,V)},MMMM:function(V){return this.lang().months(this,V)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(V){return this.lang().weekdaysMin(this,V)},ddd:function(V){return this.lang().weekdaysShort(this,V)},dddd:function(V){return this.lang().weekdays(this,V)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return h(this.year()%100,2)},YYYY:function(){return h(this.year(),
4)},YYYYY:function(){return h(this.year(),5)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),true)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),false)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return h(~~(this.milliseconds()/10),2)},SSS:function(){return h(this.milliseconds(),3)},Z:function(){var V=
-this.zone(),ga="+";if(V<0){V=-V;ga="-"}return ga+h(~~(V/60),2)+":"+h(~~V%60,2)},ZZ:function(){var V=-this.zone(),ga="+";if(V<0){V=-V;ga="-"}return ga+h(~~(10*V/6),4)}};vb.length;){K=vb.pop();Bb[K+"o"]=l(Bb[K])}for(;vc.length;){K=vc.pop();Bb[K+K]=f(Bb[K],2)}Bb.DDDD=f(Bb.DDD,3);i.prototype={set:function(V){var ga,ua;for(ua in V){ga=V[ua];if(typeof ga==="function")this[ua]=ga;else this["_"+ua]=ga}},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),
months:function(V){return this._months[V.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(V){return this._monthsShort[V.month()]},monthsParse:function(V){var ga,ua;if(!this._monthsParse)this._monthsParse=[];for(ga=0;ga<12;ga++){if(!this._monthsParse[ga]){ua=la([2E3,ga]);ua="^"+this.months(ua,"")+"|^"+this.monthsShort(ua,"");this._monthsParse[ga]=RegExp(ua.replace(".",""),"i")}if(this._monthsParse[ga].test(V))return ga}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),
weekdays:function(V){return this._weekdays[V.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(V){return this._weekdaysShort[V.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(V){return this._weekdaysMin[V.day()]},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(V){var ga=this._longDateFormat[V];if(!ga&&this._longDateFormat[V.toUpperCase()]){ga=this._longDateFormat[V.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,
function(ua){return ua.slice(1)});this._longDateFormat[V]=ga}return ga},meridiem:function(V,ga,ua){return V>11?ua?"pm":"PM":ua?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},calendar:function(V,ga){var ua=this._calendar[V];return typeof ua==="function"?ua.apply(ga):ua},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",
d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(V,ga,ua,Za){var Ra=this._relativeTime[ua];return typeof Ra==="function"?Ra(V,ga,ua,Za):Ra.replace(/%d/i,V)},pastFuture:function(V,ga){var ua=this._relativeTime[V>0?"future":"past"];return typeof ua==="function"?ua(ga):ua.replace(/%s/i,ga)},ordinal:function(V){return this._ordinal.replace("%d",V)},_ordinal:"%d",preparse:function(V){return V},postformat:function(V){return V},week:function(V){return X(V,
this._week.dow,this._week.doy)},_week:{dow:0,doy:6}};la=function(V,ga,ua){return xa({_i:V,_f:ga,_l:ua,_isUTC:false})};la.utc=function(V,ga,ua){return xa({_useUTC:true,_isUTC:true,_l:ua,_i:V,_f:ga})};la.unix=function(V){return la(V*1E3)};la.duration=function(V,ga){var ua=la.isDuration(V),Za=typeof V==="number",Ra=ua?V._data:Za?{}:V;if(Za)if(ga)Ra[ga]=V;else Ra.milliseconds=V;Za=new c(Ra);if(ua&&V.hasOwnProperty("_lang"))Za._lang=V._lang;return Za};la.humanizeDuration=function(V,ga,ua){return la.duration(V,
ga===true?null:ga).humanize(ga===true?true:ua)};la.version="1.7.2";la.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";la.lang=function(V,ga){if(!V)return la.fn._lang._abbr;if(ga){ga.abbr=V;I[V]||(I[V]=new i);I[V].set(ga)}else I[V]||w(V);la.duration.fn._lang=la.fn._lang=w(V)};la.langData=function(V){if(V&&V._lang&&V._lang._abbr)V=V._lang._abbr;return w(V)};la.isMoment=function(V){return V instanceof g};la.isDuration=function(V){return V instanceof c};la.fn=g.prototype={clone:function(){return la(this)},valueOf:function(){return+this._d},
unix:function(){return Math.floor(+this._d/1E3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._d},toJSON:function(){return la.utc(this).format("YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){return[this.year(),this.month(),this.date(),this.hours(),this.minutes(),this.seconds(),this.milliseconds()]},isValid:function(){if(this._isValid==null)this._isValid=this._a?!v(this._a,(this._isUTC?la.utc(this._a):la(this._a)).toArray()):!isNaN(this._d.getTime());
return!!this._isValid},utc:function(){this._isUTC=true;return this},local:function(){this._isUTC=false;return this},format:function(V){V=D(this,V||la.defaultFormat);return this.lang().postformat(V)},add:function(V,ga){var ua;ua=typeof V==="string"?la.duration(+ga,V):la.duration(V,ga);m(this,ua,1);return this},subtract:function(V,ga){var ua;ua=typeof V==="string"?la.duration(+ga,V):la.duration(V,ga);m(this,ua,-1);return this},diff:function(V,ga,ua){V=this._isUTC?la(V).utc():la(V).local();var Za=(this.zone()-
V.zone())*6E4,Ra;if(ga)ga=ga.replace(/s$/,"");if(ga==="year"||ga==="month"){Za=(this.daysInMonth()+V.daysInMonth())*432E5;Ra=(this.year()-V.year())*12+(this.month()-V.month());Ra+=(this-la(this).startOf("month")-(V-la(V).startOf("month")))/Za;if(ga==="year")Ra/=12}else{Za=this-V-Za;Ra=ga==="second"?Za/1E3:ga==="minute"?Za/6E4:ga==="hour"?Za/36E5:ga==="day"?Za/864E5:ga==="week"?Za/6048E5:Za}return ua?Ra:Qa(Ra)},from:function(V,ga){return la.duration(this.diff(V)).lang(this.lang()._abbr).humanize(!ga)},
fromNow:function(V){return this.from(la(),V)},calendar:function(){var V=this.diff(la().sod(),"days",true);return this.format(this.lang().calendar(V<-6?"sameElse":V<-1?"lastWeek":V<0?"lastDay":V<1?"sameDay":V<2?"nextDay":V<7?"nextWeek":"sameElse",this))},isLeapYear:function(){var V=this.year();return V%4===0&&V%100!==0||V%400===0},isDST:function(){return this.zone()<la([this.year()]).zone()||this.zone()<la([this.year(),5]).zone()},day:function(V){var ga=this._isUTC?this._d.getUTCDay():this._d.getDay();
return V==null?ga:this.add({d:V-ga})},startOf:function(V){V=V.replace(/s$/,"");switch(V){case "year":this.month(0);case "month":this.date(1);case "week":case "day":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}V==="week"&&this.day(0);return this},endOf:function(V){return this.startOf(V).add(V.replace(/s?$/,"s"),1).subtract("ms",1)},isAfter:function(V,ga){ga=typeof ga!=="undefined"?ga:"millisecond";return+this.clone().startOf(ga)>+la(V).startOf(ga)},
isBefore:function(V,ga){ga=typeof ga!=="undefined"?ga:"millisecond";return+this.clone().startOf(ga)<+la(V).startOf(ga)},isSame:function(V,ga){ga=typeof ga!=="undefined"?ga:"millisecond";return+this.clone().startOf(ga)===+la(V).startOf(ga)},sod:function(){return this.clone().startOf("day")},eod:function(){return this.clone().endOf("day")},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return la.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(V){var ga=
Qa((la(this).startOf("day")-la(this).startOf("year"))/864E5)+1;return V==null?ga:this.add("d",V-ga)},isoWeek:function(V){var ga=X(this,1,4);return V==null?ga:this.add("d",(V-ga)*7)},week:function(V){var ga=this.lang().week(this);return V==null?ga:this.add("d",(V-ga)*7)},lang:function(V){if(V===o)return this._lang;else{this._lang=w(V);return this}}};for(K=0;K<mb.length;K++)$a(mb[K].toLowerCase().replace(/s$/,""),mb[K]);$a("year","FullYear");la.fn.days=la.fn.day;la.fn.weeks=la.fn.week;la.fn.isoWeeks=
la.fn.isoWeek;la.duration.fn=c.prototype={weeks:function(){return b(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864E5+this._months*2592E6},humanize:function(V){var ga=+this,ua;ua=!V;var Za=this.lang(),Ra=Qa(Math.abs(ga)/1E3),Ha=Qa(Ra/60),ba=Qa(Ha/60),Ya=Qa(ba/24),nb=Qa(Ya/365);Ra=Ra<45&&["s",Ra]||Ha===1&&["m"]||Ha<45&&["mm",Ha]||ba===1&&["h"]||ba<22&&["hh",ba]||Ya===1&&["d"]||Ya<=25&&["dd",Ya]||Ya<=45&&["M"]||Ya<345&&["MM",Qa(Ya/30)]||nb===1&&["y"]||["yy",nb];Ra[2]=ua;
Ra[3]=ga>0;Ra[4]=Za;ua=G.apply({},Ra);if(V)ua=this.lang().pastFuture(ga,ua);return this.lang().postformat(ua)},lang:la.fn.lang};for(K in Yb)if(Yb.hasOwnProperty(K)){ub(K,Yb[K]);eb(K.toLowerCase())}ub("Weeks",6048E5);la.lang("en",{ordinal:function(V){var ga=V%10;return V+(~~(V%100/10)===1?"th":ga===1?"st":ga===2?"nd":ga===3?"rd":"th")}});if(aa)module.exports=la;if(typeof ender==="undefined")this.moment=la;typeof define==="function"&&define.amd&&define("moment",[],function(){return la})}).call(this);(function(){_.mixin({chunk:function(o,f){var l,i,g,c;c=[];l=i=0;for(g=o.length;f>0?i<g:i>g;l=i+=f)c.push(o.slice(l,+(l+f-1)+1||9E9));return c},pad:function(o,f,l){for(;o.length<f;)o.push(l);return o},sum:function(o){return _(o).reduce(function(f,l){return+f+ +l})},trimLeft:function(o,f){return o.replace(RegExp("^"+f+"*"),"")}})}).call(this);(function(o){function f(){return o.mozAnimationStartTime||o.performance&&o.performance.now&&performance.now()||+new Date}var l={util:{},tracking:{},data:{},els:{},state:{},lib:jQuery};l.data.embedly_key="886d8cceec7711df84894040444cdc60";l.util.domain=function(b){return(document.location.host.indexOf("bitly")===-1?"http://bitly.com":"")+b};l.util.log=function(b,h){h||(h="INFO");try{return console?console.log(h+": "+b):false}catch(m){return false}};l.util.inherit=function(b,h){var m=function(){};m.prototype=
h.prototype;b.prototype=new m;b.prototype.constructor=b;b.superclass=h.prototype;if(h.prototype.constructor==Object.prototype.constructor)h.prototype.constructor=h};l.util.argsAsArray=function(b){return Array.prototype.slice.call(b)};l.util.hashToQueryString=function(b,h,m){var v=[];for(key in b)for(var w=$.isArray(b[key])?b[key]:[b[key]],s=0,A=w.length;s<A;s++)w[s]==="?"&&m?v.push(encodeURIComponent(key)+"="+w[s]):v.push(encodeURIComponent(key)+"="+encodeURIComponent(w[s]));b=v.length?"?"+v.join("&"):
"";return(h||"")+b};l.util.queryStringToHash=function(b){b=b||location.href;if(b.indexOf("?")>-1)b=b.substring(b.indexOf("?")+1);else return{};b=b.split("&");for(var h={},m=b.length;m;){var v=b[--m].split("=");h[decodeURIComponent(v[0].replace(/\+/g," "))]=decodeURIComponent(v[1].replace(/\+/g," "))}return h};l.util.stripQueryString=function(b){if(b.indexOf("?")>-1)b=b.substring(0,b.indexOf("?"));return b};l.util.modifyQueryParams=function(b,h){h=h||location.href;var m=l.util.stripQueryString(h),
v=l.util.queryStringToHash(h),w;for(w in b)if(b[w]===null)delete v[w];else v[w]=b[w];return l.util.hashToQueryString(v,m)};l.util.cleanURL=function(b){return b.replace(/https?:\/\//,"")};l.util.relativeTime=function(b,h){function m(S){var O="a",G;G=S.getHours();S=S.getMinutes();O=G>=12?"p":"a";return((G>=12?G-12:G)||12)+":"+(S<10?"0"+S:S)+O}h=h||{};var v=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],w=new Date(b*1E3),s=new Date,A=s-w,D="",y=w.getFullYear();s.getFullYear();
s=new Date;s.setHours(0);s.setMinutes(0);s.setSeconds(0);s.setMilliseconds(0);if(A>864E5||+w<+s){D+=v[w.getMonth()];D+=" ";D+=w.getDate();if(A>2592E7){D+=" ";D+=y}if(h.show_ts_for_days&&typeof h.show_ts_for_days==="number"&&h.show_ts_for_days<300&&A<864E5*parseInt(h.show_ts_for_days,10))D+=" "+m(w)}else D+=m(w);return D};l.ajax={GET:function(b){return l.ajax.makeRequest("GET",b)},POST:function(b){return l.ajax.makeRequest("POST",b)},PUT:function(b){return l.ajax.makeRequest("PUT",b)},DELETE:function(b){return l.ajax.makeRequest("DELETE",
b)},makeRequest:function(b,h){var m=new l.ajax.request(h);m.setMethod(b);m.url&&m.execute();return m},requestor:null};l.ajax.request=function(b){this.init(b)};l.ajax.request.prototype={init:function(b){b||(b={});if(l.util.isFunction(b))this._setSuccess(b);else{l.util.simpleExtend(this,b);if(this.url)this.url=this.api_base+this.url;if(!b.scope)this.scope=this;if(this.send_json)this.contentType="application/json";this.deferred=$.Deferred();this.promise=this.deferred.promise();b.error?this._setError(b.error,
this.scope):this._setError(this.error,this.scope);b.success?this._setSuccess(b.success,this.scope):this._setSuccess(this.success,this.scope)}},api_base:"",_setSuccess:function(b,h){if(!h)h=this.scope;var m=this,v=function(){var w=l.util.argsAsArray(arguments);l.util.checkResponseForError(w[0],m.error,h,w)||b.apply(h,w)};this.success=v;this.promise.done(v)},_setError:function(b,h){if(typeof b!=="undefined"){h||(h=this);var m=function(){var v=l.util.argsAsArray(arguments);b.apply(h,v)};this.error=m;
this.promise.fail(m)}else this.error=l.ajax.request.prototype.error},setMethod:function(b){switch(b.toLowerCase()){case "delete":case "put":case "post":this.method=b.toUpperCase();break;default:this.method="GET"}},execute:function(b,h){var m=this;if(b)this.url=b;if(h)this.data=h;if(this.url){var v={type:this.method,url:this.url,data:this.data,success:this.deferred.resolve,dataType:this.dataType,contentType:this.contentType,error:this.deferred.reject,async:this.async,timeout:this.timeout,binary:false,
traditional:this.traditional,beforeSend:function(w){m.binary&&w.overrideMimeType("text/plain; charset=x-user-defined;");$.cookie&&w.setRequestHeader("X-XSRFToken",$.cookie.get("_xsrf"))}};this.singleThreaded&&this.xhr&&this.xhr.abort();this.xhr=l.ajax.requestor(v);return this}else throw"Must have a url set to execute";},abort:function(){this.xhr&&this.xhr.abort()},data:{},timeout:2E4,singleThreaded:false,dataType:"json",contentType:"application/x-www-form-urlencoded",scope:this,async:true,method:"GET",
form:false,traditional:true,success:function(){l.util.log("default success")},error:function(){l.util.log("error making a "+this.method+" request to "+this.url,"ERROR")}};l.util.destroyClass=function(b){b=b||{};if(this.hasOwnProperty("els")){for(var h in this.els){b.remove_els&&this.els[h].remove();this.els[h]=null;delete this.els[h]}delete this.els}if(this.hasOwnProperty("obj")){for(var m in this.obj){this.obj[m].destroy&&this.obj[m].destroy();this.obj[m]=null;delete this.obj[m]}delete this.obj}if(this.hasOwnProperty("data")){for(var v in this.data){this.data[v]=
null;delete this.data[v]}delete this.data}if(this.hasOwnProperty("state")){for(var w in this.state){this.state[w]=null;delete this.state[w]}delete this.state}if(this.hasOwnProperty("util")){for(var s in this.util){this.util[s]=null;delete this.util[s]}delete this.util}this.hasOwnProperty("parents")&&delete this.parents;if(this.hasOwnProperty("el")){this.el.remove();this.el=null;delete this.el}return this};l.util.initClass=function(b){if(b)this.el=$(b);this.data={};this.state={};this.els={};this.obj=
{};this.parents={};return this};l.util.isFunction=l.lib.isFunction;l.util.simpleExtend=l.lib.extend;l.ajax.requestor=l.lib.ajax;l.Eventer={evt:{},delegate:function(b){if(!b)return false;var h=b.del?$(b.del):$("body"),m=b.el?$(b.el):$("body"),v=b.evt,w=b.cb,s=b.scope;b=b.ns||"_default";var A=h.data("bitly_evt_id");if(!A){A=this.createEvtId();h.data("bitly_evt_id",A)}if(m&&v&&w){var D=m.data("bitly_evt_id");if(!D){D=this.createEvtId();m.data("bitly_evt_id",D)}this.evt.hasOwnProperty(A)||(this.evt[A]=
{});if(!this.evt[A].hasOwnProperty(v)){this.evt[A][v]={};this._bind(h,v)}h=this.evt[A][v];h.hasOwnProperty(D)||(h[D]=[]);h[D].push({ns:b,cb:function(y,S){return w.call(s,y,S)}})}},undelegate:function(b){var h=b.del?$(b.del):$("body"),m=b.el?$(b.el):$("body"),v=b.evt;b=b.ns||"*";h=h.data("bitly_evt_id");m=m.data("bitly_evt_id");if(h&&m&&this.evt[h]&&this.evt[h][v]&&this.evt[h][v][m]){var w=this.evt[h][v][m];if(b==="*")delete this.evt[h][v][m];else{for(var s=[],A=0,D=w.length;A<D;A++)w[A].ns!==b&&s.push(w[A]);
if(s.length)this.evt[h][v][m]=s;else delete this.evt[h][v][m]}}},_bind:function(b,h){var m=b.data("bitly_evt_id");b.bind(h,function(v,w){if(!m)return true;for(var s=$(v.target),A=s.data("bitly_evt_id");s.length;){if(A&&l.Eventer.evt[m]&&l.Eventer.evt[m][h]&&l.Eventer.evt[m][h][A]&&l.Eventer.evt[m][h][A].length){A=l.Eventer.evt[m][h][A];for(var D=false,y=0,S=A.length;y<S;y++){D=A[y].cb(v,w);if(typeof D!=="undefined"&&!D)return D;if(v.isImmediatePropagationStopped())return false}if(v.isPropagationStopped()||
v.isDefaultPrevented())return false}s=s.parent();A=s.data("bitly_evt_id")}})},bind:function(b){b.del=b.el;this.delegate(b);return this},unbind:function(b){b.del=b.el;this.undelegate(b);return this},trigger:function(b,h,m){h=h||{};m=m?$(m):$("body");m.trigger(b,[h]);return this},createEvtId:function(){return"evt_"+Math.random().toString().replace("0.","")}};l.util.checkResponseForError=function(b,h,m,v){if(b&&b.status_code&&b.status_code!=200){h.apply(m||null,v);return true}return false};l.util.timeStamp=
function(b){if(!b)return"A long time ago.";return(new Date(b*1E3)).toDateString()};l.util.preserveNewline=function(b){return b.replace(/\n/g,"<br/>")};l.util.savePreference=function(b,h,m){l.ajax.POST({url:"/data/preferences",data:{key:b,value:h},success:function(v){if(v.data&&v.data.preferences&&v.data.preferences.length){var w=v.data.preferences[0];if(w.history_privacy==="0"||w.history_privacy==="1")w.history_privacy=parseInt(w.history_privacy,10)?"public":"private"}typeof m==="function"?m(v):$.noop()},
error:function(){console.log("Error updating preferences to: ",b,h)}})};l.util.timeAgoInWords=function(b,h){if(typeof b=="string")b=Date.parse(b);else if(typeof b==="undefined")b=+new Date;if(typeof h=="string")h=Date.parse(h);else if(typeof h==="undefined")h=+new Date;if(!b)return"some time ago";var m=h-b,v=Math.floor(m/6E4),w=Math.floor(m/36E5),s=Math.floor(m/864E5);m=Math.floor(m/31536E6);var A="ago";return m&&m>0?"over a year ago":s&&s>0?s+" day"+(s>1?"s ":" ")+A:w&&w>0?"about "+w+" hour"+(w>
1?"s ":" ")+A:v&&v>0?v+" minute"+(v>1?"s ":" ")+A:"just now"};l.util.scrollToTop=function(b,h){l.util.scrollTo({dur:b,interval:h})};l.util.scrollToEl=function(b){b=b||{};if(typeof b==="string"||"nodeType"in b||b instanceof $)b={el:b};if(!b.el)return $.Deferred().reject();var h=$(b.el),m=0;if(!h.length)return $.Deferred().reject();if(typeof b.offset==="number")m=b.offset;if(b.bottom){m=document.body.scrollHeight;var v=document.body.clientHeight;h=m-(h.offset().top+h.outerHeight(true));b.end=m-h-v}else b.end=
h.offset().top+m;return l.util.scrollTo(b)};l.util.scrollTo=function(b){function h(G){G=G||f();var X=G-O,xa=true;if(X){O=G;G=X/m*A;D-=G;if(G>=0&&D<=v||G<=0&&D>=v){D=v;xa=false}if(w===document.body)window.scrollTo(0,D);else w.scrollTop=D}if(xa)window.reqAnimFrame(h);else{s&&typeof s==="function"&&s.call(window);S.resolve(window)}}b=b||{};var m=b.dur||150,v=b.end||0,w=b.scroll_el||document.body,s=b.onfinish,A=b.dist,D,y,S=$.Deferred();if(w.scrollTop){D=w.scrollTop;b=w.clientHeight;y=w.scrollHeight}else{D=
document.documentElement.scrollTop;b=document.documentElement.clientHeight;y=document.documentElement.scrollHeight}if(A)v=D+A;v=v>=D?Math.min(v,y-b):Math.max(v,0);A=D-v;var O=f();window.reqAnimFrame(h);return S.promise()};l.util.displayDomain=function(b,h){if(b&&b.domain)return b.domain;return!h&&l.data.domain_preference||l.data.default_short_domain||"bit.ly"};l.util.formatDate=function(b,h){h||(h=new Date);if(typeof h==="number")h=new Date(h);var m={Month:function(w,s){var A=$._("January February March April May June July August September October November December").split(" ")[w];
if(s&&typeof s==="number")return A.substring(0,s);return A},Day:function(w,s){var A=$._("Sunday Monday Tuesday Wednesday Thursday Friday Saturday").split(" ")[w];if(s&&typeof s==="number")return A.substring(0,s);return A},Hours:function(w){if(w>12)w-=12;else w||(w=12);return w},Date:function(w,s){if(w<10&&!s)w="0"+w;return w},ampm:function(w){if(w<12)return"AM";return"PM"},Minutes:function(w){if(w<10)return"0"+w;return w},zpad:function(w){if(w<10)return"0"+w;return w},zpad1:function(w){return m.zpad(w+
1)}},v={d:{m:"Date"},D:{m:"Date"},m:{m:"Month",d:"zpad1"},b:{m:"Month"},B:{m:"Month"},I:{m:"Hours"},p:{m:"Hours",d:"ampm"},M:{m:"Minutes"},y:{m:"FullYear"},Y:{m:"FullYear"}};return b.replace(/\%(.){1}/g,function(w,s){var A;if(s in v){var D=v[s];if("m"in D&&"get"+D.m in h){A=h["get"+D.m]();D=D.d||D.m;if(D in m){var y=null;if(s==s.toLowerCase())y=3;A=m[D](A,y)}}}return A})};l.util.isUrl=function(b){return b.search(RegExp("^("+i+g+c+")","i"))===-1?false:true};l.util.validateUrl=function(b){matches=b.match(d);
if(!matches)return null;return matches};var i="(?:(https?|ftp|itms)://)?",g="(?:(?:[^\\s\\!\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\\\[\\]\\^\\_`\\{\\|\\}\\~]+\\.)+(?:aero|arpa|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|local|example|invalid|test|\u0645\u0635\u0631|\u0440\u0444|\u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629|\u0627\u0645\u0627\u0631\u0627\u062a|xn--wgbh1c|xn--p1ai|xn--mgberp4a5d4ar|xn--mgbaam7a8h|\u4e2d\u56fd|\u4e2d\u570b|\u9999\u6e2f|\u0627\u0644\u0627\u0631\u062f\u0646|\u0641\u0644\u0633\u0637\u064a\u0646|\u0642\u0637\u0631|\u0dbd\u0d82\u0d9a\u0dcf|\u0b87\u0bb2\u0b99\u0bcd\u0b95\u0bc8|\u53f0\u7063|\u53f0\u6e7e|\u0e44\u0e17\u0e22|\u062a\u0648\u0646\u0633|xn--fiqs8S|xn--fiqz9S|xn--j6w193g|xn--mgbayh7gpa|xn--ygbi2ammx|xn--wgbl6a|xn--fzc2c9e2c|xn--xkc2al3hye2a|xn--kpry57d|xn--kprw13d|xn--o3cw4h|xn--pgbs0dh|\u0625\u062e\u062a\u0628\u0627\u0631|\u0622\u0632\u0645\u0627\u06cc\u0634\u06cc|\u6d4b\u8bd5|\u6e2c\u8a66|\u0438\u0441\u043f\u044b\u0442\u0430\u043d\u0438\u0435|\u092a\u0930\u0940\u0915\u094d\u0937\u093e|\u03b4\u03bf\u03ba\u03b9\u03bc\u03ae|\ud14c\uc2a4\ud2b8|\u05d8\u05e2\u05e1\u05d8|\u30c6\u30b9\u30c8|\u0baa\u0bb0\u0bbf\u0b9f\u0bcd\u0b9a\u0bc8|xn--kgbechtv|xn--hgbk6aj7f53bba|xn--0zwm56d|xn--g6w251d|xn--80akhbyknj4f|xn--11b5bs3a9aj6g|xn--jxalpdlp|xn--9t4b11yi5a|xn--deba0ad|xn--zckzah|xn--hlcj6aya9esc7a|[a-z]{2})(?::[0-9]+)?|(?:[0-9]{1,3}\\.){3}(?:[0-9]{1,3}))",
c="/?(?:\\S*[^\\s\\.,!\\)\\?])?",d=RegExp("("+i+g+c+")","gi");l.util.fullUriRegex=d;if(!window.reqAnimFrame)window.reqAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b){return window.setTimeout(function(){b((new Date).getTime())},1E3/60)}}();l.util.checkPreviousSave=function(b,h){b.match(/^https?\:\/\//)||(b="http://"+b);l.ajax.POST({url:"/data/beta/user/link_lookup",
data:{url:b},success:function(m){if(m&&m.data&&m.data.link_lookup&&m.data.link_lookup.length&&m.data.link_lookup[0].link){if(h&&h.found)h.found.call(h.scope||window,m.data.link_lookup[0])}else if(h&&h.not_found)h.not_found.call(h.scope||window)},error:function(){if(h&&h.not_found)h.not_found.call(h.scope||window)},scope:h.scope||this})};l.util.extractEmbedlySrc=function(b){if(b.indexOf("i.embed.ly")>-1)return l.util.queryStringToHash(b).url||b;return b};l.util.rebuildEmbedlySrc=function(b,h,m){if(m&&
b===m)return b;if(b.indexOf("embed.ly")<0){b=$.extend({key:l.data.embedly_key,url:b},h);return l.util.hashToQueryString(b,"https://i.embed.ly")}return b};l.util.isFeatureFlagEnabled=function(){var b=Array.prototype.slice.call(arguments);if(!l.data.enabled_feature_flags)return false;for(var h=b.length,m;h--;){m=b[h];if(l.data.enabled_feature_flags.hasOwnProperty(m))return true}return false};l.util.setCaretPosition=function(b,h){b=$(b);if(b.length){b.focus();var m=b[0];if(h===-1)h=b.val().length;if(m.setSelectionRange)try{m.setSelectionRange(h,
h)}catch(v){}else if(m.createTextRange){m=m.createTextRange();m.collapse(true);m.moveEnd("character",h);m.moveStart("character",h);m.select()}}};l.util.doGetCaretPosition=function(b){b=$(b);if(b.length){b=b[0];var h=0;if(document.selection){b.focus();h=document.selection.createRange();h.moveStart("character",-b.value.length);h=h.text.length}else if(b.selectionStart||b.selectionStart=="0")h=b.selectionStart;return h}};l.util.setSelected=function(b,h,m){if(b.setSelectionRange)try{b.setSelectionRange(h,
m)}catch(v){}else if(b.createTextRange){b=b.createTextRange();b.collapse(true);b.moveEnd("character",m);b.moveStart("character",h);b.select()}};l.util.selectText=function(b){var h,m;m=window.getSelection&&window.getSelection();h=document.createRange&&document.createRange()||document.body.createTextRange&&document.body.createTextRange();if(h.moveToElementText&&h.select){h.moveToElementText(b);return h.select()}else if(h.selectNodeContents&&m.removeAllRanges&&m.addRange){h.selectNodeContents(b);m.removeAllRanges();
return m.addRange(h)}else if(m.getBaseAndExtent)return m.setBaseAndExtent(b,0,b,1)};l.util.clearSelectedText=function(){if(window.getSelection)if(window.getSelection().empty)window.getSelection().empty();else window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges();else document.selection&&document.selection.empty()};l.util.collectionSortHandler=function(b){if(!this.sortByField||!this.sortByAdapter)throw Error("SORT INTERFACE NOT SUPPORTED");var h=b.split("_");b=h[0];h=h.length===
1?"desc":h[1];var m={};m.descending=h.toLowerCase()==="asc"?false:true;b=b.toLowerCase();switch(b){case "time":this.sortByField("ts",m);App.Dispatch.trigger("UI.BitmarkList:sort",b+"_"+h);break;case "clicks":this.sortByAdapter(SortAdapters.clicks,m);App.Dispatch.trigger("UI.BitmarkList:sort",b+"_"+h);break;case "title":this.sortByField("title",m);App.Dispatch.trigger("UI.BitmarkList:sort",b+"_"+h)}};window.BITLY=l})(window);(function(o){o=o||"newT";var f=function(h){this.init(h||{})},l=/\<[^\>]+\>|\&[^ ]+;/,i={},g=Array.prototype.slice;f.prototype={constructor:f.prototype.constructor,version:"1.1.3",init:function(h){this.options={if_attr:"when",local_safe:"_safe",safe_mode:true};for(var m in h)this.options[m]=h[m];this.templates={};this.__createMethods();return this},save:function(h,m){var v=h.split("."),w="global";h=v[0];if(v.length>1)w=v[1];this.templates.hasOwnProperty(w)||(this.templates[w]={});this.templates[w][h]=
m;return this},render:function(h,m,v){var w="global",s,A;if(typeof h!=="function"){A=h.split(".");h=A[0];if(A.length>1)w=A[1];h=this.templates[w][h]}v=v||{};v.scope=v.scope||null;v.data=m;if(v.preData)v.data=v.preData.call(v.scope,v.data);v.pre&&v.pre.call(v.scope,v.data);this.cur_options=v;m=h(v.data,v._i,v._idx);if(typeof m==="object"&&m.constructor===[].constructor){h=m;m=document.createDocumentFragment();for(s in h)m.appendChild(h[s])}v.el&&v.el.appendChild(m);v.post&&v.post.call(v.scope,m,v.data);
this.cur_options=null;delete v;return m},renderToString:function(h,m,v){v=v||{};delete v.el;var w=document.createElement("div");w.appendChild(this.render(h,m,v));return w.innerHTML},eachRender:function(h,m,v){v=v||{};if(!this.checkRender(v))return"";var w=document.createDocumentFragment(),s=0,A;v.el=w;for(A in h)if(h.hasOwnProperty(A)){v._i=A;v._idx=s++;this.render(m,h[A],v)}delete v;return w},each:function(h,m,v){v=v||{};if(!this.checkRender(v))return"";this.cur_options=v;v=document.createDocumentFragment();
var w,s=0,A;for(A in h)if(h.hasOwnProperty(A)){(w=m(h[A],A,s))&&v.appendChild(w);s+=1}this.cur_options=null;return v},checkRender:function(h){if(this.options.if_attr in h&&!h[this.options.if_attr])return false;return true},__createMethods:function(){var h="a abbr address area article aside audio b base bdi bdo blockquote body br button canvas caption cite code col colgroup command datalist dd del details device dfn div dl dt em embed fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hgroup hr html i iframe img input ins kbd keygen label legend li link map mark menu meta meter nav noscript object ol optgroup option output p param pre progress q rp rt ruby s samp script section select small source span strong style sub summary sup table tbody td textarea tfoot th thead time title tr track ul var video wbr".split(" ");
h.push("frag");this.addEls(h,true);return this},_createEl:function(h){if(h in i&&i[h].cloneNode)return i[h].cloneNode(false);i[h]=document.createElement(h);return i[h].cloneNode(false)},element:function(h,m,v){var w=g.call(arguments,1),s=h==="frag"?document.createDocumentFragment():this._createEl(h);if(w.length)v=w;else return s;if(m=w[0]&&w[0].toString()==="[object Object]"?v.shift():null){var A;if(!this.checkRender(m))return"";delete m[this.options.if_attr];if(this.options.local_safe in m){A=!!m[this.options.local_safe];
delete m[this.options.local_safe]}for(attr in m)switch(attr.toLowerCase()){case "clss":case "classname":s.className=m[attr].join?m[attr].join(" "):m[attr];break;case "style":s.cssText=s.style.cssText=m[attr];break;default:if(attr.charAt(0)==="_"){w=attr.substring(1);m[attr]&&s.setAttribute(w,w)}else s.setAttribute(attr,m[attr])}}var D;w=0;for(var y=v.length;w<y;w++){D=v[w];switch(typeof D){case "string":this.addText(s,D,A);break;case "number":s.appendChild(document.createTextNode(D));break;case "function":D=
D();typeof D=="string"?this.addText(s,D,A):s.appendChild(D);break;case "undefined":break;default:try{s.appendChild(D)}catch(S){s.appendChild(document.createTextNode(D))}}}return s},addText:function(h,m,v){if(!this.isSafeMode(v)&&m.match(l))h.innerHTML=m;else h.appendChild(document.createTextNode(m));if(h.type&&h.type.toLowerCase()==="textarea")h.value=m;return this},setOption:function(h,m){if(typeof h==="object")for(var v in h)this.options[v]=h[v];else this.options[h]=m;return this},safeMode:function(h){if(typeof h==
"undefined")h=true;this.options.safe_mode=!!h;return this},isSafeMode:function(h){if(typeof h!="undefined")return!!h;if(this.cur_options&&"safe_mode"in this.cur_options)return!!this.cur_options.safe_mode;return!!this.options.safe_mode},clone:function(h){return new f(h)},extend:function(h,m,v,w){if(w){if(!this.hasOwnProperty(h)||v){this[h]=m;return true}}else if(!(h in f.prototype)||v){f.prototype[h]=m;return true}return false},addEls:function(h,m,v){if(typeof h==="string")h=h.split(" ");for(var w=
this,s,A=f.prototype.element,D=0,y=h.length;D<y;D++)(function(S){w.extend(S,function(){s=g.call(arguments);s.unshift(S);return A.apply(w,s)},m,v)})(h[D]);delete w;return this},noConflict:function(h){h=h||"__newT";try{delete window[b]}catch(m){window[b]=undefined}window[o]=c;window[h]=d;b=h;return this}};if(typeof module!=="undefined"&&module.exports!=null)module.exports=new f;else{var c=window[o],d,b=o;window[o]=d=new f}})();(function(){function o(f){switch(f.account_type){case "twitter":return"@"+f.account_name;case "facebook":return f.account_name}if(f.email)return"email to: "+f.email;return f.account_name}newT.save("nyanbox.nyanbox",function(f){var l={clss:"nyanform "+f.mode+" "+(f.mode==="save"&&f._opt&&!f._opt.edit_existing&&" new_bit "||"")+(f.form_class||""),method:"POST"};if(f._opt&&f._opt.form_action)l.action=f._opt.form_action;if(f.mode==="edit")l.clss+=" disabled";var i=nyan.nyanUser.prefs(),g={type:"checkbox",
name:"oneclick",id:"cb_oneclick"},c=window.Bitmarklet&&window.Bitmarklet.is_chrome?"http://bitly.com":"",d=c+"/u/"+nyan.nyanUser.data.user+".png";if(i.one_click_save&&i.one_click_save!=="false")g.checked="checked";return newT.frag(newT.div({clss:"nyancontainer"}),f.mode!="free_form"?newT.form(l,f.mode&&f.mode==="share_saved"?newT.render("share_form.nyanbox",f):newT.render("save_form.nyanbox",f),newT.fieldset({when:f.mode==="save",clss:"buttons clearfix"},newT.render("privacy_toggle",f),newT.a({when:!!f.link,
href:"javascript:void(0)",clss:"cancel main_close"},"Close"),newT.a({when:!!f.link,href:"javascript:void(0)",clss:"save_share primary_btn"},"Share\u2026"),newT.a({when:!f.link,href:"javascript:void(0)",clss:"submit save primary_btn"},"Save bitmark"),newT.a({when:!f.link,href:"javascript:void(0)",clss:"cancel"},"Cancel"),newT.input({type:"submit",clss:"hidden",value:"Save"}),f.mode==="save"&&!f.link&&window.Bitmarklet?newT.span({clss:"protip enter_save"},"Pro tip: press Enter to save immediately"):
""),f.mode==="save"&&window.Bitmarklet?newT.frag(newT.a({href:"#",clss:"open_settings"},"Settings"),newT.span({when:f._opt.showOneClickProTip,clss:"pro-tip"},"\u2190 Pro tip: Turn on 1-click saving in the settings panel"),newT.div({clss:"settings clearfix"},newT.div(newT.input(g),newT.label({"for":"cb_oneclick"},"1-click save and shorten"),newT.p({clss:"oneclickhelp"},"1-click saves will reflect your bitly default privacy setting.")),newT.div({clss:"clearfix"},newT.div({clss:"default_priv"},newT.span("Default privacy:"),
newT.a({href:"#","data-default_privacy":i.history_privacy||"public"},i.history_privacy||"public")),window.Bitmarklet?newT.div({clss:"identity"},newT.span({clss:"avatar",style:"background-image:url("+d+");"}),newT.a({href:"#",clss:"button white"},newT.span({clss:"nfh"},nyan.nyanUser.displayName()),newT.span({clss:"for_hover"},"Sign out"))):""))):"",newT.fieldset({when:f.mode==="edit",clss:"buttons clearfix"},newT.input({type:"button",clss:"cancel button",value:"Cancel"}),newT.input({type:"submit",
clss:"save primary_btn button",value:"Save"})),newT.fieldset({when:f.mode==="share_saved"&&"not_saved"in f._opt,clss:"buttons clearfix"},newT.a({clss:"share primary_btn button",href:"javascript:void(0)"},"Share to",newT.ul()),newT.a({clss:"cancel",href:"javascript:void(0)"},"Cancel")),newT.fieldset({when:f.mode==="share_saved"&&!("not_saved"in f._opt),clss:"buttons clearfix"},newT.a({clss:"share primary_btn button",href:"javascript:void(0)"},"Share to",newT.ul()),newT.a({clss:"cancel",href:"javascript:void(0)"},
"Cancel")),newT.div({clss:"shave_indicator"}),window.Bitmarklet&&f.mode!="save"?newT.div({clss:"identity"},newT.a({href:"#",clss:"button white"},newT.span({clss:"nfh"},nyan.nyanUser.displayName()),newT.span({clss:"for_hover"},"Sign out")),newT.span({clss:"avatar",style:"background-image:url("+c+"/u/"+nyan.nyanUser.data.user+".png);"})):"",newT.a({clss:"close blue"},f.mode==="save"&&!f.link?"Cancel":"Close")):newT.form(l,f._opt.form_title?newT.strong({clss:"nyan_title clearfix "+f.mode},f._opt.link_logo?
newT.a({clss:"logo",title:"Go to bitly",href:"bitly"},"bitly"):"",newT.em(f._opt.form_title),f._opt&&f._opt.sub_title?newT.span({clss:"subtitle"},f._opt.sub_title):""):"",newT.div({clss:"contents"},f.content),"buttons"in f?f.buttons:newT.fieldset({clss:"buttons clearfix"},newT.a({clss:"cancel",href:"javascript:void(0)"},"Cancel")),newT.div({clss:"shave_indicator"}),newT.a({clss:"close blue"},"Close")))});newT.save("save_form_header.nyanbox",function(f){return newT.strong({clss:"nyan_title clearfix "+
f.mode},newT.em(f._opt.form_title||(f.link?f._opt.just_saved?"You just saved this bitmark":"You've saved this before":"Add a bitmark")))});newT.save("save_form_long_url.nyanbox",function(f){var l=f.url.replace(/https?\:\/\//,"").split("/"),i=l.shift(),g,c=window.Bitmarklet&&window.Bitmarklet.is_chrome?"http://bitly.com":"";if(f.link)g=f.user_hash||f.link.split("/").pop();return newT.div({clss:"long_url_container"},newT.p({clss:"long_url"},newT.strong(i),l.length?newT.span("/"+l.join("/")):""),newT.ul({clss:"click_stats"},
newT.li({clss:"saves"},newT.a({href:c+"/"+g+"+/global",target:"_blank"})),newT.li({clss:"global_clicks"},newT.a({href:c+"/"+g+"+/global",target:"_blank"})),newT.li({clss:"user_clicks"},newT.a({href:c+"/"+g+"+",target:"_blank"},newT.span()," via you"))))});newT.save("save_form_title.nyanbox",function(f){return newT.p({clss:"title",title:"Click to edit title"},newT.span(f.title||""))});newT.save("save_form_notes.nyanbox",function(f){return f.link?newT.div({clss:"note_container"},newT.p({clss:"note"+
(!f.note?" empty":""),title:"Click to edit note"},newT.span(f.note||""))):newT.label({clss:"notes expandorama"},newT.form(newT.pre(f.note||""),newT.textarea({clss:"note",name:"notes",placeholder:"Add a note?"},f.note||"")))});newT.save("save_form.nyanbox",function(f){return newT.frag(newT.render("save_form_header.nyanbox",f),newT.div({clss:"contents"},newT.render("save_form_long_url.nyanbox",f),f.link?newT.render("short_url.nyanbox",f):"",newT.fieldset({clss:"nyanbox"},newT.render("save_form_title.nyanbox",
f),newT.render("save_form_notes.nyanbox",f))))});newT.save("include_link_text.nyanbox",function(f){return newT.frag(newT.frag({when:f=="HAS_MSG"},"Bitlink will be appended to tweet."),newT.frag({when:f=="TITLE_NO_MSG"},"Tweet will consist of title & Bitlink."),newT.frag({when:f=="NO_TITLE_NO_MSG"},"Bitlink has no title. Tweet will consist only of Bitlink."))});newT.save("share_form.nyanbox",function(f){var l;a:if(f.note)l=f.note;else{var i=[f.link];f.keyword_link&&i.push(f.keyword_link);i=RegExp("(?:"+
i.join("|")+")$","gi");if(f.shares&&f.shares.length)for(var g=0,c=f.shares.length;g<c;g++){l=f.shares[g];if(l.share_type!="email"&&l.text){l=l.text.replace(i,"");break a}}l=""}i={type:"checkbox",id:"cb_email",name:"email_cb",clss:"cb_network",value:"email"};nyan.share.accounts.length||(i.checked="checked");g="HAS_MSG";if(f.title&&!l)g="TITLE_NO_MSG";if(!f.title&&!l)g="NO_TITLE_NO_MSG";l=newT.fieldset({clss:"nyanbox share"+(f.url?"":" bulk")},newT.label({clss:"notes"},"Include a message?",newT.textarea({clss:"share_text"},
l),newT.span({clss:"share_text_len"})),newT.div({when:f.url,clss:"include_link"+(!f.title&&!l?" error":"")},newT.input({type:"checkbox",id:"cb_include_link",checked:"checked"}),newT.p({clss:"twitter_include_message"},newT.render("include_link_text.nyanbox",g))));return newT.frag(newT.strong({clss:"nyan_title clearfix"},f._opt.link_logo?newT.a({clss:"logo",title:"Go to bitly",href:"bitly"},"bitly"):"",newT.em(f._opt.form_title||(!("not_saved"in f._opt)||f._opt.not_saved?"Share this Bitlink":"Saved! Now share it.")),
f._opt&&f._opt.sub_title?newT.span({clss:"subtitle"},f._opt.sub_title):""),newT.div({clss:"contents"},newT.div({when:f.url,clss:"share_details"},newT.div({clss:"inner clearfix"},newT.render("nyan_claw.nyanbox",f),newT.p({clss:"fb_indicator"},newT.span("Picture will be included with Facebook post only")),newT.div({clss:"title_long_url"},newT.strong({clss:"title"},f.title||"No Title"),newT.span({clss:"long_url"},f._opt&&f._opt.replace_long_url||f.url.replace(/https?\:\/\//,""))),f.link?newT.div({clss:"capsule"},
newT.span("Your Bitlink:"),newT.render("short_url.nyanbox",f)):"")),!f.url?l:"",newT.label({clss:"share_to"},"Share to..."),newT.render("social_networks.nyanbox",{accounts:nyan.share.accounts}),newT.fieldset({clss:"network nb_email","data-account_type":"email"},newT.input(i),newT.label({"for":"_cb_email",id:"lbl_email",clss:"clearfix"},newT.input({type:"text",id:"share_email",clss:"text",placeholder:"Enter an email address"}),newT.a({clss:"add_chip button white",href:"javascript:void(0)"},"Add"),
newT.ul({clss:"ponchsuggest"}),newT.ul({clss:"ponch clearfix"}))),f.url?l:"",f.link?"":newT.render("privacy_toggle",f)))});newT.save("social_networks.nyanbox",function(f){for(var l={facebook:0,twitter:0,email:0},i=0,g=f.accounts.length;i<g;i++)l[f.accounts[i].account_type]++;return newT.div({clss:"socialnetworks"},!l.facebook?newT.render("empty_network.nyanbox",{network:"facebook"}):"",!l.twitter?newT.render("empty_network.nyanbox",{network:"twitter"}):"",newT.eachRender(f.accounts,"network.nyanbox"))});
newT.save("short_url.nyanbox",function(f){var l=f.keyword_link||f.link||"";return newT.div({clss:"copy_customize"},newT.div({clss:"copy"},newT.a({href:l,clss:"copy_short_url"},newT.b("http://"),l.replace(/https?:\/\//,"")),newT.span({clss:"ctrlc"+(navigator.platform.indexOf("Mac")>-1?" mac":""),_safe:false},"Press "+(navigator.platform.indexOf("Mac")>-1?"&#8984;-c":"Ctrl-C")),f.link&&(!window.Bitmarklet||!Bitmarklet.is_chrome)?newT.i({clss:"customize_trigger fa fa-fw fa-pencil"}):"",newT.a({clss:"copy_button",
href:"javascript:void(0)",title:"Copy Bitlink to clipboard"},"Copy")))});newT.save("network.nyanbox",function(f){var l="cb_"+f.account_type+"_"+f.account_login,i={type:"checkbox",id:l,clss:"cb_network",value:f.account_id};if(f.primary)i.checked="checked";var g=window.Bitmarklet&&window.Bitmarklet.is_chrome?"http://bitly.com":"";return newT.fieldset({clss:"network "+f.account_type+(f.num_accts>1?" mult":""),"data-account_type":f.account_type,"data-account_login":f.account_login,"data-account_name":f.account_name},
newT.input(i),newT.label({"for":l},newT.span({clss:"avatar",title:f.account_login,style:"background-image: url("+g+"/data/avatar/"+f.account_type+"/"+f.account_login+".png);"}),newT.frag({when:f.account_type==="twitter"},newT.strong({clss:"accountname"},"@",f.account_name)),newT.frag({when:f.account_type==="facebook"},newT.strong({clss:"realname"},f.account_name))))});newT.save("empty_network.nyanbox",function(f){for(var l=nyan.nyanUser.prefs().dismissed_share_targets||[],i=0,g=l.length;i<g;i++)if(l[i].toLowerCase()===
f.network.toLowerCase())return"";l="cb_"+f.network+"_empty";i={twitter:"Twitter",facebook:"Facebook"};return newT.fieldset({clss:"empty_network "+f.network,"data-network":f.network},newT.input({type:"checkbox",id:l,clss:"cb_network",value:f.network}),newT.label({clss:"label nb_connect","for":l,"data-network":f.network},newT.strong("Connect to ",i[f.network]),newT.a({clss:"remove",href:"javascript:void(0)"},"x")),newT.div({clss:"confirmation_panel"},newT.span({clss:"confirm_message"},"If you ever change your mind, connect to ",
i[f.network]," in ",newT.a({href:"http://bitly.com/a/settings/connected",target:"_blank"},"Settings")),newT.a({clss:"confirm_remove superfancy",href:"javascript:void(0)"},"Remove this row?")))});newT.save("saved_state.nyanbox",function(f){return newT.fieldset({clss:"saved_state clearfix"},newT.span({clss:"saved"},"Saved! "),newT.a({clss:"share_saved therm_butt share",href:f.share_url||"#"},"Share"),newT.render("short_url.nyanbox",f),newT.a({clss:"view_bitmarks superfancy",href:"http://bitly.com/",
target:"_blank"},"View your Bitlinks"))});newT.save("shared_state.nyanbox",function(f){return newT.fieldset({clss:"shared_state clearfix"},newT.span({clss:"shared"},"Shared! "),newT.render("short_url.nyanbox",f),newT.a({clss:"view_bitmarks superfancy",href:"http://bitly.com/",target:"_blank"},"View your Bitlinks"))});newT.save("error_state.nyanbox",function(f){var l=f.successes;f=f.errors;var i=window.Bitmarklet&&window.Bitmarklet.is_chrome?"http://bitly.com":"";return newT.div({clss:"error_state clearfix"},
newT.strong({clss:"error_title"},"We had a bit of trouble there."),newT.div({clss:"error_status clearfix"},f.length>1?newT.a({clss:"button orange retry_all retry_share"},"Retry all"):"",newT.h2("Here's where we are at."),newT.ul({clss:"errors"},newT.each(f,function(g){var c=g.account_type?"background-image: url("+i+"/data/avatar/"+g.account_type+"/"+g.account_login+".png);":"";return newT.li({clss:["shared_nw","clearfix","error",g.account_type||"email"]},newT.span({clss:"status"},"error"),newT.span({clss:"avatar",
title:g.account_login,style:c}),o(g),newT.a({clss:"button retry_share orange","data-account-type":g.account_type||email,"data-account":g.account_id||data.email},"Retry"))})),newT.ul({clss:"successes"},newT.each(l,function(g){var c=g.account_type?"background-image: url("+i+"/data/avatar/"+g.account_type+"/"+g.account_login+".png);":"";return newT.li({clss:["shared_nw","clearfix","success",g.account_type||"email"]},newT.span({clss:"status"},"success"),newT.span({clss:"avatar",title:g.account_login,
style:c}),o(g),newT.span({clss:"confirmation"},"Success!"))})),newT.p({clss:"contact"},"If this doesnt work out, please contact us at ",newT.a({href:"mailto:support@bitly.com"},"support@bitly.com"),".")),newT.a({clss:"cancel_retry_share"},"Close"))});newT.save("token_error_state.nyanbox",function(f){f=f&&f.length?f[0]:{};var l={twitter:"Twitter",facebook:"Facebook",email:"email"};return newT.div({clss:"error_state token_error clearfix"},newT.strong({clss:"error_title"},"Something broke. You can fix it right now."),
newT.div(newT.h2("We were unable to connect to your ",l[f.account_type]," account."),newT.p("Possible causes include:"),newT.ul({clss:"token_causes"},newT.li("Your ",l[f.account_type]," password changed."),newT.li("You have not granted bitly approval to share to your ",l[f.account_type]," account."),newT.li("Some other complicated issue we can't quite explain.")),newT.div({clss:"reconnect"},newT.strong({_safe:false},"To fix this, reconnect bitly to "+l[f.account_type]+"&hellip;"),newT.a({clss:"button orange connect_token_error",
href:"/a/settings/connected",target:"_blank","data-account_login":f.account_login,"data-account_type":f.account_type},"Reconnect to ",l[f.account_type]),newT.span({clss:"desc"},"Make sure your browser is set to allow popups from ",location.origin),newT.strong({_safe:false},"&hellip;then try sharing the item again.")),newT.p({clss:"contact"},"If this doesnt work out, please contact us at ",newT.a({href:"mailto:support@bitly.com"},"support@bitly.com"),".")),newT.a({clss:"cancel_retry_share"},"Close"))});
newT.save("nyan_claw.nyanbox",function(f){return newT.fieldset({clss:"nyan_claw"},newT.input({type:"hidden",val:f.thumbnail||"",clss:"nyan_claw_src"}),newT.div({clss:"nyan_claw_preview"+(f.thumbnail?" has_claw":"")}))});newT.save("bundle_li.nyanbox",function(f){return newT.li(newT.a({href:"javascript:void(0)","data-bundle_link":f.bundle_link},f.title||(new Date(f.created_ts*1E3)).toLocaleDateString()))});newT.save("new_bundle_form.nyanbox",function(){return newT.form({clss:"new_bundle_form"},newT.fieldset(newT.input({type:"text",
clss:"text new_bundle_title",val:"",placeholder:"Name your new bundle"}),newT.input({clss:"bundle_create button",type:"submit",value:"OK"}),newT.a({clss:"cancel",href:"javascript:void(0)"},"Cancel")))})})();(function(o){o.nyan={}})(window);(function(o){function f(d,b){d=d||{};if(typeof d==="function"&&typeof b==="undefined"){b=d;d={}}d.which=d.which||"localStorage";this.opt={key_base:"bitly",separator:".",login:"anon"};for(var h in d)this.opt[h]=d[h];this.__setModule(d.which,b)}function l(d){d=d||{};if(typeof d==="function")d={success:d};d.success=d.success||function(){};d.error=d.error||function(b){console.log(b)};return d}f.prototype={constructor:f.prototype.constructor,init:function(d){this._support(d);return this},setUser:function(d){if(!this.support)return null;
this.opt.login=d||"anon";return this},key:function(d){return d},__setModule:function(d,b){var h=i;switch(d.toLowerCase()){case "sessionstorage":this.opt.which="sessionStorage";break;case "file":this.opt.which="fileSystem";h=c;break;default:this.opt.which="localStorage"}this.store_type=this.opt.which;for(method in h)this[method]=h[method];this.init(b)}};var i={_support:function(d){this.support=false;try{this.support=!!(this.opt.which in window&&window[this.opt.which]!==null&&window.JSON)}catch(b){}this.support&&
d&&d.call(window);return this.enabled=this.support},requestPermission:function(){return true},get:function(d,b){if(!this.support)return null;d=this.key(d,true);b=l(b);val=window[this.opt.which].getItem(d);try{val=JSON.parse(val);b&&b.success&&b.success.call(window,val)}catch(h){b&&b.error&&b.error.call(window,h)}return val},set:function(d,b,h){if(!this.support)return null;d=this.key(d,true);h=l(h);if(typeof b!="string")b=JSON.stringify(b);try{window[this.opt.which].setItem(d,b);h&&h.success&&h.success.call(window,
b)}catch(m){h&&h.error&&h.error.call(window,m)}return this},remove:function(d,b){if(!this.support)return null;d=this.key(d,true);var h;b=l(b);try{h=window[this.opt.which].removeItem(d);b&&b.success&&b.success.call(window,h)}catch(m){b&&b.error&&b.error.call(window,m)}return h},clear:function(d){if(!this.support)return null;var b;d=l(d);try{b=window[this.opt.which].clear&&window[this.opt.which].clear();d&&d.success&&d.success.call(window,b)}catch(h){d&&d.error&&d.error.call(window,h)}return b},listKeys:function(d){if(!this.support)return[];
d=l(d);try{keys=[];for(var b in window[this.opt.which])keys.push(b);d&&d.success&&d.success.call(window,keys)}catch(h){d&&d.error&&d.error.call(window,h)}return keys}},g=0,c={_support:function(d){window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem||window.MozRequestFileSystem||window.MSRequestFileSystem;window.StorageInfo=window.StorageInfo||window.webkitStorageInfo||window.MozStorageInfo||window.MSStorageInfo;window.Blob=window.Blob||window.WebKitBlob||window.MozBlob||
window.MSBlob;this.support=!!(window.requestFileSystem&&window.StorageInfo&&window.Blob&&window.JSON);this.enabled=false;this.checkQuota();this.support&&d&&d.call(window);return this.support},checkQuota:function(d,b){var h=this;b=b||function(){};this.support?window.StorageInfo.queryUsageAndQuota(window.PERSISTENT,d||function(m,v){h.enabled=!!v},b):b.call(window,{})},checkQuotaAndRequest:function(d,b){d=l(d);this.support||d.error.call(window);var h=this;this.support&&this.checkQuota(function(m,v){g=
v;if(b||v-m<1048576){h.requestPermission(v+10485760,function(w){d.success&&d.success.call(window,w);notify.hide(0)});setTimeout(function(){notify("My, you have a lot of bitmarks. Please click ok to increase your storage capacity.",{dur:-1,noclose:true})},250)}else d.success&&d.success.call(window,val)},d.error)},requestPermission:function(d,b,h){if(typeof d==="function"&&typeof h==="undefined"){h=b;b=d;d=10485760}window.StorageInfo.requestQuota(window.PERSISTENT,d,b||function(){this.support=true},
h||function(m){this.support=false;console.log("Error requesting storage: ",m.message)})},get:function(d,b){if(!this.support)return null;d=this.key(d,true);b=l(b);window.requestFileSystem(window.PERSISTENT,g,function(h){h.root.getFile(d+".txt",{},function(m){m.file(function(v){var w=new FileReader;w.onloadend=function(){var s={};try{s=JSON.parse(this.result)}catch(A){}b.success&&b.success.call(window,s)};w.readAsText(v)},b.error)},b.error)},b.error)},set:function(d,b,h){if(!this.support)return null;
d=this.key(d,true);h=l(h);window.requestFileSystem(window.PERSISTENT,g,function(m){m.root.getFile(d+".txt",{create:true},function(v){v.createWriter(function(w){w.truncate(0);var s=false;w.onwriteend=function(){if(s)h.success&&h.success.call(window);else{s=true;var A=typeof b!="string"?JSON.stringify(b):b;A=new Blob([A],{type:"application/json"});w.write(A)}};w.onerror=function(A){h.error&&h.error.call(window,A)}},h.error)},h.error)},h.error);return this},remove:function(d,b){if(!this.support)return null;
d=this.key(d,true);b=l(b);window.requestFileSystem(window.PERSISTENT,g,function(h){h.root.getFile(d+".txt",{create:false},function(m){m.remove(function(){b.success&&b.success.call(window)},b.error)},b.error)},b.error)},listKeys:function(d){if(!this.support)return null;d=l(d);window.requestFileSystem(window.PERSISTENT,g,function(b){var h=b.root.createReader(),m=[],v=function(){h.readEntries(function(w){if(w.length){m=m.concat(Array.prototype.slice.call(w||[],0));v()}else d.success&&d.success.call(window,
m.sort())},d.error)};v()},d.error)},clear:function(){var d=this;this.listKeys(function(b){b.map(function(h){return h.name.replace(/\.txt$/,"")}).forEach(function(h){d.remove(h)})})}};o.LocalStore=new f;o.FileStore=new f({which:"file"});o.SessionStore=new f({which:"sessionStorage"});o.Store=o.LocalStore;if(o&&o.nyanUser&&o.nyanUser.data&&o.nyanUser.data.user){o.LocalStore.setUser(o.nyanUser.data.user);o.SessionStore.setUser(o.nyanUser.data.user);o.FileStore.setUser(o.nyanUser.data.user)}})(nyan);(function(o){o.share=new function(){this.accounts=[]}})(nyan);(function(o){function f(s,A,D){var y=0;return function(S){D._errors.push({error:S,msg:"ajax.error while syncing"});console.log("Error:",arguments);y+=1;if(y>3)s.stop();else{A.resolve(S);var O=["queue_error"];b.apply(O,arguments);this.trigger.apply(this,O)}}}function l(s,A){return function(D,y,S){s.resolve(D,y,S);A.chkts=(new Date).getTime();var O=["complete"];b.apply(O,arguments);A.trigger.apply(A,O)}}function i(s,A){return A.ts-s.ts}function g(s,A){return A.modified_at-s.modified_at}function c(s){s=
s||{};if(typeof s==="function")s={success:s,error:function(A){console.log(A.message)}};else{s.success=s.success||function(){};s.error=s.error||function(A){console.log(A)}}return s}var d=function(s){s=s||{};this.listen_evts=[];this._call_queues=[];this._errors=[];this.mode=s.mode||"WRITE_MODE";this.keyPrefix=function(){return s.key_prefix||"_bItv07_"};this.storeKeyname=function(A){return this.keyPrefix()+this.userKey(A)};this.allow_storage_write="allow_write"in s?s.allow_write:true;return this},b=
Array.prototype.push,h=Array.prototype.splice,m=Array.prototype.sort,v=Array.prototype.slice,w=Array.prototype.unshift;d.prototype={constructor:d,length:0,splice:[].splice,slice:[].slice,map:Array.prototype.map,chkts:null,rawStringLength:0,allLoaded:false,saved:null,activeUser:null,historyUrl:"/data/beta/history/",quota_exceeded:0,upsell_canceled:0,fields:["title","url","note","user_hash","keyword","ts_string","share_search","link"],find:function(s,A){return this.scanner.find(s,this,A||this.fields)},
keyScan:function(s,A){var D=[].constructor,y=this.getAll(),S=[],O=null,G=y.length,X=A&&A.constructor!==D&&A||null;for(D=A&&A.constructor==D&&A||null;G--;){O=typeof y[G][s]==="function"?y[G][s]():y[G][s];if(!D&&X&&A&&O)S.unshift(y[G]);else if(!D&&y[G]&&A==O)S.unshift(y[G]);else D&&y[G]&&D.indexOf(O)>-1&&S.unshift(y[G])}return S},info:function(){return{rawStringLength:this.rawStringLength||0,length:this.length||0,url:this.historyUrl}},listen:function(s,A){this.listen_evts.push({name:s,method:A});return A},
trigger:function(s){for(var A,D=Array.prototype.slice.call(arguments,1),y=0,S=this.listen_evts.length;y<S;y++)(A=this.listen_evts[y])&&A.name===s&&A.method&&A.method.apply(this,D);return this},unlisten:function(s,A){for(var D=[],y,S=0,O=this.listen_evts.length;S<O;S++){y=this.listen_evts[S];y.name===s&&y.method===A||D.push(this.listen_evts[S])}return this.listen_evts=D},unlistenAll:function(){return this.listen_evts=[]},__getLatestModified:function(){return Math.max.apply(window,this.map(function(s){return s.modified_at||
0}))},__getLatestCreated:function(){return Math.max.apply(window,this.map(function(s){return s.ts||0}))},update:function(s,A,D){for(var y=false,S=0,O,G=0,X=this.length;G<X;G++)if(s===this[G].user_hash||s===this[G].link){y=true;S+=1;O=this[G];for(var xa in A){if(A[xa]===false)A[xa]=null;if(xa&&A.hasOwnProperty(xa))O[xa]=A[xa]}}S>1&&console.log("Your history contains duplicate items by user short url",s);y&&this.storeCompleteList(false,D);return O},get:function(s,A){for(var D,y=0,S=this.length;y<S;y++)if((D=
this[y])&&A===D[s])return D;return null},getByLink:function(s){return this.get("link",s)},getByLinks:function(s){var A=[],D;if(!s)return A;for(var y=this.length;y--;){D=this[y];s.indexOf(D.link)>-1&&A.unshift(D)}return A},removeByLink:function(s){return this.remove("link",s)},remove:function(s,A){for(var D=null,y=this.length;y--;)(D=this[y])&&A===D[s]&&h.call(this,y,1);return this},addList:function(s,A){for(var D=0,y=s.length;D<y;D++)this.add(s[D],A);return this},dedupe:function(){var s=v.call(this,
0),A=[],D=0,y=null;s.sort(g);for(D=s.length;D--;);for(y in s)y&&s.hasOwnProperty(y)&&s[y]&&A.push(s[y]);h.call(this,0,this.length);b.apply(this,A);this.tsSort();return this},add:function(s,A){A||this._dedupe_single_entry(s);return this._add(s)},_dedupe_single_entry:function(s){s=s||{};for(var A=this.length,D;A--;)(D=this[A])&&D.link===s.link&&h.call(this,A,1)},_add:function(s){if((s=s||{})&&s.link&&!s.archived){w.call(this,this.dataModel(s));return true}return false},dataModel:function(s){return new this.CacheModel(s)},
tsSort:function(){m.call(this,i)},getErrors:function(){return this._errors},create:function(s){return new d(s)},getAll:function(){return this.slice(0)},clearAll:function(s){s=c(s);try{nyan.Store.remove(this.storeKeyname(),s);this.rawStringLength=0}catch(A){this._errors.push({error:A,msg:"localStorage.removeItem failed"});console.log("Error during clear",A)}},allowStorageWrites:function(s){return this.allow_storage_write=!!s},isWriteable:function(){return!!(nyan.Store.support&&nyan.Store.enabled&&
this.allow_storage_write)},reset:function(){h.call(this,0,this.length);return this},forceReset:function(){this.clearAll();this.allLoaded=false;this.upsell_canceled=this.quota_exceeded=0;this.saved=this.chkts=null;this.rawStringLength=0;this.reset();return this},userKey:function(s){return(s=s||this.activeUser)&&s.replace(/\W+/gmi,"")},getCacheModel:function(){return this.CacheModel},getRawCache:function(s,A){if(typeof A==="undefined"&&typeof s!="string"){A=s;s=null}A=c(A);var D=s||this.storeKeyname();
nyan.Store.get(D,A)},getCache:function(s,A){if(!s)return false;A=c(A);var D=A.success,y=A.error,S=this;A.success=function(G){S.cache_loaded=true;if(G&&G!==""){this.rawStringLength=JSON.stringify(G).length;var X=G;if(s!==X.user||X.lst<=0)X=false;else S.initialDataLoad(X)}D.call(window,X)};A.error=function(G){y.call(window,G);D.call(window,null)};try{nyan.Store.get(this.storeKeyname(s),A)}catch(O){this._errors.push({error:O,msg:"JSON parse failed"})}return false},initialDataLoad:function(s){h.call(this,
0,this.length);this.quota_exceeded=s.qe||0;this.upsell_canceled=s.uc||0;this.allLoaded=s.all||false;this.saved=s.saved||(new Date).getTime();this.addList(s.lst,true);this.dedupe();this.chkts=s.chkts},storeCompleteList:function(s,A){if(this.mode!=="WRITE_MODE"){A=c(A);A.success&&A.success.call(this);return this}this.saved=(new Date).getTime();this.allLoaded=s;this.writeCache({all:s},A);return this},writeCache:function(s,A){if(this.mode!=="WRITE_MODE")return this;this.tsSort();var D=(new Date).getTime();
this.chkts=this.__getLatestModified()+1;D={qe:this.quota_exceeded,uc:this.upsell_canceled,lst:Array.prototype.slice.call(this,0),user:this.activeUser,saved:D,all:this.allLoaded,chkts:this.chkts||D};$.extend(D,s||{});return this._writeJSONBlob(this.storeKeyname(),D,A)},reSaveWithUpdate:function(s){if(s.hasOwnProperty("quota_exceeded"))this.quota_exceeded=s.quota_exceeded;if(s.hasOwnProperty("upsell_canceled"))this.upsell_canceled=s.upsell_canceled;if(s.hasOwnProperty("allLoaded"))this.allLoaded=s.allLoaded;
var A=this;this.getRawCache({success:function(D){D.qe=A.quota_exceeded;D.uc=A.upsell_canceled;D.all=A.allLoaded;nyan.Store.set(A.storeKeyname(),D)}})},_writeJSONBlob:function(s,A,D){if(!this.allow_storage_write)return this;D=c(D);var y=this,S=D.error;D.error=function(G){if(nyan.Store.store_type==="localStorage"&&!y.quota_exceeded){y.reSaveWithUpdate({quota_exceeded:1,allLoaded:true});y.pull_queue&&y.pull_queue.pause();window.fastSearch&&fastSearch.bubbler&&fastSearch.bubbler.stop(400);y.upsell_canceled||
y.promptForFileSystem(function(){this.allLoaded=false;this.storeCompleteList(!!this.allLoaded);this.pull_queue&&this.pull_queue.play();window.fastSearch&&fastSearch.bubbler&&fastSearch.bubbler.start()})}S.call(window,G)};try{this.rawStringLength=JSON.stringify(A).length||0;nyan.Store.set(s,A,D)}catch(O){this._errors.push({error:O,msg:"localStorage.setItem failed"});console.log("failed to save",O)}return this},promptForFileSystem:function(s){var A=this;nyan.FileStore.checkQuotaAndRequest({success:function(D){if(D){nyan.Store=
nyan.FileStore;nyan.LocalStore.clear();A.quota_exceeded=0;A.upsell_canceled=0;s&&s.call(A);window.bundleStore&&window.bundleStore.syncAll()}else A.reSaveWithUpdate({quota_exceeded:1,allLoaded:true,upsell_canceled:1})},error:function(D){A._errors.push({error:D,msg:"fileSystem save failed"});console.log("failed to save",D)}})},backwardSync:function(s,A){var D=$.Deferred();s=s||{};var y=this,S=0,O=(new Date).getTime();O=$.extend({created_before:Math.floor(O/1E3),"private":"both"},s.params);O=this.fetchAllPages(s.limit||
150,O);var G=function(){S+=1;A&&A.apply(y,arguments)};this.listen("update",G);O.done(function(X){y.storeCompleteList(X&&X.data&&true,function(){D.resolve(X,S);y.unlisten("update",G);App.Dispatch.trigger("App.Bitmarks:sync")})});return D.promise()},quietSync:function(){return this.sync()},sync:function(s){var A=this.chkts||this[0]&&this[0].ts;s=s||{};var D=this;s=$.extend(true,{},{params:{modified_after:A,"private":"both",archived:"both"},limit:10,start_page:1,per_page:100},s);if(s.params.modified_after||
s.params.created_before){s=this.pullAndMerge(s);s.done(function(){D.storeCompleteList(false)});return s}},pullAndMerge:function(s){var A=$.Deferred();s=s||{};var D=new BITLY.BatchRequest({url:this.historyUrl,scope:this,data:s.params||{},partialComplete:this.remoteUpdateEvent,responseBatchField:"link_history",error:s.error||f(D,A,this),success:s.complete||l(A,this),start_page:s.start_page||1,per_page:s.per_page||30,limit:s.limit||5});this._call_queues.push(D);D.play();this.pull_queue=D;return A.promise()},
remoteUpdateEvent:function(s,A,D,y){this.addList(s&&s.data&&s.data.link_history||[]);this.tsSort();y>0&&y%7===0&&this.storeCompleteList(false);var S=["update"];b.apply(S,arguments);this.trigger.apply(this,S)},fetchAllPages:function(s,A){var D=D||{};return this.pullAndMerge($.extend(true,{},{params:A,per_page:100,limit:s||10,start_page:1},D))},_stopRunningQueues:function(){for(var s=this._call_queues,A=s.length;A--;)s[A].stop();this._call_queues=[]},NOT_AT_LIMIT:0,QUOTA_EXCEEDED:1,AT_SERVER_MAX:2,
server_max:1E4,isAtLimit:function(){if(this.quota_exceeded)return this.QUOTA_EXCEEDED;if(this.length>=this.server_max-10)return this.AT_SERVER_MAX;return this.NOT_AT_LIMIT}};d.prototype.batchUpdate=function(s,A){for(var D=s.map(function(G){return G.link_edit.link}),y=false,S=0,O=this.length;S<O;S++)if(_(D).include(this[S].link)){y=true;_.extend(this[S],A)}y&&this.storeCompleteList(false)};o.bitlyStore=new d})(window);(function(o){function f(h,m){for(var v=m||[],w=v.length,s;w--;){s=v[w];this[s]=h&&s in h&&h[s]||null}return this}function l(h,m,v){for(var w=h.length,s=null;w--;)if((s=h[w])&&s.key&&s.method)this[s.key]=v?s.method.call(this,m):this[s.key]=s.method;return this}function i(h,m){return m.ts-h.ts}function g(h){h=h||{};return h.ts||h.user_ts||this.ts||this.user_ts||Math.round((new Date).getTime()/1E3)}function c(h){h=h&&h.shares||this.shares||[];for(var m=[],v=[],w=h.length;w--;){m=h[w]&&h[w].text&&h[w].text.replace(this.link,
"").trim();~v.indexOf(m)||v.unshift(m)}return v.length>0&&v.join("\r\n")||null}function d(h,m){f.call(this,h,m||this.__directReadKeys||[]);l.call(this,this.__derivedKeys,h,true);return this}var b=function(h,m){f.call(this,h,m||this.__directReadKeys||[]);l.call(this,this.__derivedKeys,h,true);l.call(this,this.__derivedFuncs,h,false);return this};b.prototype={constructor:b,toJSON:function(){for(var h=this.__saveJSONKeys,m={},v=0,w=h.length;v<w;v++)m[h[v]]=this[h[v]];return m},toCSV:function(){for(var h=
this.__dataStoreKeys,m=[],v=0,w=h.length;v<w;v++)m.push(JSON.stringify(this[h[v]]));return m.join(",")},__derivedFuncs:[{key:"networks",method:function(h,m){m=m||"share_type";for(var v=(h=h||this.shares||null)&&h.length>0?{}:null,w=null,s=h&&h.length||0;s--;)if(w=h[s]&&h[s][m]||null)v[w]=w;return v}},{key:"clicks",method:function(){return fastSearch.bitlyClicks.getByLink(this.link)}},{key:"addShare",method:function(h){h=h&&new d(h);for(var m=this.shares,v=h&&m&&m.length||0,w=false;v--;)if(h.remote_share_link===
m[v].remote_share_link){w=true;break}if(h&&!w){if(!this.shares)this.shares=[];this.shares.unshift(h)}return this.shares}},{key:"addShares",method:function(h){h=h||[];for(var m=0,v=h.length;m<v;m++)this.addShare(h[m]);this.share_search=c.call(this,null);return this.shares}},{key:"hasClicks",method:function(){var h=this.clicks()||{};return(h&&h.user_clicks||0)>0?true:null}},{key:"mostRecentShares",method:function(){return this.shares.sort(i)}},{key:"bundles",method:function(){if(!this.bundle_links||
!this.bundle_links.length||!window.bundleStore)return[];var h=window.bundleStore.get(this.bundle_links)||[],m=[];if(h.constructor===BundleCacheModel)h=[h];for(var v=0,w=h.length;v<w;v++)h[v]&&m.push(h[v]);return m}}],__derivedKeys:[{key:"user_hash",method:function(){return this.link&&this.link.split("/").pop()}},{key:"url",method:function(h){h=h||{};return h.long_url||h.url||this.long_url||this.url||null}},{key:"domain",method:function(){var h=this.keyword_link||this.link;return h&&h.split("/").reverse().slice(1,
2).pop()}},{key:"share_search",method:function(h){return c.call(this,h)}},{key:"shares",method:function(h){var m=(h=h&&h.shares&&h.shares.length>0&&h.shares||null)&&h.length||0;h&&h.sort(i);for(var v=null;m--;)(v=h[m]&&new d(h[m]))&&h.splice(m,1,v);return h}},{key:"ts_string",method:function(h){return g.call(this,h)?(new Date(this.ts*1E3)).toString():null}},{key:"ts",method:function(h){h=h||{};return g.call(this,h)}},{key:"keyword",method:function(){return this.keyword_link&&this.keyword_link.split("/").pop()}},
{key:"global_hash",method:function(){return this.aggregate_link&&this.aggregate_link.split("/").pop()}},{key:"bundle_links",method:function(){return this.bundle_links&&this.bundle_links.map(function(h){return h.split("/").slice(-2).join("/")})||[]}}],__directReadKeys:["modified_at","link","private","keyword_link","archived","note","url","title","aggregate_link","bundle_links"],__saveJSONKeys:["modified_at","link","private","keyword_link","shares","archived","note","url","title","ts","aggregate_link",
"bundle_links"]};d.prototype={constructor:d,toJSON:b.prototype.toJSON,toCSV:b.prototype.toCSV,__derivedKeys:[{key:"remote_share_link",method:function(h){return h.remote_share_link||h.link||this.remote_share_link||this.link||null}},{key:"share_type",method:function(h){return h.share_type||h.account_type||this.share_type||this.account_type||null}},{key:"ts",method:function(h){return h.ts||this.ts||Math.round((new Date).getTime()/1E3)}}],__directReadKeys:["text","account_login","account_name","email"],
__saveJSONKeys:["text","ts","account_login","remote_share_link","account_name","share_type","email"]};BundleCacheModel=function(h,m){f.call(this,h,m||this.__directReadKeys||[]);l.call(this,this.__derivedKeys,h,true);return this};BundleCacheModel.prototype={constructor:BundleCacheModel,toJSON:b.prototype.toJSON,toCSV:b.prototype.toCSV,__derivedKeys:[{key:"bundle_id",method:function(){return this.bundle_id||this.bundle_link&&this.bundle_link.split("/").slice(-2).join("/")||null}},{key:"bundle_link",
method:function(){return this.bundle_id&&[location.origin,"bundles",this.bundle_id].join("/")||this.bundle_link||null}},{key:"global_hash",method:function(){return this.aggregate_link&&this.aggregate_link.split("/").pop()}},{key:"user_hash",method:function(){return this.user_link&&this.user_link.split("/").pop()}}],__directReadKeys:["bundle_id","bundle_link","created_ts","aggregate_link","description","title","last_modified_ts","private","user_link","bundle_owner","collab"],__saveJSONKeys:["aggregate_link",
"bundle_id","bundle_link","created_ts","description","global_hash","last_modified_ts","private","title","user_hash","user_link","bundle_owner","collab"]};o.CacheModel=b;o.ShareCacheModel=d;o.BundleCacheModel=BundleCacheModel})(bitlyStore);(function(o){function f(b,h,m){var v=(b=m.cleanNegation.call(m,b))&&b[1],w=v&&v.length>0?RegExp(v.join("|"),"mi"):null;return{phrase:b&&b[0],has_negatives:v&&v.length>0,is_negative:function(s){var A=v&&h.length||0;if(A<=0)return false;for(;v&&A--;){if(word=s[h[A]])word=word.replace(d,"");if(word&&w&&w.test(word))return true}return false}}}var l=function(){g="_________B1TLYT0K3N_________";quotes_token=".{0,1}";c=RegExp(g,"gmi");this.buildExpressions();return this},i=null,g=null,c=null,d=/^https?:\/\//mi;
l.prototype={find:function(b,h,m){this.scanType=this.regex.isOr.test(b)?"scanOrSearch":"scanAndSearch";b=b&&b.trim()||"";if(!b||b.length===0){i=undefined;return h.slice(0)}b=this[this.scanType](b.replace(d,""),m);m=[];for(var v=0,w=h.length;v<w;v+=1)b(h[v])&&m.push(h[v]);return m},scanType:"scanAndSearch",scanOrSearch:function(b,h){b=this.prepareORQuery(b);var m=this.setRegexp(b);return function(v){for(var w=0,s=h.length;w<s;w++){if(word=v[h[w]])word=word.replace(d,"");if(word&&m.test(word))return true}return false}},
scanAndSearch:function(b,h){var m=null,v=null,w=null;b=this.prepareCombinedANDQuery(b);w=f(b,h,this);b=w.phrase;m=b.split("|");v=this.setRegexp(b);return function(s){var A=0,D,y={};if(w.has_negatives&&w.is_negative(s))return false;for(var S=0,O=h.length;S<O;S++){if(D=s[h[S]])D=D.replace(d,"");D&&D.replace(v,function(G){G=G.toLowerCase();if(!y[G]){y[G]=true;A+=1}});if(A>=m.length)return true}return false}},patterns:{isOr:"(\\s+(OR|\\|)\\s+)|(\\b\\s*(OR|\\|)\\s*\\b)",isExactPhrase:'("([^"]+)")',negative:"(?:\\s|^|\\|)((?:!|-)\\w+)",
strayQuotes:"(\"|')+",orReplace:"(\\s+OR\\s+)|(\\s+\\|\\s+)",andReplace:"(\\s+AND\\s+)|(\\s+&\\s+)",spaceReplace:"\\s+"},regex:{isExactPhrase:null,isOr:null,strayQuotes:null,isNegation:null,orReplace:null,andReplace:null,spaceRepace:null,negationMatch:null},getRegexp:function(){return i||null},setRegexp:function(b,h){var m=null;if(i&&i.source===b)m=i;else{try{m=b&&RegExp(b,h||"gmi")}catch(v){m=RegExp(b.replace(/\W+/gmi,""),h||"mi")}i=m}return m},buildExpressions:function(){this.regex.isOr=RegExp(this.patterns.isOr,
"m");this.regex.isExactPhrase=RegExp(this.patterns.isExactPhrase,"mi");this.regex.isNegation=RegExp(this.patterns.negative,"m");this.regex.negationMatch=RegExp(this.patterns.negative,"gm");this.regex.orReplace=RegExp(this.patterns.orReplace,"gm");this.regex.andReplace=RegExp(this.patterns.andReplace,"gmi");this.regex.spaceReplace=RegExp(this.patterns.spaceReplace,"gmi");this.regex.strayQuotes=RegExp(this.patterns.strayQuotes,"gm")},cleanNegation:function(b){b=b&&b.split("|");for(var h=b.length,m=
null,v=[],w=[];h--;)if((m=b[h]||"")&&this.regex.isNegation.test(m))v.unshift(m.substring(1));else m&&m.trim().length>0&&w.unshift(m);clean_word=w.join("|");return[clean_word,v]},prepareCombinedANDQuery:function(b){b=this.prepareANDQuery(b);b=this.protectExactPhrase(b);return b.replace(this.regex.strayQuotes,"")},prepareANDQuery:function(b){var h=this.regex.spaceReplace;return b&&b.replace(h," ").replace(this.regex.andReplace," ")||""},protectExactPhrase:function(b){var h=this.regex.spaceReplace;return b&&
b.replace(this.regex.isExactPhrase,function(m,v,w){return w.replace(h,g)}).replace(h,"|").replace(c," ")||""},prepareORQuery:function(b){var h=this.regex.spaceReplace,m=this.regex.strayQuotes;return(b=b&&b.replace(this.regex.orReplace,"|")||"")&&b.replace(this.regex.isExactPhrase,function(v,w,s){return s.replace(h,g)}).replace(h,"").replace(c," ").replace(m,"")||""},extend:function(b,h){l.prototype[b]=h},clone:function(){return new l}};o.scanner=new l})(bitlyStore);(function(o){var f=function(){};f.prototype={constructor:f.prototype.constructor,allShareEmails:function(){for(var l=bitlyStore.length,i,g,c=[],d={};l--;)if((g=bitlyStore[l].shares)&&g.length)for(i=g.length;i--;)if(g[i].email&&!d.hasOwnProperty(g[i].email)){c.push(g[i].email);d[g[i].email]=1}return c}};o.CustomExtractor=new f})(bitlyStore);(function(o){bundleStore=function(f){f=f||{};this.listen_evts=[];this._errors=[];this.loaded=false;this.storeKeyname=function(l){return this.keyPrefix()+this.userKey(l)};this.keyPrefix=function(){return f.key_prefix||"_bundlesv02_"}};bundleStore.prototype={constructor:bundleStore.prototype.constructor,length:0,activeUser:null,splice:Array.prototype.splice,slice:Array.prototype.slice,push:Array.prototype.push,pop:Array.prototype.pop,sort:Array.prototype.sort,unshift:Array.prototype.unshift,shift:Array.prototype.shift,
listen:bitlyStore.constructor.prototype.listen,trigger:bitlyStore.constructor.prototype.trigger,unlisten:bitlyStore.constructor.prototype.unlisten,unlistenAll:bitlyStore.constructor.prototype.unlistenAll,userKey:function(f){return(f=f||this.activeUser)&&f.replace(/\W+/gmi,"")},create:function(f){this.activeUser=f;this.syncAll()},get:function(f,l){if(typeof l==="undefined"&&typeof f!="undefined"){l=f;f="bundle_id"}var i="unshift"in l.constructor.prototype?l:[l],g=this.getAll(),c,d,b=[],h=0,m=i.length;
for(;m--;)b.push(null);m=0;for(var v=g.length;m<v;m++){c=g[m];if(f in c&&(d=i.indexOf(c[f]),d>-1)){b[d]=c;if(++h===i.length)return b.length===1?b[0]:b}}b.found_length=h;return i.length===1&&b.length===1?b[0]:b},syncAll:function(f){var l=this;return API.execute("Bundle","history").done(function(i){if(i=i.data&&i.data.bundles){i.sort(function(g,c){return c.last_modified_ts-g.last_modified_ts});l.__saveAll(i);l.trigger("sync_success");window.App&&App.Dispatch.trigger("App.Bundles:sync",l);f&&f.success&&
f.success.call(l)}}).fail(function(){console.log("AN ERROR OCCURRED LOADING BUNDLES");l.trigger("sync_error");f&&f.error&&f.error.call(l)})},dataModel:function(f){return new BundleCacheModel(f)},add:function(f){f=f||{};f=this.dataModel(f);this.push(f);return f},__saveAll:function(f,l){this.reset(true);for(var i=0,g=f.length;i<g;i++)this.add(f[i]);l||this.writeCache();return this},getAll:function(){return this.slice(0)},reset:function(f){for(;this.length;)this.pop();f||this.clearCache()},loadCache:function(f){f=
f||this.storeKeyname();var l=this;nyan.Store.get(f,function(i){if(i)l.__saveAll(i,true);else return false});return true},writeCache:function(f){f=f||this.storeKeyname();nyan.Store.set(f,JSON.stringify(this.getAll()));return this},clearCache:function(f){f=f||this.storeKeyname();nyan.Store.remove(f);return this}};o.bundleStore=new bundleStore})(window);(function(o){function f(s){clearTimeout(v);if(c){if(s==="undefined")s=400;c.animate({top:-1*m},s,function(){var A=c.data("obj");A.onClose&&A.onClose.call({el:c,hide:f},A.data);c.remove();h.remove();c=null})}else l()}function l(){var s=d.shift();if(typeof s!=="undefined"){var A={clss:""},D=" blue";if(s.type&&s.type==="error"){A.clss+=" error";D=""}if(s.type&&s.type==="confirm")A.clss+=" confirm";if(s.type&&s.type==="success")A.clss+=" success";if(s.noclose)A.clss+=" noclose";c=$("<p></p>");c.addClass(A.clss);
c.text(s.content);s.noclose||$('<a href="#"> </a>').addClass("close"+D).appendTo(c);c.data("obj",s);c.hover(function(){i()},function(){g()});s.css&&c.css(s.css);h||(h=$('<div id="notification_center"></div>'));h.appendTo(document.body).append(c.css({visibility:"hidden"}));m=h.height();c.css({visibility:"visible",top:-1*m}).animate({top:"0"},function(){s.onLoad&&s.onLoad.call({el:c,hide:f},s.data)});w=false;g()}}function i(s,A){if(typeof s==="function"&&typeof A==="undefined"){A=s;s=false}if(s)w=true;
clearTimeout(v);A&&A.call({el:c})}function g(s,A){if(typeof s==="function"&&typeof A==="undefined"){A=s;s=false}if(!(w&&!s)){w=false;clearTimeout(v);if(c&&c.data("obj").dur>-1)v=setTimeout(function(){f()},c.data("obj").dur);A&&A.call({el:c})}}var c=null,d=[],b={dur:5E3},h=null,m=0,v=null,w=false;$(document.body).bind("click",function(s){if($(s.target).is("#notification_center a.close")){s.preventDefault();f()}});o.notify=function(s,A){var D=$.extend({},b);A=$.extend(D,A||{});A.content=s;d.push(A);
if(A.type&&A.type==="error"&&BITLY.tracking&&BITLY.tracking.mixPanel)BITLY.tracking.mixPanel.track(["track","danger_will_robinson",{mp_note:s,user_agent:navigator.userAgent||"no user agent"}]);c&&!A.force||f()};o.notify.pause=i;o.notify.resume=g;o.notify.hide=f;o.notify.defaults=b})(window);(function(o){String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};o.splitArray=function(f,l){for(var i=[],g=0;g<f.length;){i[i.length]=f.slice(g,g+l);g+=l}return i}})(typeof exports==="undefined"?BITLY.tools={}:exports);(function(){String.prototype.TRIMMABLE="\t\n\u000b\u000c\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u2028\u2029\u3000\ufeff";String.prototype.truncateWords=function(o,f){var l,i,g;if(f==null)f="\u2026";g=this.toString();if(g.length<=o)return g;g=g.slice(0,o);if(this.slice(o,o+1).match(/\S/)){l="["+this.TRIMMABLE+"]+";i="[^"+this.TRIMMABLE+"]*";g=g.replace(RegExp(l+i+"$"),"")}return g+f}}).call(this);(function(){if(window.BITLY==null)window.BITLY={};(function(o){o.post=function(f,l,i){if(l==null)l={};if(i==null)i={};return o.request.call(o.request,f,l,_.defaults({type:"POST"},i))};o.get=function(f,l,i){if(l==null)l={};if(i==null)i={};return o.request.call(o.request,f,l,_.defaults({type:"GET"},i))};return o.request=function(f,l,i){var g,c,d,b,h;d=$.Deferred();g=(h=i.context)!=null?h:this;b=i.success;c=i.error;delete i.success;delete i.error;f=$.ajax(f,_.extend({beforeSend:function(m){$.cookie&&
m.setRequestHeader("X-XSRFToken",$.cookie.get("_xsrf"));if(window.Bitmarklet)if(window.Bitmarklet.is_bitly_for_feelings)return m.setRequestHeader("X-Bitly-Client","bitly_for_feelings");else if(!window.Bitmarklet.is_chrome)return m.setRequestHeader("X-Bitly-Client","bitmarklet")},data:l},i));f.fail(function(){c&&c.apply(g,arguments);return d.reject.apply(g,arguments)});f.done(function(m,v,w){if(i.dataType==="jsonp"||m.status_code===200){b&&b.apply(g,arguments);return d.resolve.apply(g,arguments)}else{c&&
c.call(g,m,"error",w);return d.reject.call(g,m,"error",w)}});return d.promise()}})(BITLY)}).call(this);(function(){var o=function(f,l){return function(){return f.apply(l,arguments)}};this.V3API_Dispatcher=function(){function f(){this.execute=o(this.execute,this)}f.prototype.execute=function(l,i,g){var c;c=$.Deferred();g={action:"API",object:l,method:i,params:g,source:"app"};chrome.extension.sendMessage(g,function(d){if(d.status==="success")return c.resolve(d.data);else{if(d.data.missing_method)throw Error("Missing method: '"+d.data.missing_object+"."+d.data.missing_method+"'");else if(d.data.missing_object)throw Error("Missing object: '"+
d.data.missing_object+"'");return c.reject(d.data)}});c.always(function(d){return App.Dispatch.trigger("API."+l+"."+i,d.data)});return c};return f}()}).call(this);var Handlebars={};
(function(o,f){o.VERSION="1.0.0";o.COMPILER_REVISION=4;o.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};o.helpers={};o.partials={};var l=Object.prototype.toString;o.registerHelper=function(h,m,v){if(l.call(h)==="[object Object]"){if(v||m)throw new o.Exception("Arg not supported with multiple helpers");o.Utils.extend(this.helpers,h)}else{if(v)m.not=v;this.helpers[h]=m}};o.registerPartial=function(h,m){if(l.call(h)==="[object Object]")o.Utils.extend(this.partials,h);
else this.partials[h]=m};o.registerHelper("helperMissing",function(h){if(arguments.length===2)return f;else throw Error("Missing helper: '"+h+"'");});o.registerHelper("blockHelperMissing",function(h,m){var v=m.inverse||function(){},w=m.fn,s=l.call(h);if(s==="[object Function]")h=h.call(this);return h===true?w(this):h===false||h==null?v(this):s==="[object Array]"?h.length>0?o.helpers.each(h,m):v(this):w(h)});o.K=function(){};o.createFrame=Object.create||function(h){o.K.prototype=h;h=new o.K;o.K.prototype=
null;return h};o.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(h,m){if(o.logger.level<=h){var v=o.logger.methodMap[h];typeof console!=="undefined"&&console[v]&&console[v].call(console,m)}}};o.log=function(h,m){o.logger.log(h,m)};o.registerHelper("each",function(h,m){var v=m.fn,w=m.inverse,s=0,A="",D;if(l.call(h)==="[object Function]")h=h.call(this);if(m.data)D=o.createFrame(m.data);if(h&&typeof h==="object")if(h instanceof Array)for(var y=
h.length;s<y;s++){if(D)D.index=s;A+=v(h[s],{data:D})}else for(y in h)if(h.hasOwnProperty(y)){if(D)D.key=y;A+=v(h[y],{data:D});s++}if(s===0)A=w(this);return A});o.registerHelper("if",function(h,m){if(l.call(h)==="[object Function]")h=h.call(this);return!h||o.Utils.isEmpty(h)?m.inverse(this):m.fn(this)});o.registerHelper("unless",function(h,m){return o.helpers["if"].call(this,h,{fn:m.inverse,inverse:m.fn})});o.registerHelper("with",function(h,m){if(l.call(h)==="[object Function]")h=h.call(this);if(!o.Utils.isEmpty(h))return m.fn(h)});
o.registerHelper("log",function(h,m){var v=m.data&&m.data.level!=null?parseInt(m.data.level,10):1;o.log(v,h)});var i=["description","fileName","lineNumber","message","name","number","stack"];o.Exception=function(){for(var h=Error.prototype.constructor.apply(this,arguments),m=0;m<i.length;m++)this[i[m]]=h[i[m]]};o.Exception.prototype=Error();o.SafeString=function(h){this.string=h};o.SafeString.prototype.toString=function(){return this.string.toString()};var g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;",
"'":"&#x27;","`":"&#x60;"},c=/[&<>"'`]/g,d=/[&<>"'`]/,b=function(h){return g[h]||"&amp;"};o.Utils={extend:function(h,m){for(var v in m)if(m.hasOwnProperty(v))h[v]=m[v]},escapeExpression:function(h){if(h instanceof o.SafeString)return h.toString();else if(h==null||h===false)return"";h=h.toString();if(!d.test(h))return h;return h.replace(c,b)},isEmpty:function(h){return!h&&h!==0?true:l.call(h)==="[object Array]"&&h.length===0?true:false}};o.VM={template:function(h){var m={escapeExpression:o.Utils.escapeExpression,
invokePartial:o.VM.invokePartial,programs:[],program:function(v,w,s){var A=this.programs[v];if(s)A=o.VM.program(v,w,s);else A||(A=this.programs[v]=o.VM.program(v,w));return A},merge:function(v,w){var s=v||w;if(v&&w){s={};o.Utils.extend(s,w);o.Utils.extend(s,v)}return s},programWithDepth:o.VM.programWithDepth,noop:o.VM.noop,compilerInfo:null};return function(v,w){w=w||{};var s=h.call(m,o,v,w.helpers,w.partials,w.data),A=m.compilerInfo||[],D=A[0]||1,y=o.COMPILER_REVISION;if(D!==y)if(D<y)throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+
o.REVISION_CHANGES[y]+") or downgrade your runtime to an older version ("+o.REVISION_CHANGES[D]+").";else throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+A[1]+").";return s}},programWithDepth:function(h,m,v){var w=Array.prototype.slice.call(arguments,3),s=function(A,D){D=D||{};return m.apply(this,[A,D.data||v].concat(w))};s.program=h;s.depth=w.length;return s},program:function(h,m,v){var w=function(s,A){A=
A||{};return m(s,A.data||v)};w.program=h;w.depth=0;return w},noop:function(){return""},invokePartial:function(h,m,v,w,s,A){w={helpers:w,partials:s,data:A};if(h===f)throw new o.Exception("The partial "+m+" could not be found");else if(h instanceof Function)return h(v,w);else if(o.compile){s[m]=o.compile(h,{data:A!==f});return s[m](v,w)}else throw new o.Exception("The partial "+m+" could not be compiled when running in runtime-only mode");}};o.template=o.VM.template})(Handlebars);(function(){var o,f=[].slice,l=[].indexOf||function(i){for(var g=0,c=this.length;g<c;g++)if(g in this&&this[g]===i)return g;return-1};o=/(?:^|\s)(#[^\s]{1,})/gmi;Handlebars.registerHelper("each_with_index",function(i,g,c){var d,b,h,m;d="";h=0;for(m=i.length;h<m;h++){b=i[h];b.index=g?h:h+1;d+=c.fn(b)}return d});Handlebars.registerHelper("bounded_each",function(i,g,c,d){var b,h;b="";c=i.slice(g,c);i=0;for(g=c.length;i<g;i++)if(h=c[i])b+=d.fn(h);return b});Handlebars.registerHelper("log",function(){return console.log(Array.prototype.slice.call(arguments,
0,-1))});Handlebars.registerHelper("is",function(i,g,c){if(i===g)return c.fn(this);else if(c.inverse)return c.inverse(this)});Handlebars.registerHelper("none",function(){var i,g,c,d,b;g=2<=arguments.length?f.call(arguments,0,i=arguments.length-1):(i=0,[]);c=arguments[i++];d=0;for(b=g.length;d<b;d++)if(i=g[d])return typeof c.inverse==="function"?c.inverse(this):void 0;return c.fn(this)});Handlebars.registerHelper("and",function(){var i,g,c,d,b;g=2<=arguments.length?f.call(arguments,0,i=arguments.length-
1):(i=0,[]);c=arguments[i++];d=0;for(b=g.length;d<b;d++){i=g[d];if(!i)return typeof c.inverse==="function"?c.inverse(this):void 0}return c.fn(this)});Handlebars.registerHelper("or",function(){var i,g,c,d,b;g=2<=arguments.length?f.call(arguments,0,i=arguments.length-1):(i=0,[]);c=arguments[i++];d=0;for(b=g.length;d<b;d++)if(i=g[d])return c.fn(this);return typeof c.inverse==="function"?c.inverse(this):void 0});Handlebars.registerHelper("in",function(){var i,g,c;c=arguments[0];3<=arguments.length?f.call(arguments,
1,i=arguments.length-1):i=1;g=arguments[i++];i=[].slice.call(arguments);return l.call(i,c)>=0?g.fn(this):typeof g.inverse==="function"?g.inverse(this):void 0});Handlebars.registerHelper("truthy",function(i,g){return _.truthy(i)?g.fn(this):typeof g.inverse==="function"?g.inverse(this):void 0});Handlebars.registerHelper("not",function(i,g,c){if(i!==g)return c.fn(this)});Handlebars.registerHelper("hasOwn",function(i,g,c){if(i.hasOwnProperty(g))return c.fn(this)});Handlebars.registerHelper("notHasOwn",
function(i,g,c){if(!i.hasOwnProperty(g))return c.fn(this)});Handlebars.registerHelper("sub",function(i,g){return i-g});Handlebars.registerHelper("include",function(i,g,c){if(_(i).isArray()&&_(i).include(g)||i===g)return c.fn(this);return c.inverse(this)});Handlebars.registerHelper("regexMatches",function(i,g,c){if(i.match(RegExp(g)))return c.fn(this);else if(c.inverse)return c.inverse(this)});Handlebars.registerHelper("stripProtocol",function(i){return i!=null?i.replace(/^(https?|ftp|itms):\/\/(www\.)?/i,
""):void 0});Handlebars.registerHelper("domainFromUrl",function(i){return i!=null?i.replace(/^(https?|ftp|itms):\/\/(www\.)?(.+)\/.*/i,"$3").split("/")[0]:void 0});Handlebars.registerHelper("pathOrDomainFromUrl",function(i){var g;return(g=/https?\:\/\/(?:www\.)?([^\/]+)\/?(.*)/ig.exec(i))&&g.length>2?g[2]?"/"+g[2]:"/":g&&g.length?g[1]:i});Handlebars.registerHelper("boldPattern",function(i,g){var c;if(g==null)g="";c=g.replace(RegExp("("+i+")","i"),"<b>$1</b>");return new Handlebars.SafeString(c)});
Handlebars.registerHelper("gt",function(i,g,c){if(typeof c==="undefined"){c=g;g=0}return i>g?c.fn(this):c.inverse&&c.inverse(this)||void 0});Handlebars.registerHelper("gte",function(i,g,c){if(typeof c==="undefined"){c=g;g=0}return i>=g?c.fn(this):c.inverse&&c.inverse(this)||void 0});Handlebars.registerHelper("lt",function(i,g,c){if(typeof c==="undefined"){c=g;g=0}return i<g?c.fn(this):c.inverse&&c.inverse(this)||void 0});Handlebars.registerHelper("divisible",function(i,g,c){return i%g===0?c.fn(this):
c.inverse&&c.inverse(this)||void 0});Handlebars.registerHelper("absOrRelURL",function(){var i;return((i=window.chrome)!=null?i.extension:void 0)!=null?"https://bitly.com":""});Handlebars.registerHelper("accountName",function(i){switch(i.account_type){case "twitter":return"@"+i.account_name;case "facebook":return i.account_name}if(i.email)return"email to: "+i.email;return i.account_name});Handlebars.registerHelper("serviceName",function(i){return{twitter:"Twitter",facebook:"Facebook",email:"email"}[i]||
""});Handlebars.registerHelper("shareNetworkIcon",function(i){return Handlebars.helpers.v5({twitter:"twitter-icon-shares.png",facebook:"facebook-icon-shares.png",email:"small-email-icon-orange.png"}[i])});Handlebars.registerHelper("isOffsite",function(i){var g;return window.Bitmarklet!=null||((g=window.chrome)!=null?g.extension:void 0)!=null?i.fn(this):typeof i.inverse==="function"?i.inverse(this):void 0});Handlebars.registerHelper("convertToMS",function(i){return i*1E3});Handlebars.registerHelper("timestampToShortDisplay",
function(i){return moment.unix(i).format("ddd MMM Do h:mma")});Handlebars.registerHelper("bundleTitle",function(){var i;return(i=this.title)!=null?i:Handlebars.helpers.timestampToDisplay(this.created_ts)});Handlebars.registerHelper("timestampToDisplay",function(i){return moment.unix(i).format("dddd, MMMM Do YYYY")});Handlebars.registerHelper("bitlyDomain",function(i){var g;return(((g=window.chrome)!=null?g.extension:void 0)!=null?"https://bitly.com":"")+i});Handlebars.registerHelper("avatar",function(i,
g,c){return Handlebars.helpers.bitlyDomain("/data/avatar/"+i+"/"+g+".png"+(c?"?size="+c:""))});Handlebars.registerHelper("v4",function(i){return Handlebars.helpers.bitlyDomain("/s/beta/graphics/v4/"+i)});Handlebars.registerHelper("v5",function(i){return Handlebars.helpers.bitlyDomain("/s/beta/graphics/v5/"+i)});Handlebars.registerHelper("bitmarkFavicon",function(i){var g,c,d;i=(g=(c=i.global_hash)!=null?c:(d=i.aggregate_link)!=null?d.split("/").pop():void 0)!=null?g:"default";return Handlebars.helpers.bitlyDomain("/favicon/"+
i+".png")});Handlebars.registerHelper("highlightShortlink",function(i,g){return Handlebars.helpers.boldPattern(i,g)});Handlebars.registerHelper("bitmarkLink",function(i){return Handlebars.helpers.stripProtocol(i)});Handlebars.registerHelper("dasherize",function(i){return i.replace(/[^A-Za-z0-9_.-]/g,"-")});Handlebars.registerHelper("commifyNumber",function(i,g){var c,d;if(g==null)g="";if(i==null||i==="")return g;d=(i+"").split("").reverse();for(c=3;c<d.length;){d.splice(c,0,",");c+=4}return d.reverse().join("")});
Handlebars.registerHelper("fallback",function(){var i,g,c,d;g=1<=arguments.length?f.call(arguments,0):[];c=0;for(d=g.length;c<d;c++)if(i=g[c])return i});Handlebars.registerHelper("pluralize",function(i,g,c){return i===1?g:c});Handlebars.registerHelper("ellide",function(i,g){return i.length<=g?i:""+i.substring(0,g)+"..."});Handlebars.registerHelper("zeroIfNull",function(i){return i?i:0});Handlebars.registerHelper("timeAgo",function(i){return moment.unix(i).from(moment())});Handlebars.registerHelper("dateFormat",
function(i,g){return moment.unix(i).format(g)});Handlebars.registerHelper("dateFormatMS",function(i,g){return moment(i).format(g)});Handlebars.registerHelper("linkHashTags",function(i,g,c){if(i==null)i="";if(g==null)g=true;if(c==null)c=true;if(g)i=Handlebars.Utils.escapeExpression(i);i=i.replace(o,function(d,b){return(d.substring(0,1).match(/\s/)?d.substring(0,1):"")+("<a class='fs_hashTagLinker' href='#'><span class='hashmark'>#</span>"+b.substring(1)+"</a>")});return c?new Handlebars.SafeString(i):
i});Handlebars.registerHelper("linkHyperlinks",function(i,g,c){var d,b;if(i==null)i="";if(g==null)g=true;if(c==null)c=true;if(!((d=window.BITLY)!=null&&(b=d.util)!=null&&b.fullUriRegex))return i;if(g)i=Handlebars.Utils.escapeExpression(i);i=i.replace(BITLY.util.fullUriRegex,function(h,m){var v,w;v=w=m;if(w.indexOf("http")!==0)w="http://"+w;return"<a class='fs_hyperLinker' rel='nofollow' target='_blank' href='"+w.replace(/\<[^\>]+\>/g,"")+("'>"+v+"</a>")});return c?new Handlebars.SafeString(i):i});
Handlebars.registerHelper("linkTagsAndLinks",function(i,g,c){if(i==null)i="";if(g==null)g=true;if(c==null)c=true;if(g)i=Handlebars.Utils.escapeExpression(i);i=Handlebars.helpers.linkHyperlinks(Handlebars.helpers.linkHashTags(i,false,false),false,false);return c?new Handlebars.SafeString(i):i});Handlebars.registerHelper("hitHighlighting",function(i,g,c){if(i==null)i="";if(g==null)g=true;if(c==null)c=true;if(g)i=Handlebars.Utils.escapeExpression(i);if(g=bitlyStore.scanner.getRegexp())i=i.replace(g,
function(d){return"<mark>"+d+"</mark>"});return c?new Handlebars.SafeString(i):i});Handlebars.registerHelper("tweetTime",function(i){var g,c;g=moment.utc();i=moment.utc(i.created_at);c=g.diff(i,"mintes");if(c<1)return"just now";else if(c<60)return""+c+"m";g=g.diff(i,"hours");if(g<24)return""+g+"h";return i.format("D MMM")});Handlebars.registerHelper("linkifyTweetText",function(i){var g,c,d,b;g=i.text;i=((c=i.entities)!=null?c.urls:void 0)||[];d=0;for(b=i.length;d<b;d++){c=i[d];g=c.expanded_url?g.replace(RegExp(c.url,
"ig"),'<a href="'+c.expanded_url+'">'+c.display_url+"</a>"):g.replace(/(https?\:\/\/[^ ]+)/,'<a href="$1" target="_blank">$1</a>')}g=g.replace(/\@([a-z0-9_]+)/gi,'<a href="https://twitter.com/$1" target="_blank">@$1</a>');g=g.replace(/\#([^ ]+)/gi,function(h,m){return'<a href="https://twitter.com/search?q='+encodeURIComponent(m)+'" target="_blank">#'+m+"</a>"});return new Handlebars.SafeString(g)});Handlebars.registerHelper("chain",function(){var i,g,c,d,b,h,m,v,w,s;i=1<=arguments.length?f.call(arguments,
0):[];c=[];h=0;for(m=i.length;h<m;h++){g=i[h];if(typeof g==="string"&&g.indexOf("(**)")===0&&g.substring(4)in Handlebars.helpers){typeof d!=="undefined"&&d!==null&&c.push(d);d={method:g.substring(4),args:[]}}else d.args.push(g)}d!=null&&c.push(d);h=0;for(v=c.length;h<v;h++){d=c[h];if(!d.method in Handlebars.helpers)throw Error("method not found");s=d.args;i=m=0;for(w=s.length;m<w;i=++m){g=s[i];if(g==="@")d.args[i]=b.string?b.string:b}b=Handlebars.helpers[d.method].apply(this,d.args)}return b});Handlebars.registerHelper("preferredUserName",
function(i){return i.full_name||i.display_name||i.login});Handlebars.registerHelper("clickGraphDateRange",function(i,g,c){switch(c){case "60_minute":c="h:mma";i=moment(i).add("minutes",1).format(c)+"-"+moment(g).add("minutes",1).format(c);break;case "24_hour":c="ha";i=moment(i).add("hours",1).format(c)+"-"+moment(g).add("hours",1).format(c);break;default:i=moment(g).format("MMM D, YYYY")}return i});Handlebars.registerHelper("date_old_enough",function(i,g,c){switch(g){case "60_minute":g=0;break;case "24_hour":g=
36E5;break;case "7_day":g=864E5;break;case "14_day":g=6048E5;break;case "30_day":g=12096E5;break;default:g=0}return i<=+new Date-g?c.fn(this):typeof c.inverse==="function"?c.inverse(this):void 0});Handlebars.registerHelper("protocolRelative",function(i){return i.replace(/https?:/,"")});Handlebars.registerHelper("percent",function(i){return Math.round(i*100)});Handlebars.registerHelper("range",function(i){var g,c=this;return function(){g=[];for(var d=1,b=i.hash.max+1;1<=b?d<=b:d>=b;1<=b?d++:d--)g.push(d);
return g}.apply(this).map(function(d){c.cursor=d;return i.fn(c)}).join("\n")});Handlebars.registerHelper("charClass",function(i,g){var c,d,b,h,m;c=[function(){var v;v=[];for(d in g)v.push(d);return v}()].sort();h=Math.min(c);b=Math.max(c);if(i.length<=h)return function(){var v,w,s;s=[];v=0;for(w=g.length;v<w;v++){m=g[v];m.chars===h&&s.push(m.className)}return s}()[0];if(i.length>=b)return function(){var v,w,s;s=[];v=0;for(w=g.length;v<w;v++){m=g[v];m.chars===b&&s.push(m.className)}return s}()[0];
return function(){var v,w,s;s=[];v=0;for(w=g.length;v<w;v++){m=g[v];m.chars<=i.length&&s.push(m.className)}return s}()[0]});Handlebars.registerHelper("numberSuffix",function(i){var g;g=function(c){return c.toString().slice(0,4).replace(/\.$/,"")};return i<1E4?Handlebars.helpers.commifyNumber(i):i<1E6?g(i/1E3)+"k":i<1E9?g(i/1E6)+"M":g(i/1E9)+"B"});Handlebars.registerHelper("toFixed",function(i,g){return i.toFixed(g)});Handlebars.registerHelper("shareWithComposer",function(i){return"/compose/?"+$.param({text:i})});
Handlebars.registerHelper("capitalizeWord",function(i){return BITLY.util.isUrl(i)?i:i[0].toUpperCase()+i.slice(1)});Handlebars.registerHelper("toOrdinal",function(i){var g;g=i%100;switch(g){case 11:case 12:case 13:return i+"th";default:switch(g%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd";default:return i+"th"}}})}).call(this);this.Handlebars=this.Handlebars||{};this.Handlebars.templates=this.Handlebars.templates||{};
this.Handlebars.templates.bitmark=Handlebars.template(function(o,f,l,i,g){function c(){return'checked="checked"'}function d(qa,Ja){var Ga,La;La={hash:{},data:Ja};return Ta((Ga=l.ellide||qa.ellide,Ga?Ga.call(qa,qa.title,105,La):r.call(qa,"ellide",qa.title,105,La)))}function b(qa,Ja){var Ga,La;La={hash:{},data:Ja};return Ta((Ga=l.ellide||qa.ellide,Ga?Ga.call(qa,qa.urlNoProtocol,105,La):r.call(qa,"ellide",qa.urlNoProtocol,105,La)))}function h(){return'\n      <div class="bitmark-link-saved">\n        You previously saved and archived this Bitlink.\n      </div>\n      '}
function m(){return'\n  <a href="#" class="bitmark-archive-action">Archive</a>\n  '}function v(){return"notitle"}function w(qa,Ja){var Ga="",La,pa;Ga+="\n              ";pa={hash:{},data:Ja};Ga+=Ta((La=l.chain||qa.chain,La?La.call(qa,"(**)ellide",qa.title,105,"(**)hitHighlighting","@",pa):r.call(qa,"chain","(**)ellide",qa.title,105,"(**)hitHighlighting","@",pa)))+"\n            ";return Ga}function s(qa,Ja){var Ga="",La,pa;Ga+="\n              ";pa={hash:{},data:Ja};Ga+=Ta((La=l.chain||qa.chain,La?
La.call(qa,"(**)ellide",qa.urlNoProtocol,105,"(**)hitHighlighting","@",pa):r.call(qa,"chain","(**)ellide",qa.urlNoProtocol,105,"(**)hitHighlighting","@",pa)))+"\n            ";return Ga}function A(qa,Ja){var Ga="",La;Ga+="\n    ";if((La=sa.invokePartial(i.bitmark_stats,"bitmark_stats",qa,l,i,Ja))||La===0)Ga+=La;Ga+="\n  ";return Ga}function D(){return" is-private"}function y(){return'<i class="fa fa-lock"></i> Private'}function S(){return'<i class="fa fa-unlock-o"></i> Public'}function O(){return'<a href="#" class="bitmark-add-note"><i class="fa fa-file-text-o fa-fw"></i> Add note</a>'}
function G(){return" empty"}function X(qa,Ja){var Ga="",La,pa;Ga+='\n            <span class="bitmark-note-container">\n              <i class="fa fa-file-text-o fa-fw"></i>\n                <span class="note-hl hl">';pa={hash:{},data:Ja};Ga+=Ta((La=l.chain||qa.chain,La?La.call(qa,"(**)hitHighlighting",qa.note,true,false,"(**)linkTagsAndLinks","@",false,pa):r.call(qa,"chain","(**)hitHighlighting",qa.note,true,false,"(**)linkTagsAndLinks","@",false,pa)))+'</span>\n                <a href="#" class="edit_trigger edit-note" title="Edit Note"><i class="fa fa-pencil fa-fw"></i> Edit</a>\n            </span>\n            ';
return Ga}function xa(){return'<span class="facebook-indicator">Facebook</span>'}function $a(){return'<span class="twitter-indicator">Twitter</span>'}function eb(){return'<span class="email-indicator">Email</span>'}function ub(){return"has-copy-button "}function la(){return'\n        <a href="#" class="bitmark-share-social" title="Share via Facebook, Twitter"><span>Share</span></a>\n      '}function Qa(qa,Ja){var Ga="",La,pa;Ga+="\n        ";if((pa=l["if"].call(qa,(La=(La=qa.user,La==null||La===false?
La:La.info),La==null||La===false?La:La.is_enterprise),{hash:{},inverse:sa.program(47,I,Ja),fn:sa.program(45,K,Ja),data:Ja}))||pa===0)Ga+=pa;Ga+="\n      ";return Ga}function K(qa,Ja){var Ga="",La,pa;Ga+='\n          <a href="';pa={hash:{},data:Ja};Ga+=Ta((La=l.shareWithComposer||qa.shareWithComposer,La?La.call(qa,qa.shortLink,pa):r.call(qa,"shareWithComposer",qa.shortLink,pa)))+'" target="_blank" class="bitmark-share-ent-social button" title="Share via Publisher"><span> Share</span></a>\n        ';
return Ga}function I(){return'\n          <a href="#" class="bitmark-share-social" title="Share via Facebook, Twitter"><span>Share</span></a>\n        '}this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);i=this.merge(i,o.partials);g=g||{};o="";var aa,sa=this,r=l.helperMissing,Ta=this.escapeExpression;o+='<div class="wrap">\n';if((aa=l.unless.call(f,f.modal,{hash:{},inverse:sa.noop,fn:sa.program(1,function(qa,Ja){var Ga="",La;Ga+='\n<input type="checkbox" class="bitmark-bulk fs_bulk_cb" ';
if((La=l["if"].call(qa,qa.bulk_selected,{hash:{},inverse:sa.noop,fn:sa.program(2,c,Ja),data:Ja}))||La===0)Ga+=La;Ga+=" />\n";return Ga},g),data:g}))||aa===0)o+=aa;o+="\n";if((aa=l["if"].call(f,f.archived,{hash:{},inverse:sa.program(11,function(qa,Ja){var Ga="",La,pa;Ga+="\n  ";if((La=l.unless.call(qa,qa.modal,{hash:{},inverse:sa.noop,fn:sa.program(12,m,Ja),data:Ja}))||La===0)Ga+=La;Ga+='\n  <img class="bitmark-favicon" src="';pa={hash:{},data:Ja};Ga+=Ta((La=l.bitmarkFavicon||qa.bitmarkFavicon,La?
La.call(qa,qa,pa):r.call(qa,"bitmarkFavicon",qa,pa)))+'" height="16" width="16">\n  <div class="bitmark-title">\n      <span class="bitmark-title-container">\n          <a href="';if(pa=l.url)pa=pa.call(qa,{hash:{},data:Ja});else{pa=qa.url;pa=typeof pa==="function"?pa.apply(qa):pa}Ga+=Ta(pa)+'" title="';if(pa=l.url)pa=pa.call(qa,{hash:{},data:Ja});else{pa=qa.url;pa=typeof pa==="function"?pa.apply(qa):pa}Ga+=Ta(pa)+'"class="article-title hl';if((pa=l.unless.call(qa,qa.title,{hash:{},inverse:sa.noop,
fn:sa.program(14,v,Ja),data:Ja}))||pa===0)Ga+=pa;Ga+='" target="_blank">\n            ';if((pa=l["if"].call(qa,qa.title,{hash:{},inverse:sa.program(18,s,Ja),fn:sa.program(16,w,Ja),data:Ja}))||pa===0)Ga+=pa;Ga+='\n          </a>\n          <a href="#" class="edit_trigger edit-title" title="Edit Title"><i class="fa fa-pencil fa-fw"></i> Edit</a>\n      </span>\n  </div>\n<div class="muted">\n  <span class="bitmark-timestamp">';pa={hash:{},data:Ja};Ga+=Ta((La=l.dateFormat||qa.dateFormat,La?La.call(qa,
qa.ts,"MMM D",pa):r.call(qa,"dateFormat",qa.ts,"MMM D",pa)))+'</span>\n  &#x2022;\n  <a class="bitmark-domain muted" href="';if(pa=l.url)pa=pa.call(qa,{hash:{},data:Ja});else{pa=qa.url;pa=typeof pa==="function"?pa.apply(qa):pa}Ga+=Ta(pa)+'" target="_blank">';pa={hash:{},data:Ja};Ga+=Ta((La=l.domainFromUrl||qa.domainFromUrl,La?La.call(qa,qa.url,pa):r.call(qa,"domainFromUrl",qa.url,pa)))+'</a>\n</div>\n\n\n<div class="clearfix">\n  ';if((pa=l.unless.call(qa,qa.modal,{hash:{},inverse:sa.noop,fn:sa.program(20,
A,Ja),data:Ja}))||pa===0)Ga+=pa;Ga+='\n  <div class="bitmark-actions">\n      <div class="bitmark-custom-keywords-widget"></div>\n      <div class="clearfix">\n        <div class="bitmark-meta-actions clearfix">\n            <a href="#" class="bitmark-toggle-privacy';if((pa=l["if"].call(qa,qa["private"],{hash:{},inverse:sa.noop,fn:sa.program(22,D,Ja),data:Ja}))||pa===0)Ga+=pa;Ga+='">';if((pa=l["if"].call(qa,qa["private"],{hash:{},inverse:sa.program(26,S,Ja),fn:sa.program(24,y,Ja),data:Ja}))||pa===
0)Ga+=pa;Ga+='</a>\n            <a href="';pa={hash:{},data:Ja};Ga+=Ta((La=l.bitlyDomain||qa.bitlyDomain,La?La.call(qa,"/a/bitlinks/",pa):r.call(qa,"bitlyDomain","/a/bitlinks/",pa)));if(pa=l.user_hash)pa=pa.call(qa,{hash:{},data:Ja});else{pa=qa.user_hash;pa=typeof pa==="function"?pa.apply(qa):pa}Ga+=Ta(pa)+'/tags" target="_blank" class="bitmark-add-tag"><i class="fa fa-tags fa-fw"></i> Add a tag</a>\n            ';if((pa=l.unless.call(qa,qa.note,{hash:{},inverse:sa.noop,fn:sa.program(28,O,Ja),data:Ja}))||
pa===0)Ga+=pa;Ga+='\n        </div>\n        <div class="clearfix bitmark-note';if((pa=l.unless.call(qa,qa.note,{hash:{},inverse:sa.noop,fn:sa.program(30,G,Ja),data:Ja}))||pa===0)Ga+=pa;Ga+='">\n            ';if((pa=l["if"].call(qa,qa.note,{hash:{},inverse:sa.noop,fn:sa.program(32,X,Ja),data:Ja}))||pa===0)Ga+=pa;Ga+='\n        </div>\n\n        <a href="#" class="bitmark-previous-share-indicator">\n            ';if((pa=l["if"].call(qa,(La=qa.previousShares,La==null||La===false?La:La.facebook),{hash:{},
inverse:sa.noop,fn:sa.program(34,xa,Ja),data:Ja}))||pa===0)Ga+=pa;Ga+="\n            ";if((pa=l["if"].call(qa,(La=qa.previousShares,La==null||La===false?La:La.twitter),{hash:{},inverse:sa.noop,fn:sa.program(36,$a,Ja),data:Ja}))||pa===0)Ga+=pa;Ga+="\n            ";if((pa=l["if"].call(qa,(La=qa.previousShares,La==null||La===false?La:La.email),{hash:{},inverse:sa.noop,fn:sa.program(38,eb,Ja),data:Ja}))||pa===0)Ga+=pa;Ga+='\n        </a>\n      </div>\n\n      <div class="link-copy-customize"></div>\n      <div class="';
if((pa=l.unless.call(qa,qa.showingLegacyWidget,{hash:{},inverse:sa.noop,fn:sa.program(40,ub,Ja),data:Ja}))||pa===0)Ga+=pa;Ga+='bitmark-actions-buttons pull-left">\n      <a href="#" class="bitmark-share-email" title="Share via Email"><span class="hide-hamburger"> Email</span></a>\n      ';if((pa=l["if"].call(qa,qa.isChromeExtension,{hash:{},inverse:sa.program(44,Qa,Ja),fn:sa.program(42,la,Ja),data:Ja}))||pa===0)Ga+=pa;Ga+='\n      <a href="#" class="button primary f-right bitmark-copy-button is-hidden" data-clipboard-text="';
if(pa=l.shortLink)pa=pa.call(qa,{hash:{},data:Ja});else{pa=qa.shortLink;pa=typeof pa==="function"?pa.apply(qa):pa}Ga+=Ta(pa)+'" title="Copy Link"><i class="fa fa-fw fa-link fa-sm"></i>Copy Bitlink</a>\n    </div>\n</div>\n\n</div>\n';return Ga},g),fn:sa.program(4,function(qa,Ja){var Ga="",La,pa;Ga+='\n    <img class="bitmark-archive-icon" src="';pa={hash:{},data:Ja};Ga+=Ta((La=l.bitlyDomain||qa.bitlyDomain,La?La.call(qa,"/s/beta/graphics/vis/archive-big.png",pa):r.call(qa,"bitlyDomain","/s/beta/graphics/vis/archive-big.png",
pa)))+'">\n    <div class="bitmark-title">\n        <span class="bitmark-title-container">\n            <a href="';if(pa=l.url)pa=pa.call(qa,{hash:{},data:Ja});else{pa=qa.url;pa=typeof pa==="function"?pa.apply(qa):pa}Ga+=Ta(pa)+'" title="';if(pa=l.url)pa=pa.call(qa,{hash:{},data:Ja});else{pa=qa.url;pa=typeof pa==="function"?pa.apply(qa):pa}Ga+=Ta(pa)+'" target="_blank">';if((pa=l["if"].call(qa,qa.title,{hash:{},inverse:sa.program(7,b,Ja),fn:sa.program(5,d,Ja),data:Ja}))||pa===0)Ga+=pa;Ga+='</a>\n      </span>\n  </div>\n  <div class="muted">\n      <span class="bitmark-timestamp">';
pa={hash:{},data:Ja};Ga+=Ta((La=l.dateFormat||qa.dateFormat,La?La.call(qa,qa.ts,"MMM D",pa):r.call(qa,"dateFormat",qa.ts,"MMM D",pa)))+'</span>\n      &#x2022;\n      <a class="bitmark-domain muted" href="';if(pa=l.url)pa=pa.call(qa,{hash:{},data:Ja});else{pa=qa.url;pa=typeof pa==="function"?pa.apply(qa):pa}Ga+=Ta(pa)+'" target="_blank">';pa={hash:{},data:Ja};Ga+=Ta((La=l.domainFromUrl||qa.domainFromUrl,La?La.call(qa,qa.url,pa):r.call(qa,"domainFromUrl",qa.url,pa)))+'</a>\n  </div>\n  <div class="clearfix">\n      ';
if((pa=l["if"].call(qa,qa.modal,{hash:{},inverse:sa.noop,fn:sa.program(9,h,Ja),data:Ja}))||pa===0)Ga+=pa;Ga+='\n      <div class="bitmark-actions">\n          <a class="bitmark-unarchive-action" href="#" title="Unarchive Bitmark">Unarchive</a>\n      </div>\n  </div>\n';return Ga},g),data:g}))||aa===0)o+=aa;o+="\n</div>\n";return o});
this.Handlebars.templates.bitmark_bundles=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var c=this.escapeExpression;o+='<div class="bm-bundles">';if((f=l.each.call(f,f.bundles,{hash:{},inverse:this.noop,fn:this.program(1,function(d,b){var h="",m;h+='<i class="fa fa-tags fa-fw bundle-icon-grey"></i> <a href="';if(m=l.bundle_link)m=m.call(d,{hash:{},data:b});else{m=d.bundle_link;m=typeof m==="function"?m.apply(d):m}h+=c(m)+'" target="_blank">';
if(m=l.bundleTitle)m=m.call(d,{hash:{},data:b});else{m=d.bundleTitle;m=typeof m==="function"?m.apply(d):m}h+=c(m)+"</a>";return h},g),data:g}))||f===0)o+=f;o+="</div>\n";return o});
this.Handlebars.templates.bitmark_customize_shortlink_form=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var c=this.escapeExpression;o+='<form class="bitmark-customize-form">\n    <span class="link">';if(i=l.domain)i=i.call(f,{hash:{},data:g});else{i=f.domain;i=typeof i==="function"?i.apply(f):i}o+=c(i)+'/</span>\n    <input type="text" name="hash" value="';if(i=l.hash)i=i.call(f,{hash:{},data:g});else{i=f.hash;i=typeof i==="function"?
i.apply(f):i}o+=c(i)+'">\n</form>';return o});this.Handlebars.templates.bitmark_favicon=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var c;i=l.helperMissing;var d=this.escapeExpression;o+='<img class="bm-favicon" src="';g={hash:{},data:g};o+=d((c=l.bitmarkFavicon||f.bitmarkFavicon,c?c.call(f,f,g):i.call(f,"bitmarkFavicon",f,g)))+'" />\n';return o});
this.Handlebars.templates.bitmark_info=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);i=this.merge(i,o.partials);g=g||{};o="";var c;if((c=this.invokePartial(i.bitmark_favicon,"bitmark_favicon",f,l,i,g))||c===0)o+=c;o+="\n";if((c=this.invokePartial(i.bitmark_title,"bitmark_title",f,l,i,g))||c===0)o+=c;o+="\n";if((c=this.invokePartial(i.bitmark_link,"bitmark_link",f,l,i,g))||c===0)o+=c;o+="\n";if((c=this.invokePartial(i.bitmark_note,"bitmark_note",
f,l,i,g))||c===0)o+=c;o+="\n";if((c=this.invokePartial(i.bitmark_info_shortlink,"bitmark_info_shortlink",f,l,i,g))||c===0)o+=c;o+="\n";if((c=this.invokePartial(i.bitmark_bundles,"bitmark_bundles",f,l,i,g))||c===0)o+=c;o+="\n";return o});
this.Handlebars.templates.bitmark_info_shortlink=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};return(o=l["if"].call(f,f.shortLink,{hash:{},inverse:this.noop,fn:this.program(1,function(){return'\n<div class="bitmark-info-shortlink cf"></div>\n'},g),data:g}))||o===0?o:""});
this.Handlebars.templates.bitmark_link=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);i=this.merge(i,o.partials);g=g||{};o="";var c,d=l.helperMissing,b=this.escapeExpression;o+='<div class="bm-link">\n    ';if((i=this.invokePartial(i.bitmark_privacy,"bitmark_privacy",f,l,i,g))||i===0)o+=i;o+='\n    <span class="dot-separator-followed">';c={hash:{},data:g};o+=b((i=l.domainFromUrl||f.domainFromUrl,i?i.call(f,f.url,c):d.call(f,"domainFromUrl",f.url,
c)))+"</span>\n    <span>";if(l=l.shortLink)l=l.call(f,{hash:{},data:g});else{l=f.shortLink;l=typeof l==="function"?l.apply(f):l}o+=b(l)+"</span>\n</div>\n";return o});
this.Handlebars.templates.bitmark_manual_copy=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var c,d=this.escapeExpression,b=l.helperMissing;o+='<div class="bitmark-manual-copy">\n    <a href="';if(i=l.shortLink)i=i.call(f,{hash:{},data:g});else{i=f.shortLink;i=typeof i==="function"?i.apply(f):i}o+=d(i)+'" class="bitmark-shortlink"><span class="protocol">http://</span>';c={hash:{},data:g};o+=d((i=l.stripProtocol||f.stripProtocol,i?i.call(f,
f.shortLink,c):b.call(f,"stripProtocol",f.shortLink,c)))+'</a>\n    <span class="note">Press ';if((f=l["if"].call(f,f.is_mac,{hash:{},inverse:this.program(3,function(){return"Ctrl"},g),fn:this.program(1,function(){return"\u2318"},g),data:g}))||f===0)o+=f;o+="-c to copy</span>\n</div>";return o});
this.Handlebars.templates.bitmark_note=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";i=this.escapeExpression;o+='<div class="bm-notes">';if(l=l.note)l=l.call(f,{hash:{},data:g});else{l=f.note;l=typeof l==="function"?l.apply(f):l}o+=i(l)+"</div>\n";return o});this.Handlebars.templates.bitmark_privacy=Handlebars.template(function(o,f,l){this.compilerInfo=[4,">= 1.0.0"];this.merge(l,o.helpers);return'<div class="bm-privacy"></div>\n'});
this.Handlebars.templates.bitmark_stats=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var c,d;i=l.helperMissing;var b=this.escapeExpression;o+='  <div class="bitmark-stats">\n      <span class="bitmark-clicks';d={hash:{},inverse:this.noop,fn:this.program(1,function(){return" plural"},g),data:g};if((d=(c=l.not||f.not,c?c.call(f,f.user_clicks,1,d):i.call(f,"not",f.user_clicks,1,d)))||d===0)o+=d;o+='"><span class="count">';if(d=l.user_clicks)d=
d.call(f,{hash:{},data:g});else{d=f.user_clicks;d=typeof d==="function"?d.apply(f):d}o+=b(d)+'</span> <span class="click-label">click</span></span>\n      <a href="';d={hash:{},data:g};o+=b((c=l.bitlyDomain||f.bitlyDomain,c?c.call(f,"",d):i.call(f,"bitlyDomain","",d)))+"/";if(d=l.hash)d=d.call(f,{hash:{},data:g});else{d=f.hash;d=typeof d==="function"?d.apply(f):d}o+=b(d)+'+" target="_blank" class="bitmark-view-stats"><i class="fa fa-info-circle fa-fw"></i> View stats</a>\n  </div>\n';return o});
this.Handlebars.templates.bitmark_title=Handlebars.template(function(o,f,l,i,g){function c(){return" is-missing"}function d(){return"\n            Title not found. Click to add one.\n        "}function b(s,A){var D="",y,S;D+="\n            ";S={hash:{},data:A};D+=v((y=l.stripProtocol||s.stripProtocol,y?y.call(s,s.url,S):w.call(s,"stripProtocol",s.url,S)))+"\n        ";return D}this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var h,m=this,v=this.escapeExpression,w=l.helperMissing;
i={hash:{},inverse:m.program(4,function(s,A){var D="",y;D+='\n<a href="#" class="bm-title';if((y=l.unless.call(s,s.title,{hash:{},inverse:m.noop,fn:m.program(2,c,A),data:A}))||y===0)D+=y;D+='">\n';return D},g),fn:m.program(1,function(s,A){var D="",y;D+='\n<div class="bm-title';if((y=l.unless.call(s,s.title,{hash:{},inverse:m.noop,fn:m.program(2,c,A),data:A}))||y===0)D+=y;D+='">\n';return D},g),data:g};if((i=(h=l.is||f.is,h?h.call(f,f.mode,"share",i):w.call(f,"is",f.mode,"share",i)))||i===0)o+=i;o+=
"\n    ";if((i=l["if"].call(f,f.title,{hash:{},inverse:m.program(8,function(s,A){var D="",y;D+="\n        ";if((y=l.unless.call(s,s.url,{hash:{},inverse:m.program(11,b,A),fn:m.program(9,d,A),data:A}))||y===0)D+=y;D+="\n   ";return D},g),fn:m.program(6,function(s,A){var D="",y;D+="\n        ";if(y=l.title)y=y.call(s,{hash:{},data:A});else{y=s.title;y=typeof y==="function"?y.apply(s):y}D+=v(y)+"\n    ";return D},g),data:g}))||i===0)o+=i;o+="\n";i={hash:{},inverse:m.program(15,function(){return"\n</a>\n"},
g),fn:m.program(13,function(){return"\n</div>\n"},g),data:g};if((i=(h=l.is||f.is,h?h.call(f,f.mode,"share",i):w.call(f,"is",f.mode,"share",i)))||i===0)o+=i;o+="\n";return o});
this.Handlebars.templates.first_save_insight=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var c,d=l.helperMissing,b=this.escapeExpression;o+='<div class="bitmark-insight first-save">\n    <div class="offset-label">Life of this Bitlink so far</div>\n    <div class="insight">\n        <span>You\'re the <strong>first</strong> to save this long URL!</span>\n        ';if((f=l["if"].call(f,(c=(c=f.user,c==null||c===false?c:c.info),c==null||
c===false?c:c.is_enterprise),{hash:{},inverse:this.program(3,function(){return'\n          <span class="muted">Would your friends like it? <a href="#" class="insight-action bitmark-social-share-action">Share</a> it!</span>\n        '},g),fn:this.program(1,function(h,m){var v="",w,s;v+='\n          <span class="muted">Would your friends like it? <a href="';s={hash:{},data:m};v+=b((w=l.shareWithComposer||h.shareWithComposer,w?w.call(h,h.shortLink,s):d.call(h,"shareWithComposer",h.shortLink,s)))+'" class="insight-action bitmark-social-share-ent-action">Share</a> it!</span>\n        ';
return v},g),data:g}))||f===0)o+=f;o+="\n    </div>\n</div>";return o});
this.Handlebars.templates.global_stats_insight=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var c=l.helperMissing,d=this.escapeExpression;o+='<div class="bitmark-insight">\n    <div class="offset-label">Life of this Bitlink so far</div>\n    <div class="insight global-stats">\n        <h2>';if(i=l.global_clicks)i=i.call(f,{hash:{},data:g});else{i=f.global_clicks;i=typeof i==="function"?i.apply(f):i}o+=d(i)+" clicks \u2022 ";if(i=l.saves)i=
i.call(f,{hash:{},data:g});else{i=f.saves;i=typeof i==="function"?i.apply(f):i}o+=d(i)+" saves</h2>\n        ";if((f=l["if"].call(f,(i=(i=f.user,i==null||i===false?i:i.info),i==null||i===false?i:i.is_enterprise),{hash:{},inverse:this.program(3,function(){return'\n          <p>Give it a boost: <a href="#" class="insight-action bitmark-social-share-action">Share</a> it?</p>\n        '},g),fn:this.program(1,function(b,h){var m="",v,w;m+='\n          <p>Give it a boost: <a href="';w={hash:{},data:h};
m+=d((v=l.shareWithComposer||b.shareWithComposer,v?v.call(b,b.shortLink,w):c.call(b,"shareWithComposer",b.shortLink,w)))+'" class="insight-action bitmark-social-share-ent-action">Share</a> it?</p>\n        ';return m},g),data:g}))||f===0)o+=f;o+="\n    </div>\n</div>";return o});this.Handlebars.templates.historical_traffic_insight=Handlebars.template(function(o,f,l){this.compilerInfo=[4,">= 1.0.0"];this.merge(l,o.helpers);return'<div class="bitmark-insight historical">\n    <div class="offset-label">Life of this Bitlink so far</div>\n    <div class="insight">\n        <span>Nobody\'s clicking this Bitlink <strong>now.</strong></span>\n        <span class="muted">But that wasn\'t always the case\u2026</span>\n    </div>\n    <div class="click-graph"></div>\n</div>'});
this.Handlebars.templates.hot_link_insight=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";i=this.escapeExpression;o+='<div class="bitmark-insight hot-link">\n    <div class="offset-label">Life of this Bitlink so far</div>\n    <div class="insight">\n        <span>Whoa! This Bitlink is popular <strong>right now.</strong></span>\n        <span class="muted">Where\'s the traffic coming from? See its <a target="_blank" href="';if(l=l.aggregate_link)l=
l.call(f,{hash:{},data:g});else{l=f.aggregate_link;l=typeof l==="function"?l.apply(f):l}o+=i(l)+'+" class="insight-action">info</a> page.</span>\n    </div>\n    <div class="click-graph"></div>\n</div>';return o});
this.Handlebars.templates.no_clicks_insight=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var c,d=l.helperMissing,b=this.escapeExpression;o+='<div class="bitmark-insight no-clicks">\n    <div class="offset-label">Life of this Bitlink so far</div>\n    <div class="insight">\n        <span>Nobody\'s <strong>ever</strong> clicked this Bitlink.</span>\n        ';if((f=l["if"].call(f,(c=(c=f.user,c==null||c===false?c:c.info),c==null||c===
false?c:c.is_enterprise),{hash:{},inverse:this.program(3,function(){return'\n          <span class="muted">But you can change that. <a href="#" class="insight-action bitmark-social-share-action">Share</a> it!</span>\n        '},g),fn:this.program(1,function(h,m){var v="",w,s;v+='\n          <span class="muted">But you can change that. <a href="';s={hash:{},data:m};v+=b((w=l.shareWithComposer||h.shareWithComposer,w?w.call(h,h.shortLink,s):d.call(h,"shareWithComposer",h.shortLink,s)))+'" class="insight-action bitmark-social-share-ent-action">Share</a> it!</span>\n        ';
return v},g),data:g}))||f===0)o+=f;o+='\n    </div>\n    <div class="click-graph"></div>\n</div>';return o});
this.Handlebars.templates.private_bitmark_in_public_bundle=Handlebars.template(function(o,f,l,i,g){function c(){return"s"}this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var d,b,h=this.escapeExpression;i=l.helperMissing;o+='<div id="bund_priv_'+h((d=(d=f.bitmark,d==null||d===false?d:d.user_hash),typeof d==="function"?d.apply(f):d))+'" class="privacy_action_message">\n  This private bitmark is still visible to the world in ';b={hash:{},inverse:this.program(3,function(m){var v;
return h((v=(v=m.public_bundles,v==null||v===false?v:v.length),typeof v==="function"?v.apply(m):v))},g),fn:this.program(1,function(){return"a"},g),data:g};if((b=(d=l.is||f.is,d?d.call(f,(d=f.public_bundles,d==null||d===false?d:d.length),1,b):i.call(f,"is",(d=f.public_bundles,d==null||d===false?d:d.length),1,b)))||b===0)o+=b;o+=" public bundle";b={hash:{},inverse:this.noop,fn:this.program(5,c,g),data:g};if((b=(d=l.not||f.not,d?d.call(f,(d=f.public_bundles,d==null||d===false?d:d.length),1,b):i.call(f,
"not",(d=f.public_bundles,d==null||d===false?d:d.length),1,b)))||b===0)o+=b;o+='\n  <a class="button remove_from_bundles" href="#"> Remove from bundle';b={hash:{},inverse:this.noop,fn:this.program(5,c,g),data:g};if((b=(d=l.not||f.not,d?d.call(f,(d=f.public_bundles,d==null||d===false?d:d.length),1,b):i.call(f,"not",(d=f.public_bundles,d==null||d===false?d:d.length),1,b)))||b===0)o+=b;o+="</a>\n  ";if((b=l.unless.call(f,f.modal,{hash:{},inverse:this.noop,fn:this.program(7,function(){return'\n  <a class="close yellow" href="#"></a>\n  '},
g),data:g}))||b===0)o+=b;o+="\n</div>";return o});
this.Handlebars.templates.some_traffic_insight=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var c,d=l.helperMissing,b=this.escapeExpression;o+='<div class="bitmark-insight some-traffic">\n    <div class="offset-label">Life of this Bitlink so far</div>\n    <div class="insight">\n        <h2>People are clicking this Bitlink <b>right now.</b></h2>\n        ';if((f=l["if"].call(f,(c=(c=f.user,c==null||c===false?c:c.info),c==null||c===
false?c:c.is_enterprise),{hash:{},inverse:this.program(3,function(){return'\n          <p>Give it a boost: <a href="#" class="insight-action bitmark-social-share-action">Share</a> it?</p>\n        '},g),fn:this.program(1,function(h,m){var v="",w,s;v+='\n          <p>Give it a boost: <a href="';s={hash:{},data:m};v+=b((w=l.shareWithComposer||h.shareWithComposer,w?w.call(h,h.shortLink,s):d.call(h,"shareWithComposer",h.shortLink,s)))+'" class="insight-action bitmark-social-share-ent-action">Share</a> it?</p>\n        ';
return v},g),data:g}))||f===0)o+=f;o+='\n    </div>\n    <div class="click-graph"></div>\n</div>';return o});
this.Handlebars.templates.custom_keyword=Handlebars.template(function(o,f,l,i,g){function c(){return'<a href="#" class="bck-editing-button"> <i class="fa fa-fw fa-pencil"></i></a></span>'}function d(s){var A="";A+='\n      <li><a class="dropdown__item" href="#">'+v(typeof s===m?s.apply(s):s)+"</a></li>\n      ";return A}function b(s,A){var D;if(D=l.keyword)D=D.call(s,{hash:{},data:A});else{D=s.keyword;D=typeof D===m?D.apply(s):D}return v(D)}function h(){return'\n  <a href="#" class="bck-save-button button secondary f-right min-width-small">Save</a>\n  '}
this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var m="function",v=this.escapeExpression,w=this;o+='<div class="custom-keyword-container clearfix">\n  ';if((i=l["if"].call(f,f.show_extended_bck,{hash:{},inverse:w.noop,fn:w.program(1,function(s,A){var D="",y;D+='\n  <div class="custom-keyword-promo">\n    <span class="promo-txt">Custom Bitlinks</span>\n      <span class="tooltip-wrapper">\n        <span class="tooltip-right">\n          <span class=\'tooltip-title\'>Custom Bitlinks</span>\n          <p>You can customize this Bitlink with a Custom Bitlink. Customizing your Bitlink extends your brand, builds trust and drives engagement.</p>\n        </span>\n      </span>\n    <br>\n    <span class="current-txt">Current: <span class="current-shortlink">';
if(y=l.curr_domain)y=y.call(s,{hash:{},data:A});else{y=s.curr_domain;y=typeof y===m?y.apply(s):y}D+=v(y)+"/<strong>";if(y=l.curr_keyword)y=y.call(s,{hash:{},data:A});else{y=s.curr_keyword;y=typeof y===m?y.apply(s):y}D+=v(y)+"</strong></span>";if((y=l.unless.call(s,s.expanded,{hash:{},inverse:w.noop,fn:w.program(2,c,A),data:A}))||y===0)D+=y;D+="\n    <br>\n  </div>\n  ";return D},g),data:g}))||i===0)o+=i;o+="\n  ";if((i=l["if"].call(f,f.expanded,{hash:{},inverse:w.noop,fn:w.program(4,function(s,A){var D=
"",y;D+='\n  <input type="hidden" name="domain">\n  <div class="dropdown dropdown--domain f-left">\n    <a href="#" class="dropdown__trigger">';if(y=l.domain)y=y.call(s,{hash:{},data:A});else{y=s.domain;y=typeof y===m?y.apply(s):y}D+=v(y)+'</a>\n    <ul class="dropdown__options">\n      ';if((y=l.each.call(s,s.domain_options,{hash:{},inverse:w.noop,fn:w.program(5,d,A),data:A}))||y===0)D+=y;D+='\n    </ul>\n  </div>\n  <span class="slash f-left">/</span>\n  <input class="text f-left" type="text" name="keyword" value="';
if((y=l["if"].call(s,s.prefilled,{hash:{},inverse:w.noop,fn:w.program(7,b,A),data:A}))||y===0)D+=y;D+='" placeholder="customize">\n  <input type="hidden" name="overwrite" value="false">\n\n  ';if((y=l["if"].call(s,s.show_extended_bck,{hash:{},inverse:w.noop,fn:w.program(9,h,A),data:A}))||y===0)D+=y;D+='\n  <div class="bck-warn bck-warn-would-overwrite">\n    <p><em>This Custom Bitlink is already taken.</em> Would you like to override the destination URL?\n      <a href="#" class="bck-confirm-overwrite">Yes</a>\n    </p>\n  </div>\n  <div class="bck-warn bck-warn-upsell">\n    <p><em>This Custom Bitlink is already taken.</em> Upgrade to access more Custom Bitlinks.\n      <a href="http://bitly.is/1sVb3pw" class="bck-learn-more" target="_blank">Get Started.</a>\n    </p>\n  </div>\n  <div class="bck-warn bck-warn-error-message">\n    <p><em></em></p>\n  </div>\n  ';
return D},g),data:g}))||i===0)o+=i;o+="\n</div>\n";return o});
this.Handlebars.templates.modal_email=Handlebars.template(function(o,f,l,i,g){function c(){return" is-disabled "}function d(){return"1"}function b(){return"0"}function h(){return"private"}function m(){return"public"}this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);i=this.merge(i,o.partials);g=g||{};o="";var v=l.helperMissing,w=this.escapeExpression,s=this;o+='<h2 class="modal-title email-modal-title">\n    Share via <b>Email\u2026</b>\n</h2>\n';if((i=s.invokePartial(i.modal_close,"modal_close",
f,l,i,g))||i===0)o+=i;o+='\n<div class="modal-contents">\n    ';if((i=l.unless.call(f,f.is_user_verified,{hash:{},inverse:s.noop,fn:s.program(1,function(A,D){var y="",S,O;y+=' \n    <p class="verify-copy"> You cannot share via email until your email address is verified. To verify your email address please visit the <a href="';O={hash:{},data:D};y+=w((S=l.bitlyDomain||A.bitlyDomain,S?S.call(A,"/a/settings",O):v.call(A,"bitlyDomain","/a/settings",O)))+'" class="verify-copy-link">settings page</a>.</p>\n\n    ';
return y},g),data:g}))||i===0)o+=i;o+='\n    <div class="bm-info" />\n    <form class="email-share-form ';if((i=l.unless.call(f,f.is_user_verified,{hash:{},inverse:s.noop,fn:s.program(3,c,g),data:g}))||i===0)o+=i;o+='">\n        <div class="form-row clearfix">\n            <label for="email-input">To:</label>\n            <div class="email-picker multiPicker form-input" />\n        </div>\n        <div class="form-row clearfix">\n            <label for="share-message">Message:</label>\n            <div class="form-input">\n                <div class="message-input" />\n                <span class="share-character-counter" />\n            </div>\n        </div>\n    </form>\n    <div class="modal-actions cf">\n        <a href="#" class="btn btn-square btn-flat send-email-btn ';
if((i=l.unless.call(f,f.is_user_verified,{hash:{},inverse:s.noop,fn:s.program(3,c,g),data:g}))||i===0)o+=i;o+='">Send</a>\n        <a href="#" class="cancel">Cancel</a>\n    </div>\n    ';if((f=l.unless.call(f,(i=f.bitmark,i==null||i===false?i:i.link),{hash:{},inverse:s.noop,fn:s.program(5,function(A,D){var y="",S,O;y+='\n        <p class="save-privacy-msg">This will also be saved as a <a href="#" id="save-privacy" data-privacy="';if((O=l["if"].call(A,(S=A.bitmark,S==null||S===false?S:S["private"]),
{hash:{},inverse:s.program(8,b,D),fn:s.program(6,d,D),data:D}))||O===0)y+=O;y+='">';if((O=l["if"].call(A,(S=A.bitmark,S==null||S===false?S:S["private"]),{hash:{},inverse:s.program(12,m,D),fn:s.program(10,h,D),data:D}))||O===0)y+=O;y+="</a> Bitlink.</p>\n    ";return y},g),data:g}))||f===0)o+=f;o+="\n</div>\n";return o});this.Handlebars.templates.multi_picker=Handlebars.template(function(o,f,l){this.compilerInfo=[4,">= 1.0.0"];this.merge(l,o.helpers);return'<div class="picker-display">\n    <div class="picker-picked clearfix">\n        <div class="picker-input-wrapper">\n            <input class="picker-input" placeholder="Email addresses, comma-separated" />\n            <span class="picker-input-mirror">Email addresses, comma-separated</span>\n        </div>\n    </div>\n</div>\n<div class="picker-suggestions is-hidden"></div>\n'});
this.Handlebars.templates.multi_picker_picked=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var c=this.escapeExpression;o+='<div class="picked-item" data-email="';if(i=l.email)i=i.call(f,{hash:{},data:g});else{i=f.email;i=typeof i==="function"?i.apply(f):i}o+=c(i)+'">\n    <a href="#" class="remove">x</a>\n    <span>';if(i=l.email)i=i.call(f,{hash:{},data:g});else{i=f.email;i=typeof i==="function"?i.apply(f):i}o+=c(i)+"</span>\n</div>\n";
return o});
this.Handlebars.templates.multi_picker_suggestions=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var c=this.escapeExpression,d=l.helperMissing;if((f=l.each.call(f,f.matches,{hash:{},inverse:this.noop,fn:this.programWithDepth(1,function(b,h,m){var v="",w;v+='\n<a href="#" data-email="'+c(typeof b==="function"?b.apply(b):b)+'">';h={hash:{},data:h};v+=c((w=l.boldPattern||m.boldPattern,w?w.call(b,m.search,b,h):d.call(b,"boldPattern",m.search,
b,h)))+"</a>\n";return v},g,f),data:g}))||f===0)o+=f;o+="\n";return o});
this.Handlebars.templates.click_graph_container=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var c=this.escapeExpression;if((i=l["if"].call(f,f.label,{hash:{},inverse:this.noop,fn:this.program(1,function(d,b){var h="",m;h+='\n<label class="graph-label">';if(m=l.label)m=m.call(d,{hash:{},data:b});else{m=d.label;m=typeof m==="function"?m.apply(d):m}h+=c(m)+"</label>\n";return h},g),data:g}))||i===0)o+=i;o+="\n";if((i=l["if"].call(f,
f.closeable,{hash:{},inverse:this.noop,fn:this.program(3,function(){return'\n<a href="#" class="close-drilldown" title="Close hourly drilldown">Close</a>\n'},g),data:g}))||i===0)o+=i;o+='\n<div class="graph-controls cf';if((i=l["if"].call(f,f._using_r2d3,{hash:{},inverse:this.program(7,function(){return" use-toggles"},g),fn:this.program(5,function(){return" no-toggles"},g),data:g}))||i===0)o+=i;o+='">\n    ';if((i=l["if"].call(f,f.test_suite,{hash:{},inverse:this.noop,fn:this.program(9,function(){return'\n    <div class="sliders cf">\n        <div class="unit-sliders">\n            <label># Days</label>\n            <div class="noUiSlider unit-slider"></div>\n            <div class="unit-value"></div>\n        </div>\n        <div class="offset-sliders">\n            <label>User Offset</label>\n            <div class="noUiSlider user-created-slider"></div>\n            <div class="user-created-value"></div>\n            <label>Global Offset</label>\n            <div class="noUiSlider global-created-slider"></div>\n            <div class="global-created-value"></div>\n        </div>\n    </div>\n    '},
g),data:g}))||i===0)o+=i;o+='\n</div>\n<div class="section-content">\n    <div class="graph-container"></div>\n</div>\n';return o});
this.Handlebars.templates.click_graph_hover=Handlebars.template(function(o,f,l,i,g){function c(){return'\n        <div class="user-hash-clicks is-hidden">0 clicks</div>\n        '}this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var d=this;o+='<div class="click-graph-hover">\n    <div class="date-range"></div>\n\n    ';if((i=l["if"].call(f,f.global_enabled,{hash:{},inverse:d.noop,fn:d.program(1,function(){return'\n    <div class="global-hash-clicks">0 clicks</div>\n    '},g),
data:g}))||i===0)o+=i;o+="\n    ";if((i=l["if"].call(f,f.is_user_hash,{hash:{},inverse:d.noop,fn:d.program(3,function(b,h){var m="",v;m+="\n        ";if((v=l["if"].call(b,b.user_enabled,{hash:{},inverse:d.noop,fn:d.program(4,c,h),data:h}))||v===0)m+=v;m+="\n    ";return m},g),data:g}))||i===0)o+=i;o+='\n    <a href="#" class="zoom-day">view hourly breakdown</a>\n</div>\n';return o});
this.Handlebars.templates.info_page_countries=Handlebars.template(function(o,f,l){this.compilerInfo=[4,">= 1.0.0"];this.merge(l,o.helpers);return'<div class="graph_wrapper cf">\n</div>'});
this.Handlebars.templates.info_page_country_chart=Handlebars.template(function(o,f,l,i,g){function c(){return' class="expanded"'}function d(D,y){var S="",O,G;S+='\n      <li class="country cf">\n        <span class="country-name">'+w((O=D.name,typeof O===v?O.apply(D):O))+'</span>\n        <span class="click-pct">'+w((O=D.pct_of_total,typeof O===v?O.apply(D):O))+'%</span>\n        <span class="num-clicks"><span class="bar" style="width:'+w((O=D.pct_of_max,typeof O===v?O.apply(D):O))+'%;"></span>';
G={hash:{},data:y};S+=w((O=l.commifyNumber||D.commifyNumber,O?O.call(D,D.clicks,G):s.call(D,"commifyNumber",D.clicks,G)))+"</span>\n      </li>\n    ";return S}function b(D,y){var S="",O;S+='\n      <li class="num-more">\n        <a href="#" class="view-more">+';if(O=l.num_more)O=O.call(D,{hash:{},data:y});else{O=D.num_more;O=typeof O===v?O.apply(D):O}S+=w(O)+" more</a>\n      </li>\n    ";return S}function h(){return'\n      <li class="show_less">\n        <a href="#" class="view-less">Show less</a>\n      </li>\n    '}
this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var m,v="function",w=this.escapeExpression,s=l.helperMissing,A=this;o+='<div id="country_chart">\n  <h3>Top Countries<span> (clicks / % of total)</span></h3>\n  ';if((f=l["if"].call(f,(m=f.countries,m==null||m===false?m:m.length),{hash:{},inverse:A.program(10,function(){return"\n    NO CLICKS!\n  "},g),fn:A.program(1,function(D,y){var S="",O;S+='\n  <ul id="country_list"';if((O=l["if"].call(D,D.show_less,{hash:{},inverse:A.noop,
fn:A.program(2,c,y),data:y}))||O===0)S+=O;S+=">\n    ";if((O=l.each.call(D,D.countries,{hash:{},inverse:A.noop,fn:A.program(4,d,y),data:y}))||O===0)S+=O;S+="\n    ";if((O=l["if"].call(D,D.num_more,{hash:{},inverse:A.noop,fn:A.program(6,b,y),data:y}))||O===0)S+=O;S+="\n    ";if((O=l["if"].call(D,D.show_less,{hash:{},inverse:A.noop,fn:A.program(8,h,y),data:y}))||O===0)S+=O;S+="\n  </ul>\n  ";return S},g),data:g}))||f===0)o+=f;o+="\n</div>";return o});
this.Handlebars.templates.info_page_insights=Handlebars.template(function(o,f,l,i,g){function c(y,S){var O="",G,X;O+="\n  <p>\n    Traffic to this Bitlink peaked at <strong>";X={hash:{},data:S};O+=s((G=l.commifyNumber||y.commifyNumber,G?G.call(y,(G=y.link_clicks,G==null||G===false?G:G.clicks),X):w.call(y,"commifyNumber",(G=y.link_clicks,G==null||G===false?G:G.clicks),X)))+"</strong> click";X={hash:{},inverse:A.noop,fn:A.program(3,d,S),data:S};if((X=(G=l.not||y.not,G?G.call(y,(G=y.link_clicks,G==null||
G===false?G:G.clicks),1,X):w.call(y,"not",(G=y.link_clicks,G==null||G===false?G:G.clicks),1,X)))||X===0)O+=X;O+=" on <strong>"+s((G=(G=y.link_clicks,G==null||G===false?G:G.date_string),typeof G===D?G.apply(y):G))+"</strong>.\n  </p>\n  ";return O}function d(){return"s"}function b(){return"\n  <p>\n    Nobody has ever clicked on this Bitlink.\n  </p>\n  "}function h(){return"\n    This Bitlink is popular right now! It's been\n  "}function m(){return"\n    This Bitlink has been\n  "}this.compilerInfo=
[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var v,w=l.helperMissing,s=this.escapeExpression,A=this,D="function";i={hash:{},inverse:A.noop,fn:A.program(1,function(y,S){var O="",G,X;O+="\n  ";if((X=l["if"].call(y,(G=y.link_clicks,G==null||G===false?G:G.clicks),{hash:{},inverse:A.program(5,b,S),fn:A.program(2,c,S),data:S}))||X===0)O+=X;O+="\n";return O},g),data:g};if((i=(v=l.is||f.is,v?v.call(f,f.type,"peak",i):w.call(f,"is",f.type,"peak",i)))||i===0)o+=i;o+="\n\n";i={hash:{},inverse:A.noop,
fn:A.program(7,function(y,S){var O="",G,X;O+="\n  ";X={hash:{},inverse:A.program(10,m,S),fn:A.program(8,h,S),data:S};if((X=(G=l.gt||y.gt,G?G.call(y,(G=y.link_clicks,G==null||G===false?G:G.clicks),36,X):w.call(y,"gt",(G=y.link_clicks,G==null||G===false?G:G.clicks),36,X)))||X===0)O+=X;O+="\n  clicked "+s((G=(G=y.link_clicks,G==null||G===false?G:G.clicks),typeof G===D?G.apply(y):G))+" time";X={hash:{},inverse:A.noop,fn:A.program(3,d,S),data:S};if((X=(G=l.not||y.not,G?G.call(y,(G=y.link_clicks,G==null||
G===false?G:G.clicks),1,X):w.call(y,"not",(G=y.link_clicks,G==null||G===false?G:G.clicks),1,X)))||X===0)O+=X;O+=" in the last hour.\n";return O},g),data:g};if((i=(v=l.is||f.is,v?v.call(f,f.type,"recent",i):w.call(f,"is",f.type,"recent",i)))||i===0)o+=i;return o});
this.Handlebars.templates.info_page_referrer_drilldown=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var c;i=l.helperMissing;o+='<div class="drilldown-list-header cf">\n  ';g={hash:{},inverse:this.program(3,function(){return'\n    <span class="drilldown-referrers">Referrers</span>\n  '},g),fn:this.program(1,function(){return'\n    <a href="#" class="header-toggle drilldown-tweets">Tweets</a>\n    <a href="#" class="header-toggle drilldown-referrers active">Referrers</a>\n  '},
g),data:g};if((f=(c=l.is||f.is,c?c.call(f,f.network_name,"twitter",g):i.call(f,"is",f.network_name,"twitter",g)))||f===0)o+=f;o+='\n  <a href="#" class="close-drilldown" title="Close referrer dropdown">Close</a>\n</div>\n\n';return o});
this.Handlebars.templates.info_page_referrer_drilldown_referrers=Handlebars.template(function(o,f,l,i,g){function c(D,y,S){var O="",G,X;O+='\n        <li class="cf can-drilldown">\n            <span class="data-description" title="'+w((G=D.display_name,typeof G===v?G.apply(D):G))+'">';X={hash:{},inverse:s.noop,fn:s.program(3,d,y),data:y};if((S=(G=l.is||S.is,G?G.call(D,S.network_name,"other",X):A.call(D,"is",S.network_name,"other",X)))||S===0)O+=S;O+=w((G=D.display_name,typeof G===v?G.apply(D):G))+
'</span>\n            <span class="data-value">';X={hash:{},data:y};O+=w((G=l.commifyNumber||D.commifyNumber,G?G.call(D,D.clicks,X):A.call(D,"commifyNumber",D.clicks,X)))+'</span>\n            <ul class="sub-drilldown">\n            ';if((S=l.each.call(D,D.pages,{hash:{},inverse:s.noop,fn:s.program(5,b,y),data:y}))||S===0)O+=S;O+="\n          </ul>\n        </li>\n      ";return O}function d(D){var y="",S;y+=' <img src="/favicon/domain/'+w((S=D.display_name,typeof S===v?S.apply(D):S))+'?s=32" width="16" height="16" class="favicon">';
return y}function b(D,y){var S="",O,G;S+='\n              <li class="cf">\n                <span class="data-description';G={hash:{},inverse:s.noop,fn:s.program(6,h,y),data:y};if((G=(O=l.regexMatches||D.regexMatches,O?O.call(D,D.display_name,"^https\\:\\/\\/",G):A.call(D,"regexMatches",D.display_name,"^https\\:\\/\\/",G)))||G===0)S+=G;S+='" title="'+w((O=D.display_name,typeof O===v?O.apply(D):O))+'">';G={hash:{},data:y};S+=w((O=l.pathOrDomainFromUrl||D.pathOrDomainFromUrl,O?O.call(D,D.display_name,
G):A.call(D,"pathOrDomainFromUrl",D.display_name,G)))+'</span>\n                <span class="data-value">';G={hash:{},data:y};S+=w((O=l.commifyNumber||D.commifyNumber,O?O.call(D,D.clicks,G):A.call(D,"commifyNumber",D.clicks,G)))+"</span>\n              </li>\n            ";return S}function h(){return" secure"}function m(D,y){var S="",O,G;S+='\n        <li class="cf">\n          <span class="data-description" title="'+w((O=D.display_name,typeof O===v?O.apply(D):O))+'">'+w((O=D.display_name,typeof O===
v?O.apply(D):O))+'</span>\n          <span class="data-value">';G={hash:{},data:y};S+=w((O=l.commifyNumber||D.commifyNumber,O?O.call(D,D.clicks,G):A.call(D,"commifyNumber",D.clicks,G)))+"</span>\n        </li>\n      ";return S}this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var v="function",w=this.escapeExpression,s=this,A=l.helperMissing;o+='<div class="dd-wrap">\n  <ul class="drilldown-list">\n    ';if((f=l.each.call(f,f.referrers,{hash:{},inverse:s.noop,fn:s.programWithDepth(1,
function(D,y,S){var O="";O+="\n      ";if((D=l["if"].call(D,D.pages,{hash:{},inverse:s.program(8,m,y),fn:s.programWithDepth(2,c,y,S),data:y}))||D===0)O+=D;O+="\n    ";return O},g,f),data:g}))||f===0)o+=f;o+="\n  </ul>\n</div>";return o});
this.Handlebars.templates.info_page_referrers=Handlebars.template(function(o,f,l,i,g){function c(){return"s"}function d(w,s){var A,D;D={hash:{},inverse:v.noop,fn:v.program(5,b,s),data:s};return(D=(A=l.not||w.not,A?A.call(w,w.tweet_count,"disabled",D):h.call(w,"not",w.tweet_count,"disabled",D)))||D===0?D:""}function b(w,s){var A="",D,y;A+='\n      <span class="num_tweets">\n        ';y={hash:{},data:s};A+=m((D=l.commifyNumber||w.commifyNumber,D?D.call(w,w.tweet_count,y):h.call(w,"commifyNumber",w.tweet_count,
y)))+'\n        <span class="more-info">tweet';y={hash:{},inverse:v.noop,fn:v.program(2,c,s),data:s};if((y=(D=l.not||w.not,D?D.call(w,w.tweet_count,1,y):h.call(w,"not",w.tweet_count,1,y)))||y===0)A+=y;A+="</span>\n      </span>\n      ";return A}this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};var h=l.helperMissing,m=this.escapeExpression,v=this;return(o=l.each.call(f,f.referrers,{hash:{},inverse:v.noop,fn:v.program(1,function(w,s){var A="",D,y;A+='\n<div class="referrer '+m((D=
w.type,typeof D==="function"?D.apply(w):D))+'" data-network="'+m((D=w.type,typeof D==="function"?D.apply(w):D))+'">\n  <div class="referrer-wrap">\n    <span class="via">'+m((D=w.display_name,typeof D==="function"?D.apply(w):D))+'</span>\n    <div class="clicks-container">\n      <span class="num_clicks">\n        ';y={hash:{},data:s};A+=m((D=l.commifyNumber||w.commifyNumber,D?D.call(w,w.total_clicks,y):h.call(w,"commifyNumber",w.total_clicks,y)))+'\n        <span class="more-info">click';y={hash:{},
inverse:v.noop,fn:v.program(2,c,s),data:s};if((y=(D=l.not||w.not,D?D.call(w,w.total_clicks,1,y):h.call(w,"not",w.total_clicks,1,y)))||y===0)A+=y;A+="</span>\n      </span>\n      ";y={hash:{},inverse:v.noop,fn:v.program(4,d,s),data:s};if((y=(D=l.is||w.is,D?D.call(w,w.type,"twitter",y):h.call(w,"is",w.type,"twitter",y)))||y===0)A+=y;A+='\n      <span class="open-referrer-drilldown">info</span>\n    </div>\n  </div>\n</div>\n';return A},g),data:g}))||o===0?o:""});
this.Handlebars.templates.info_page_section_no_data=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var c,d=l.helperMissing;o+='<p class="no-data-msg';if((i=l["if"].call(f,f.hidden,{hash:{},inverse:this.noop,fn:this.program(1,function(){return" is-hidden"},g),data:g}))||i===0)o+=i;o+='">\n  ';c={hash:{},inverse:this.noop,fn:this.program(3,function(){return"\n    Nobody else has saved this long URL.\n  "},g),data:g};if((c=(i=l.is||f.is,
i?i.call(f,f.type,"sharers",c):d.call(f,"is",f.type,"sharers",c)))||c===0)o+=c;o+="\n  ";c={hash:{},inverse:this.noop,fn:this.program(5,function(){return"\n    No clicks occurred during this time period.\n  "},g),data:g};if((c=(i=l.is||f.is,i?i.call(f,f.type,"clicks",c):d.call(f,"is",f.type,"clicks",c)))||c===0)o+=c;o+="\n</p>\n";return o});
this.Handlebars.templates.info_page_sharing=Handlebars.template(function(o,f,l,i,g){function c(s,A){var D="",y;D+="\n      ";if((y=l["if"].call(s,s.one_encoder_remaining,{hash:{},inverse:w.program(7,b,A),fn:w.program(5,d,A),data:A}))||y===0)D+=y;D+="\n    ";return D}function d(s,A){var D="",y;D+='\n        Another Bitlink to this content received\n        <span class="clicks">';if(y=l.remaining_clicks)y=y.call(s,{hash:{},data:A});else{y=s.remaining_clicks;y=typeof y===h?y.apply(s):y}D+=m(y)+"</span> clicks.\n      ";
return D}function b(s,A){var D="",y;D+='\n        There are <span class="encoders">';if(y=l.num_encoders_remaining)y=y.call(s,{hash:{},data:A});else{y=s.num_encoders_remaining;y=typeof y===h?y.apply(s):y}D+=m(y)+'</span>\n        more Bitlinks to this content that received\n        <span class="clicks">';if(y=l.remaining_clicks)y=y.call(s,{hash:{},data:A});else{y=s.remaining_clicks;y=typeof y===h?y.apply(s):y}D+=m(y)+"</span> clicks.\n      ";return D}this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,
o.helpers);g=g||{};o="";var h="function",m=this.escapeExpression,v=l.helperMissing,w=this;o+='<ul class="sharers">\n  ';if((i=l.each.call(f,f.encoders_by_count,{hash:{},inverse:w.noop,fn:w.program(1,function(s,A){var D="",y,S;D+='\n  <li class="sharer_info">\n  \t  <a href="'+m((y=(y=s.user,y==null||y===false?y:y.profile_url),typeof y===h?y.apply(s):y))+'" class="avatar" style="background-image:url(';S={hash:{},data:A};D+=m((y=l.protocolRelative||s.protocolRelative,y?y.call(s,(y=s.user,y==null||y===
false?y:y.avatar_url),S):v.call(s,"protocolRelative",(y=s.user,y==null||y===false?y:y.avatar_url),S)))+'?size=48);"></a>\n  \t\t<a href="'+m((y=(y=s.user,y==null||y===false?y:y.profile_url),typeof y===h?y.apply(s):y))+'" class="name">';S={hash:{},data:A};D+=m((y=l.preferredUserName||s.preferredUserName,y?y.call(s,s.user,S):v.call(s,"preferredUserName",s.user,S)))+'</a>\n  \t\t<a class="sharer-info-page" href="'+m((y=s.link,typeof y===h?y.apply(s):y))+'+">\n  \t\t  <span class="clicks">';S={hash:{},
data:A};D+=m((y=l.commifyNumber||s.commifyNumber,y?y.call(s,s.count,S):v.call(s,"commifyNumber",s.count,S)))+'</span><span class="clicks_text"> ';S={hash:{},data:A};D+=m((y=l.pluralize||s.pluralize,y?y.call(s,s.count,"click","clicks",S):v.call(s,"pluralize",s.count,"click","clicks",S)))+"</span>\n  \t\t</a>\n  </li>\n  ";return D},g),data:g}))||i===0)o+=i;o+='\n</ul>\n\n<div class="more-sharers">\n  ';if((i=l.unless.call(f,f.all_encoders_are_shown,{hash:{},inverse:w.noop,fn:w.program(3,function(s,
A){var D="",y;D+="\n    ";if((y=l["if"].call(s,s.remaining_clicks,{hash:{},inverse:w.noop,fn:w.program(4,c,A),data:A}))||y===0)D+=y;D+="\n  ";return D},g),data:g}))||i===0)o+=i;o+="\n</div>\n";return o});
this.Handlebars.templates.info_page_time_selector=Handlebars.template(function(o,f,l,i,g){function c(){return'selected="selected" '}this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var d,b=this,h=l.helperMissing;o+='<select class="time-period cf">\n    <option ';i={hash:{},inverse:b.noop,fn:b.program(1,c,g),data:g};if((i=(d=l.is||f.is,d?d.call(f,f.time_period,"total",i):h.call(f,"is",f.time_period,"total",i)))||i===0)o+=i;o+='value="total">All time</option>\n    <option ';i=
{hash:{},inverse:b.noop,fn:b.program(1,c,g),data:g};if((i=(d=l.is||f.is,d?d.call(f,f.time_period,"60_minute",i):h.call(f,"is",f.time_period,"60_minute",i)))||i===0)o+=i;o+='value="60_minute">hour</option>\n    ';i={hash:{},inverse:b.noop,fn:b.program(3,function(m,v){var w="",s,A;w+="<option ";A={hash:{},inverse:b.noop,fn:b.program(1,c,v),data:v};if((A=(s=l.is||m.is,s?s.call(m,m.time_period,"24_hour",A):h.call(m,"is",m.time_period,"24_hour",A)))||A===0)w+=A;w+='value="24_hour">24 hrs</option>';return w},
g),data:g};if((i=(d=l.date_old_enough||f.date_old_enough,d?d.call(f,f.create_date,"24_hour",i):h.call(f,"date_old_enough",f.create_date,"24_hour",i)))||i===0)o+=i;o+="\n    ";i={hash:{},inverse:b.noop,fn:b.program(5,function(m,v){var w="",s,A;w+="<option ";A={hash:{},inverse:b.noop,fn:b.program(1,c,v),data:v};if((A=(s=l.is||m.is,s?s.call(m,m.time_period,"7_day",A):h.call(m,"is",m.time_period,"7_day",A)))||A===0)w+=A;w+='value="7_day">7 days</option>';return w},g),data:g};if((i=(d=l.date_old_enough||
f.date_old_enough,d?d.call(f,f.create_date,"7_day",i):h.call(f,"date_old_enough",f.create_date,"7_day",i)))||i===0)o+=i;o+="\n    ";i={hash:{},inverse:b.noop,fn:b.program(7,function(m,v){var w="",s,A;w+="<option ";A={hash:{},inverse:b.noop,fn:b.program(1,c,v),data:v};if((A=(s=l.is||m.is,s?s.call(m,m.time_period,"14_day",A):h.call(m,"is",m.time_period,"14_day",A)))||A===0)w+=A;w+='value="14_day">14 days</option>';return w},g),data:g};if((i=(d=l.date_old_enough||f.date_old_enough,d?d.call(f,f.create_date,
"14_day",i):h.call(f,"date_old_enough",f.create_date,"14_day",i)))||i===0)o+=i;o+="\n    ";i={hash:{},inverse:b.noop,fn:b.program(9,function(m,v){var w="",s,A;w+="<option ";A={hash:{},inverse:b.noop,fn:b.program(1,c,v),data:v};if((A=(s=l.is||m.is,s?s.call(m,m.time_period,"30_day",A):h.call(m,"is",m.time_period,"30_day",A)))||A===0)w+=A;w+='value="30_day">30 days</option>';return w},g),data:g};if((i=(d=l.date_old_enough||f.date_old_enough,d?d.call(f,f.create_date,"30_day",i):h.call(f,"date_old_enough",
f.create_date,"30_day",i)))||i===0)o+=i;o+="\n</select>\n";return o});
this.Handlebars.templates.info_page_tweets=Handlebars.template(function(o,f,l,i,g){function c(O,G){var X="",xa;X+='\n      <li class="cf">\n        ';if((xa=A.invokePartial(i.tweet,"tweet",O,l,i,G))||xa===0)X+=xa;X+="\n      </li>\n    ";return X}function d(O,G){var X="",xa,$a;X+="\n      ";$a={hash:{},inverse:A.program(8,h,G),fn:A.program(6,b,G),data:G};if(($a=(xa=l.is||O.is,xa?xa.call(O,O.tweet_error,"TWITTER_NOT_CONFIGURED",$a):S.call(O,"is",O.tweet_error,"TWITTER_NOT_CONFIGURED",$a)))||$a===0)X+=
$a;X+="\n    ";return X}function b(O,G){var X="",xa;X+='\n         <p class="login-cta"><a href="/a/add_twitter_account?rd=';if(xa=l.rd)xa=xa.call(O,{hash:{},data:G});else{xa=O.rd;xa=typeof xa===D?xa.apply(O):xa}X+=y(xa)+'" class="header-toggle tweet-connect-twitter">Connect a Twitter account to see tweets</a></p>\n      ';return X}function h(O,G){var X="",xa,$a;X+="\n        ";$a={hash:{},inverse:A.program(11,v,G),fn:A.program(9,m,G),data:G};if(($a=(xa=l.is||O.is,xa?xa.call(O,O.tweet_error,"NOT_AUTHENTICATED",
$a):S.call(O,"is",O.tweet_error,"NOT_AUTHENTICATED",$a)))||$a===0)X+=$a;X+="\n      ";return X}function m(O,G){var X="",xa;X+='\n         <p class="login-cta"><a href="/a/sign_in?rd=';if(xa=l.rd)xa=xa.call(O,{hash:{},data:G});else{xa=O.rd;xa=typeof xa===D?xa.apply(O):xa}X+=y(xa)+'" rel="nofollow" class="header-toggle button tweet-sign-in">Sign In</a> to see tweets</p>\n        ';return X}function v(O,G){var X="",xa;X+='\n          <p class="error">';if(xa=l.tweet_error)xa=xa.call(O,{hash:{},data:G});
else{xa=O.tweet_error;xa=typeof xa===D?xa.apply(O):xa}X+=y(xa)+"</p>\n        ";return X}function w(){return'\n      <p class="no-tweets">No Tweets found!</p>\n    '}this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);i=this.merge(i,o.partials);g=g||{};o="";var s,A=this,D="function",y=this.escapeExpression,S=l.helperMissing;o+='<div class="tweet-wrap">\n  ';if((f=l["if"].call(f,(s=f.tweets,s==null||s===false?s:s.length),{hash:{},inverse:A.program(4,function(O,G){var X="",xa;X+="\n    ";if((xa=
l["if"].call(O,O.tweet_error,{hash:{},inverse:A.program(13,w,G),fn:A.program(5,d,G),data:G}))||xa===0)X+=xa;X+="\n  ";return X},g),fn:A.program(1,function(O,G){var X="",xa;X+='\n    <ul class="tweet-list">\n    ';if((xa=l.each.call(O,O.tweets,{hash:{},inverse:A.noop,fn:A.program(2,c,G),data:G}))||xa===0)X+=xa;X+="\n    </ul>\n  ";return X},g),data:g}))||f===0)o+=f;o+="\n</div>\n";return o});
this.Handlebars.templates.info_page_tweets_loading=Handlebars.template(function(o,f,l){this.compilerInfo=[4,">= 1.0.0"];this.merge(l,o.helpers);return"<p>Loading Tweets...</p>"});
this.Handlebars.templates.shortlink_toggle=Handlebars.template(function(o,f,l,i,g){function c(){return"Both\n            "}function d(s,A){var D="",y;D+="All ";if(y=l.num_saves)y=y.call(s,{hash:{},data:A});else{y=s.num_saves;y=typeof y===h?y.apply(s):y}D+=m(y)+"\n            ";return D}this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var b,h="function",m=this.escapeExpression,v=this,w=l.helperMissing;o+='<div class="toggle-button user-shortlink-toggle-button">\n    <label class="text-label" for="user-shortlink-toggle">';
if((i=l["if"].call(f,f.users_own_link,{hash:{},inverse:v.program(3,function(){return"This"},g),fn:v.program(1,function(){return"Your"},g),data:g}))||i===0)o+=i;o+=' bitly link</label>\n    <div class="onoffswitch">\n        <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="user-shortlink-toggle';if(i=l.index)i=i.call(f,{hash:{},data:g});else{i=f.index;i=typeof i===h?i.apply(f):i}o+=m(i)+'" checked>\n        <label class="onoffswitch-label" for="user-shortlink-toggle';if(i=
l.index)i=i.call(f,{hash:{},data:g});else{i=f.index;i=typeof i===h?i.apply(f):i}o+=m(i)+'">\n            <div class="onoffswitch-inner"></div>\n            <div class="onoffswitch-switch"></div>\n        </label>\n    </div>\n</div>\n<div class="toggle-button all-shortlink-toggle-button">\n    <label class="text-label" for="all-shortlink-toggle">\n        ';b={hash:{},inverse:v.program(7,function(s,A){var D="",y,S;D+="\n            ";S={hash:{},inverse:v.program(10,d,A),fn:v.program(8,c,A),data:A};
if((S=(y=l.is||s.is,y?y.call(s,s.num_saves,2,S):w.call(s,"is",s.num_saves,2,S)))||S===0)D+=S;D+="\n        ";return D},g),fn:v.program(5,function(){return"All\n        "},g),data:g};if((b=(i=l.is||f.is,i?i.call(f,f.num_saves,1,b):w.call(f,"is",f.num_saves,1,b)))||b===0)o+=b;o+='\n        Bitlinks\n    </label>\n    <div class="onoffswitch">\n        <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="all-shortlink-toggle';if(b=l.index)b=b.call(f,{hash:{},data:g});else{b=f.index;
b=typeof b===h?b.apply(f):b}o+=m(b)+'" checked>\n        <label class="onoffswitch-label" for="all-shortlink-toggle';if(b=l.index)b=b.call(f,{hash:{},data:g});else{b=f.index;b=typeof b===h?b.apply(f):b}o+=m(b)+'">\n            <div class="onoffswitch-inner"></div>\n            <div class="onoffswitch-switch"></div>\n        </label>\n    </div>\n</div>\n';return o});
this.Handlebars.templates.link_user_clicks=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var c,d=this.escapeExpression;o+='<div class="link-user-clicks-container">\n  ';if((f=l["if"].call(f,(c=f.link,c==null||c===false?c:c.shorturl),{hash:{},inverse:this.program(3,function(b){var h="",m;h+='\n  <a href="#"><i class="default fa fa-bar-chart-o"></i> <span class="link-user-clicks">'+d((m=(m=b.link,m==null||m===false?m:m.user_clicks),typeof m===
"function"?m.apply(b):m))+"</span></a>\n  ";return h},g),fn:this.program(1,function(b){var h="",m;h+='\n  <a title="View this Bitlink\'s stats" href="'+d((m=(m=b.link,m==null||m===false?m:m.shorturl),typeof m==="function"?m.apply(b):m))+'+" target="_blank"><i class="default fa fa-bar-chart-o"></i> <span class="link-user-clicks">'+d((m=(m=b.link,m==null||m===false?m:m.user_clicks),typeof m==="function"?m.apply(b):m))+"</span></a>\n  ";return h},g),data:g}))||f===0)o+=f;o+="\n</div>\n";return o});
this.Handlebars.templates.modal_close=Handlebars.template(function(o,f,l){this.compilerInfo=[4,">= 1.0.0"];this.merge(l,o.helpers);return'<a href="#" class="close"></a>\n'});this.Handlebars.templates.modal_factory=Handlebars.template(function(o,f,l){this.compilerInfo=[4,">= 1.0.0"];this.merge(l,o.helpers);return'<div class="overlay modal-overlay"></div>\n<div class="overlay popup-overlay"></div>\n'});
this.Handlebars.templates.modal_prevent_disconnect=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);i=this.merge(i,o.partials);g=g||{};o="";if((f=this.invokePartial(i.modal_close,"modal_close",f,l,i,g))||f===0)o+=f;o+='\n<div class="modal-contents">\n    <h2 class="margin-small">Please set a password first.<br /> Then you can disconnect this account.</h2>\n    <div class="modal-actions cf">\n        <a href="/a/settings/profile#reset-password" class="btn primary set-password-btn">Set Password</a>\n        <a href="#" class="cancel">Cancel</a>\n    </div>\n</div>\n';
return o});this.Handlebars.templates.modal_title=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";i=this.escapeExpression;o+='<h2 class="modal-title">\n    ';if(l=l.heading)l=l.call(f,{hash:{},data:g});else{l=f.heading;l=typeof l==="function"?l.apply(f):l}o+=i(l)+"\n</h2>\n";return o});this.Handlebars.templates.inline_form=Handlebars.template(function(o,f,l){this.compilerInfo=[4,">= 1.0.0"];this.merge(l,o.helpers);return'<form class="inline-form expandorama">\n  <textarea></textarea>\n  <pre class="mirror"></pre>\n  <div class="buttons clearfix">\n    <a href="#" class="save">Save</a>\n    <a href="#" class="cancel">Cancel</a>\n    <input type="submit" class="submit" />\n  </div>\n</form>'});
this.Handlebars.templates.save_share_buttons=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var c;i=l.helperMissing;g={hash:{},inverse:this.program(3,function(){return'\n  <a href="#" class="button primary bitmark-share-email" title="Share via Email"><i class="fa fa-fw fa-envelope fa-lg"></i>Email</a>\n  <a href="#" class="button primary bitmark-share-social" title="Share via Facebook, Twitter"><i class="fa fa-fw fa-share-square-o fa-lg"></i>Share</a>\n'},
g),fn:this.program(1,function(){return'\n  <a href="#" class="bitmark-save button primary" title="Save this link"><span>Save</span></a>\n'},g),data:g};if((f=(c=l.is||f.is,c?c.call(f,f.mode,"save",g):i.call(f,"is",f.mode,"save",g)))||f===0)o+=f;o+="\n";return o});
this.Handlebars.templates.tweet=Handlebars.template(function(o,f,l,i,g){function c(){return' class="is-verified"'}function d(){return'\n    <span class="data-description tweet-error">Tweet Not Available</span>\n  '}function b(){return'\n    <span class="data-description tweet-error">Private Tweet</span>\n  '}function h(y,S){var O="",G,X;O+='\n    <span class="error data-description">';X={hash:{},inverse:A.program(12,v,S),fn:A.program(10,m,S),data:S};if((X=(G=l.is||y.is,G?G.call(y,y.error,"UNKNOWN_ERROR",
X):D.call(y,"is",y.error,"UNKNOWN_ERROR",X)))||X===0)O+=X;O+="</span>\n  ";return O}function m(){return"Unable to Retrieve Tweet"}function v(y){var S;return s((S=y.error,typeof S===w?S.apply(y):S))}this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var w="function",s=this.escapeExpression,A=this,D=l.helperMissing;o+="\n";if((i=l["if"].call(f,f.tweet,{hash:{},inverse:A.program(4,function(y,S){var O="",G;O+="\n  ";if((G=l["if"].call(y,y.not_found,{hash:{},inverse:A.noop,fn:A.program(5,
d,S),data:S}))||G===0)O+=G;O+="\n  ";if((G=l["if"].call(y,y.private_tweet,{hash:{},inverse:A.noop,fn:A.program(7,b,S),data:S}))||G===0)O+=G;O+="\n  ";if((G=l["if"].call(y,y.error,{hash:{},inverse:A.noop,fn:A.program(9,h,S),data:S}))||G===0)O+=G;O+="\n";return O},g),fn:A.program(1,function(y,S){var O="",G,X;O+='\n  <div class="data-description">\n      <div class="tweet-info cf">\n        <span title="@'+s((G=(G=(G=y.tweet,G==null||G===false?G:G.user),G==null||G===false?G:G.screenName),typeof G===
w?G.apply(y):G))+'" class="tweet-user-avatar" style="background-image:url('+s((G=(G=(G=y.tweet,G==null||G===false?G:G.user),G==null||G===false?G:G.profile_image_url_https),typeof G===w?G.apply(y):G))+');">\n        </span>\n        <div class="tweet-user-name">\n          <strong';if((X=l["if"].call(y,(G=(G=y.tweet,G==null||G===false?G:G.user),G==null||G===false?G:G.verified),{hash:{},inverse:A.noop,fn:A.program(2,c,S),data:S}))||X===0)O+=X;O+='><a href="https://twitter.com/'+s((G=(G=(G=y.tweet,G==
null||G===false?G:G.user),G==null||G===false?G:G.screen_name),typeof G===w?G.apply(y):G))+'" target="_blank">'+s((G=(G=(G=y.tweet,G==null||G===false?G:G.user),G==null||G===false?G:G.name),typeof G===w?G.apply(y):G))+"</a></strong>\n          <span>@"+s((G=(G=(G=y.tweet,G==null||G===false?G:G.user),G==null||G===false?G:G.screen_name),typeof G===w?G.apply(y):G))+'</span>\n        </div>\n        <a class="tweet-time" href="https://twitter.com/'+s((G=(G=(G=y.tweet,G==null||G===false?G:G.user),G==null||
G===false?G:G.screen_name),typeof G===w?G.apply(y):G))+"/status/"+s((G=(G=y.tweet,G==null||G===false?G:G.id_str),typeof G===w?G.apply(y):G))+'" target="_blank">';X={hash:{},data:S};O+=s((G=l.tweetTime||y.tweetTime,G?G.call(y,y.tweet,X):D.call(y,"tweetTime",y.tweet,X)))+'</a>\n      </div>\n      <p class="tweet-text">\n        ';X={hash:{},data:S};O+=s((G=l.linkifyTweetText||y.linkifyTweetText,G?G.call(y,y.tweet,X):D.call(y,"linkifyTweetText",y.tweet,X)))+"\n      </p>\n  </div>\n";return O},g),data:g}))||
i===0)o+=i;o+='\n<span class="data-value">';g={hash:{},data:g};o+=s((i=l.commifyNumber||f.commifyNumber,i?i.call(f,f.clicks,g):D.call(f,"commifyNumber",f.clicks,g)))+'\n  <span class="click-description">clicks</span>\n</span>\n';return o});
this.Handlebars.templates.editor_dialog=Handlebars.template(function(o,f,l,i,g){function c(A,D){var y="",S,O;y+='\n    <div class="customize-field-wrapper">\n    <label class="customize-domain">';O={hash:{},inverse:w.program(5,b,D),fn:w.program(3,d,D),data:D};if((O=(S=l.is||A.is,S?S.call(A,A.value,(S=A.bitmark,S==null||S===false?S:S.keyword),O):s.call(A,"is",A.value,(S=A.bitmark,S==null||S===false?S:S.keyword),O)))||O===0)y+=O;y+="/</label>\n    ";return y}function d(A,D){var y;if(y=l.custom_domain)y=
y.call(A,{hash:{},data:D});else{y=A.custom_domain;y=typeof y===m?y.apply(A):y}return v(y)}function b(A,D){var y;if(y=l.original_domain)y=y.call(A,{hash:{},data:D});else{y=A.original_domain;y=typeof y===m?y.apply(A):y}return v(y)}this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var h,m="function",v=this.escapeExpression,w=this,s=l.helperMissing;o+='<form class="dialog edit-';if(i=l.field)i=i.call(f,{hash:{},data:g});else{i=f.field;i=typeof i===m?i.apply(f):i}o+=v(i)+'-dialog">\n    <h2 class="dialog-title">';
if(i=l.title)i=i.call(f,{hash:{},data:g});else{i=f.title;i=typeof i===m?i.apply(f):i}o+=v(i)+"</h2>\n    ";h={hash:{},inverse:w.program(7,function(A,D){var y="",S;y+='\n    <textarea autofocus class="dialog-edit-field" name="';if(S=l.field)S=S.call(A,{hash:{},data:D});else{S=A.field;S=typeof S===m?S.apply(A):S}y+=v(S)+'">';if(S=l.value)S=S.call(A,{hash:{},data:D});else{S=A.value;S=typeof S===m?S.apply(A):S}y+=v(S)+"</textarea>\n    ";return y},g),fn:w.program(1,function(A,D){var y="",S,O;y+="\n    ";
O={hash:{},inverse:w.noop,fn:w.program(2,c,D),data:D};if((O=(S=l.is||A.is,S?S.call(A,A.field,"customize",O):s.call(A,"is",A.field,"customize",O)))||O===0)y+=O;y+='\n    <div class="dialog-input-wrapper">\n        <input autofocus class="dialog-edit-field" name="';if(O=l.field)O=O.call(A,{hash:{},data:D});else{O=A.field;O=typeof O===m?O.apply(A):O}y+=v(O)+'" value="';if(O=l.value)O=O.call(A,{hash:{},data:D});else{O=A.value;O=typeof O===m?O.apply(A):O}y+=v(O)+'" />\n        <div class="error-message" />\n    </div>\n    ';
return y},g),data:g};if((h=(i=l.is||f.is,i?i.call(f,f.type,"text",h):s.call(f,"is",f.type,"text",h)))||h===0)o+=h;o+="\n    ";h={hash:{},inverse:w.noop,fn:w.program(9,function(){return"\n    </div>\n    "},g),data:g};if((h=(i=l.is||f.is,i?i.call(f,f.field,"customize",h):s.call(f,"is",f.field,"customize",h)))||h===0)o+=h;o+='\n    <div class="dialog-actions">\n        <a href="#" class="btn dialog-save-btn is-disabled">Save';h={hash:{},inverse:w.noop,fn:w.program(11,function(A,D){var y="",S;y+=" ";
if(S=l.field)S=S.call(A,{hash:{},data:D});else{S=A.field;S=typeof S===m?S.apply(A):S}y+=v(S);return y},g),data:g};if((h=(i=l.not||f.not,i?i.call(f,f.field,"customize",h):s.call(f,"not",f.field,"customize",h)))||h===0)o+=h;o+='</a>\n        <a href="#" class="cancel">Cancel</a>\n    </div>\n</form>\n';return o});
this.Handlebars.templates.modal_confirm_save=Handlebars.template(function(o,f,l,i,g){function c(w){var s;return m((s=(s=w.bitmark,s==null||s===false?s:s.note),typeof s===h?s.apply(w):s))}this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);i=this.merge(i,o.partials);g=g||{};o="";var d,b,h="function",m=this.escapeExpression;d=l.helperMissing;var v=l.blockHelperMissing;o+='<h2 class="modal-title confirm-save-modal-title">\n    Add a Bitlink\n</h2>\n';if((i=this.invokePartial(i.modal_close,"modal_close",
f,l,i,g))||i===0)o+=i;o+='\n\n<div class="modal-contents clearfix">\n    <div class="bm-info">\n        <p class="bm-long-url">';b={hash:{},data:g};o+=m((i=l.stripProtocol||f.stripProtocol,i?i.call(f,(i=f.bitmark,i==null||i===false?i:i.url),b):d.call(f,"stripProtocol",(i=f.bitmark,i==null||i===false?i:i.url),b)))+'</p>\n    </div>\n    <form id="bm-confirm-save">\n        <fieldset class="bm-title-fieldset">\n            <input id="bm-title" autofocus class="text"  placeholder="Add a title" value="';
if((d=l["if"].call(f,(i=f.bitmark,i==null||i===false?i:i.title),{hash:{},inverse:this.noop,fn:this.program(1,function(w){var s;return m((s=(s=w.bitmark,s==null||s===false?s:s.title),typeof s===h?s.apply(w):s))},g),data:g}))||d===0)o+=d;o+='" />\n        </fieldset>\n        <fieldset class="bm-note-fieldset expandorama">\n            <pre>';if((d=l["if"].call(f,(i=f.bitmark,i==null||i===false?i:i.note),{hash:{},inverse:this.noop,fn:this.program(3,c,g),data:g}))||d===0)o+=d;o+='</pre>\n            <textarea id="bm-note" placeholder="Add a note?">';
if((d=l["if"].call(f,(i=f.bitmark,i==null||i===false?i:i.note),{hash:{},inverse:this.noop,fn:this.program(3,c,g),data:g}))||d===0)o+=d;o+='</textarea>\n        </fieldset>\n        <fieldset class="bm-privacy-fieldset">\n            <input id="bm-privacy" type="checkbox" ';if((d=l["if"].call(f,(i=f.bitmark,i==null||i===false?i:i["private"]),{hash:{},inverse:this.noop,fn:this.program(5,function(){return'checked="checked"'},g),data:g}))||d===0)o+=d;o+=' />\n            <label for="bm-privacy">Private</label>\n        </fieldset>\n        <fieldset class="modal-actions cf">\n            <input type="submit" class="btn confirm-save-btn" value="Save bitmark">\n            ';
b={hash:{},inverse:this.noop,fn:this.program(7,function(){return'<a href="#" class="settings-link">Settings</a>'},g),data:g};if(d=l.isOffsite)d=d.call(f,b);else{d=f.isOffsite;d=typeof d===h?d.apply(f):d}l.isOffsite||(d=v.call(f,d,b));if(d||d===0)o+=d;o+="\n        </fieldset>\n    </form>\n</div>\n";return o});
this.Handlebars.templates.modal_save=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var c,d=l.helperMissing,b=this.escapeExpression,h=l.blockHelperMissing;o+='<div class="hide-hamburger">\n    <h2 class="modal-title">\n        <i class="fa fa-check-circle fa-lg gutter-right icon-green"></i> Bitlink saved ';i={hash:{},data:g};o+=b((c=l.timeAgo||f.timeAgo,c?c.call(f,f.timeAgo,i):d.call(f,"timeAgo",f.timeAgo,i)))+'\n        <a href="#" class="close">Close</a>\n    </h2>\n</div>\n\n<div class="is-hidden" id="bundle-editor"></div>\n<div class="modal-contents clearfix">\n</div>\n';
i={hash:{},inverse:this.noop,fn:this.program(1,function(){return'<a href="#" class="settings-link is-hidden"><i class="fa fa-lg fa-cog"></i></a>'},g),data:g};if(g=l.isOffsite)g=g.call(f,i);else{g=f.isOffsite;g=typeof g==="function"?g.apply(f):g}l.isOffsite||(g=h.call(f,g,i));if(g||g===0)o+=g;o+="\n";return o});
this.Handlebars.templates.save_settings=Handlebars.template(function(o,f,l,i,g){function c(){return'checked="checked"'}this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var d,b=this.escapeExpression,h=l.helperMissing;o+='<h2>Settings</h2>\n<div class="logged-in-as settings-group">\n    <span class="avatar" style="background-image:url(https://bitly.com/u/';if(i=l.user)i=i.call(f,{hash:{},data:g});else{i=f.user;i=typeof i==="function"?i.apply(f):i}o+=b(i)+'.png);"></span>\n    <span class="logged-in-as-user">Signed in as <strong>';
if((i=l["if"].call(f,f.display_name,{hash:{},inverse:this.program(3,function(m,v){var w;if(w=l.user)w=w.call(m,{hash:{},data:v});else{w=m.user;w=typeof w==="function"?w.apply(m):w}return b(w)},g),fn:this.program(1,function(m,v){var w;if(w=l.display_name)w=w.call(m,{hash:{},data:v});else{w=m.display_name;w=typeof w==="function"?w.apply(m):w}return b(w)},g),data:g}))||i===0)o+=i;o+='</strong></span>\n    <a id="settings-sign-out" href="/a/sign_out">Sign Out</a>\n</div>\n<div class="one-click settings-group">\n    <label for="enable-one-click">\n        \n        <input type="checkbox" id="enable-one-click" ';
d={hash:{},inverse:this.noop,fn:this.program(5,c,g),data:g};if((d=(i=l.truthy||f.truthy,i?i.call(f,(i=f.preferences,i==null||i===false?i:i.one_click_save),d):h.call(f,"truthy",(i=f.preferences,i==null||i===false?i:i.one_click_save),d)))||d===0)o+=d;o+='>\n        Enable 1-click save & shorten\n        <span>Your default privacy setting will apply to 1-click saves</span>\n    </label>\n</div>\n<div class="default-privacy settings-group">\n    <h3>Default Privacy</h3>\n    \n    <label>\n        <input type="radio" name="default-privacy" id="default-privacy-private" value="0" ';
d={hash:{},inverse:this.noop,fn:this.program(5,c,g),data:g};if((d=(i=l.is||f.is,i?i.call(f,(i=f.preferences,i==null||i===false?i:i.history_privacy),"private",d):h.call(f,"is",(i=f.preferences,i==null||i===false?i:i.history_privacy),"private",d)))||d===0)o+=d;o+=' />\n        <span>Private</span>\n    </label>\n    <label>\n        <input type="radio" name="default-privacy" id="default-privacy-public" value="1" ';d={hash:{},inverse:this.noop,fn:this.program(5,c,g),data:g};if((d=(i=l.notHasOwn||f.notHasOwn,
i?i.call(f,f.preferences,"history_privacy",d):h.call(f,"notHasOwn",f.preferences,"history_privacy",d)))||d===0)o+=d;o+=" ";d={hash:{},inverse:this.noop,fn:this.program(5,c,g),data:g};if((d=(i=l.is||f.is,i?i.call(f,(i=f.preferences,i==null||i===false?i:i.history_privacy),"public",d):h.call(f,"is",(i=f.preferences,i==null||i===false?i:i.history_privacy),"public",d)))||d===0)o+=d;o+=' />\n        <span>Public</span>\n    </label>\n</div>\n<a href="#" id="settings-done" class="button light">Done</a>\n';
return o});this.Handlebars.templates.add_account_popup=Handlebars.template(function(o,f,l){this.compilerInfo=[4,">= 1.0.0"];this.merge(l,o.helpers);return'<div class="popup add-account-popup">\n    <a href="#" class="add-facebook-account"><i class="fa fa-facebook-square fa-fw fa-2x"></i> Add account</a>\n    <a href="#" class="add-twitter-account"><i class="fa fa-twitter-square fa-fw fa-2x"></i> Add account</a>\n</div>\n'});
this.Handlebars.templates.default_facebook_message=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var c=this.escapeExpression;o+='<span class="account-name">';if(i=l.name)i=i.call(f,{hash:{},data:g});else{i=f.name;i=typeof i==="function"?i.apply(f):i}o+=c(i)+'</span> shared <a href="';if(i=l.link)i=i.call(f,{hash:{},data:g});else{i=f.link;i=typeof i==="function"?i.apply(f):i}o+=c(i)+'">a link</a>.\n';return o});
this.Handlebars.templates.modal_connect_accounts=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);i=this.merge(i,o.partials);g=g||{};o="";var c,d=this;if((c=d.invokePartial(i.modal_title,"modal_title",f,l,i,g))||c===0)o+=c;o+="\n";if((c=d.invokePartial(i.modal_close,"modal_close",f,l,i,g))||c===0)o+=c;o+='\n<div class="modal-contents">\n    <div class="bm-info has-favicon">\n      ';if((c=l["with"].call(f,f.bitmark,{hash:{},inverse:d.noop,fn:d.program(1,
function(b,h){var m="",v;m+="\n      ";if((v=d.invokePartial(i.bitmark_info,"bitmark_info",b,l,i,h))||v===0)m+=v;m+="\n      ";return m},g),data:g}))||c===0)o+=c;o+='\n    </div>\n    <div class="connect-wrapper">\n      <h3 class="connect-heading">Please connect</h3>\n      <div><a href="#" class="social-btn facebook-social-btn" data-network="facebook"><i class="fa fa-facebook-square fa-fw fa-2x"></i> Connect to Facebook</a></div>\n      <div><a href="#" class="social-btn twitter-social-btn" data-network="twitter"><i class="fa fa-twitter-square fa-fw fa-2x"></i> Connect to Twitter</a></div>\n      <div style="margin-top: 5px;"><a href="#" class="share-email">Or did you want to <span class="hamburger-bold">share via email</span>?</a></div>\n    </div>\n</div>\n';
return o});
this.Handlebars.templates.modal_oauth_token_share_error=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);i=this.merge(i,o.partials);g=g||{};o="";var c,d=l.helperMissing,b=this.escapeExpression;o+='<strong class="error-title clearfix">There was a problem while sharing</strong>\n';if((i=this.invokePartial(i.modal_close,"modal_close",f,l,i,g))||i===0)o+=i;o+='\n<div>\n    <h2><img src="';c={hash:{},data:g};o+=b((i=l.avatar||f.avatar,i?i.call(f,f.account_type,
f.account_login,c):d.call(f,"avatar",f.account_type,f.account_login,c)))+'" /><span>We were unable to connect to your ';c={hash:{},data:g};o+=b((i=l.serviceName||f.serviceName,i?i.call(f,f.account_type,c):d.call(f,"serviceName",f.account_type,c)))+" account</span></h2>\n    <p>Possible causes include:</p>\n    <ul>\n        <li>Your ";c={hash:{},data:g};o+=b((i=l.serviceName||f.serviceName,i?i.call(f,f.account_type,c):d.call(f,"serviceName",f.account_type,c)))+" password changed.</li>\n        <li>You have not granted Bitly approval to share to your ";
c={hash:{},data:g};o+=b((i=l.serviceName||f.serviceName,i?i.call(f,f.account_type,c):d.call(f,"serviceName",f.account_type,c)))+' account.</li>\n        <li>Some other complicated issue we can\'t quite explain.</li>\n    </ul>\n    <div class="reconnect">\n        <strong>To fix this, reconnect Bitly to ';c={hash:{},data:g};o+=b((i=l.serviceName||f.serviceName,i?i.call(f,f.account_type,c):d.call(f,"serviceName",f.account_type,c)))+'&hellip;</strong>\n        <a class="button orange connect-token-error" href="/a/settings/connected" target="_blank" data-account_login="';
if(c=l.account_login)c=c.call(f,{hash:{},data:g});else{c=f.account_login;c=typeof c==="function"?c.apply(f):c}o+=b(c)+'" data-account_type="';if(c=l.account_type)c=c.call(f,{hash:{},data:g});else{c=f.account_type;c=typeof c==="function"?c.apply(f):c}o+=b(c)+'">\n            <span class="large">Reconnect to ';c={hash:{},data:g};o+=b((i=l.serviceName||f.serviceName,i?i.call(f,f.account_type,c):d.call(f,"serviceName",f.account_type,c)))+'</span>\n            <br />\n            <span class="small">Account: ';
if(c=l.account_name)c=c.call(f,{hash:{},data:g});else{c=f.account_name;c=typeof c==="function"?c.apply(f):c}o+=b(c)+'</span>\n        </a>\n        <span class="desc">Make sure your browser is set to allow popups from bitly.com</span>\n        <strong>&hellip;then try sharing the item again</strong>\n    </div>\n</div>\n<p class="contact">\n    If this doesn\'t work out, please contact us at <a href="mailto:support@bitly.com">support@bitly.com</a>.\n</p>\n';return o});
this.Handlebars.templates.modal_share_error=Handlebars.template(function(o,f,l,i,g){function c(){return"These posts"}function d(){return"This post"}function b(la,Qa){var K="",I,aa;K+='\n    <li class="shared-nw clearfix error ';if((I=l["if"].call(la,la.account_type,{hash:{},inverse:eb.program(11,m,Qa),fn:eb.program(9,h,Qa),data:Qa}))||I===0)K+=I;K+='">\n        <span class="status">error</span>\n        <span class="avatar" title="'+$a((I=la.account_login,typeof I===xa?I.apply(la):I))+'" style="';
if((aa=l["if"].call(la,la.account_type,{hash:{},inverse:eb.noop,fn:eb.program(13,v,Qa),data:Qa}))||aa===0)K+=aa;K+='"></span>\n        ';aa={hash:{},data:Qa};K+=$a((I=l.accountName||la.accountName,I?I.call(la,la,aa):ub.call(la,"accountName",la,aa)))+'\n        <a class="button retry-share orange" data-account_type="';if((aa=l["if"].call(la,la.account_type,{hash:{},inverse:eb.program(11,m,Qa),fn:eb.program(9,h,Qa),data:Qa}))||aa===0)K+=aa;K+='" data-account="';if((aa=l["if"].call(la,la.account_id,
{hash:{},inverse:eb.program(11,m,Qa),fn:eb.program(15,w,Qa),data:Qa}))||aa===0)K+=aa;K+='">Retry</a>\n    </li>\n  ';return K}function h(la){var Qa;return $a((Qa=la.account_type,typeof Qa===xa?Qa.apply(la):Qa))}function m(){return"email"}function v(la,Qa){var K="",I;K+="background-image: url(";if(I=l.absOrRelURL)I=I.call(la,{hash:{},data:Qa});else{I=la.absOrRelURL;I=typeof I===xa?I.apply(la):I}K+=$a(I)+"/data/avatar/"+$a((I=la.account_type,typeof I===xa?I.apply(la):I))+"/"+$a((I=la.account_login,
typeof I===xa?I.apply(la):I))+".png);";return K}function w(la){var Qa;return $a((Qa=la.account_id,typeof Qa===xa?Qa.apply(la):Qa))}function s(){return"These posts were"}function A(){return"This post was"}function D(la,Qa){var K="",I,aa;K+='\n    <li class="shared-nw clearfix success ';if((I=l["if"].call(la,la.account_type,{hash:{},inverse:eb.program(11,m,Qa),fn:eb.program(9,h,Qa),data:Qa}))||I===0)K+=I;K+='">\n        <span class="status">success</span>\n        <span class="avatar" title="'+$a((I=
la.account_login,typeof I===xa?I.apply(la):I))+'" style="';if((aa=l["if"].call(la,la.account_type,{hash:{},inverse:eb.noop,fn:eb.program(13,v,Qa),data:Qa}))||aa===0)K+=aa;K+='"></span>\n        ';aa={hash:{},data:Qa};K+=$a((I=l.accountName||la.accountName,I?I.call(la,la,aa):ub.call(la,"accountName",la,aa)))+'\n        <span class="confirmation">Success!</span>\n    </li>\n  ';return K}function y(){return"These"}function S(la,Qa){var K="",I,aa;K+='\n        <li class="shared-nw clearfix error ';if((I=
l["if"].call(la,la.account_type,{hash:{},inverse:eb.program(11,m,Qa),fn:eb.program(9,h,Qa),data:Qa}))||I===0)K+=I;K+='">\n            <span class="status">error</span>\n            <span class="avatar" title="'+$a((I=la.account_login,typeof I===xa?I.apply(la):I))+'" style="';if((aa=l["if"].call(la,la.account_type,{hash:{},inverse:eb.noop,fn:eb.program(13,v,Qa),data:Qa}))||aa===0)K+=aa;K+='"></span>\n            ';aa={hash:{},data:Qa};K+=$a((I=l.accountName||la.accountName,I?I.call(la,la,aa):ub.call(la,
"accountName",la,aa)))+'\n            <span class="reason">\n                ';aa={hash:{},inverse:eb.noop,fn:eb.program(28,O,Qa),data:Qa};if((aa=(I=l.is||la.is,I?I.call(la,la.error,"DUPLICATE_POST",aa):ub.call(la,"is",la.error,"DUPLICATE_POST",aa)))||aa===0)K+=aa;K+="\n                ";aa={hash:{},inverse:eb.noop,fn:eb.program(30,G,Qa),data:Qa};if((aa=(I=l.is||la.is,I?I.call(la,la.error,"CONTENT_BLOCKED",aa):ub.call(la,"is",la.error,"CONTENT_BLOCKED",aa)))||aa===0)K+=aa;K+="\n            </span>\n        </li>\n      ";
return K}function O(){return"This was a duplicate post"}function G(la,Qa){var K="",I,aa;K+="Content blocked by ";aa={hash:{},data:Qa};K+=$a((I=l.serviceName||la.serviceName,I?I.call(la,la.account_type,aa):ub.call(la,"serviceName",la.account_type,aa)));return K}this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var X,xa="function",$a=this.escapeExpression,eb=this,ub=l.helperMissing;o+='<strong class="error-title">We had a bit of trouble there</strong>\n<div class="error-status clearfix">\n';
i={hash:{},inverse:eb.noop,fn:eb.program(1,function(){return'\n  <a class="button orange retry-all retry-share" href="#">Retry All</a>\n'},g),data:g};if((i=(X=l.gt||f.gt,X?X.call(f,(X=f.errors,X==null||X===false?X:X.length),1,i):ub.call(f,"gt",(X=f.errors,X==null||X===false?X:X.length),1,i)))||i===0)o+=i;o+="\n";if((i=l["if"].call(f,(X=f.errors,X==null||X===false?X:X.length),{hash:{},inverse:eb.noop,fn:eb.program(3,function(la,Qa){var K="",I,aa;K+="\n<h2>";aa={hash:{},inverse:eb.program(6,d,Qa),fn:eb.program(4,
c,Qa),data:Qa};if((aa=(I=l.gt||la.gt,I?I.call(la,(I=la.errors,I==null||I===false?I:I.length),1,aa):ub.call(la,"gt",(I=la.errors,I==null||I===false?I:I.length),1,aa)))||aa===0)K+=aa;K+=' failed, but you can retry them.</h2>\n<ul class="errors">\n  ';if((aa=l.each.call(la,la.errors,{hash:{},inverse:eb.noop,fn:eb.program(8,b,Qa),data:Qa}))||aa===0)K+=aa;K+="\n </ul>\n";return K},g),data:g}))||i===0)o+=i;o+="\n\n";if((i=l["if"].call(f,(X=f.successes,X==null||X===false?X:X.length),{hash:{},inverse:eb.noop,
fn:eb.program(17,function(la,Qa){var K="",I,aa;K+="\n <h2>";aa={hash:{},inverse:eb.program(20,A,Qa),fn:eb.program(18,s,Qa),data:Qa};if((aa=(I=l.gt||la.gt,I?I.call(la,(I=la.successes,I==null||I===false?I:I.length),1,aa):ub.call(la,"gt",(I=la.successes,I==null||I===false?I:I.length),1,aa)))||aa===0)K+=aa;K+=' successful!</h2>\n <ul class="successes">\n  ';if((aa=l.each.call(la,la.successes,{hash:{},inverse:eb.noop,fn:eb.program(22,D,Qa),data:Qa}))||aa===0)K+=aa;K+="\n</ul>\n";return K},g),data:g}))||
i===0)o+=i;o+="\n\n";if((i=l["if"].call(f,(X=f.unrecoverable_errors,X==null||X===false?X:X.length),{hash:{},inverse:eb.noop,fn:eb.program(24,function(la,Qa){var K="",I,aa;K+="\n    <h2>";aa={hash:{},inverse:eb.program(6,d,Qa),fn:eb.program(25,y,Qa),data:Qa};if((aa=(I=l.gt||la.gt,I?I.call(la,(I=la.unrecoverable_errors,I==null||I===false?I:I.length),1,aa):ub.call(la,"gt",(I=la.unrecoverable_errors,I==null||I===false?I:I.length),1,aa)))||aa===0)K+=aa;K+=' failed permanently.</h2>\n    <ul class="unrecoverable-errors">\n      ';
if((aa=l.each.call(la,la.unrecoverable_errors,{hash:{},inverse:eb.noop,fn:eb.program(27,S,Qa),data:Qa}))||aa===0)K+=aa;K+="\n     </ul>\n";return K},g),data:g}))||i===0)o+=i;o+='\n<p class="contact">\n    If this doesn\'t work out, please contact us at <a href="mailto:support@bitly.com">support@bitly.com</a>.\n</p>\n</div>\n<div class="modal-actions cf">\n  <a href="#" class="cancel">Close</a>\n</div>\n';return o});
this.Handlebars.templates.modal_social_share=Handlebars.template(function(o,f,l,i,g){function c(){return" is-hidden"}function d(O,G){var X="",xa;X+="\n                        ";if((xa=y.invokePartial(i.share_account,"share_account",O,l,i,G))||xa===0)X+=xa;X+="\n                    ";return X}function b(){return"Twitter"}function h(){return"Facebook"}function m(){return"1"}function v(){return"0"}function w(){return"private"}function s(){return"public"}this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,
o.helpers);i=this.merge(i,o.partials);g=g||{};o="";var A,D,y=this,S=l.helperMissing;o+='<h2 class="modal-title share-modal-title">Share to\u2026</h2>\n';if((A=y.invokePartial(i.modal_close,"modal_close",f,l,i,g))||A===0)o+=A;o+='\n<div class="modal-contents">\n    <div class="bm-info" />\n    <div class="share-message" />\n        <div class="preview-wrapper';D={hash:{},inverse:y.noop,fn:y.program(1,function(){return" is-only"},g),data:g};if((D=(A=l.is||f.is,A?A.call(f,f.total_accounts,1,D):S.call(f,
"is",f.total_accounts,1,D)))||D===0)o+=D;o+='">\n        <div class="clearfix share-network share-network-twitter';if((D=l.unless.call(f,(A=(A=f.accounts,A==null||A===false?A:A.twitter),A==null||A===false?A:A.length),{hash:{},inverse:y.noop,fn:y.program(3,c,g),data:g}))||D===0)o+=D;o+='">\n            <div class="share-network-header">Preview</div>\n            <div class="share-accounts">\n                ';if((D=l["if"].call(f,(A=(A=f.accounts,A==null||A===false?A:A.twitter),A==null||A===false?
A:A.length),{hash:{},inverse:y.noop,fn:y.program(5,function(O,G){var X="",xa,$a;X+="\n                    ";if(($a=l.each.call(O,(xa=O.accounts,xa==null||xa===false?xa:xa.twitter),{hash:{},inverse:y.noop,fn:y.program(6,d,G),data:G}))||$a===0)X+=$a;X+="\n                ";return X},g),data:g}))||D===0)o+=D;o+='\n            </div>\n            <div class="share-preview ';if((D=l.unless.call(f,f.has_twitter_enabled,{hash:{},inverse:y.noop,fn:y.program(3,c,g),data:g}))||D===0)o+=D;o+='">\n                ';
if((D=y.invokePartial(i.share_twitter_preview,"share_twitter_preview",f,l,i,g))||D===0)o+=D;o+='\n            </div>\n        </div>\n        <div class="clearfix share-network share-network-facebook';if((D=l.unless.call(f,(A=(A=f.accounts,A==null||A===false?A:A.facebook),A==null||A===false?A:A.length),{hash:{},inverse:y.noop,fn:y.program(3,c,g),data:g}))||D===0)o+=D;o+='">\n            <div class="share-network-header">Preview</div>\n            <div class="share-accounts">\n                ';if((D=
l["if"].call(f,(A=(A=f.accounts,A==null||A===false?A:A.facebook),A==null||A===false?A:A.length),{hash:{},inverse:y.noop,fn:y.program(8,function(O,G){var X="",xa,$a;X+="\n                    ";if(($a=l.each.call(O,(xa=O.accounts,xa==null||xa===false?xa:xa.facebook),{hash:{},inverse:y.noop,fn:y.program(6,d,G),data:G}))||$a===0)X+=$a;X+="\n                ";return X},g),data:g}))||D===0)o+=D;o+='\n            </div>\n            <div class="share-preview ';if((D=l.unless.call(f,f.has_facebook_enabled,
{hash:{},inverse:y.noop,fn:y.program(10,function(){return"is-hidden"},g),data:g}))||D===0)o+=D;o+='" />\n        </div>\n    </div>\n    <div class="modal-actions cf">\n        <a href="#" class="add-new-account">+ Add another account</a>\n\t\t<a href="#" title="';D={hash:{},inverse:y.noop,fn:y.program(12,function(){return"Share this Bitlink via "},g),data:g};if((D=(A=l.or||f.or,A?A.call(f,f.has_facebook_enabled,f.has_twitter_enabled,D):S.call(f,"or",f.has_facebook_enabled,f.has_twitter_enabled,D)))||
D===0)o+=D;D={hash:{},inverse:y.program(16,function(O,G){var X="",xa;if((xa=l["if"].call(O,O.has_twitter_enabled,{hash:{},inverse:y.noop,fn:y.program(17,b,G),data:G}))||xa===0)X+=xa;if((xa=l["if"].call(O,O.has_facebook_enabled,{hash:{},inverse:y.noop,fn:y.program(19,h,G),data:G}))||xa===0)X+=xa;return X},g),fn:y.program(14,function(){return"Facebook and Twitter"},g),data:g};if((D=(A=l.and||f.and,A?A.call(f,f.has_facebook_enabled,f.has_twitter_enabled,D):S.call(f,"and",f.has_facebook_enabled,f.has_twitter_enabled,
D)))||D===0)o+=D;o+='" class="btn btn-square btn-flat share-btn';D={hash:{},inverse:y.noop,fn:y.program(21,function(){return" is-disabled"},g),data:g};if((D=(A=l.none||f.none,A?A.call(f,f.has_twitter_enabled,f.has_facebook_enabled,D):S.call(f,"none",f.has_twitter_enabled,f.has_facebook_enabled,D)))||D===0)o+=D;o+='">\n\t\t    ';if((D=y.invokePartial(i.share_button,"share_button",f,l,i,g))||D===0)o+=D;o+='\n        </a>\n\t\t<a href="#" class="cancel">Cancel</a>\n    </div>\n    ';if((D=l.unless.call(f,
(A=f.bitmark,A==null||A===false?A:A.link),{hash:{},inverse:y.noop,fn:y.program(23,function(O,G){var X="",xa,$a;X+='\n        <p class="save-privacy-msg">This will also be saved as a <a href="#" id="save-privacy" data-privacy="';if(($a=l["if"].call(O,(xa=O.bitmark,xa==null||xa===false?xa:xa["private"]),{hash:{},inverse:y.program(26,v,G),fn:y.program(24,m,G),data:G}))||$a===0)X+=$a;X+='">';if(($a=l["if"].call(O,(xa=O.bitmark,xa==null||xa===false?xa:xa["private"]),{hash:{},inverse:y.program(30,s,G),
fn:y.program(28,w,G),data:G}))||$a===0)X+=$a;X+="</a> Bitlink.</p>\n    ";return X},g),data:g}))||D===0)o+=D;o+="\n</div>\n";return o});
this.Handlebars.templates.previous_shares=Handlebars.template(function(o,f,l,i,g){function c(y,S){var O="",G,X;O+='\n          <img class="share-avatar" src="';X={hash:{},data:S};O+=s((G=l.avatar||y.avatar,G?G.call(y,y.share_type,y.account_login,30,X):w.call(y,"avatar",y.share_type,y.account_login,30,X)))+'">\n        ';return O}function d(y,S){var O="",G;O+="\n                    @";if(G=l.account_login)G=G.call(y,{hash:{},data:S});else{G=y.account_login;G=typeof G===A?G.apply(y):G}O+=s(G)+"\n                ";
return O}function b(){return"\n                    via facebook\n                "}function h(y,S){var O="",G;O+="\n                    emailed to: ";if(G=l.email)G=G.call(y,{hash:{},data:S});else{G=y.email;G=typeof G===A?G.apply(y):G}O+=s(G)+"\n                ";return O}function m(y,S){var O="",G,X;O+='\n            <a href="';if(G=l.remote_share_link)G=G.call(y,{hash:{},data:S});else{G=y.remote_share_link;G=typeof G===A?G.apply(y):G}O+=s(G)+'">';X={hash:{},data:S};O+=s((G=l.dateFormat||y.dateFormat,
G?G.call(y,y.ts,"MMM D",X):w.call(y,"dateFormat",y.ts,"MMM D",X)))+"</a>\n        ";return O}function v(y,S){var O="",G,X;O+="\n            <span>";X={hash:{},data:S};O+=s((G=l.dateFormat||y.dateFormat,G?G.call(y,y.ts,"MMM D",X):w.call(y,"dateFormat",y.ts,"MMM D",X)))+"</a>\n        ";return O}this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};var w=l.helperMissing,s=this.escapeExpression,A="function",D=this;return(o=l.each.call(f,f.shares,{hash:{},inverse:D.noop,fn:D.program(1,function(y,
S){var O="",G,X;O+='\n<div class="bitmark-share prev-share-';if(G=l.share_type)G=G.call(y,{hash:{},data:S});else{G=y.share_type;G=typeof G===A?G.apply(y):G}O+=s(G)+'">\n    <img class="share-network-icon" src=';X={hash:{},data:S};O+=s((G=l.shareNetworkIcon||y.shareNetworkIcon,G?G.call(y,y.share_type,X):w.call(y,"shareNetworkIcon",y.share_type,X)))+'>\n    <div class="clearfix">\n        ';X={hash:{},inverse:D.noop,fn:D.program(2,c,S),data:S};if((X=(G=l.not||y.not,G?G.call(y,y.share_type,"email",X):
w.call(y,"not",y.share_type,"email",X)))||X===0)O+=X;O+='\n        <div class="share-name">\n            <div class="share-fullname">';if(X=l.account_name)X=X.call(y,{hash:{},data:S});else{X=y.account_name;X=typeof X===A?X.apply(y):X}O+=s(X)+'</div>\n            <div class="share-handle">\n                ';X={hash:{},inverse:D.noop,fn:D.program(4,d,S),data:S};if((X=(G=l.is||y.is,G?G.call(y,y.share_type,"twitter",X):w.call(y,"is",y.share_type,"twitter",X)))||X===0)O+=X;O+="\n                ";X={hash:{},
inverse:D.noop,fn:D.program(6,b,S),data:S};if((X=(G=l.is||y.is,G?G.call(y,y.share_type,"facebook",X):w.call(y,"is",y.share_type,"facebook",X)))||X===0)O+=X;O+="\n                ";X={hash:{},inverse:D.noop,fn:D.program(8,h,S),data:S};if((X=(G=l.is||y.is,G?G.call(y,y.share_type,"email",X):w.call(y,"is",y.share_type,"email",X)))||X===0)O+=X;O+='\n            </div>\n        </div>\n    </div>\n    <p class="share-text">';X={hash:{},data:S};O+=s((G=l.boldPattern||y.boldPattern,G?G.call(y,y.shortLink,
y.text,X):w.call(y,"boldPattern",y.shortLink,y.text,X)))+'</p>\n        <div class="share-timestamp">\n        ';if((X=l["if"].call(y,y.remote_share_link,{hash:{},inverse:D.program(12,v,S),fn:D.program(10,m,S),data:S}))||X===0)O+=X;O+="\n        </div>\n</div>\n";return O},g),data:g}))||o===0?o:""});
this.Handlebars.templates.share_account=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var c,d;i=l.helperMissing;var b=this.escapeExpression;o+='<label title="';d={hash:{},inverse:this.program(3,function(){return"Post"},g),fn:this.program(1,function(){return"Tweet"},g),data:g};if((d=(c=l.is||f.is,c?c.call(f,f.account_type,"twitter",d):i.call(f,"is",f.account_type,"twitter",d)))||d===0)o+=d;o+=" as ";d={hash:{},data:g};o+=b((c=l.fallback||
f.fallback,c?c.call(f,f.full_name,f.account_name,d):i.call(f,"fallback",f.full_name,f.account_name,d)))+'" class="share-account ';if((d=l["if"].call(f,f.primary,{hash:{},inverse:this.noop,fn:this.program(5,function(){return"is-selected"},g),data:g}))||d===0)o+=d;o+='">\n    <span class="share-account-cb-container">\n        <input class="share-account-checkbox"\n        ';if((d=l["if"].call(f,f.only,{hash:{},inverse:this.noop,fn:this.program(7,function(){return'disabled="disabled"'},g),data:g}))||
d===0)o+=d;o+='\n        data-account-id="';if(d=l.account_id)d=d.call(f,{hash:{},data:g});else{d=f.account_id;d=typeof d==="function"?d.apply(f):d}o+=b(d)+'"\n        data-type="';if(d=l.account_type)d=d.call(f,{hash:{},data:g});else{d=f.account_type;d=typeof d==="function"?d.apply(f):d}o+=b(d)+'"\n        data-login="';if(d=l.account_login)d=d.call(f,{hash:{},data:g});else{d=f.account_login;d=typeof d==="function"?d.apply(f):d}o+=b(d)+'"\n        type="checkbox"\n        ';if((d=l["if"].call(f,
f.primary,{hash:{},inverse:this.noop,fn:this.program(9,function(){return'checked="checked"'},g),data:g}))||d===0)o+=d;o+='\n        />\n        \n    </span>\n\n    <div class="share-account-avatar" style="background: url(\'';d={hash:{},data:g};o+=b((c=l.avatar||f.avatar,c?c.call(f,f.account_type,f.account_login,d):i.call(f,"avatar",f.account_type,f.account_login,d)))+'\') no-repeat center center;"></div>\n    <span class="share-account-name">';d={hash:{},data:g};o+=b((c=l.fallback||f.fallback,c?
c.call(f,f.full_name,f.account_name,d):i.call(f,"fallback",f.full_name,f.account_name,d)))+"</span>\n</label>\n";return o});
this.Handlebars.templates.share_button=Handlebars.template(function(o,f,l,i,g){function c(){return"Tweet"}function d(){return"Post"}function b(){return"Share"}this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var h,m=this,v=l.helperMissing;g={hash:{},inverse:m.program(3,function(w,s){var A="",D,y;A+="\n    ";if((D=l["if"].call(w,w.has_twitter_enabled,{hash:{},inverse:m.noop,fn:m.program(4,c,s),data:s}))||D===0)A+=D;A+="\n    ";if((D=l["if"].call(w,w.has_facebook_enabled,{hash:{},
inverse:m.noop,fn:m.program(6,d,s),data:s}))||D===0)A+=D;A+="\n    ";y={hash:{},inverse:m.noop,fn:m.program(8,b,s),data:s};if((y=(D=l.none||w.none,D?D.call(w,w.has_twitter_enabled,w.has_facebook_enabled,y):v.call(w,"none",w.has_twitter_enabled,w.has_facebook_enabled,y)))||y===0)A+=y;A+="\n";return A},g),fn:m.program(1,function(){return"\n    Post &amp; Tweet\n"},g),data:g};if((f=(h=l.and||f.and,h?h.call(f,f.has_facebook_enabled,f.has_twitter_enabled,g):v.call(f,"and",f.has_facebook_enabled,f.has_twitter_enabled,
g)))||f===0)o+=f;o+="\n";return o});this.Handlebars.templates.share_facebook_preview=Handlebars.template(function(o,f,l){this.compilerInfo=[4,">= 1.0.0"];this.merge(l,o.helpers);return'<div class="share-message"></div>\n<div class="preview-box cf is-hidden">\n    <div class="thumb-selector" />\n    <div class="wrapper">\n        <div class="title" />\n        <div class="caption" />\n        <div class="desc" />\n    </div>\n</div>\n'});
this.Handlebars.templates.share_message=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var c,d=this.escapeExpression;o+='<div class="';if(i=l.modal_type)i=i.call(f,{hash:{},data:g});else{i=f.modal_type;i=typeof i==="function"?i.apply(f):i}o+=d(i)+'-message-placeholder textarea-placeholder is-hidden">\n    <span>Include a message?</span>\n    ';if((i=l["if"].call(f,f.previousShare,{hash:{},inverse:this.noop,fn:this.program(1,function(){return'\n    <a class="placeholder-choice placeholder-share" href="#">Last share message</a>\n    '},
g),data:g}))||i===0)o+=i;o+="\n    ";if((c=l["if"].call(f,(i=f.bitmark,i==null||i===false?i:i.note),{hash:{},inverse:this.noop,fn:this.program(3,function(){return'\n    <a class="placeholder-choice placeholder-note" href="#">Note</a>\n    '},g),data:g}))||c===0)o+=c;o+='\n</div>\n<textarea id="share_message_';if(c=l.network)c=c.call(f,{hash:{},data:g});else{c=f.network;c=typeof c==="function"?c.apply(f):c}o+=d(c)+'" placeholder="';if(c=l.placeholder)c=c.call(f,{hash:{},data:g});else{c=f.placeholder;
c=typeof c==="function"?c.apply(f):c}o+=d(c)+'" class="';if(c=l.modal_type)c=c.call(f,{hash:{},data:g});else{c=f.modal_type;c=typeof c==="function"?c.apply(f):c}o+=d(c)+'-message textarea-message">';if((c=l["if"].call(f,f.message,{hash:{},inverse:this.noop,fn:this.program(5,function(b,h){var m;if(m=l.message)m=m.call(b,{hash:{},data:h});else{m=b.message;m=typeof m==="function"?m.apply(b):m}return d(m)},g),data:g}))||c===0)o+=c;o+="</textarea>\n";return o});
this.Handlebars.templates.share_success_message=Handlebars.template(function(o,f,l,i,g){function c(y,S){var O="",G,X;O+='\n\t        <a href="#" class="btn social-share-btn';if((X=l["if"].call(y,(G=y.facebook,G==null||G===false?G:G.length),{hash:{},inverse:D.noop,fn:D.program(5,d,S),data:S}))||X===0)O+=X;if((X=l["if"].call(y,(G=y.twitter,G==null||G===false?G:G.length),{hash:{},inverse:D.noop,fn:D.program(7,b,S),data:S}))||X===0)O+=X;O+='">\n\t            ';if((X=l["if"].call(y,(G=y.facebook,G==null||
G===false?G:G.length),{hash:{},inverse:D.noop,fn:D.program(9,h,S),data:S}))||X===0)O+=X;O+="\n\n\t            ";if((X=l["if"].call(y,(G=y.twitter,G==null||G===false?G:G.length),{hash:{},inverse:D.noop,fn:D.program(11,m,S),data:S}))||X===0)O+=X;O+="\n\n\t            \n\t            ";if((X=l.unless.call(y,(G=y.facebook,G==null||G===false?G:G.length),{hash:{},inverse:D.noop,fn:D.program(13,v,S),data:S}))||X===0)O+=X;O+="\n\n\t        </a>\n\t        ";return O}function d(){return" has-facebook"}function b(){return" has-twitter"}
function h(){return'\n\t            <span class="is-facebook">facebook</span>\n\t            '}function m(){return'\n\t            <span class="is-twitter">twitter</span>\n\t            '}function v(y,S){var O="",G,X;O+="\n\t                ";if((X=l.unless.call(y,(G=y.twitter,G==null||G===false?G:G.length),{hash:{},inverse:D.noop,fn:D.program(14,w,S),data:S}))||X===0)O+=X;O+="\n\t            ";return O}function w(){return'\n\t                <span class="is-facebook">facebook</span>\n\t                <span class="is-twitter">twitter</span>\n\t                '}
this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var s,A,D=this;i=l.helperMissing;o+='<div class="share-success-message">\n\t<strong>SUCCESS</strong>\n\t<p>\n\t\tAlso share to\n\t\t';A={hash:{},inverse:D.noop,fn:D.program(1,function(){return'\n\t\t\t<a href="#" class="btn email-share-btn">email</a>\n\t\t'},g),data:g};if((A=(s=l.is||f.is,s?s.call(f,f.share_type,"email",A):i.call(f,"is",f.share_type,"email",A)))||A===0)o+=A;o+="\n\t\t";A={hash:{},inverse:D.noop,fn:D.program(3,
function(y,S){var O="",G;O+="\n\t\t\t";if((G=l["with"].call(y,y.accounts,{hash:{},inverse:D.noop,fn:D.program(4,c,S),data:S}))||G===0)O+=G;O+="\n\t\t";return O},g),data:g};if((A=(s=l.is||f.is,s?s.call(f,f.share_type,"social",A):i.call(f,"is",f.share_type,"social",A)))||A===0)o+=A;o+="\n\t\t?\n\t</p>\n</div>";return o});
this.Handlebars.templates.share_twitter_preview=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var c=this.escapeExpression;o+='<div class="share-char-counter">\n  <span class="count">';if((i=l["if"].call(f,f.characterCount,{hash:{},inverse:this.noop,fn:this.program(1,function(d,b){var h;if(h=l.characterCount)h=h.call(d,{hash:{},data:b});else{h=d.characterCount;h=typeof h==="function"?h.apply(d):h}return c(h)},g),data:g}))||i===0)o+=
i;o+='</span>\n  <p class="extra-tco-message">';if(i=l.extraTcoLengthMessage)i=i.call(f,{hash:{},data:g});else{i=f.extraTcoLengthMessage;i=typeof i==="function"?i.apply(f):i}o+=c(i)+'</p>\n</div>\n<div class="share-message"></div>\n';return o});this.Handlebars.templates.thumb_selector=Handlebars.template(function(o,f,l){this.compilerInfo=[4,">= 1.0.0"];this.merge(l,o.helpers);return'<div class="thumb-images"></div>\n<div class="thumb-nav">\n    <a href="#" class="thumb-prev">Previous Thumbnail</a>\n    <a href="#" class="thumb-next">Next Thumbnail</a>\n</div>\n<a href="#" class="thumb-remove">Remove Thumbnail</a>\n<a href="#" class="thumb-add">Add picture</a>\n'});
this.Handlebars.templates.thumbnail_list_items=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";if((f=l.each.call(f,f.thumbnails,{hash:{},inverse:this.noop,fn:this.program(1,function(){return'<img class="thumb-list-img is-loading" />'},g),data:g}))||f===0)o+=f;o+="\n";return o});
this.Handlebars.templates.stats_popular_link=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var c,d=this.escapeExpression,b=l.helperMissing;o+='<div class="link-content-container cf">\n  <div class="link-user-clicks-container">\n    <a href="'+d((c=(c=f.link,c==null||c===false?c:c.shorturl),typeof c==="function"?c.apply(f):c))+'+" target="_blank"><i class="default fa fa-bar-chart-o"></i> <span class="link-user-clicks">'+d((c=(c=f.link,
c==null||c===false?c:c.user_clicks),typeof c==="function"?c.apply(f):c))+'</span></a>\n  </div>\n  <div class="link-text-container">\n    <div class="link-title-container">\n      <a class="h1 link-title" target="_blank" href="'+d((c=(c=f.link,c==null||c===false?c:c.short_link),typeof c==="function"?c.apply(f):c))+'">';i={hash:{},data:g};o+=d((c=l.blankTitleFiller||f.blankTitleFiller,c?c.call(f,f.link,i):b.call(f,"blankTitleFiller",f.link,i)))+'</a>\n    </div>\n    <span class="h2 link-info">\n      <span class="link-source">';
i={hash:{},data:g};o+=d((c=l.domainFromUrl||f.domainFromUrl,c?c.call(f,(c=f.link,c==null||c===false?c:c.source),i):b.call(f,"domainFromUrl",(c=f.link,c==null||c===false?c:c.source),i)))+'</span>\n      <span class="link-time-ago">Created <span class="date">';i={hash:{},data:g};o+=d((c=l.prettifyDate||f.prettifyDate,c?c.call(f,(c=f.link,c==null||c===false?c:c.createdTimeAgo),i):b.call(f,"prettifyDate",(c=f.link,c==null||c===false?c:c.createdTimeAgo),i)))+'</span> <span class="time">';i={hash:{},data:g};
o+=d((c=l.prettifyTime||f.prettifyTime,c?c.call(f,(c=f.link,c==null||c===false?c:c.createdTimeAgo),i):b.call(f,"prettifyTime",(c=f.link,c==null||c===false?c:c.createdTimeAgo),i)))+'</span></span>\n      <span class="link-short-url"><a href="'+d((c=(c=f.link,c==null||c===false?c:c.short_link),typeof c==="function"?c.apply(f):c))+'">';i={hash:{},data:g};o+=d((c=l.stripProtocol||f.stripProtocol,c?c.call(f,(c=f.link,c==null||c===false?c:c.short_link),i):b.call(f,"stripProtocol",(c=f.link,c==null||c===
false?c:c.short_link),i)))+"</a></span>\n    </span>\n  </div>\n</div>\n";return o});
this.Handlebars.templates.unified_copy_customize_widget=Handlebars.template(function(o,f,l,i,g){this.compilerInfo=[4,">= 1.0.0"];l=this.merge(l,o.helpers);g=g||{};o="";var c,d=this.escapeExpression,b=l.helperMissing;o+='<div class="bitmark-customize ';if((i=l.unless.call(f,f.is_editable,{hash:{},inverse:this.noop,fn:this.program(1,function(){return"is-no-customize"},g),data:g}))||i===0)o+=i;o+='">\n    ';if((i=l.unless.call(f,f.is_editable,{hash:{},inverse:this.noop,fn:this.program(3,function(){return'\n      <i class="fa fa-link fa-fw default no-customize-icon"></i>\n    '},
g),data:g}))||i===0)o+=i;o+='\n    <a href="';if(i=l.shortLink)i=i.call(f,{hash:{},data:g});else{i=f.shortLink;i=typeof i==="function"?i.apply(f):i}o+=d(i)+'" class="bitmark-shortlink"><span class="protocol">http://</span>';c={hash:{},data:g};o+=d((i=l.stripProtocol||f.stripProtocol,i?i.call(f,f.shortLink,c):b.call(f,"stripProtocol",f.shortLink,c)))+"</a>\n    ";if((f=l["if"].call(f,f.is_editable,{hash:{},inverse:this.noop,fn:this.program(5,function(){return'\n      <a href="#" class="bitmark-customize-action" title="Customize this bitly link"><i class="fa fa-pencil fa-fw default"></i></a>\n    '},
g),data:g}))||f===0)o+=f;o+='\n</div>\n<a href="#" class="bitmark-copy button">Copy</a>';return o});(function(){var o,f,l,i;i=["share_account","modal_title","modal_close","thumbnail_list_items","add_account_popup","bitmark_info","share_button","share_facebook_preview","share_twitter_preview","multi_picker_picked","multi_picker_suggestions","bitmark","bitmark_favicon","bitmark_title","bitmark_link","bitmark_note","bitmark_info_shortlink","bitmark_privacy","bitmark_bundles","bitmark_stats","tweet","story_shortlink_create_copy"];f=0;for(l=i.length;f<l;f++){o=i[f];Handlebars.registerPartial(o,Handlebars.templates[o])}}).call(this);(function(){var o=this,f=o.Backbone,l=Array.prototype.slice,i=Array.prototype.splice,g;g="undefined"!==typeof exports?exports:o.Backbone={};g.VERSION="0.9.2";var c=o._;!c&&"undefined"!==typeof require&&(c=require("underscore"));var d=o.jQuery||o.Zepto||o.ender;g.setDomLibrary=function(K){d=K};g.noConflict=function(){o.Backbone=f;return this};g.emulateHTTP=false;g.emulateJSON=false;var b=/\s+/,h=g.Events={on:function(K,I,aa){var sa,r,Ta,qa,Ja;if(!I)return this;K=K.split(b);for(sa=this._callbacks||
(this._callbacks={});r=K.shift();){Ta=(Ja=sa[r])?Ja.tail:{};Ta.next=qa={};Ta.context=aa;Ta.callback=I;sa[r]={tail:qa,next:Ja?Ja.next:Ta}}return this},off:function(K,I,aa){var sa,r,Ta,qa,Ja,Ga;if(r=this._callbacks){if(!K&&!I&&!aa)return delete this._callbacks,this;for(K=K?K.split(b):c.keys(r);sa=K.shift();)if(Ta=r[sa],delete r[sa],Ta&&(I||aa))for(qa=Ta.tail;(Ta=Ta.next)!==qa;)if(Ja=Ta.callback,Ga=Ta.context,I&&Ja!==I||aa&&Ga!==aa)this.on(sa,Ja,Ga);return this}},trigger:function(K){var I,aa,sa,r,Ta,
qa;if(!(sa=this._callbacks))return this;Ta=sa.all;K=K.split(b);for(qa=l.call(arguments,1);I=K.shift();){if(aa=sa[I])for(r=aa.tail;(aa=aa.next)!==r;)aa.callback.apply(aa.context||this,qa);if(aa=Ta){r=aa.tail;for(I=[I].concat(qa);(aa=aa.next)!==r;)aa.callback.apply(aa.context||this,I)}}return this}};h.bind=h.on;h.unbind=h.off;var m=g.Model=function(K,I){var aa;K||(K={});I&&I.parse&&(K=this.parse(K));if(aa=la(this,"defaults"))K=c.extend({},aa,K);I&&I.collection&&(this.collection=I.collection);this.attributes=
{};this._escapedAttributes={};this.cid=c.uniqueId("c");this.changed={};this._silent={};this._pending={};this.set(K,{silent:true});this.changed={};this._silent={};this._pending={};this._previousAttributes=c.clone(this.attributes);this.initialize.apply(this,arguments)};c.extend(m.prototype,h,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(){return c.clone(this.attributes)},get:function(K){return this.attributes[K]},escape:function(K){var I;if(I=this._escapedAttributes[K])return I;
I=this.get(K);return this._escapedAttributes[K]=c.escape(null==I?"":""+I)},has:function(K){return null!=this.get(K)},set:function(K,I,aa){var sa,r;c.isObject(K)||null==K?(sa=K,aa=I):(sa={},sa[K]=I);aa||(aa={});if(!sa)return this;sa instanceof m&&(sa=sa.attributes);if(aa.unset)for(r in sa)sa[r]=void 0;if(!this._validate(sa,aa))return false;this.idAttribute in sa&&(this.id=sa[this.idAttribute]);I=aa.changes={};var Ta=this.attributes,qa=this._escapedAttributes,Ja=this._previousAttributes||{};for(r in sa){K=
sa[r];if(!c.isEqual(Ta[r],K)||aa.unset&&c.has(Ta,r)){delete qa[r];(aa.silent?this._silent:I)[r]=true}aa.unset?delete Ta[r]:Ta[r]=K;!c.isEqual(Ja[r],K)||c.has(Ta,r)!=c.has(Ja,r)?(this.changed[r]=K,aa.silent||(this._pending[r]=true)):(delete this.changed[r],delete this._pending[r])}aa.silent||this.change(aa);return this},unset:function(K,I){(I||(I={})).unset=true;return this.set(K,null,I)},clear:function(K){(K||(K={})).unset=true;return this.set(c.clone(this.attributes),K)},fetch:function(K){K=K?c.clone(K):
{};var I=this,aa=K.success;K.success=function(sa,r,Ta){if(!I.set(I.parse(sa,Ta),K))return false;aa&&aa(I,sa)};K.error=g.wrapError(K.error,I,K);return(this.sync||g.sync).call(this,"read",this,K)},save:function(K,I,aa){var sa,r;c.isObject(K)||null==K?(sa=K,aa=I):(sa={},sa[K]=I);aa=aa?c.clone(aa):{};if(aa.wait){if(!this._validate(sa,aa))return false;r=c.clone(this.attributes)}K=c.extend({},aa,{silent:true});if(sa&&!this.set(sa,aa.wait?K:aa))return false;var Ta=this,qa=aa.success;aa.success=function(Ja,
Ga,La){Ga=Ta.parse(Ja,La);if(aa.wait){delete aa.wait;Ga=c.extend(sa||{},Ga)}if(!Ta.set(Ga,aa))return false;qa?qa(Ta,Ja):Ta.trigger("sync",Ta,Ja,aa)};aa.error=g.wrapError(aa.error,Ta,aa);I=this.isNew()?"create":"update";I=(this.sync||g.sync).call(this,I,this,aa);aa.wait&&this.set(r,K);return I},destroy:function(K){K=K?c.clone(K):{};var I=this,aa=K.success,sa=function(){I.trigger("destroy",I,I.collection,K)};if(this.isNew())return sa(),false;K.success=function(Ta){K.wait&&sa();aa?aa(I,Ta):I.trigger("sync",
I,Ta,K)};K.error=g.wrapError(K.error,I,K);var r=(this.sync||g.sync).call(this,"delete",this,K);K.wait||sa();return r},url:function(){var K=la(this,"urlRoot")||la(this.collection,"url")||Qa();return this.isNew()?K:K+("/"==K.charAt(K.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(K){return K},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(K){K||(K={});var I=this._changing;this._changing=true;for(var aa in this._silent)this._pending[aa]=
true;var sa=c.extend({},K.changes,this._silent);this._silent={};for(aa in sa)this.trigger("change:"+aa,this,this.get(aa),K);if(I)return this;for(;!c.isEmpty(this._pending);){this._pending={};this.trigger("change",this,K);for(aa in this.changed)!this._pending[aa]&&!this._silent[aa]&&delete this.changed[aa];this._previousAttributes=c.clone(this.attributes)}this._changing=false;return this},hasChanged:function(K){return!arguments.length?!c.isEmpty(this.changed):c.has(this.changed,K)},changedAttributes:function(K){if(!K)return this.hasChanged()?
c.clone(this.changed):false;var I,aa=false,sa=this._previousAttributes,r;for(r in K)if(!c.isEqual(sa[r],I=K[r]))(aa||(aa={}))[r]=I;return aa},previous:function(K){return!arguments.length||!this._previousAttributes?null:this._previousAttributes[K]},previousAttributes:function(){return c.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(K,I){if(I.silent||!this.validate)return true;K=c.extend({},this.attributes,K);var aa=this.validate(K,I);
if(!aa)return true;I&&I.error?I.error(this,aa,I):this.trigger("error",this,aa,I);return false}});var v=g.Collection=function(K,I){I||(I={});I.model&&(this.model=I.model);I.comparator&&(this.comparator=I.comparator);this._reset();this.initialize.apply(this,arguments);K&&this.reset(K,{silent:true,parse:I.parse})};c.extend(v.prototype,h,{model:m,initialize:function(){},toJSON:function(K){return this.map(function(I){return I.toJSON(K)})},add:function(K,I){var aa,sa,r,Ta,qa,Ja={},Ga={},La=[];I||(I={});
K=c.isArray(K)?K.slice():[K];aa=0;for(sa=K.length;aa<sa;aa++){if(!(r=K[aa]=this._prepareModel(K[aa],I)))throw Error("Can't add an invalid model to a collection");Ta=r.cid;qa=r.id;Ja[Ta]||this._byCid[Ta]||null!=qa&&(Ga[qa]||this._byId[qa])?La.push(aa):Ja[Ta]=Ga[qa]=r}for(aa=La.length;aa--;)K.splice(La[aa],1);aa=0;for(sa=K.length;aa<sa;aa++){(r=K[aa]).on("all",this._onModelEvent,this);this._byCid[r.cid]=r;null!=r.id&&(this._byId[r.id]=r)}this.length+=sa;i.apply(this.models,[null!=I.at?I.at:this.models.length,
0].concat(K));this.comparator&&this.sort({silent:true});if(I.silent)return this;aa=0;for(sa=this.models.length;aa<sa;aa++)if(Ja[(r=this.models[aa]).cid]){I.index=aa;r.trigger("add",r,this,I)}return this},remove:function(K,I){var aa,sa,r,Ta;I||(I={});K=c.isArray(K)?K.slice():[K];aa=0;for(sa=K.length;aa<sa;aa++)if(Ta=this.getByCid(K[aa])||this.get(K[aa])){delete this._byId[Ta.id];delete this._byCid[Ta.cid];r=this.indexOf(Ta);this.models.splice(r,1);this.length--;I.silent||(I.index=r,Ta.trigger("remove",
Ta,this,I));this._removeReference(Ta)}return this},push:function(K,I){K=this._prepareModel(K,I);this.add(K,I);return K},pop:function(K){var I=this.at(this.length-1);this.remove(I,K);return I},unshift:function(K,I){K=this._prepareModel(K,I);this.add(K,c.extend({at:0},I));return K},shift:function(K){var I=this.at(0);this.remove(I,K);return I},get:function(K){return null==K?void 0:this._byId[null!=K.id?K.id:K]},getByCid:function(K){return K&&this._byCid[K.cid||K]},at:function(K){return this.models[K]},
where:function(K){return c.isEmpty(K)?[]:this.filter(function(I){for(var aa in K)if(K[aa]!==I.get(aa))return false;return true})},sort:function(K){K||(K={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");var I=c.bind(this.comparator,this);1==this.comparator.length?this.models=this.sortBy(I):this.models.sort(I);K.silent||this.trigger("reset",this,K);return this},pluck:function(K){return c.map(this.models,function(I){return I.get(K)})},reset:function(K,I){K||(K=[]);I||(I=
{});for(var aa=0,sa=this.models.length;aa<sa;aa++)this._removeReference(this.models[aa]);this._reset();this.add(K,c.extend({silent:true},I));I.silent||this.trigger("reset",this,I);return this},fetch:function(K){K=K?c.clone(K):{};void 0===K.parse&&(K.parse=true);var I=this,aa=K.success;K.success=function(sa,r,Ta){I[K.add?"add":"reset"](I.parse(sa,Ta),K);aa&&aa(I,sa)};K.error=g.wrapError(K.error,I,K);return(this.sync||g.sync).call(this,"read",this,K)},create:function(K,I){var aa=this;I=I?c.clone(I):
{};K=this._prepareModel(K,I);if(!K)return false;I.wait||aa.add(K,I);var sa=I.success;I.success=function(r,Ta){I.wait&&aa.add(r,I);sa?sa(r,Ta):r.trigger("sync",K,Ta,I)};K.save(null,I);return K},parse:function(K){return K},chain:function(){return c(this.models).chain()},_reset:function(){this.length=0;this.models=[];this._byId={};this._byCid={}},_prepareModel:function(K,I){I||(I={});K instanceof m?K.collection||(K.collection=this):(I.collection=this,K=new this.model(K,I),K._validate(K.attributes,I)||
(K=false));return K},_removeReference:function(K){this==K.collection&&delete K.collection;K.off("all",this._onModelEvent,this)},_onModelEvent:function(K,I,aa,sa){("add"==K||"remove"==K)&&aa!=this||("destroy"==K&&this.remove(I,sa),I&&K==="change:"+I.idAttribute&&(delete this._byId[I.previous(I.idAttribute)],this._byId[I.id]=I),this.trigger.apply(this,arguments))}});c.each("forEach,each,map,reduce,reduceRight,find,detect,filter,select,reject,every,all,some,any,include,contains,invoke,max,min,sortBy,sortedIndex,toArray,size,first,initial,rest,last,without,indexOf,shuffle,lastIndexOf,isEmpty,groupBy".split(","),
function(K){v.prototype[K]=function(){return c[K].apply(c,[this.models].concat(c.toArray(arguments)))}});var w=g.Router=function(K){K||(K={});K.routes&&(this.routes=K.routes);this._bindRoutes();this.initialize.apply(this,arguments)},s=/:\w+/g,A=/\*\w+/g,D=/[-[\]{}()+?.,\\^$|#\s]/g;c.extend(w.prototype,h,{initialize:function(){},route:function(K,I,aa){g.history||(g.history=new y);c.isRegExp(K)||(K=this._routeToRegExp(K));aa||(aa=this[I]);g.history.route(K,c.bind(function(sa){sa=this._extractParameters(K,
sa);aa&&aa.apply(this,sa);this.trigger.apply(this,["route:"+I].concat(sa));g.history.trigger("route",this,I,sa)},this));return this},navigate:function(K,I){g.history.navigate(K,I)},_bindRoutes:function(){if(this.routes){var K=[],I;for(I in this.routes)K.unshift([I,this.routes[I]]);I=0;for(var aa=K.length;I<aa;I++)this.route(K[I][0],K[I][1],this[K[I][1]])}},_routeToRegExp:function(K){K=K.replace(D,"\\$&").replace(s,"([^/]+)").replace(A,"(.*?)");return RegExp("^"+K+"$")},_extractParameters:function(K,
I){return K.exec(I).slice(1)}});var y=g.History=function(){this.handlers=[];c.bindAll(this,"checkUrl")},S=/^[#\/]/,O=/msie [\w.]+/;y.started=false;c.extend(y.prototype,h,{interval:50,getHash:function(K){return(K=(K?K.location:window.location).href.match(/#(.*)$/))?K[1]:""},getFragment:function(K,I){if(null==K)if(this._hasPushState||I){K=window.location.pathname;var aa=window.location.search;aa&&(K+=aa)}else K=this.getHash();K.indexOf(this.options.root)||(K=K.substr(this.options.root.length));return K.replace(S,
"")},start:function(K){if(y.started)throw Error("Backbone.history has already been started");y.started=true;this.options=c.extend({},{root:"/"},this.options,K);this._wantsHashChange=false!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!(!this.options.pushState||!window.history||!window.history.pushState);K=this.getFragment();var I=document.documentMode;if(I=O.exec(navigator.userAgent.toLowerCase())&&(!I||7>=I)){this.iframe=d('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;
this.navigate(K)}this._hasPushState?d(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!I?d(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=K;K=window.location;I=K.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!I)return this.fragment=this.getFragment(null,true),window.location.replace(this.options.root+"#"+this.fragment),
true;this._wantsPushState&&this._hasPushState&&I&&K.hash&&(this.fragment=this.getHash().replace(S,""),window.history.replaceState({},document.title,K.protocol+"//"+K.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},stop:function(){d(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);y.started=false},route:function(K,I){this.handlers.unshift({route:K,callback:I})},checkUrl:function(){var K=this.getFragment();
K==this.fragment&&this.iframe&&(K=this.getFragment(this.getHash(this.iframe)));if(K==this.fragment)return false;this.iframe&&this.navigate(K);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(K){var I=this.fragment=this.getFragment(K);return c.any(this.handlers,function(aa){if(aa.route.test(I))return aa.callback(I),true})},navigate:function(K,I){if(!y.started)return false;if(!I||true===I)I={trigger:I};var aa=(K||"").replace(S,"");this.fragment!=aa&&(this._hasPushState?(0!=aa.indexOf(this.options.root)&&
(aa=this.options.root+aa),this.fragment=aa,window.history[I.replace?"replaceState":"pushState"]({},document.title,aa)):this._wantsHashChange?(this.fragment=aa,this._updateHash(window.location,aa,I.replace),this.iframe&&aa!=this.getFragment(this.getHash(this.iframe))&&(I.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,aa,I.replace))):window.location.assign(this.options.root+K),I.trigger&&this.loadUrl(K))},_updateHash:function(K,I,aa){aa?K.replace(K.toString().replace(/(javascript:|#).*$/,
"")+"#"+I):K.hash=I}});var G=g.View=function(K){this.cid=c.uniqueId("view");this._configure(K||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},X=/^(\S+)\s*(.*)$/,xa="model,collection,el,id,attributes,className,tagName".split(",");c.extend(G.prototype,h,{tagName:"div",$:function(K){return this.$el.find(K)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();return this},make:function(K,I,aa){K=document.createElement(K);I&&
d(K).attr(I);aa&&d(K).html(aa);return K},setElement:function(K,I){this.$el&&this.undelegateEvents();this.$el=K instanceof d?K:d(K);this.el=this.$el[0];false!==I&&this.delegateEvents();return this},delegateEvents:function(K){if(K||(K=la(this,"events"))){this.undelegateEvents();for(var I in K){var aa=K[I];c.isFunction(aa)||(aa=this[K[I]]);if(!aa)throw Error('Method "'+K[I]+'" does not exist');var sa=I.match(X),r=sa[1];sa=sa[2];aa=c.bind(aa,this);r+=".delegateEvents"+this.cid;""===sa?this.$el.bind(r,
aa):this.$el.delegate(sa,r,aa)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(K){this.options&&(K=c.extend({},this.options,K));for(var I=0,aa=xa.length;I<aa;I++){var sa=xa[I];K[sa]&&(this[sa]=K[sa])}this.options=K},_ensureElement:function(){if(this.el)this.setElement(this.el,false);else{var K=la(this,"attributes")||{};this.id&&(K.id=this.id);this.className&&(K["class"]=this.className);this.setElement(this.make(this.tagName,K),false)}}});m.extend=v.extend=
w.extend=G.extend=function(K,I){var aa=ub(this,K,I);aa.extend=this.extend;return aa};var $a={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};g.sync=function(K,I,aa){var sa=$a[K];aa||(aa={});var r={type:sa,dataType:"json"};aa.url||(r.url=la(I,"url")||Qa());if(!aa.data&&I&&("create"==K||"update"==K)){r.contentType="application/json";r.data=JSON.stringify(I.toJSON())}g.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{});if(g.emulateHTTP&&("PUT"===
sa||"DELETE"===sa)){g.emulateJSON&&(r.data._method=sa);r.type="POST";r.beforeSend=function(Ta){Ta.setRequestHeader("X-HTTP-Method-Override",sa)}}"GET"!==r.type&&!g.emulateJSON&&(r.processData=false);return d.ajax(c.extend(r,aa))};g.wrapError=function(K,I,aa){return function(sa,r){r=sa===I?r:sa;K?K(I,r,aa):I.trigger("error",I,r,aa)}};var eb=function(){},ub=function(K,I,aa){var sa;sa=I&&I.hasOwnProperty("constructor")?I.constructor:function(){K.apply(this,arguments)};c.extend(sa,K);eb.prototype=K.prototype;
sa.prototype=new eb;I&&c.extend(sa.prototype,I);aa&&c.extend(sa,aa);sa.prototype.constructor=sa;sa.__super__=K.prototype;return sa},la=function(K,I){return!K||!K[I]?null:c.isFunction(K[I])?K[I]():K[I]},Qa=function(){throw Error('A "url" property or function must be specified');}}).call(this);(function(){Backbone.View.prototype.close=function(){var o;this.remove();this.trigger("closed",this);this.unbind();if((o=this.model)!=null)o.off(null,null,this);App.Dispatch.off(null,null,this);return typeof this.onClose==="function"?this.onClose():void 0};Backbone.Model.prototype.unbindAll=function(){this.unbind();return App.Dispatch.off(null,null,this)};Backbone.Model.prototype.toJSON=function(){var o,f,l;if(this._isSerializing)return this.id||this.cid;this._isSerializing=true;o=_.clone(this.attributes);
for(f in o){l=o[f];if(l!=null&&_.isFunction(l.toJSON))o[f]=l.toJSON()}this._isSerializing=false;return o};Backbone.Events.once=function(o,f,l){var i;this.on(o,f,l);i=function(){return this.off(o,f,l).off(o,i)};this.on(o,i,this);return this}}).call(this);(function(){var o,f,l,i;f=window.location.hostname.split(".");o=f.slice(f.length-2).join(".");this.App={Lib:{},Dispatch:_.extend({},Backbone.Events),Partials:{},State:{},Settings:{env:function(){switch(o){case "bitly.org":return"dev";case "bitly.net":return"staging";case "bitly.com":return"prod";default:return"none"}}()}};this.App.State.input_event="oninput"in window?"input":"propertychange";if(App.DEBUG){i=+new Date;l=function(g){if(g>=36E5)return(g/36E5).toFixed(1)+"h";if(g>=6E4)return(g/6E4).toFixed(1)+
"m";if(g>=1E3)return(g/1E3|0)+"s";return g+"ms"};App.Dispatch.on("all",function(){var g;g="+"+l(+new Date-i);return console.log(g,arguments)})}App.notify=function(g){return function(){var c;if(!$("#app-notification:visible").length){c=$("#app-notification");return c.removeClass("warning error success").text(g.msg).addClass(g.type).css("marginLeft",-c.width()/2).slideDown().delay(5E3).slideUp()}}};_.truthy=function(g){return g===true||g==="true"||g===1||g==="1"}}).call(this);(function(){var o=function(f,l){return function(){return f.apply(l,arguments)}};App.Lib.Taborder=function(){function f(l,i){if(i==null)i={};this.handleTab=o(this.handleTab,this);this.focusables=i.focus||["input","a[href]","button","textarea"];this.filter=i.filter||[];this.runtime_filter=i.runtime_filter||".is-disabled";this["default"]=i["default"];this.el=$(l);this.keydownEvent="keydown.tabcontext"+_.uniqueId();this.bind()}f.prototype.cacheElements=function(){var l,i,g,c,d,b,h;this.els=[];b=this.focusables;
h=[];c=0;for(d=b.length;c<d;c++){g=b[c];l=this.el.find(g).not(this.filter.join(", ")).filter(":visible");h.push(function(){var m,v,w;w=[];i=m=0;for(v=l.length;m<v;i=++m)w.push(this.els.push(l.eq(i)));return w}.call(this))}return h};f.prototype.bind=function(){var l,i,g,c,d;this.cacheElements();if(this.els.length){this["default"]||(this["default"]=this.els[0]);this.unbindEvents();d=this.els;i=g=0;for(c=d.length;g<c;i=++g){l=d[i];l.data("nyan_tab",i)}$(document.body).bind(this.keydownEvent,this.handleTab);
return this.el.bind(this.keydownEvent,this.handleTab)}};f.prototype.handleTab=function(l){var i,g;if(l.keyCode===9){l.preventDefault();l.stopPropagation();g=$(l.target);if($(l.currentTarget).is("body"))i=this["default"];else i=(i=_.every(this.els,function(c){return!c.is(g)}))?this["default"]:g;l=l.shiftKey?this.prev(i):this.next(i);return l!=null?l.focus():void 0}};f.prototype.unbindEvents=function(){var l,i,g,c,d;this.el.unbind(this.keydownEvent);$(document.body).unbind(this.keydownEvent);c=this.els;
d=[];l=i=0;for(g=c.length;i<g;l=++i){l=c[l];d.push(l.data("nyan_tab",null))}return d};f.prototype.next=function(l){l=l.data("nyan_tab");if(l==null||l===this.els.length-1)l=0;else l++;l=this.els[l];if(l.is(this.runtime_filter))return this.next(l);return l};f.prototype.prev=function(l){l=l.data("nyan_tab");if(l===0)l=this.els.length-1;else l--;l=this.els[l];if(l.is(this.runtime_filter))return this.prev(l);return l};return f}()}).call(this);(function(){App.oauth={connect:function(o){var f,l,i,g,c,d,b;if(!(o==="facebook"||o==="twitter"))throw Error("Invalid Share Network specified");f=window.location.protocol.indexOf("http")===-1?"https://bitly.com":"";c=""+f+"/a/add_"+o+"_account?rd="+encodeURIComponent("/a/oauth_return")+"&clientside=1";if(o==="facebook"){l=625;d=1E3}else{l=600;d=400}if(((b=window.chrome)!=null?b.extension:void 0)!=null)return chromeSend({method:"openOauth",params:{url:c,return_url:f+"/a/oauth_return",width:d,height:l}}).done(function(h){if(h.event!=
null)return App.Dispatch.trigger(h.event)});else if(g=window.open(c,"oauth_start","height="+l+",width="+d)){g.onload=function(){return _.delay(function(){if(g.hasOwnProperty("innerWidth")&&!g.innerWidth){App.oauth.onPopupBlocked(o);App.Dispatch.trigger("App.Oauth:error");return App.Dispatch.trigger("App.Oauth:blockPopup")}else return g.doRedirect()},150)};return i=setInterval(function(){if(g)try{if(!g.closed&&g.name==="oauth_return"){clearInterval(i);g.close();return App.Dispatch.trigger("App.Oauth:success")}else if(g.closed){clearInterval(i);
return App.Dispatch.trigger("App.Oauth:error")}}catch(h){return console.log(h.message)}else if(window.is_bitmarklet){clearInterval(i);return App.Dispatch.trigger("App.Oauth:success")}},250)}else{App.oauth.onPopupBlocked(o);App.Dispatch.trigger("App.Oauth:error");App.Dispatch.trigger("App.Oauth:blockPopup")}},onPopupBlocked:function(o){return alert(["It appears that your browser has blocked the popup necessary to reconnect your "+o+" account.","Please make sure that you are allowing popups from "+
location.origin+"."].join("\n\n"))}}}).call(this);(function(){var o,f;f=function(l){var i,g,c,d,b,h;if(l==null)l=false;i={};this._elements={ts:+new Date,els:i};if(this.element_map){g=_.result(this,"element_map");h=_.keys(g);d=0;for(b=h.length;d<b;d++){c=h[d];i[c]=o(g[c],0,l)}return this._elements.els=i}};o=function(l,i,g){var c;if(i==null)i=+new Date;if(g==null)g=false;c=null;if(g){c=this.$(l);i=+new Date}return{sel:l,ts:i,el:c}};App.ElCacher={getEl:function(l,i){var g,c;if(i==null)i=false;this._elements||f.call(this);if(i||((g=this._elements.els[l])!=
null?g.ts:void 0)<this._elements.ts)this.setEl(l);return(c=this._elements.els[l])!=null?c.el:void 0},setEl:function(l,i){var g;if(i==null)i=false;this._elements||f.call(this);if(i)this._elements.els[l]=o.call(this,i,+new Date,true);else{g=this._elements.els[l];this._elements.els[l]=o.call(this,g.sel,+new Date,true)}return this["$"+l]=this._elements.els[l].el},refreshEls:function(l){var i,g,c,d;if(l==null)l=false;if(this._elements){this._elements.ts=+new Date;if(l){c=this.elements.els;d=[];i=0;for(g=
c.length;i<g;i++){l=c[i];d.push(this.setEl(l))}return d}}else return f.call(this,l)}}}).call(this);(function(){var o,f=function(c,d){return function(){return c.apply(d,arguments)}},l={}.hasOwnProperty,i=function(c,d){function b(){this.constructor=c}for(var h in d)if(l.call(d,h))c[h]=d[h];b.prototype=d.prototype;c.prototype=new b;c.__super__=d.prototype;return c},g=[].slice;App.BaseView=function(c){function d(){this.setScrollPos=f(this.setScrollPos,this);return o=d.__super__.constructor.apply(this,arguments)}i(d,c);d.prototype.require=function(){var b,h,m,v,w;h=1<=arguments.length?g.call(arguments,
0):[];if(!this.options)throw Error("Missing all options");w=[];m=0;for(v=h.length;m<v;m++){b=h[m];if(this.options[b]==null)throw Error("Missing parameter '"+b+"'");else w.push(void 0)}return w};d.prototype.refreshElements=function(){var b,h,m,v;m=this.elements;v=[];for(b in m){h=m[b];v.push(this[h]=this.$(b))}return v};d.prototype.html=function(b){this.$el.html(b.el||b);this.refreshElements();return this.$el};d.prototype.append=function(){var b,h,m;h=1<=arguments.length?g.call(arguments,0):[];h=function(){var v,
w,s;s=[];v=0;for(w=h.length;v<w;v++){b=h[v];s.push(b.el||b)}return s}();(m=this.$el).append.apply(m,h);this.refreshElements();return this.$el};d.prototype.appendTo=function(b){this.$el.appendTo(b.el||b);this.refreshElements();return this.$el};d.prototype.prepend=function(){var b,h,m;h=1<=arguments.length?g.call(arguments,0):[];h=function(){var v,w,s;s=[];v=0;for(w=h.length;v<w;v++){b=h[v];s.push(b.el||b)}return s}();(m=this.$el).prepend.apply(m,h);this.refreshElements();return this.$el};d.prototype.replace=
function(b){var h;h=this.$el;this.setElement($(b.el||b),true);h.replaceWith(this.el);this.delegateEvents();this.refreshElements();return this.$el};d.prototype.preventDefault=function(b){return function(h){h.preventDefault();return b(h)}};d.prototype.setScrollPos=function(b){b.currentTarget.scrollTop-=b.wheelDelta;return b.preventDefault()};return d}(Backbone.View);_.extend(App.BaseView.prototype,App.ElCacher)}).call(this);(function(){var o,f={}.hasOwnProperty,l=function(i,g){function c(){this.constructor=i}for(var d in g)if(f.call(g,d))i[d]=g[d];c.prototype=g.prototype;i.prototype=new c;i.__super__=g.prototype;return i};App.AppView=function(i){function g(){return o=g.__super__.constructor.apply(this,arguments)}l(g,i);g.prototype.initialize=function(){var c,d=this;App.Platform={};App.Platform.os=navigator.platform.indexOf("Mac")>-1?"mac":"";App.Platform.flash=typeof FlashDetect!=="undefined"&&FlashDetect!==null?FlashDetect.versionAtLeast(9):
void 0;App.Platform.flash&&$(document.body).addClass("flash");this.factory=App.$ModalFactory=new App.ModalFactory;this.factory.render();App.Dispatch.on("App.Bitmark:create App.Bitmark:saveExisting App.Bitmark:saveMissingFromHistory",this.openSaveModal,this);App.Dispatch.on("App.Oauth:token_error",function(b){return App.$ModalFactory.add("OauthTokenShareError",{acct:b,preserve_previous_modal:true,no_transition:true})},this);if(!((c=window.chrome)!=null&&c.extension))if(App.Platform.flash){this.$el.addClass("flash-copy");
return App.Dispatch.on("UI.Bitmark:mouseenter",function(b){d.hoverView!=null&&d.hoverView!==b&&d.hoverView.$el.removeClass("hover");return b.$el.addClass("hover")})}else return this.$el.addClass("manual-copy")};g.prototype.openSaveModal=function(c){if(!(this.factory.last()instanceof App.SocialShareModalView))return this.factory.add("save",{model:c})};return g}(Backbone.View);_.extend(App.AppView.prototype,App.ElCacher)}).call(this);(function(){var o,f={}.hasOwnProperty,l=function(i,g){function c(){this.constructor=i}for(var d in g)if(f.call(g,d))i[d]=g[d];c.prototype=g.prototype;i.prototype=new c;i.__super__=g.prototype;return i};App.ChromeExtensionView=function(i){function g(){return o=g.__super__.constructor.apply(this,arguments)}l(g,i);g.prototype.initialize=function(){g.__super__.initialize.apply(this,arguments);return window.API=new V3API_Dispatcher};return g}(App.AppView)}).call(this);(function(){var o,f={}.hasOwnProperty,l=function(i,g){function c(){this.constructor=i}for(var d in g)if(f.call(g,d))i[d]=g[d];c.prototype=g.prototype;i.prototype=new c;i.__super__=g.prototype;return i};App.DropdownModel=function(i){function g(){return o=g.__super__.constructor.apply(this,arguments)}l(g,i);g.prototype.initialize=function(){return this.on("change:value",this.effect)};g.prototype.setValue=function(c){return this.set("value",c)};g.prototype.getValue=function(){return this.get("value")};
return g}(App.BaseModel||Backbone.Model)}).call(this);(function(){var o,f={}.hasOwnProperty,l=function(g,c){function d(){this.constructor=g}for(var b in c)if(f.call(c,b))g[b]=c[b];d.prototype=c.prototype;g.prototype=new d;g.__super__=c.prototype;return g},i=[].indexOf||function(g){for(var c=0,d=this.length;c<d;c++)if(c in this&&this[c]===g)return c;return-1};App.CustomKeywordModel=function(g){function c(){return o=c.__super__.constructor.apply(this,arguments)}var d;l(c,g);d=$.Deferred().resolve().promise();c.prototype.initialize=function(){this.set({curr_domain:this.get("domain"),
curr_keyword:this.get("keyword")});return this.populateDomain()};c.prototype.defaults=function(){var b,h;b=App.$User.get("domain_options")||((h=App.$User.get("info"))!=null?h.domain_options:void 0)||[];return{domain_options:b,domain:b[0]}};c.prototype.populateDomain=function(){var b;if(this.get("domain")){if(b=this.get("domain"),i.call(this.get("domain_options"),b)<0)return this.set({domain:this.get("domain_options")[0],keyword:""})}else{b=Handlebars.helpers.domainFromUrl(this.get("link"));return i.call(this.get("domain_options"),
b)>=0?this.set("domain",b):this.set("domain",this.get("domain_options")[0])}};c.prototype.customize=function(b){var h,m,v=this;m=$.Deferred();if(b.domain===this.get("domain")&&b.keyword===this.get("keyword"))return d;if(!b.keyword){if(this.get("keyword"))return $.Deferred().reject({status_code:500,status_txt:"INVALID_KEYWORD"});if(!this.get("keyword"))return d}App.Dispatch.trigger("UI.Shortlink:customize");h=API.execute("Link","customizeKeyword",{link:this.get("link"),domain:b.domain,keyword:b.keyword,
overwrite:b.overwrite});h.done(function(w){v.set({curr_domain:b.domain,curr_keyword:b.keyword});return m.resolve(w)});h.fail(m.reject);return m.promise()};return c}(App.BaseModel||Backbone.Model)}).call(this);(function(){var o,f=function(c,d){return function(){return c.apply(d,arguments)}},l={}.hasOwnProperty,i=function(c,d){function b(){this.constructor=c}for(var h in d)if(l.call(d,h))c[h]=d[h];b.prototype=d.prototype;c.prototype=new b;c.__super__=d.prototype;return c},g=[].indexOf||function(c){for(var d=0,b=this.length;d<b;d++)if(d in this&&this[d]===c)return d;return-1};App.BitmarkRegistry={};App.Bitmark=function(c){function d(){this.autoSave=f(this.autoSave,this);this.customizeKeyword=f(this.customizeKeyword,
this);this.getTitle=f(this.getTitle,this);this.getClicks=f(this.getClicks,this);this.getClickHistory=f(this.getClickHistory,this);this.getSaves=f(this.getSaves,this);this._updateBundles=f(this._updateBundles,this);this.previousShares=f(this.previousShares,this);this.domain=f(this.domain,this);this.hash=f(this.hash,this);this.keyword=f(this.keyword,this);this.shortLink=f(this.shortLink,this);return o=d.__super__.constructor.apply(this,arguments)}i(d,c);d.fromBitlyStore=function(b){var h,m,v;if((m=
App.BitmarkRegistry[b.url])&&b.modified_at!=null&&m.get("modified_at")!=null&&b.modified_at<=m.get("modified_at"))return m;h=b.toJSON();h.shares=h.shares!=null?function(){var w,s,A,D;A=h.shares;D=[];w=0;for(s=A.length;w<s;w++){v=A[w];D.push(v.toJSON())}return D}():[];return new this(h)};d.prototype.defaults=function(){return{modified_at:moment(new Date).unix(),ts:moment(new Date).unix(),archived:false,bundle_links:[],"private":App.$User&&App.$User.get("preferences").history_privacy==="private"?true:
false}};d.prototype.initialize=function(){var b;App.Dispatch.on("App.Bundle.Bitmark:add",this._onAddToBundle,this);this.on("change:bundle_links",this._updateBundles);this.get("bundle_links")&&this._updateBundles(this,this.get("bundle_links"));this.get("url")&&this._normalizeLongUrl();if(b=this.get("link"))this.get("user_hash")||this.set("user_hash",b.split("/").pop());this.saveToBitmarkRegistry();this.on("change:title",function(){return App.Dispatch.trigger("request:updateLink",{user_hash:this.get("user_hash"),
title:this.get("title")})});this.on("change:keyword",function(){return App.Dispatch.trigger("request:updateLink",{user_hash:this.get("user_hash"),keyword:this.get("keyword"),keyword_link:this.get("keyword_link")})});this.on("change:private",function(){return App.Dispatch.trigger("request:updateLink",{user_hash:this.get("user_hash"),"private":this.get("private")})});return this.on("change:note",function(){return App.Dispatch.trigger("request:updateLink",{user_hash:this.get("user_hash"),note:this.get("note")})})};
d.prototype.saveToBitmarkRegistry=function(){var b,h;b=this.get("link");h=this.get("url");if(b&&h)return App.BitmarkRegistry[h]=this};d.prototype.toTemplate=function(){var b;b=this.toJSON();b.previousShares=this.previousShares();b.shortLink=this.shortLink();b.hash=this.hash();b.urlNoProtocol=this.get("url").replace(/^https?:\/\//,"");return b};d.prototype._normalizeLongUrl=function(){var b;b=this.get("url");b=$.trim(b);b.match(/(https?|ftp|itms)\:\/\//i)||(b="http://"+b);if(b.split("/").length===
3)b+="/";return this.set("url",b)};d.prototype.normalizeURL=function(b){var h;if(b.search(/https?|ftp|itms/)===0)return b;if(b.charAt(0)==="/"){if(b.length>1&&b.charAt(1)==="/")return b;return this.get("url").split("/").slice(0,3).join("/")+b}else{h=this.get("url").split("/");h.pop();return h.join("/")+"/"+b}};d.prototype._onAddToBundle=function(b,h){if(h===this){App.Dispatch.trigger("UI.Bundle.Bitmark:add");return this._updateBundleLinks(b)}};d.prototype._updateShares=function(b){var h,m,v;m=0;for(v=
b.length;m<v;m++){h=b[m];h.link=h.remote_share_link;delete h.remote_share_link;h.share_type=App.$User.shareAccountLookup(h.account_id)}return this.set("shares",_.clone(this.get("shares")||[]).concat(b))};d.prototype.replaceShares=function(b){this.set("shares",b);return this.saveToBitlyStore()};d.prototype._updateBundleLinks=function(b){var h;h=_.clone(this.get("bundle_links"));h.push(App.Bundle.getIdFromLink(b.bundle_link));this.set("bundle_links",h);return bitlyStore.add(this.toJSON())};d.prototype.setBundleLinks=
function(b,h){if(h==null)h=false;this.set("bundle_links",b);this._updateBundles(this,b);if(!h)return this.saveToBitlyStore()};d.prototype.shortLink=function(){return this.get("keyword_link")||this.get("link")||""};d.prototype.keyword=function(){var b;return(b=this.shortLink())!=null?b.split("/").pop():void 0};d.prototype.hash=function(){return this.keyword()||this.get("user_hash")};d.prototype.domain=function(){return this.shortLink().split("/").slice(2,3).pop()};d.prototype.isKeywordLink=function(){var b;
if(this.get("keyword_link"))return true;b=this.keyword();if(b===this.get("user_hash"))return false;if(b===this.get("global_hash"))return false;return true};d.prototype.previousShares=function(){var b,h,m,v,w;b={};if(this.get("shares")){w=this.get("shares");m=0;for(v=w.length;m<v;m++){h=w[m];b[h.share_type]=true}}return b};d.prototype._updateBundles=function(b,h){return this.set("bundles",App.Bundle.getById(h))};d.prototype.getSaves=function(){var b,h,m=this;b={link:this.shortLink()};if(((h=window.chrome)!=
null?h.extension:void 0)==null)b.count=true;b=API.execute("Bitmark","getSaves",b);b.done(function(v){var w;v=((w=window.chrome)!=null?w.extension:void 0)!=null?v.data.count:v.data.encode_count.count;return m.set("saves",v)});return b.fail(function(){})};d.prototype.getClickHistory=function(){return API.execute("Bitmark","getClickHistory",{link:this.get("aggregate_link")})};d.prototype.getClicks=function(){var b,h=this;b=API.execute("Bitmark","getClicks",{shortUrl:this.shortLink()});b.done(function(m){h.set("user_hash",
m.data.clicks[0].user_hash);h.set("global_hash",m.data.clicks[0].global_hash);h.set("user_clicks",m.data.clicks[0].user_clicks);h.set("global_clicks",m.data.clicks[0].global_clicks);return bitlyStore.add(h.toJSON())});return b.fail(function(){})};d.prototype.getTitle=function(){var b,h,m=this;h=$.Deferred();b=API.execute("Bitmark","getTitle",{url:this.get("url")});b.done(function(v){if(v.data[0].title){m.set("title",v.data[0].title);return h.resolve(arguments)}else return h.reject(arguments)});b.fail(function(){m.set("title",
null);return h.reject(arguments)});return h};d.prototype.customizeKeyword=function(b){var h=this;b=API.execute("Bitmark","customizeKeyword",{hash:this.get("user_hash"),link:this.get("link"),domain:this.domain(),keyword:b});b.done(function(m){var v,w;if(m.data.keyword_link)w=m.data.keyword_link;else if(m.data.url)w=m.data.url;v=w.split("/")[2];if(m.data.aggregate_link)h.set("aggregate_link",m.data.aggregate_link);else m.data.global_hash&&h.set("aggregate_link","http://"+v+"/"+m.data.global_hash);if(m.data.link)h.set("link",
m.data.link);else m.data.hash&&h.set("link","http://"+v+"/"+m.data.hash);h.set("domain",v);h.set("keyword",m.data.keyword);h.set("keyword_link",w);return h.saveToBitlyStore()});return b.fail(function(m){return m.message=m.status_txt==="KEYWORD_UNAVAILABLE"?"Sorry, that's taken.":"An error occurred."})};d.prototype.addToBundle=function(b,h){var m,v,w,s=this;v=$.Deferred();m=_.clone(this.get("bundle_links"));m.push(b);this.set("bundle_links",m);m=((w=window.chrome)!=null?w.extension:void 0)!=null?{link:this.shortLink(),
title:this.get("title"),bundle_link:h}:{links:[this.shortLink()],titles:this.get("title"),bundle_link:h};w=API.execute("Bundle","addLink",m);w.done(function(){var A;if(A=s.get("note"))return API.execute("Bundle","addCommentToLink",{bundle_link:h,link:s.shortLink(),comment:A}).done(function(){s.saveToBitlyStore();return v.resolve.call(s,s)});else{s.saveToBitlyStore();return v.resolve.call(s,s)}});w.fail(function(){});return v};d.prototype.removeFromBundle=function(b,h){var m,v,w,s=this;this.set("bundle_links",
function(){var A,D,y,S;y=this.get("bundle_links");S=[];A=0;for(D=y.length;A<D;A++){v=y[A];v!==b&&S.push(v)}return S}.call(this));m=((w=window.chrome)!=null?w.extension:void 0)!=null?{link:this.shortLink(),bundle_link:h}:{link:[this.shortLink()],bundle_link:h};m=API.execute("Bundle","removeLink",m);m.done(function(){return bitlyStore.add(s.toJSON())});return m.fail(function(){})};d.prototype.archive=function(){var b=this;this.update({edit:"archived",archived:true,dont_save_to_storage:true}).fail(function(){b.set("archived",
false);return notify("Failed to archive",{type:"error"})});bitlyStore.removeByLink(this.shortLink());return bitlyStore.storeCompleteList(false)};d.prototype.unarchive=function(){var b=this;this.update({edit:"archived",archived:false,dont_save_to_storage:true}).fail(function(){b.set("archived",true);return notify("Failed to unarchive",{type:"error"})});bitlyStore.add(this.toJSON());return bitlyStore.storeCompleteList(false)};d.prototype.update=function(b){var h,m=this;h={};if(b.silent)h.silent=true;
this.set(b.edit,b[b.edit],h);if(!b.link)b.link=this.get("link");b.dont_save_to_storage||this.saveToBitlyStore(b);return API.execute("Bitmark","update",b).done(function(){return m.trigger("updated",m)}).fail(function(){})};d.prototype.share=function(b){var h,m,v,w,s,A,D=this;h=this.shortLink();A=this.get("title");w=$.Deferred();m=[];for(s in b){v=b[s];if(h)v.share_link=h;if(A)v.share_title=A;m.push(API.execute("Bitmark","share"+s.capitalize(),v))}$.when.apply($,m).done(function(){var y,S,O,G,X,xa,
$a,eb,ub,la,Qa,K,I,aa;X=[];if(m.length>1){G=Array.prototype.slice.call(arguments);xa=0;for($a=G.length;xa<$a;xa++){O=G[xa];if(O.length&&(y=O[0].data)!=null&&y.share)X=X.concat((S=O[0].data)!=null?S.share:void 0)}}else if(arguments[0]&&(O=arguments[0].data)!=null&&O.share)X=(G=arguments[0].data)!=null?G.share:void 0;S={status_code:200,status_txt:"OK",data:{share:X}};xa=[];O=[];eb=[];la=[];$a=["ACCESS_TOKEN_INVALID","INSUFFICIENT_PERMISSIONS"];ub=["CONTENT_BLOCKED","DUPLICATE_POST"];Qa=0;for(K=X.length;Qa<
K;Qa++){y=X[Qa];if(y.error){G=false;if(I=y.error,g.call($a,I)>=0)eb.push(y);if(aa=y.error,g.call(ub,aa)>=0){la.push(y);G=true}G||O.push(y)}else xa.push(y)}D._updateShareStatus(O,xa,la);if(D.had_share_errors){App.$ModalFactory.pushOrReplace("shareError",{model:D,share_params:b,successes:D.succeeded_accounts,errors:D.error_accounts,unrecoverable_errors:D.unrecoverable_error_accounts,no_transition:true});eb.length&&App.$ModalFactory.push("oauthTokenShareError",{model:D,acct:eb[0],no_transition:true});
O.length||la.length?D.trigger("share:error",arguments,b):D._fireGlobalShareSuccess(S,b)}else D._fireGlobalShareSuccess(S,b);return w.resolve(S)});v=0;for(s=m.length;v<s;v++){h=m[v];h.fail(function(){D.trigger("share:error",arguments,b);return w.reject.apply($,arguments)})}return w.promise()};d.prototype._fireGlobalShareSuccess=function(b,h){var m,v,w;w=function(){var s,A,D,y;D=this.succeeded_accounts;y=[];s=0;for(A=D.length;s<A;s++){m=D[s];m.account_type&&y.push(m)}return y}.call(this);v=function(){var s,
A,D,y;D=this.succeeded_accounts;y=[];s=0;for(A=D.length;s<A;s++){m=D[s];m.email&&y.push(m)}return y}.call(this);w!=null&&w.length&&App.Dispatch.trigger("App.Bitmark:socialShare");v!=null&&v.length&&App.Dispatch.trigger("App.Bitmark:emailShare");this.trigger("share:success",b,h);return this._updateShares(this.succeeded_accounts)};d.prototype.clearShareStatus=function(){delete this.error_accounts;delete this.unrecoverable_error_accounts;delete this.succeeded_accounts;return delete this.had_share_errors};
d.prototype._updateShareStatus=function(b,h,m){var v,w,s,A,D,y,S;if(this.error_accounts==null)this.error_accounts=[];if(this.unrecoverable_error_accounts==null)this.unrecoverable_error_accounts=[];if(this.succeeded_accounts==null)this.succeeded_accounts=[];if(b==null)b=[];if(h==null)h=[];if(m==null)m=[];A={};D={};w={};if(b.length||m.length)this.had_share_errors=true;if(!this.unrecoverable_error_accounts||!this.unrecoverable_error_accounts.length&&m.length)this.unrecoverable_error_accounts=m;if(!this.error_accounts||
!this.error_accounts.length)this.error_accounts=b;else if(h.length||m.length){s=0;for(y=h.length;s<y;s++){v=h[s];A[v.account_id]=v}s=0;for(y=m.length;s<y;s++){v=m[s];D[v.account_id]=v}this.error_accounts=function(){var O,G,X,xa;X=this.error_accounts;xa=[];O=0;for(G=X.length;O<G;O++){v=X[O];A.hasOwnProperty(v.account_id)||xa.push(v)}return xa}.call(this);this.error_accounts=function(){var O,G,X,xa;X=this.error_accounts;xa=[];O=0;for(G=X.length;O<G;O++){v=X[O];D.hasOwnProperty(v.account_id)||xa.push(v)}return xa}.call(this);
y=0;for(S=b.length;y<S;y++){s=b[y];w[s.account_id||s.email]=s}s=0;for(y=m.length;s<y;s++){b=m[s];w[b.account_id||b.email]=b}S=this.error_accounts;m=y=0;for(s=S.length;y<s;m=++y){b=S[m];if(w[b.account_id||b.email])this.error_accounts[m]=w[b.account_id||b.email]}}if(!this.succeeded_accounts||!this.succeeded_accounts.length)this.succeeded_accounts=h;else{m=0;for(w=h.length;m<w;m++){v=h[m];this.succeeded_accounts.push(v)}}if(h.length){w=this.shortLink();w=bitlyStore.getByLink(w);s=0;for(b=h.length;s<
b;s++){m=h[s];m.text=m.share_text}w!=null&&w.addShares(h)}return this};d.prototype.autoSave=function(){var b=this;return this.save().done(function(){return b.get("title")?b.trigger("saved",b):b.getTitle().done(function(){b.update({edit:"title",title:b.get("title"),link:b.shortLink()});return b.trigger("saved",b)}).fail(function(){b.trigger("no_title_found",b);return b.trigger("saved",b)})}).fail(function(){return App.Dispatch.trigger("App.Bitmark.save:error")})};d.prototype.save=function(b){var h,
m,v,w,s=this;if(b==null)b=$.Deferred();v={longUrl:this.get("url"),"private":this.get("private")};w=this.get("title");h=this.get("note");if(w!=null)v.title=w;if(h!=null)v.note=h;(m=this.get("deferred_bundles"))&&b.done(function(){return s._addToDeferredBundles(m)});h=API.execute("Bitmark","save",v);h.done(function(A){A=A.data.link_save;s.set("aggregate_link",A.aggregate_link);s.set("link",A.link);s.set("global_hash",s.get("aggregate_link").split("/").pop());s.set("user_hash",s.get("link").split("/").pop());
bitlyStore.add(s.toJSON());s.saveToBitmarkRegistry();App.Dispatch.trigger("App.Bitmark:create",s);return b.resolve.call(s,s)});h.fail(function(A){var D,y,S,O,G,X;A.status_txt==="INVALID_URI"&&notify("Whoops! That doesn't look like a link. Let's try that again.",{type:"error"});if(A.status_txt==="LINK_ALREADY_EXISTS"){y=bitlyStore.get("url",s.get("url"));if(y!=null){A=App.Bitmark.fromBitlyStore(y);App.Dispatch.trigger("App.Bitmark:saveExisting",A);return b.resolve.call(A,A)}else{y=(O=A.data)!=null?
(G=O.link_save)!=null?G.link:void 0:void 0;D=(X=A.data)!=null?X.link_save:void 0;S=s.get("url");s.trigger("missingFromLocalStorage",S);if(y){A=s.fetch(y,b);return A.fail(function(){s.set({aggregate_link:D.aggregate_link,link:D.link,global_hash:D.aggregate_link.split("/").pop(),user_hash:D.link.split("/").pop()});return App.Dispatch.trigger("App.Bitmark:saveMissingFromHistory",s)})}else return s._fetchByLongUrl(S,b)}}else if(A.status_txt==="ALREADY_A_BITLY_LINK"){y=s.get("url");return API.execute("Bitmark",
"expandLink",{link:y}).done(function(xa){var $a;if((xa=xa!=null?($a=xa.data)!=null?$a.expand:void 0:void 0)&&xa.length&&xa[0].long_url){S=xa[0].long_url;s.set("url",S);return s.save(b)}else return b.reject.call(s,s)}).fail(function(){return b.reject.call(s,s)})}});return b};d.prototype._addToDeferredBundles=function(b){var h;if(b.length){h=b[0];b=h.split("/").slice(4,6).join("/");b=this.addToBundle(b,h);return b.done(function(){return App.Dispatch.trigger("bitmark:added_to_deferred_bundle",this)})}};
d.prototype.checkIfSaved=function(){var b;b=this.get("url");if(!b)throw Error("no long_url");return this._fetchByLongUrl(b,null,"NO_EVENTS")};d.prototype._fetchByLongUrl=function(b,h,m){var v=this;if(h==null)h=$.Deferred();if(m==null)m=false;b=API.execute("Bitmark","getUserLink",{url:b});b.done(function(w){var s,A;if((s=w!=null?(A=w.data)!=null?A.link_lookup:void 0:void 0)&&s.length&&s[0].link){w=s[0].link;return v.fetch(w,h,m)}else return h.reject.call(v,w)});b.fail(function(w){return h.reject.call(v,
w)});return h};d.prototype.fetch=function(b,h,m){var v=this;if(h==null)h=$.Deferred();if(m==null)m=false;b=API.execute("Bitmark","getHistory",{link:b,"private":"both"});b.done(function(w){var s;if((w=w!=null?(s=w.data)!=null?s.link_history:void 0:void 0)&&w.length){s=w[0];s=bitlyStore.dataModel(s);s=App.Bitmark.fromBitlyStore(s);v.set(s.toJSON());m||App.Dispatch.trigger("App.Bitmark:saveExisting",v);return h.resolve.call(v,v)}else return h.reject.call(v,v)});b.fail(function(){return h.reject.call(v,
v)});return h};d.prototype.getFacebookPreview=function(){var b,h,m,v=this;b=App.$User.firstEnabledFacebookAccount();h={url:this.get("url")};if(((m=window.chrome)!=null?m.extension:void 0)!=null)h.account_id=b.account_id;else{h.account_login=b.account_login;h.account_type="facebook"}h=API.execute("Bitmark","getFacebookPreview",h);h.done(function(w){return v.trigger("facebook_preview:success",w.data)});return h.fail(function(w){var s;v.trigger("facebook_preview:error",b);if((s=w.status_txt)==="ACCESS_TOKEN_INVALID"||
s==="INSUFFICIENT_PERMISSIONS")return App.Dispatch.trigger("App.Oauth:token_error",b)})};d.prototype.getThumbnails=function(){var b,h=this;if(!this.thumbnails_fetched){b="https://api.embed.ly/1/preview?callback=?&thumbnail_width=75&thumbnail_height=75&secure=true&key="+BITLY.data.embedly_key+"&url="+encodeURIComponent(this.get("url"));b=$.getJSON(b);b.done(function(m){var v;h.thumbnails_fetched=true;return((v=m.images)!=null?v.length:void 0)>0?h.trigger("has_thumbnails",m.images):h.trigger("no_thumbnails")});
return b.fail(function(){return h.trigger("getThumbnails:error",arguments)})}};d.prototype.toBitlyStoreJSON=function(){var b,h,m,v,w;m=bitlyStore.CacheModel.prototype.__derivedFuncs.slice(0);b=this.toJSON();v=0;for(w=m.length;v<w;v++){h=m[v];h.key in b&&delete b[h.key]}return b};d.prototype.saveToBitlyStore=function(b){var h,m;if(b==null)b=null;m=this.get("link");if(b){h={};h[b.edit]=b[b.edit]}else h=this.toBitlyStoreJSON();return bitlyStore.getByLink(m)?bitlyStore.update(m,h):bitlyStore.add(h)};
d.prototype.toCustomKeywordModel=function(){return{domain:this.domain(),keyword:this.keyword(),link:this.get("link")}};return d}(Backbone.Model)}).call(this);(function(){var o,f,l={}.hasOwnProperty,i=function(g,c){function d(){this.constructor=g}for(var b in c)if(l.call(c,b))g[b]=c[b];d.prototype=c.prototype;g.prototype=new d;g.__super__=c.prototype;return g};App.Bundle=function(g){function c(){return o=c.__super__.constructor.apply(this,arguments)}i(c,g);c.prototype.initialize=function(){return this.on("all",console.log(arguments))};c.getById=function(d){var b,h,m,v;b=window.bundleStore.get(d);if(!b)return[];if($.type(b)==="array"){v=[];h=0;for(m=b.length;h<
m;h++){d=b[h];d!=null&&v.push(d.toJSON())}return v}else return[b.toJSON()]};c.getAll=function(){var d,b,h,m,v;m=window.bundleStore.getAll();v=[];b=0;for(h=m.length;b<h;b++){d=m[b];v.push(d.toJSON())}return v};c.getIdFromLink=function(d){d=d.split("/");return d!=null?d.slice(d.length-2).join("/"):void 0};c.prototype.addCommentToLink=function(d,b){return API.execute("Bundle","addCommentToLink",{bundle_link:this.get("bundle_link"),link:d,comment:b})};c.prototype.addLink=function(d,b){return API.execute("Bundle",
"addLink",{bundle_link:this.get("bundle_link"),link:d,title:b})};c.createAndAddLink=function(d){var b,h,m;if(((h=window.chrome)!=null?h.extension:void 0)!=null){b=$.Deferred();h={"private":d.bundle_privacy,title:d.bundle_title,description:d.bundle_description};m=null;API.execute("Bundle","create",h).done(function(v){m=new App.Bundle(v.data.bundle);return m.addLink(d.links,d.titles).done(function(w){if(d.notes==="_____")return b.resolve(w);else{w=w.data.bundle.links[0].link;return m.addCommentToLink(w,
d.notes).done(function(s){return b.resolve(s)})}})});b.done(function(v){return window.bundleStore.add(v.data.bundle)});return b}else return API.execute("Bundle","createAndAddLink",d).done(function(v){return window.bundleStore.add(v.data.bundle)}).fail(function(){return console.log("error")})};return c}.call(this,Backbone.Model);App.BundleCollection=function(g){function c(){return f=c.__super__.constructor.apply(this,arguments)}i(c,g);c.prototype.model=App.Bundle;return c}(Backbone.Collection)}).call(this);(function(){var o,f=function(g,c){return function(){return g.apply(c,arguments)}},l={}.hasOwnProperty,i=function(g,c){function d(){this.constructor=g}for(var b in c)if(l.call(c,b))g[b]=c[b];d.prototype=c.prototype;g.prototype=new d;g.__super__=c.prototype;return g};App.User=function(g){function c(){this.savePreference=f(this.savePreference,this);return o=c.__super__.constructor.apply(this,arguments)}i(c,g);c.prototype.defaults={has_facebook_enabled:false,has_twitter_enabled:false,share_accounts:[],
preferences:{}};c.prototype.initialize=function(){this.setBundles();this.setShareAccounts();this.on("change:share_accounts",this.setShareAccounts,this);App.Dispatch.on("App.Oauth:success",this.getAccounts,this);App.Dispatch.on("App.Bundle.Bitmark:add",this.setBundles,this);return App.Dispatch.on("App.Bundles:sync",this.setBundles,this)};c.prototype.isVerified=function(){var d;return!!((d=this.get("info"))!=null&&d.is_verified)||!!this.get("is_verified")};c.prototype.shareAccountLookup=function(d){var b,
h,m,v;v=this.get("share_accounts");h=0;for(m=v.length;h<m;h++){b=v[h];if(b.account_id===d)return b.account_type}};c.prototype.customDomain=function(){var d,b;return((d=App.$User.get("info"))!=null?d.custom_short_domain:void 0)||((b=App.$User.get("preferences"))!=null?b.domain_preference:void 0)||"bit.ly"};c.prototype.domainOptions=function(){var d,b,h;b=(d=App.$User.get("preferences"))!=null?d.domain_options:void 0;if(!b){b=["bit.ly","bitly.com","j.mp","bitly.org","bitly.net"];(d=(h=App.$User.get("info"))!=
null?h.custom_short_domain:void 0)&&b.push(d)}return b};c.prototype.shortLinkPlaceholder=function(){return"http://"+this.customDomain()+"/\u2022\u2022\u2022\u2022\u2022\u2022"};c.prototype.firstEnabledFacebookAccount=function(){var d,b,h,m;m=this.get("accounts").facebook;b=0;for(h=m.length;b<h;b++){d=m[b];if(d.primary)return d}};c.prototype.defaultFacebookName=function(){var d;d=this.firstEnabledFacebookAccount();return(d!=null?d.full_name:void 0)||(d!=null?d.account_name:void 0)||""};c.prototype.setBundles=
function(){var d,b,h,m,v,w;h=[];b=[];w=App.Bundle.getAll();m=0;for(v=w.length;m<v;m++){d=w[m];if(d.bundle_id.split("/")[0]===this.get("user")){d.type="own";h.push(d)}else{d.type="curated";b.push(d)}}this.set("own_bundles",h);return this.set("curated_bundles",b)};c.prototype.setShareAccounts=function(){var d,b,h,m,v,w,s;b={facebook:[],twitter:[]};m=h=false;s=this.get("share_accounts");v=0;for(w=s.length;v<w;v++){d=s[v];b[d.account_type].push(_.extend({},d,{only:this.get("share_accounts").length===
1}));if(d.primary)if(d.account_type==="facebook")h=true;else m=true}this.set("accounts",b,{silent:true});this.set("has_facebook_enabled",h,{silent:true});this.set("has_twitter_enabled",m,{silent:true});return this.change()};c.prototype.getAccounts=function(){var d=this;return API.execute("User","getAccounts",{}).done(function(b){var h,m,v,w,s,A,D,y,S;w=d.get("share_accounts");d.set("share_accounts",b.data.share_accounts);m=[];S=d.get("share_accounts");s=0;for(D=S.length;s<D;s++){b=S[s];h=false;A=
0;for(y=w.length;A<y;A++){v=w[A];if(b.account_id===v.account_id)h=true}h||m.push(b)}console.log(w,d.get("share_accounts"),m);return d.trigger("shareAccounts:new",m)}).fail(function(){return d.trigger("getAccounts:error",arguments)})};c.prototype.toggleShareAccount=function(d){var b=this;return API.execute("User","toggleShareAccount",d).done(function(){var h,m,v,w,s;m=b.get("share_accounts");s=[];v=0;for(w=m.length;v<w;v++){h=m[v];if(h.account_login===d.account_login){d.enabled=h.primary=!h.primary;
b.trigger("change:share_accounts",b,m);b.trigger("change",b);break}else s.push(void 0)}return s})};c.prototype.savePreference=function(d,b){var h,m=this;if(b==="true")b=1;if(b==="false")b=0;if(((h=window.chrome)!=null?h.extension:void 0)!=null){h={edit:d};h[d]=b;h=API.execute("User","setPreferences",h)}else h=API.execute("User","setPreferences",{key:d,value:b});return h.done(function(v){var w;if((v!=null?(w=v.data)!=null?w.preferences:void 0:void 0)!=null){v=v.data.preferences instanceof Array?v.data.preferences[0]:
v.data.preferences;nyan.nyanUser&&_.extend(nyan.nyanUser.data.preferences,v);v=_.extend({},m.get("preferences"),v);return m.set("preferences",v)}})};c.prototype.connectedNetworks=function(){var d,b,h;d=this.get("accounts");h=_.keys(d);return function(){var m,v,w;w=[];m=0;for(v=h.length;m<v;m++){b=h[m];d[b].length&&w.push(b)}return w}()};c.prototype.hasEnabledAccounts=function(){return this.get("has_facebook_enabled")||this.get("has_twitter_enabled")};c.prototype.isEnterprise=function(){var d;return this.get("is_enterprise")||
((d=this.get("info"))!=null?d.is_enterprise:void 0)};return c}(Backbone.Model)}).call(this);(function(){var o,f,l={}.hasOwnProperty,i=function(g,c){function d(){this.constructor=g}for(var b in c)if(l.call(c,b))g[b]=c[b];d.prototype=c.prototype;g.prototype=new d;g.__super__=c.prototype;return g};App.ShareHistory=function(g){function c(){return o=c.__super__.constructor.apply(this,arguments)}i(c,g);return c}(Backbone.Model);App.ShareHistoryCollection=function(g){function c(){return f=c.__super__.constructor.apply(this,arguments)}i(c,g);c.prototype.model=App.ShareHistory;return c}(Backbone.Collection)}).call(this);(function(){var o;o={KEYWORD_UNAVAILABLE:"This Custom Bitlink is already taken.",WOULD_OVERWRITE:"That Custom Bitlink is already taken on your Branded Short Domain.",INVALID_LINK_OWNER:"Sorry, that link belongs to someone else.",INVALID_KEYWORD:"Sorry, this Custom Bitlink is invalid. Please try again.",INVALID_LINK:"Sorry, this Bitlink is invalid.",RATE_LIMIT_EXCEEDED:"Sorry, you cannot create any Custom Bitlinks at this time.",INTERNAL_ERROR:"An error occurred. Please try again.",INVALID_METHOD:"Sorry, this method is invalid",
DOES_NOT_EXIST:"This user does not exist any more. Please go back to user management or contact the success team if this seems wrong.",CANNOT_REMOVE_MASTER_ACCOUNT:"Master accounts cannot be deleted.",COMPANY_NOT_SETUP:"Your company is not fully setup within Bitly.  Please contact the success team to complete setup.",ACCOUNT_SETUP_INCOMPLETE:"Your account is not fully setup within Bitly.  Please contact the success team to complete setup.",USER_LIMIT_REACHED:"You do not have any available seats left.  Please contact the success team to get more."};
this.OnebitlyAPIError=function(){function f(){}f.getErrorMessage=function(l){if(l.status_code===200)return"";if(l.status_code===400)return o.INVALID_METHOD;if(l.status_code===404)return l.status_txt in o?o[l.status_txt]:o.INTERNAL_ERROR;if(l.status_code===403)return l.status_txt in o?o[l.status_txt]:"Authentication error. Your session might have expired.";if(l.status_code===500)return l.status_txt in o?o[l.status_txt]:o.INTERNAL_ERROR};return f}()}).call(this);(function(){var o,f=function(g,c){return function(){return g.apply(c,arguments)}},l={}.hasOwnProperty,i=function(g,c){function d(){this.constructor=g}for(var b in c)if(l.call(c,b))g[b]=c[b];d.prototype=c.prototype;g.prototype=new d;g.__super__=c.prototype;return g};App.DropdownView=function(g){function c(){this.updateDisplayText=f(this.updateDisplayText,this);this.selectDropdownItem=f(this.selectDropdownItem,this);this.closeDropdown=f(this.closeDropdown,this);this.openDropdown=f(this.openDropdown,
this);this.toggleDropdown=f(this.toggleDropdown,this);return o=c.__super__.constructor.apply(this,arguments)}i(c,g);c.create=function(d){d=$(d);if(d.length===0)throw Error("App.DropdownView.create() must be called with a pre-existing DOM element");return d.data("dropdown")?d.data("dropdown"):new App.DropdownView({el:d,model:new App.DropdownModel({value:d.find(".dropdown__trigger").data("value")})})};c.prototype.events=function(){return{"click .dropdown__trigger":this.preventDefault(this.toggleDropdown),
"click .dropdown__item":this.preventDefault(this.selectDropdownItem)}};c.prototype.element_map={trigger:".dropdown__trigger",display_text:".dropdown__trigger"};c.prototype.initialize=function(){this.uniqueId=_.uniqueId("dropdown_");return this.$el.data("dropdown",this)};c.prototype.toggleDropdown=function(){return this.$el.hasClass("is-expanded")?this.closeDropdown():this.openDropdown()};c.prototype.openDropdown=function(){var d=this;this.$el.addClass("is-expanded");return _.defer(function(){return $("body").one("click."+
d.uniqueId,d.closeDropdown)})};c.prototype.closeDropdown=function(){this.$el.removeClass("is-expanded");return $("body").unbind("click."+this.uniqueId)};c.prototype.selectDropdownItem=function(d){var b,h;b=$(d.currentTarget);h=b.text();d=b.attr("href").replace(/^#/,"");b=b.attr("data-value")||d;this.updateDisplayText(h,d,b);this.closeDropdown();this.trigger("change",b);return this.model.setValue(b)};c.prototype.updateDisplayText=function(d,b,h){this.getEl("display_text").text(d);this.getEl("display_text").attr("href",
"#"+b);return this.getEl("display_text").attr("data-value",h)};c.prototype.render=function(){};return c}(App.BaseView)}).call(this);(function(){var o,f=function(g,c){return function(){return g.apply(c,arguments)}},l={}.hasOwnProperty,i=function(g,c){function d(){this.constructor=g}for(var b in c)if(l.call(c,b))g[b]=c[b];d.prototype=c.prototype;g.prototype=new d;g.__super__=c.prototype;return g};App.CustomKeywordView=function(g){function c(){this.unsetOverwrite=f(this.unsetOverwrite,this);this.confirmOverwrite=f(this.confirmOverwrite,this);this.copyAnimation=f(this.copyAnimation,this);this.save=f(this.save,this);this.checkForSave=
f(this.checkForSave,this);this.toggleEditingAndRender=f(this.toggleEditingAndRender,this);this.reset=f(this.reset,this);return o=c.__super__.constructor.apply(this,arguments)}i(c,g);c.prototype.template=Handlebars.templates.custom_keyword;c.prototype.initialize=function(){var d,b,h;this.show_extended_bck=(d=this.options.show_extended_bck)!=null?d:false;this.save_on_confirm=(b=this.options.save_on_confirm)!=null?b:true;this.expanded=(h=this.options.expanded)!=null?h:false;return this.model=new App.CustomKeywordModel({domain:this.options.domain,
keyword:this.options.keyword,link:this.options.link,prefilled:this.options.prefilled})};c.prototype.events=function(){return{"click .bck-warn-would-overwrite .bck-confirm-overwrite":this.preventDefault(this.confirmOverwrite),"click .bck-warn-would-overwrite .bck-dismiss-overwrite":this.preventDefault(this.dismissOverwrite),"input [name=keyword]":this.unsetOverwrite,"keyup :input":this.preventDefault(this.checkForSave),"click .bck-save-button":this.preventDefault(this.save),"click .bck-editing-button":this.preventDefault(this.toggleEditingAndRender)}};
c.prototype.render=function(){if(!this.show_extended_bck)this.expanded=true;this.$el.html(this.template(_.assign(this.model.toJSON(),{show_extended_bck:this.show_extended_bck,expanded:this.expanded})));if(this.$(".dropdown--domain").length){this.domainDropdown=App.DropdownView.create(this.$(".dropdown--domain"));return this.domainDropdown.on("change",this.unsetOverwrite)}};c.prototype.reset=function(){this.$el.html(this.template(_.assign(this.model.toJSON())));if(this.$(".dropdown--domain").length){this.domainDropdown=
App.DropdownView.create(this.$(".dropdown--domain"));return this.domainDropdown.on("change",this.unsetOverwrite)}};c.prototype.toggleEditingAndRender=function(){this.expanded=!this.expanded;return this.render()};c.prototype.checkForSave=function(d){if(this.show_extended_bck&&d.which===13)return this.save()};c.prototype.save=function(){var d,b,h,m=this;this.$("[name=keyword]").attr("disabled","disabled");this.$(".bck-warn").slideUp();b=$.Deferred();h={domain:$.trim(this.$(".dropdown--domain .dropdown__trigger").text()),
keyword:$.trim(this.$("[name=keyword]").val()),overwrite:$.trim(this.$("[name=overwrite]").val())};d=this.model.customize(h);d.done(function(v){m.$("[name=keyword]").removeAttr("disabled");m.$("[name=keyword]").removeClass("error");b.resolve(v);m.model.set("domain",h.domain);m.model.set("keyword",h.keyword);m.prefilled=true;m.toggleEditingAndRender();if(v!=null)return m.trigger("save",v.data)});d.fail(function(v){m.$("[name=keyword]").removeAttr("disabled");if(v.status_code===500)if(v.status_txt===
"WOULD_OVERWRITE")m.showWouldOverwriteMessage();else if(v.status_txt==="KEYWORD_UNAVAILABLE")App.$User.isEnterprise()?m.handleResponseError(v):m.showUpsellMessage();else m.handleResponseError(v);else m.handleResponseError(v);return b.reject(v)});return b.promise()};c.prototype.copyAnimation=function(){var d,b;d=this.$(".current-txt .current-shortlink").text();d=$('<div class="shortlink-copied">'+d+"</div>");b={top:-8,left:-2,position:"absolute",opacity:0.6};d.css(b);this.$(".current-txt .current-shortlink").prepend(d);
return d.animate({top:b.top-25,opacity:0},function(){return $(this).remove()})};c.prototype.showWouldOverwriteMessage=function(){this.$(".bck-warn-would-overwrite").slideDown();this.$("[name=keyword]").addClass("error");return this.$("[name=overwrite]").val(false)};c.prototype.handleResponseError=function(d){return this.showErrorMessage(OnebitlyAPIError.getErrorMessage(d))};c.prototype.showErrorMessage=function(d){this.$(".bck-warn-error-message em").text(d);this.$(".bck-warn-error-message").slideDown();
return this.$("[name=keyword]").addClass("error")};c.prototype.showUpsellMessage=function(){this.$(".bck-warn-upsell").slideDown();return this.$("[name=keyword]").addClass("error")};c.prototype.confirmOverwrite=function(){this.$("[name=keyword]").removeClass("error");this.$(".bck-warn-would-overwrite").slideUp();this.$("[name=overwrite]").val(true);if(this.save_on_confirm)return this.show_extended_bck?this.save():this.trigger("confirmedSaveOverwrite")};c.prototype.dismissOverwrite=function(){this.$(".bck-warn-would-overwrite").slideUp(this.reset);
return this.$("[name=overwrite]").val(false)};c.prototype.unsetOverwrite=function(){this.$("[name=keyword]").removeClass("error");this.$(".bck-warn").slideUp();return this.$("[name=overwrite]").val(false)};return c}(App.BaseView||Backbone.View)}).call(this);(function(){var o,f=function(g,c){return function(){return g.apply(c,arguments)}},l={}.hasOwnProperty,i=function(g,c){function d(){this.constructor=g}for(var b in c)if(l.call(c,b))g[b]=c[b];d.prototype=c.prototype;g.prototype=new d;g.__super__=c.prototype;return g};App.ModalView=function(g){function c(){this.closeModal=f(this.closeModal,this);this.closeWithEscape=f(this.closeWithEscape,this);return o=c.__super__.constructor.apply(this,arguments)}i(c,g);c.prototype.initialize=function(d){var b=this;
this.require("factory");this.factory=d.factory;this.$overlay=$(".modal-overlay");_.defer(function(){return $(document.body).bind("keydown",b.closeWithEscape)});this.on("closed",function(){return $(document.body).unbind("keydown",b.closeWithEscape)});return App.Dispatch.on("UI.Modal:render",function(h){if(h===this)return typeof this.onRender==="function"?this.onRender():void 0},this)};c.prototype.className="modal";c.prototype.events=function(){return{"click .close":"closeModal","click .modal-actions .cancel":"closeModal"}};
c.prototype.closeWithEscape=function(d){if(!$("body").hasClass("has-popup")){d.stopImmediatePropagation();if(d.keyCode===27)return this.closeModal(d)}};c.prototype.closeModal=function(d){if(d!=null&&d.hasOwnProperty&&d instanceof $.Event){d.preventDefault();d.stopPropagation();if(!$(d.currentTarget).is(".modal-overlay")||!$(d.target).closest(".modal").length)return this.factory.closeModal()}else return this.factory.closeModal()};c.prototype.setLoadingIndicator=function(d){var b,h,m,v,w,s;if(d==null)d=
{};if(!this.loading_indicator){h=$((m=d.el)!=null?m:this.el);m=(v=this.$submit_btn)!=null?v:d.submit_btn;v=(w=d.parent_classname)!=null?w:"is-loading";d=(b=d.loading_classname)!=null?b:"";b=$(newT.div({clss:["loading-indicator",d]}));this.loading_indicator={el:b,parent:h,parent_classname:v,submit_btn:m};h.append(b);h.addClass(v);return(s=this.$submit_btn)!=null?typeof s.addClass==="function"?s.addClass("is-disabled is-loading"):void 0:void 0}};c.prototype.clearLoadingIndicator=function(){var d;if(this.loading_indicator){this.loading_indicator.el.remove();
this.loading_indicator.parent.removeClass(this.loading_indicator.parent_classname);if((d=this.loading_indicator.submit_btn)!=null)typeof d.removeClass==="function"&&d.removeClass("is-disabled is-loading");return delete this.loading_indicator}};c.prototype.close=function(){return this.$el.remove()};return c}(App.BaseView)}).call(this);(function(){var o,f=function(g,c){return function(){return g.apply(c,arguments)}},l={}.hasOwnProperty,i=function(g,c){function d(){this.constructor=g}for(var b in c)if(l.call(c,b))g[b]=c[b];d.prototype=c.prototype;g.prototype=new d;g.__super__=c.prototype;return g};App.ModalFactory=function(g){function c(){this.pushOrReplace=f(this.pushOrReplace,this);this.push=f(this.push,this);this.add=f(this.add,this);this.capitalize=f(this.capitalize,this);this._closeModal=f(this._closeModal,this);this.closeModal=
f(this.closeModal,this);this.modalOverlayClick=f(this.modalOverlayClick,this);this.render=f(this.render,this);return o=c.__super__.constructor.apply(this,arguments)}i(c,g);c.prototype.initialize=function(){return this.stack=[]};c.prototype.id="modal-factory";c.prototype.events={"click .modal-overlay.is-active":"modalOverlayClick"};c.prototype.render=function(){var d,b;this.$el.append(Handlebars.templates.modal_factory());d=$("#main");b=$("#sidebar").parent();if(b.length>0)b.append(this.el);else d.length>
0?d.append(this.el):$("body").append(this.el);this.$modal_overlay=this.$(".modal-overlay");return this.$el};c.prototype.last=function(){return _.last(this.stack)};c.prototype.nextToLast=function(){return this.stack.length>1?this.stack[this.stack.length-2]:null};c.prototype.first=function(){return this.stack[0]};c.prototype.modalOverlayClick=function(d){if(!$(d.target).closest(".modal").length&&this.last().close_on_outside_click)return this.closeModal()};c.prototype.closeModal=function(){var d;if(this.stack.length)if(this.stack.length===
1)return this._closeModal();else{d=this.last();if(d.options.no_transition){this._closeModal();return this.last().$el.removeClass("is-hidden")}else return this.transitionBackToPreviousModal({modal_to:this.nextToLast(),modal_from:d})}};c.prototype._closeModal=function(){this.last().close();this.stack.pop();if(!this.stack.length){this.$modal_overlay.removeClass("is-active");$("body").removeClass("has-modal");typeof keyShorts!=="undefined"&&keyShorts!==null&&keyShorts.enable();App.Dispatch.trigger("UI.Modal.Stack:empty");
return this.notifyBitmarkletOfClose()}};c.prototype.notifyBitmarkletOfClose=function(){return $(document.body).trigger("nyanbox_complete",{data:{},type:"cancel"})};c.prototype.closeStack=function(){var d;for(d=[];this.stack.length;)d.push(this._closeModal());return d};c.prototype.createModal=function(d,b){typeof keyShorts!=="undefined"&&keyShorts!==null&&keyShorts.quiet();if(d==="Share")d=App.$User.get("share_accounts").length>0?"SocialShare":"ConnectAccounts";return new App[""+d+"ModalView"](_.extend(b,
{factory:this,name:d}))};c.prototype.capitalize=function(d){return d.charAt(0).toUpperCase()+d.slice(1)};c.prototype.add=function(d,b){var h,m,v,w;if(b==null)b={};h=this.createModal(this.capitalize(d),b);v=false;if(b.preserve_previous_modal)m=this.last();else{m=this.stack.pop();v=true}this.stack.push(h);h.render();$("body").addClass("has-modal");this.$modal_overlay.addClass("is-active");if(m&&!((w=h.options)!=null&&w.no_transition))this.transitionModal({modal_from:m,modal_to:h,preserve_previous_modal:b.preserve_previous_modal});
else{if(m){m.$el.addClass("is-hidden");v&&m.close()}this.$modal_overlay.append(h.el);App.Dispatch.trigger("UI.Modal:render",h)}return h};c.prototype.push=function(d,b){if(b==null)b={};b.preserve_previous_modal=true;return this.add(d,b)};c.prototype.pushOrReplace=function(d,b){var h,m;if(b==null)b={};h=this.last();return(h!=null?(m=h.options)!=null?m.name:void 0:void 0)===d.capitalize()?this.add(d,b):this.push(d,b)};c.prototype.transitionModal=function(d){var b,h,m,v,w,s,A;m=d.modal_from;v=d.modal_to;
h=m.$(".modal-title");b=v.$(".modal-title");parseInt(m.$el.css("padding-left"),10);v.$el.removeClass("can-transition");m.$el.removeClass("can-transition");v.$el.addClass("is-hidden");v.$(".modal-contents").addClass("is-hidden");this.$modal_overlay.append(v.el);h.css({"text-indent":-600,"background-position":"-600px center"});b.css({"text-indent":-600,"background-position":"-600px center"});m.$(".modal-contents").addClass("is-hidden");h=m.$el.height();m.$el.css({height:h});_.defer(function(){v.$el.addClass("can-transition");
m.$el.addClass("can-transition");return m.$el.css({"margin-left":-v.$el.width()/2,width:v.$el.width(),height:v.$el.height()})});s=false;w=function(){if(!s){clearTimeout(A);s=true;m.$el.addClass("is-hidden");m.$el.removeClass("can-transition");v.$el.removeClass("is-hidden");v.$(".modal-contents").removeClass("is-hidden");b.css({"text-indent":0,"background-position":""});_.delay(function(){return App.Dispatch.trigger("UI.Modal:render",v)},100);return d.preserve_previous_modal?m.$el.css({"margin-left":"",
width:"",height:""}):m.close()}};m.$el.one("webkitTransitionEnd oTransitionEnd MSTransitionEnd transitionend",function(){return w()});return A=setTimeout(w,1E3)};c.prototype.transitionBackToPreviousModal=function(d){var b,h,m,v=this;b=d.modal_from;m=d.modal_to;d=b.$(".modal-title");h=parseInt(b.$el.css("padding-left"),10);d.css("text-indent",-(d.width()+h));b.$(".modal-contents").addClass("is-hidden");b.$el.css({"margin-left":-m.$el.width()/2,width:m.$el.width(),height:m.$el.height()});return b.$el.one("webkitTransitionEnd oTransitionEnd MSTransitionEnd transitionend",
function(){b.$el.addClass("is-hidden");m.$el.removeClass("is-hidden");return v._closeModal()})};return c}(Backbone.View)}).call(this);(function(){var o,f={}.hasOwnProperty,l=function(i,g){function c(){this.constructor=i}for(var d in g)if(f.call(g,d))i[d]=g[d];c.prototype=g.prototype;i.prototype=new c;i.__super__=g.prototype;return i};App.ShareModalView=function(i){function g(){return o=g.__super__.constructor.apply(this,arguments)}l(g,i);g.prototype.closeModal=function(c){if(c!=null&&c.hasOwnProperty&&c instanceof $.Event)if($(c.target).hasClass("close")){c.preventDefault();c.stopPropagation();return this.factory.closeStack()}else return g.__super__.closeModal.apply(this,
arguments);else return g.__super__.closeModal.apply(this,arguments)};return g}(App.ModalView)}).call(this);(function(){var o,f,l=function(c,d){return function(){return c.apply(d,arguments)}},i={}.hasOwnProperty,g=function(c,d){function b(){this.constructor=c}for(var h in d)if(i.call(d,h))c[h]=d[h];b.prototype=d.prototype;c.prototype=new b;c.__super__=d.prototype;return c};o=function(){function c(){this.range=l(this.range,this);this.backStep=l(this.backStep,this)}c.prototype.backStep=function(d){return d.setDate(d.getDate()-1)};c.prototype.range=function(d,b,h){var m,v;m=moment(b).startOf("day").toDate();
v=[];b=0;if(h>1)for(;m>d;){b%h||v.unshift(new Date(+m));this.backStep(m);b++}else for(;m>d;){v.unshift(new Date(+m));this.backStep(m);b++}return v};return c}();d3.time.normalDay=new o;d3.time.normalDays=d3.time.normalDay.range;App.InsightsView=function(c){function d(){this.renderGraph=l(this.renderGraph,this);this.normalizeClicks=l(this.normalizeClicks,this);return f=d.__super__.constructor.apply(this,arguments)}g(d,c);d.prototype.initialize=function(b){this.template=b.template;return this.data=b.data};
d.prototype.render=function(){var b;b=this.model.toTemplate();App.$User&&_.extend(b,{user:App.$User.toJSON()});this.html(this.template(b));if(this.data.global_total>0){this.normalizeClicks();_.defer(this.renderGraph)}return this.$el};d.prototype.normalizeClicks=function(){var b,h,m,v,w;v=this.data.clicks;w=[];h=0;for(m=v.length;h<m;h++){b=v[h];w.push(b.dt=new Date(b.dt))}return w};d.prototype.renderGraph=function(){var b,h,m,v,w,s,A,D,y,S,O;m={left:60,right:20,top:20,bottom:50};b=function(G){return function(X){var xa,
$a;$a=G.length-1;for(xa=G[$a];!xa[1](X);)xa=G[--$a];return _.trimLeft(xa[0](X),"0")}};w=b([[d3.time.format("%a %d"),function(){return true}],[d3.time.format("%I %p"),function(G){return G.getHours()}],[d3.time.format("%I:%M%p"),function(G){return G.getMinutes()}]]);b=b([[d3.time.format("%Y"),function(){return true}],[d3.time.format("%b"),function(G){return G.getMonth()}]]);switch(this.data.period){case "hour":A=d3.time.minutes;s=10;h=w;v="Last 60 Minutes";break;case "day":A=d3.time.hours;s=3;h=w;v=
"Last 24 Hours";break;case "week":A=d3.time.days;s=1;h=w;v="Last 7 Days";break;case "month":A=d3.time.normalDays;s=5;h=w;v="Last 30 Days";break;case "year":h=b;v="Last 12 Months";break;case "four_years":A=d3.time.months;s=12;h=b;v="Last 4 Years"}D=_.pluck(this.data.clicks,"dt");b=_.pluck(this.data.clicks,"clicks");w=d3.select(this.$(".click-graph").get(0)).append("svg").attr("width",360+m.left+m.right).attr("height",100+m.top+m.bottom);D=[d3.min(D),d3.max(D)];y=d3.time.scale().domain(D).rangeRound([m.left,
360+m.left]);D=d3.svg.axis().tickSize(8,3,0).tickPadding(5).scale(y);A&&s&&D.ticks(A,s).tickSubdivide(s-1);D.tickFormat(h);h=w.append("g").attr("transform","translate(0 "+(100+m.top)+")").attr("class","x axis");h.call(D);h.append("text").attr("x",180+m.left).attr("y",40).attr("class","x label").attr("text-anchor","middle").text(v);S=d3.scale.linear().domain([0,d3.max(b)]).rangeRound([100+m.top,m.top]);v=d3.svg.axis().scale(S).tickFormat(d3.format(",")).ticks(Math.min(d3.max(b),5)).orient("left");
w.append("g").attr("transform","translate("+m.left+" 0)").attr("class","y axis").call(v).append("text").attr("x",-(100+m.top)).attr("y",-50).attr("class","y label").attr("transform","rotate(-90)").text("Clicks per "+this.data.unit);m=w.append("g").attr("class","graph").attr("transform","translate(0 0)");h=function(G){return y(G.dt)};s=function(G){return S(G.clicks)};v=d3.svg.line().x(h).y(s);m.append("path").attr("d",v(this.data.clicks));if((O=!this.data.period)==="hour"||O==="four_years")return m.selectAll("circle").data(circleData).enter().append("circle").attr("cx",
h).attr("cy",s).attr("r",5)};return d}(App.BaseView)}).call(this);(function(){var o,f=function(g,c){return function(){return g.apply(c,arguments)}},l={}.hasOwnProperty,i=function(g,c){function d(){this.constructor=g}for(var b in c)if(l.call(c,b))g[b]=c[b];d.prototype=c.prototype;g.prototype=new d;g.__super__=c.prototype;return g};App.BitmarkItemView=function(g){function c(){this.showEmailShare=f(this.showEmailShare,this);this.showSocialShare=f(this.showSocialShare,this);this.showNoteEditForm=f(this.showNoteEditForm,this);this.showTitleEditForm=f(this.showTitleEditForm,
this);this.togglePrivacy=f(this.togglePrivacy,this);this.copyAnimation=f(this.copyAnimation,this);this.render=f(this.render,this);this.chromeCopy=f(this.chromeCopy,this);this.checkRender=f(this.checkRender,this);this.unarchiveBitmark=f(this.unarchiveBitmark,this);return o=c.__super__.constructor.apply(this,arguments)}i(c,g);c.prototype.template=Handlebars.templates.bitmark;c.prototype.className="bitmark";c.prototype.rerender_keys=["private","title","note","keyword","shares","archived","user_clicks",
"keyword_link"];c.prototype.initialize=function(){var d;this.isModal=this.options.modal;this.useLegacyWidget=this.options.useLegacyWidget;this.isModal?this.$el.addClass("active"):this.$el.attr("id",this.model.get("link").split("/").pop());this.model.on("change",this.checkRender);if(!this.useLegacyWidget)this.useLegacyWidget=App.CustomKeywordView==null;if(((d=window.chrome)!=null?d.extension:void 0)!=null){this.$el.addClass("chrome-copy");return this.$clipboard=$("#clipboard")}};c.prototype.events=
function(){return{"click .bitmark-previous-share-indicator":function(d){return d.preventDefault()},"click .bitmark-toggle-privacy":this.preventDefault(this.togglePrivacy),"click .edit-title":this.preventDefault(this.showTitleEditForm),"click .bitmark-add-note":this.preventDefault(this.showNoteEditForm),"click .edit-note":this.preventDefault(this.showNoteEditForm),"click .bitmark-unarchive-action":this.preventDefault(this.unarchiveBitmark),"click .bitmark-share-email":this.preventDefault(this.showEmailShare),
"click .bitmark-share-social":this.preventDefault(this.showSocialShare),"zeroclipboard-complete .bitmark-copy-button":this.copyAnimation,"click .chrome-copy .bitmark-copy-button":this.chromeCopy,mouseenter:function(){if(!this.model.get("archived"))return App.Dispatch.trigger("UI.Bitmark:mouseenter",this)},mouseleave:function(d){if(!this.model.get("archived"))if(d.toElement!=null)if(!$(d.toElement).is("#ZeroClipboardMovie_1, embed, #global-zeroclipboard-html-bridge, .bitmark-actions")){this.$el.removeClass("hover");
return App.Dispatch.trigger("UI.Bitmark:mouseleave",this)}}}};c.prototype.highlightInitialShortlink=function(){var d;if(this.useLegacyWidget){d=this.copyWidget.$(".bitmark-shortlink");if(d.length){d.focus();this.copyWidget.selectText(d.get(0));if(document.activeElement!==d.get(0))return d.focus()}}};c.prototype.attachOnboard=function(){return this.onboard=BITLY.data.onboard_item=new nyan.OnboardItem(this.el)};c.prototype.unarchiveBitmark=function(){return this.model.unarchive()};c.prototype.checkRender=
function(d,b){var h,m,v,w,s;h=b.changes||{};s=this.rerender_keys;v=0;for(w=s.length;v<w;v++){m=s[v];if(m in h){this.render();break}}};c.prototype.chromeCopy=function(d){d.preventDefault();this.$clipboard.val(this.model.shortLink());this.$clipboard.select();document.execCommand("copy",false,null);return this.copyAnimation()};c.prototype.render=function(){var d,b,h,m,v=this;b=this.model.toTemplate();d=moment().diff(moment.unix(b.ts))<3E4;h=document.activeElement===this.$(".bitmark-shortlink").get(0);
this.$el.toggleClass("archived",!!this.model.get("archived"));_.extend(b,{user:App.$User?App.$User.toJSON():void 0,modal:this.isModal,justSaved:d,showingLegacyWidget:this.useLegacyWidget,isChromeExtension:!!((m=window.chrome)!=null&&m.extension)});if((typeof bitlyPage!=="undefined"&&bitlyPage!==null?bitlyPage.bulkActionsController:void 0)!=null){d=bitlyPage.bulkActionsController.has(this.model.get("link"))>-1;this.$el.toggleClass("checked",d);b.bulk_selected=d}this.html(this.template(b));if(this.useLegacyWidget){this.copyWidget=
new App.UnifiedCopyCustomizeView({model:this.model,el:this.$(".link-copy-customize"),bitmarkView:this});this.copyWidget.render()}else{this.customKeywordWidget=new App.CustomKeywordView(_.assign(this.model.toCustomKeywordModel(),{el:this.$(".bitmark-custom-keywords-widget"),show_extended_bck:true,expanded:!this.model.isKeywordLink(),prefilled:this.model.isKeywordLink()}));this.customKeywordWidget.render();this.customKeywordWidget.on("save",function(w){v.model.set(w);return v.$(".bitmark-copy-button").attr({"data-clipboard-text":w.keyword_link})});
this.$(".bitmark-copy-button").removeClass("is-hidden");if((b=App.$ZC)!=null)typeof b.clip==="function"&&b.clip(this.$(".bitmark-copy-button"))}this.onboard&&this.attachOnboard();_.defer(function(){v.trigger("render",v);if(h)return v.highlightInitialShortlink()});return this.$el};c.prototype.copyAnimation=function(){var d;return(d=this.customKeywordWidget)!=null?d.copyAnimation():void 0};c.prototype.togglePrivacy=function(){var d,b,h=this;App.Dispatch.trigger("UI.Bitmark.Privacy:toggle");b=!this.model.get("private");
d=this.model.update({edit:"private","private":b});this.checkPrivateLinksInPublicBundles();d.fail(function(){notify("Oops... an error occurred updating the privacy on this Bitlink. Please try again!",{type:"error"});return h.model.set("private",!b)});return d};c.prototype.showTitleEditForm=function(){if(!this.title_editor){this.title_editor=new App.Partials.InlineForm({model:this.model,field:"title",save_on_enter:true});this.title_editor.render()}return this.title_editor.addTo(this.$(".bitmark-title"))};
c.prototype.showNoteEditForm=function(){if(!this.note_editor){this.note_editor=new App.Partials.InlineForm({model:this.model,field:"note"});this.note_editor.render()}return this.note_editor.addTo(this.$(".bitmark-note"))};c.prototype.checkPrivateLinksInPublicBundles=function(){if(!this.in_private_view)this.in_private_view=new App.Bitmark.PrivateInPublicBundle({model:this.model,modal:this.isModal,parent_view:this});return this.in_private_view.performCheck()};c.prototype.showSocialShare=function(){return App.$ModalFactory.add("share",
{model:this.model,preserve_previous_modal:true,no_transition:true})};c.prototype.showEmailShare=function(){return App.$ModalFactory.add("email",{model:this.model,preserve_previous_modal:true,no_transition:true})};return c}(App.BaseView)}).call(this);(function(){var o,f=function(g,c){return function(){return g.apply(c,arguments)}},l={}.hasOwnProperty,i=function(g,c){function d(){this.constructor=g}for(var b in c)if(l.call(c,b))g[b]=c[b];d.prototype=c.prototype;g.prototype=new d;g.__super__=c.prototype;return g};App.BitmarkInfoView=function(g){function c(){this.render=f(this.render,this);return o=c.__super__.constructor.apply(this,arguments)}i(c,g);c.prototype.initialize=function(){this.model.get("private")&&this.$el.addClass("is-private");return this.render()};
c.prototype.template=Handlebars.templates.bitmark_info;c.prototype.elements={".bm-favicon":"favicon"};c.prototype.loadFavicon=function(){var d=this;return this.favicon.load(function(){return d.$el.addClass("has-favicon")})};c.prototype.render=function(){var d;d=this.model.toJSON();d.shortLink=this.model.shortLink();if(this.options.mode)d.mode=this.options.mode;this.html(this.template(d));this.loadFavicon();return this.$el};return c}(App.BaseView)}).call(this);(function(){var o,f={}.hasOwnProperty,l=function(i,g){function c(){this.constructor=i}for(var d in g)if(f.call(g,d))i[d]=g[d];c.prototype=g.prototype;i.prototype=new c;i.__super__=g.prototype;return i};App.Bitmark.PrivateInPublicBundle=function(i){function g(){return o=g.__super__.constructor.apply(this,arguments)}l(g,i);g.prototype.template=Handlebars.templates.private_bitmark_in_public_bundle;g.prototype.className="private_bitmark_in_public_bundle";g.prototype.initialize=function(c){g.__super__.initialize.apply(this,
arguments);this.isModal=this.options.modal;this.parent_view=c.parent_view;this.public_bundles=[];return this.removed_from={}};g.prototype.events=function(){return{"click .remove_from_bundles":this.preventDefault(this.removeFromBundles),"click .close":this.preventDefault(this.remove)}};g.prototype.preventDefault=function(c){var d=this;return function(b){b.preventDefault();return c.call(d)}};g.prototype.removeMessage=function(){var c=this;this.is_showing=false;return this.$el.animate({opacity:0},function(){return c.$el.slideUp(function(){c.$el.css({opacity:1});
return c.close()})})};g.prototype.removeFromBundles=function(){var c,d,b,h,m,v,w,s=this;d=this.model.get("link");b=this.public_bundles.length;v=this.public_bundles;w=[];h=0;for(m=v.length;h<m;h++){c=v[h];w.push(BITLY.ajax.POST({url:"/data/beta/bundle/link_remove",data:{bundle_link:c.bundle_link,link:d},success:function(A){var D,y;if(((D=A.data)!=null?(y=D.bundle)!=null?y.bundle_link:void 0:void 0)!=null)s.removed_from[A.data.bundle.bundle_link.split("/").slice(-2).join("/")]=true;if(!--b)return s.finishBundleRemoval()},
error:function(){if(!--b)return s.finishBundleRemoval()}}))}return w};g.prototype.finishBundleRemoval=function(){var c,d,b,h,m;this.model.get("bundle_links");d=[];m=this.model.get("bundles");b=0;for(h=m.length;b<h;b++){c=m[b];this.removed_from.hasOwnProperty(c.bundle_id)||d.push(c.bundle_id)}this.model.setBundleLinks(d);this.parent_view.render();return this.removeMessage()};g.prototype.render=function(){this.html(this.template({bitmark:this.model,public_bundles:[1],modal:this.isModal}));this.$el.hide().insertBefore(this.parent_view.$el).slideDown();
this.is_showing=true;return this.delegateEvents()};g.prototype.performCheck=function(){var c,d,b,h;if(!this.model.get("private"))if(this.is_showing)return this.removeMessage();else return;if(!this.is_showing){this.public_bundles=[];this.removed_from={};h=this.model.get("bundles");d=0;for(b=h.length;d<b;d++){c=h[d];c["private"]||this.public_bundles.push(c)}if(this.public_bundles.length)return this.render()}};return g}(App.BaseView)}).call(this);(function(){var o,f=function(c,d){return function(){return c.apply(d,arguments)}},l={}.hasOwnProperty,i=function(c,d){function b(){this.constructor=c}for(var h in d)if(l.call(d,h))c[h]=d[h];b.prototype=d.prototype;c.prototype=new b;c.__super__=d.prototype;return c},g=[].indexOf||function(c){for(var d=0,b=this.length;d<b;d++)if(d in this&&this[d]===c)return d;return-1};App.MultiPickerView=function(c){function d(){this.handlePaste=f(this.handlePaste,this);this.inputKeyup=f(this.inputKeyup,this);this.inputKeydown=
f(this.inputKeydown,this);this.inputNewText=f(this.inputNewText,this);this.suggestionKeyup=f(this.suggestionKeyup,this);this.suggestionKeydown=f(this.suggestionKeydown,this);this.removeItem=f(this.removeItem,this);this.selectItem=f(this.selectItem,this);return o=d.__super__.constructor.apply(this,arguments)}i(d,c);d.prototype.keys={BS:8,TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,COMMA:188,SEMICOLON:186};d.prototype.regex={isEmail:/^([^\s]+\@.+\.[a-z]{2,4})|(.+ \<([^\s]+\@.+\.[a-z]{2,4})\>)$/i};
d.prototype.className="multiPicker";d.prototype.events={click:"focusInput","focusin .picker-input":"onFocusIn","focusout .picker-input":"checkForFullEmail","keydown .picker-display":"keyDownCheckForFocusedChip","keydown .picker-input":"inputKeydown","keyup .picker-input":"inputKeyup","input .picker-input":"inputNewText","keydown .picker-suggestions":"suggestionKeydown","mousedown .picker-suggestions a":"suggestionMousedown","click .picker-suggestions a":"selectItem","click .picked-item .remove":"removeItem"};
d.prototype.initialize=function(){this.on("addEmail",this.pickEmail);this.selected=[];this.sessionKey="nyan_emails_"+App.$User.get("user");this.cache.view=this;return this.cache.load()};d.prototype.onFocusIn=function(){var b=this;return _.defer(function(){return b.suggestMatches(b.$input.val())})};d.prototype.removePlaceholder=function(){return this.$input.attr("placeholder","")};d.prototype.focusInput=function(b){b.preventDefault();b.stopPropagation();return this.$input.focus()};d.prototype.pickEmail=
function(b){this.cache.has(b)||this.cache.add(b);this.selected.push(b);this.$input_wrapper.before(Handlebars.templates.multi_picker_picked({email:b}));return this.refreshSelectors()};d.prototype.selectItem=function(b){var h=this;b.preventDefault();this.addEmail($(b.currentTarget).data("email"));this.$input.val("");this.hideSuggest();return _.defer(function(){return h.$input.focus()})};d.prototype.removeItem=function(b){var h,m;b.preventDefault();b.stopPropagation();h=$(b.currentTarget).parent();h.remove();
this.selected=function(){var v,w,s,A;s=this.selected;A=[];v=0;for(w=s.length;v<w;v++){m=s[v];h.data("email")!==m&&A.push(m)}return A}.call(this);this.trigger("removeEmail");return this.$input.focus()};d.prototype.suggestionKeydown=function(b){var h,m;if(b.keyCode!=null){h=$(b.currentTarget);switch(b.keyCode){case this.keys.DOWN:m="next";b.preventDefault();break;case this.keys.UP:m="prev";b.preventDefault();break;default:return}b=h[m]();return b.length?b.find("a").focus():this.$input.focus()}};d.prototype.suggestionKeyup=
function(b){var h;if(b.keyCode!=null)if((h=b.keyCode)===this.keys.SPACE||h===this.keys.TAB){b.preventDefault();return this.$suggestions.find("a.is-selected").click()}};d.prototype.inputNewText=function(b){b=$(b.currentTarget).val();this.removePlaceholder();return this.$hidden_input.text(b)};d.prototype.inputKeydown=function(b){var h,m;if(b.keyCode!=null){h=$(b.currentTarget);m=h.val();if(!(b.keyCode===this.keys.TAB&&!m))switch(b.keyCode){case this.keys.COMMA:case this.keys.SPACE:case this.keys.TAB:case this.keys.ENTER:case this.keys.SEMICOLON:b.preventDefault();
if(this.$suggestions.hasClass("is-hidden")){if(this.addEmail(m)){this.$input.val("");if(b.keyCode===this.keys.TAB)return b.stopPropagation()}}else return this.$suggestions.find(".is-selected").click();break;case this.keys.DOWN:b.preventDefault();return this.selectNext(this.$suggestions.find("a"));case this.keys.UP:b.preventDefault();return this.selectPrevious(this.$suggestions.find("a"));case this.keys.ESC:b.preventDefault();b.stopPropagation();return m?h.val(""):h.blur();case this.keys.BS:if(m.length===
0&&!this.BS_down){b=this.$(".picked-item a.remove:focus");if(b.length){b=b.closest(".picked-item");this.selected.splice(this.selected.indexOf(b.data("email")),1);b.remove()}else this.$(".picked-item").last().find("a.remove").focus();return this.BS_down=true}}}};d.prototype.keyDownCheckForFocusedChip=function(b){var h;if(b.keyCode!=null){h=$(b.target);if(h.is(".picked-item a.remove:focus"))if(!this.$input.val().length)switch(b.keyCode){case this.keys.BS:h.trigger("click");b.preventDefault();b.stopPropagation();
return this.$input.focus();case this.keys.LEFT:return this.focusPreviousChip(h);case this.keys.RIGHT:return this.focusNextChip(h)}}};d.prototype.focusPreviousChip=function(b){var h;b||(h=this.$(".picked-item").last());h||(h=b.closest(".picked-item").prev(".picked-item"));return h.find("a.remove").focus()};d.prototype.focusNextChip=function(b){if(b){b=b.closest(".picked-item").next(".picked-item");return b.length?b.find("a.remove").focus():this.$input.focus()}};d.prototype.selectPrevious=function(b,
h){var m;m=b.filter(".is-selected").removeClass("is-selected").prev(h);m.length||(m=b.last(h));return m.addClass("is-selected")};d.prototype.selectNext=function(b,h){var m;m=b.filter(".is-selected").removeClass("is-selected").next(h);m.length||(m=b.first(h));return m.addClass("is-selected")};d.prototype.inputKeyup=function(b){var h;if(b.keyCode!=null){h=$(b.currentTarget);h=h.val();switch(b.keyCode){case this.keys.COMMA:case this.keys.SPACE:case this.keys.TAB:case this.keys.ENTER:case this.keys.DOWN:case this.keys.UP:case this.keys.ESC:return;
case this.keys.BS:this.BS_down=false;break;case this.keys.LEFT:h.length===0&&this.focusPreviousChip();break;case this.keys.RIGHT:h.length===0&&this.focusNextChip()}h=$(b.currentTarget);h=h.val();return this.suggestMatches(h)}};d.prototype.suggestMatches=function(b){var h;if(!b)return this.hideSuggest();h=this.cache.find(b);if(!h.length)return this.hideSuggest();this.showSuggest();this.$suggestions.html(Handlebars.templates.multi_picker_suggestions({matches:h,search:b}));this.refreshSelectors();return this.$suggestions.find("a").first().addClass("is-selected")};
d.prototype.handlePaste=function(){var b=this;return _.defer(function(){var h,m,v;m=b.$input.val().split(",");v=function(){var w,s,A;A=[];w=0;for(s=m.length;w<s;w++){h=m[w];this.addEmail($.trim(h))||A.push($.trim(h))}return A}.call(b);return $input.val(v.join(", "))})};d.prototype.showSuggest=function(){return this.$suggestions.removeClass("is-hidden")};d.prototype.hideSuggest=function(){return this.$suggestions.addClass("is-hidden")};d.prototype.suggestionMousedown=function(){var b=this;return _.defer(function(){return clearTimeout(b.hide_suggest_timer)})};
d.prototype.checkForFullEmail=function(){var b,h=this;if((b=this.$input.val())&&this.addEmail(b)){this.$input.val("");return this.hideSuggest()}else return this.hide_suggest_timer=_.delay(function(){return h.hideSuggest()},100)};d.prototype.addEmail=function(b){b=b.match(this.regex.isEmail);if(!b)return false;this.trigger("addEmail",b[3]||b[1]);return true};d.prototype.cache={load:function(){var b=this;this.emails=nyan.SessionStore.get(this.view.sessionKey);if(!this.emails&&window.bitlyStore)return bitlyStore.length===
0?bitlyStore.getCache(nyan.nyanUser.data.user,function(){return b.loadFromBitlyStore()}):this.loadFromBitlyStore()},loadFromBitlyStore:function(){var b;b=bitlyStore.CustomExtractor.allShareEmails();nyan.SessionStore.set(this.view.sessionKey,b);return this.emails=nyan.SessionStore.get(this.view.sessionKey)},has:function(b){var h,m,v,w;h=b.toLowerCase();w=this.emails;m=0;for(v=w.length;m<v;m++){b=w[m];if(h===b.toLowerCase())return true}},add:function(b){if(this.has(b))return cached;this.emails.push(b);
return nyan.SessionStore.set(this.view.sessionKey,this.emails)},remove:function(b){var h,m,v,w,s,A;m=b.toLowerCase();s=this.emails;A=[];h=v=0;for(w=s.length;v<w;h=++v){b=s[h];m!==b.toLowerCase()?A.push(this.emails.splice(h,1)):A.push(void 0)}return A},find:function(b){var h,m,v,w,s;w=this.emails;s=[];m=0;for(v=w.length;m<v;m++){h=w[m];h.indexOf(b)>-1&&g.call(this.view.selected,h)<0&&s.push(h)}return s}};d.prototype.render=function(){this.$el.html(Handlebars.templates.multi_picker);return this.refreshSelectors()};
d.prototype.refreshSelectors=function(){this.$input_wrapper=this.$(".picker-input-wrapper");this.$input=this.$(".picker-input");this.$suggestions=this.$(".picker-suggestions");this.$picked=this.$(".picker-picked");this.$hidden_input=this.$(".picker-input-mirror");return this.$picked_items=this.$(".picked-item")};return d}(Backbone.View)}).call(this);(function(){var o,f=function(g,c){return function(){return g.apply(c,arguments)}},l={}.hasOwnProperty,i=function(g,c){function d(){this.constructor=g}for(var b in c)if(l.call(c,b))g[b]=c[b];d.prototype=c.prototype;g.prototype=new d;g.__super__=c.prototype;return g};App.EmailModalView=function(g){function c(){this.onRender=f(this.onRender,this);return o=c.__super__.constructor.apply(this,arguments)}i(c,g);c.SUCCESSFUL_SHARE_CLOSE_DELAY=2E3;c.prototype.initialize=function(){this.MAX_EMAIL_MESSAGE_LENGTH=
1024;c.__super__.initialize.apply(this,arguments);this.user=App.$User;this.model.on("share:success",this.onSuccess,this);this.model.on("share:error",this.onError,this);return App.Dispatch.on("email_message_updated",this.checkIfTooLong,this)};c.prototype.elements={".message-input":"$share_message",".email-picker":"$email_picker",".send-email-btn":"$submit_btn",".bm-info":"$bitmark_info"};c.prototype.events=function(){return _.extend(c.__super__.events.apply(this,arguments),{"click .send-email-btn":"sendEmails",
"click #save-privacy":"toggleSavePrivacy","input .email-message":"checkIfTooLong","click .share-success-message .btn":"showSocialShareModal"})};c.prototype.className="modal email-modal";c.prototype.checkIfTooLong=function(d){d=$(d.currentTarget).val();if(d.length&&d.length>this.MAX_EMAIL_MESSAGE_LENGTH){this.$el.addClass("is-too-long");this.$(".send-email-btn").addClass("is-disabled")}else{this.$el.removeClass("is-too-long");this.user.isVerified()&&this.$(".send-email-btn").removeClass("is-disabled")}d=
this.MAX_EMAIL_MESSAGE_LENGTH-d.length;return this.$(".share-character-counter").text(d<=25?d:"")};c.prototype.toggleSavePrivacy=function(d){d.preventDefault();d=$(d.target);if(d.data("privacy")){d.data("privacy",0);return d.html("public")}else{d.data("privacy",1);return d.html("private")}};c.prototype.sendEmails=function(d){d.preventDefault();if(!$(d.currentTarget).hasClass("is-disabled"))if(this.user.isVerified())return this.model.get("link")?this._sendEmails():this._saveThenSend()};c.prototype._sendEmails=
function(){this.model.share({email:{email:this.multi_picker.selected,share_text:this.$(".email-message").val()}});return this.setLoadingIndicator()};c.prototype._saveThenSend=function(){var d,b,h=this;d=this.$(".email-message").val();b=!!this.$("#save-privacy").data("privacy");this.model.set("note",d);this.model.set("private",b);d=this.model.save();this.setLoadingIndicator();return d.done(function(){return h._sendEmails()})};c.prototype.render=function(){this.html(Handlebars.templates.modal_email({bitmark:this.model.toJSON(),
is_user_verified:this.user.isVerified()}));this.bitmark_info=new App.BitmarkInfoView({model:this.model,el:this.$bitmark_info,mode:"share"});this.share_message=new App.ShareMessageView({model:this.model,modal_type:"email",network:"email",el:this.$share_message});this.share_message.render();this.multi_picker=new App.MultiPickerView({el:this.$email_picker});this.multi_picker.on("addEmail removeEmail",function(){return this.taborder.bind()},this);return this.multi_picker.render()};c.prototype.startCloseTimer=
function(){var d=this;return this.close_timer=_.delay(function(){d.clearLoadingIndicator();return App.$ModalFactory.closeStack()},App.EmailModalView.SUCCESSFUL_SHARE_CLOSE_DELAY)};c.prototype.clearCloseTimer=function(){return clearTimeout(this.close_timer)};c.prototype.showSocialShareModal=function(d){d.preventDefault();d.stopPropagation();return this.factory.add("share",{model:this.model})};c.prototype.showSuccessMessage=function(){var d=this;if(this.loading_indicator!=null){this.$success_box=$(Handlebars.templates.share_success_message({bitmark:this.model.toJSON(),
share_type:"social",accounts:this.user.get("accounts")}));this.$el.removeClass("is-loading");this.loading_indicator.el.addClass("is-successful").append(this.$success_box);return this.$success_box.hover(function(){return d.clearCloseTimer()},function(){return d.startCloseTimer()})}};c.prototype.onRender=function(){this.user.isVerified()&&this.$email_picker.find(".picker-input").focus();return this.taborder=new App.Lib.Taborder(this.el,{focus:[".picked-item .remove",".picker-input",".email-message",
".send-email-btn",".modal-actions .cancel"]})};c.prototype.onClose=function(){var d,b;if((d=this.taborder)!=null)d.unbindEvents();if((d=this.multi_picker)!=null)d.close();return(b=this.share_message)!=null?b.close():void 0};c.prototype.onSuccess=function(){this.$submit_btn.removeClass("is-loading is-disabled");this.showSuccessMessage();return this.startCloseTimer()};c.prototype.onError=function(){return this.clearLoadingIndicator()};return c}(App.ShareModalView)}).call(this);(function(){var o,f=function(c,d){return function(){return c.apply(d,arguments)}},l={}.hasOwnProperty,i=function(c,d){function b(){this.constructor=c}for(var h in d)if(l.call(d,h))c[h]=d[h];b.prototype=d.prototype;c.prototype=new b;c.__super__=d.prototype;return c},g=[].indexOf||function(c){for(var d=0,b=this.length;d<b;d++)if(d in this&&this[d]===c)return d;return-1};App.EditorDialogView=function(c){function d(){this.setTabOrder=f(this.setTabOrder,this);this.render=f(this.render,this);this.closeDialog=
f(this.closeDialog,this);this.highlightField=f(this.highlightField,this);return o=d.__super__.constructor.apply(this,arguments)}i(d,c);d.prototype.initialize=function(b){var h=this;this.user=App.$User;this.field=b.field;switch(this.field){case "title":this.title="Edit title";this.type="text";break;case "note":this.title=""+(this.model.get("note")?"Edit":"Add")+" note";this.type="textarea";break;case "customize":this.title="Customize bitly link";this.type="text"}this.on("closed",function(){return h.taborder.unbindEvents()});
return this.on("render",this.setTabOrder)};d.prototype.events={"click .dialog-actions .cancel":"closeDialog",submit:"updateField","click .dialog-actions .dialog-save-btn":"submitForm"};d.prototype.highlightField=function(){return this.$field.select().focus()};d.prototype.submitForm=function(b){b.preventDefault();b.stopPropagation();if(!$(b.currentTarget).hasClass("is-disabled"))return this.$el.submit()};d.prototype.updateField=function(b){var h,m=this;b.preventDefault();h={edit:this.field,link:this.model.shortLink()};
b=this.$(".dialog").serializeArray();if(b.length)h[this.field]=b[0].value;if(this.field==="customize"){if(this.$save_btn.hasClass("is-disabled"))return this.close();return this.model.customizeKeyword(h.customize).done(function(){return m.close()}).fail(function(v){m.$input_wrapper.find(".error-message").text(v.message);return m.$input_wrapper.addClass("has-error")})}else{this.model.update(h);return this.close()}};d.prototype.closeDialog=function(b){b.preventDefault();b.stopPropagation();return this.close()};
d.prototype.render=function(){var b,h,m=this;this.$el.html(Handlebars.templates.editor_dialog({field:this.field,value:this.field==="customize"?this.model.hash():this.model.get(this.field),title:this.title,type:this.type,bitmark:this.model,original_domain:this.model.domain(),custom_domain:this.user.customDomain()}));this.$field=this.$(".dialog-edit-field");this.$input_wrapper=this.$(".dialog-input-wrapper");this.$save_btn=this.$(".dialog-save-btn");this.$error_message=this.$(".error-message");h="oninput"in
window?"input":"propertychange";b=_.once(function(){var v;v=m.model.domain();if(v!==m.user.customDomain()&&g.call(m.user.domainOptions(),v)<0)return m.$(".customize-domain").html("bit.ly/")});this.$field.bind(h,function(){var v;m.$input_wrapper.removeClass("has-error");v=m.$field.val().trim();m.$save_btn.toggleClass("is-disabled",v===m.model.get("keyword")||v===m.model.get("user_hash"));if(m.field==="customize")return b()});return this.$el};d.prototype.setTabOrder=function(){return this.taborder=
new App.Lib.Taborder(this.el,{focus:[".dialog-edit-field",".dialog-save-btn",".dialog-actions .cancel"]})};return d}(Backbone.View)}).call(this);(function(){var o,f={}.hasOwnProperty,l=function(i,g){function c(){this.constructor=i}for(var d in g)if(f.call(g,d))i[d]=g[d];c.prototype=g.prototype;i.prototype=new c;i.__super__=g.prototype;return i};App.SaveSettingsView=function(i){function g(){return o=g.__super__.constructor.apply(this,arguments)}l(g,i);g.prototype.className="dialog save-settings";g.prototype.initialize=function(){return this.user=App.$User};g.prototype.events=function(){return{"click #settings-done":"closeSettings","change #enable-one-click":"toggleOneClick",
"change input[name=default-privacy]":"toggleDefaultPrivacy","click #settings-sign-out":"triggerSignOut"}};g.prototype.render=function(){this.$el.html(Handlebars.templates.save_settings(this.user.toJSON()));this.$enable_one_click=this.$("#enable-one-click");this.$default_privacy=this.$("#default-privacy");return this.$el};g.prototype.closeSettings=function(c){c.preventDefault();c.stopPropagation();return this.close()};g.prototype.toggleOneClick=function(){return this.user.savePreference("one_click_save",
Number(this.$enable_one_click.get(0).checked))};g.prototype.toggleDefaultPrivacy=function(c){return this.user.savePreference("history_privacy",parseInt($(c.currentTarget).val(),10)?"public":"private")};g.prototype.triggerSignOut=function(c){c.preventDefault();typeof chrome!=="undefined"&&chrome!==null&&chrome.extension&&App.$ModalFactory.closeStack();return App.Dispatch.trigger("user:sign_out_intent")};return g}(Backbone.View)}).call(this);(function(){var o,f=function(g,c){return function(){return g.apply(c,arguments)}},l={}.hasOwnProperty,i=function(g,c){function d(){this.constructor=g}for(var b in c)if(l.call(c,b))g[b]=c[b];d.prototype=c.prototype;g.prototype=new d;g.__super__=c.prototype;return g};App.SaveModalView=function(g){function c(){this.onRender=f(this.onRender,this);this.render=f(this.render,this);this.showInsights=f(this.showInsights,this);this.showSocialShare=f(this.showSocialShare,this);this.renderClickHistory=f(this.renderClickHistory,
this);this.calculateInsights=f(this.calculateInsights,this);this.generateClicks=f(this.generateClicks,this);return o=c.__super__.constructor.apply(this,arguments)}i(c,g);c.prototype.initialize=function(){c.__super__.initialize.apply(this,arguments);this.user=App.$User;return this.calculateInsights()};c.prototype.close_on_outside_click=true;c.prototype.className="modal save-modal";c.prototype.elements={".bm-info":"$bitmark_info",".modal-contents":"$contents"};c.prototype.events=function(){var d=this;
return _.extend(c.__super__.events.apply(this,arguments),{"click .settings-link":"showSettings","click .bitmark-social-share-action":function(b){b.preventDefault();App.Dispatch.trigger("UI.Insight.Share:click");return d.showSocialShare()}})};c.prototype.generateClicks=function(d,b){var h,m,v,w,s,A,D,y;m=b;h=[];switch(d){case "hour":D=60;A="minute";break;case "day":D=24;A="hour";break;case "week":D=7;A="day";break;case "month":D=30;A="day";break;case "year":D=12;A="month";break;case "four_years":D=
48;A="month"}s=moment().startOf(A);for(v=y=0;0<=D?y<D:y>D;v=0<=D?++y:--y){if(v===D-1)w=m;else{w=Math.min(_.random(Math.ceil(b*2/D))+_.random(0,3),m);m-=w}h.push({clicks:w,dt:+moment(s).subtract(A,v)})}return{period:d,unit:A,total:b,global_total:Math.floor(b*(1/0.9)),clicks:h}};c.prototype.calculateInsights=function(){var d=this;return $.when(this.model.getClicks(),this.model.getSaves()).done(function(){return d.model.get("saves")<=1?d.showInsights(Handlebars.templates.first_save_insight):d.model.get("global_clicks")===
0?d.showInsights(Handlebars.templates.no_clicks_insight):d.model.getClickHistory().done(function(b){_(b.data.clicks).map(function(h){return h.dt*=1E3});return d.renderClickHistory(b)})})};c.prototype.renderClickHistory=function(d,b){var h=this;b=d.data.period==="hour"?d.data.total>=36?Handlebars.templates.hot_link_insight:Handlebars.templates.some_traffic_insight:Handlebars.templates.historical_traffic_insight;return _.defer(function(){return h.showInsights(b,d.data)})};c.prototype.showSocialShare=
function(){return App.$ModalFactory.add("share",{model:this.model,preserve_previous_modal:true,no_transition:true})};c.prototype.showInsights=function(d,b){var h=this;if(b==null)b={};this.insights=new App.InsightsView({model:this.model,template:d,data:b});this.$contents.append(this.insights.render());return _.defer(function(){h.bitmarkItem.highlightInitialShortlink();return h.$(".settings-link").removeClass("is-hidden")})};c.prototype.render=function(){var d;d=this.model.toJSON();if(d.ts!=null&&d.ts!==
0)d.created_date=moment(d.ts*1E3).format("MMMM D");this.html(Handlebars.templates.modal_save({heading:"Save...",bitmark:d,user:this.user?this.user.toJSON():void 0,timeAgo:this.model.toTemplate().ts}));this.model.set("created_by",{login:App.$User.get("user")});this.bitmarkItem=new App.BitmarkItemView({model:this.model,modal:true});this.$contents.append(this.bitmarkItem.render());return this.$el};c.prototype.showSettings=function(){if(!this.$el.children().last().hasClass("save-settings")){this.settings=
new App.SaveSettingsView;return this.$el.append(this.settings.render())}};c.prototype.onClose=function(){var d;this.bitmarkItem.close();if((d=this.editor)!=null)d.close();if((d=this.settings)!=null)d.close();return App.$ModalFactory.closeAllPopups()};c.prototype.onRender=function(){return this.taborder=new App.Lib.Taborder(this.el,{focus:[".shortlink",".bm-title",".metadata-actions .note-action",".metadata-actions .bundle-action",".metadata-actions .privacy-action",".bitmark-share-email",".bitmark-share-social",
".global-stats",".user-stats"]})};return c}(App.ModalView)}).call(this);(function(){var o,f=function(g,c){return function(){return g.apply(c,arguments)}},l={}.hasOwnProperty,i=function(g,c){function d(){this.constructor=g}for(var b in c)if(l.call(c,b))g[b]=c[b];d.prototype=c.prototype;g.prototype=new d;g.__super__=c.prototype;return g};App.ConfirmSaveModalView=function(g){function c(){this.onRender=f(this.onRender,this);this.saveBitmark=f(this.saveBitmark,this);this.render=f(this.render,this);return o=c.__super__.constructor.apply(this,arguments)}i(c,g);c.prototype.initialize=
function(){c.__super__.initialize.apply(this,arguments);this.model.on("change:title",this.updateTitle,this);return this.note_has_been_edited=false};c.prototype.className="modal confirm-save-modal";c.prototype.events=function(){return _.extend(c.__super__.events.apply(this,arguments),{"submit #bm-confirm-save":"saveBitmark","input #bm-note":"updateNoteLength","click .settings-link":"showSettings","keydown #bm-note":"checkFormSubmit"})};c.prototype.render=function(){var d;d=this.model.toJSON();this.$el.html(Handlebars.templates.modal_confirm_save({heading:"Save...",
bitmark:d}));this.$bm_note=this.$("#bm-note");this.$bm_note_pre=this.$(".bm-note-fieldset pre");this.$bm_title=this.$("#bm-title");return this.$bm_privacy=this.$("#bm-privacy")};c.prototype.updateTitle=function(){if(!this.$bm_title.val())return this.$bm_title.val(this.model.get("title"))};c.prototype.updateNoteLength=function(){this.$bm_note_pre.html(document.createTextNode(this.$bm_note.val()));return this.note_has_been_edited=true};c.prototype.checkFormSubmit=function(d){if(!this.note_has_been_edited){this.note_has_been_edited=
true;if((d!=null?d.keyCode:void 0)===13){d.preventDefault();return this.$("#bm-confirm-save").submit()}}};c.prototype.saveBitmark=function(d){d.preventDefault();this.model.set("note",this.$bm_note.val());this.model.set("title",this.$bm_title.val());this.model.set("private",this.$bm_privacy.get(0).checked);return this.model.save()};c.prototype.showSettings=function(){return this.$el.append((new App.SaveSettingsView).render())};c.prototype.onRender=function(){this.taborder=new App.Lib.Taborder(this.el,
{focus:["#bm-title","#bm-note","#bm-privacy",".confirm-save-btn",".close"]});if(this.model.get("note")){BITLY.util.setCaretPosition(this.$bm_note,-1);this.$bm_note[0].scrollTop=99999}return this.$bm_note.focus().select()};return c}(App.ModalView)}).call(this);(function(){var o,f={}.hasOwnProperty,l=function(i,g){function c(){this.constructor=i}for(var d in g)if(f.call(g,d))i[d]=g[d];c.prototype=g.prototype;i.prototype=new c;i.__super__=g.prototype;return i};App.FacebookPreviewView=function(i){function g(){return o=g.__super__.constructor.apply(this,arguments)}l(g,i);g.prototype.MAX_FACEBOOK_MESSAGE_LENGTH=280;g.prototype.elements={".message":"$message",".desc":"$desc",".caption":"$caption",".title":"$title",".thumb-selector":"$thumb_selector",".preview-box":"$preview_box"};
g.prototype.initialize=function(c){this.user=App.$User;this.message=c.message;this.model.on("facebook_preview:success",this.showPreview,this);this.model.on("facebook_preview:error",this.showMissingPreview,this);this.model.on("has_thumbnails",this.showPreviewBox,this);this.user.on("change:has_facebook_enabled",this.togglePreview,this);return this.user.on("change:accounts",this.update,this)};g.prototype.showPreviewBox=function(){return this.$preview_box.removeClass("is-hidden")};g.prototype.showMissingPreview=
function(){this.preview_fetched=true;this.$preview_box.find(".wrapper").html('<span class="no-preview">Hmm\u2026 We couldn\'t fetch a preview from Facebook. Bummer.</span>');return this.$preview_box.removeClass("is-hidden")};g.prototype.showPreview=function(c){this.preview_fetched=true;this.$preview_box.removeClass("is-hidden");this.$el.removeClass("is-hidden");this.$desc.text(c.description.truncateWords(144));this.$caption.text(c.caption);return this.$title.html('<a href="'+this.model.get("link")+
'">'+c.name.truncateWords(66)+"</a>")};g.prototype.togglePreview=function(c,d){var b;this.$el.parents(".share-network").toggleClass("is-inactive",!d);if((b=this.$preview_box)!=null)b.toggleClass("is-hidden",!d);this.$el.toggleClass("is-hidden",!d);if(d)return this.update()};g.prototype.update=function(){if(this.user.get("has_facebook_enabled")){this.updateUserMessage(this.message);if(!this.preview_fetched){this.model.getThumbnails();return this.model.getFacebookPreview()}}};g.prototype.updateUserMessage=
function(c,d){var b,h;h="text";if(c.length)this.message=b=d||c;else{b=this.defaultShareMessage();h="html";this.message=""}b=b.slice(0,this.MAX_FACEBOOK_MESSAGE_LENGTH);if(b.length===this.MAX_FACEBOOK_MESSAGE_LENGTH)b+="\u2026";if(this.user.get("has_facebook_enabled"))return this.$message[h](b)};g.prototype.defaultShareMessage=function(){return Handlebars.templates.default_facebook_message({name:this.user.defaultFacebookName(),link:this.model.get("link")})};g.prototype.stripShortlink=function(c){return c.replace(this.model.get("link"),
"").replace(this.model.get("keyword_link"),"")};g.prototype.render=function(){this.html(Handlebars.templates.share_facebook_preview());this.thumbnail_selector=new App.ThumbnailSelectorView({el:this.$thumb_selector,model:this.model});this.thumbnail_selector.render();this.update();this.share_message=new App.ShareMessageView({el:this.$(".share-message"),model:this.model,modal_type:"social",network:"facebook",message:"",placeholder:"Say something about this..."});this.share_message.render();this.$preview_box=
this.$(".preview-box");return this.$el};return g}(App.BaseView)}).call(this);(function(){var o,f=function(g,c){return function(){return g.apply(c,arguments)}},l={}.hasOwnProperty,i=function(g,c){function d(){this.constructor=g}for(var b in c)if(l.call(c,b))g[b]=c[b];d.prototype=c.prototype;g.prototype=new d;g.__super__=c.prototype;return g};App.TwitterPreviewView=function(g){function c(){this.update=f(this.update,this);return o=c.__super__.constructor.apply(this,arguments)}i(c,g);c.prototype.MAX_TWITTER_MESSAGE_LENGTH=140;c.prototype.DEFAULT_TCO_LINK_LENGTH=22;c.prototype.message_too_long=
false;c.prototype.numExtraTcoLinks=0;c.prototype.extraTcoLinkText="";c.prototype.extraTcoLengthMessage="";c.prototype.initialize=function(d){if(!this.model)throw Error("Missing Argument (model)");if(d.message==null)throw Error("Missing Argument (message)");if(d.shortLinkRegex==null)throw Error("Missing Argument (shortLinkRegex)");this.message=d.message;this.shortLinkRegex=d.shortLinkRegex;this.user=App.$User;this.IS_SECURE=this.model.shortLink().indexOf("https")===0?1:0;this.TCO_LENGTH=this.DEFAULT_TCO_LINK_LENGTH+
this.IS_SECURE;this.user.on("change:has_twitter_enabled",this.togglePreview,this);return this.togglePreview(this.user,this.user.get("has_twitter_enabled"))};c.prototype.togglePreview=function(d,b){var h=this;this.$el.parents(".share-network").toggleClass("is-inactive",!b);this.$el.toggleClass("is-hidden",!b);if(b){this.update();return _.defer(function(){return h.selectText()})}};c.prototype.update=function(d,b,h){if(d==="")this.message=this.model.shortLink();else if(h)this.message=h;if(this.user.get("has_twitter_enabled"))return this._messageChecks()};
c.prototype._messageChecks=function(){this._updateCharacterCount();this._checkExtraTcoLinkMessageDisplay();return this._checkMessageTooLong()};c.prototype._updateLinkMatches=function(){return this.linkMatches=BITLY.util.validateUrl(this.message)||[]};c.prototype._updateCharacterCount=function(){var d;this._updateLinkMatches();d=this.linkMatches.join("");this.characterCount=this.MAX_TWITTER_MESSAGE_LENGTH-(this.message.length-d.length+this.linkMatches.length*this.DEFAULT_TCO_LINK_LENGTH+(d.match(/https:\/\//)||
[]).length);return this.$(".share-char-counter .count").text(this.characterCount)};c.prototype._checkExtraTcoLinkMessageDisplay=function(){var d,b,h,m;m=this.model.shortLink();b=_.filter(this.linkMatches,function(v){return v!==m});h=b.length;d=b.join(", ");if(this.numExtraTcoLinks!==h){this.numExtraTcoLinks=h;this.$el.toggleClass("has-extra-tco-links",!!this.numExtraTcoLinks)}if(d!==this.extraTcoLinkText){this.extraTcoLinkText=d;b=b.length>1?["additional links","t.co links"]:["an additional link",
"a t.co link"];this.extraTcoLengthMessage="Your tweet contains "+b[0]+" ("+d+") that will be converted to "+b[1]+" by twitter, changing the length of your message";return this.$(".share-char-counter .extra-tco-message").text(this.extraTcoLengthMessage)}};c.prototype._checkMessageTooLong=function(){if(!this.message_too_long&&this.characterCount<0||this.message_too_long&&this.characterCount>=0){this.message_too_long=!this.message_too_long;this.$el.toggleClass("is-too-long-for-twitter",this.message_too_long);
return this.trigger("twitterInvalid",this.message_too_long)}};c.prototype._htmlMessage=function(d){var b,h=this;d=Handlebars.Utils.escapeExpression(d);b=this.model.shortLink()||this.user.shortLinkPlaceholder();return d=d.replace(this.shortLinkRegex,function(m){var v;v=h.model.shortLink()||"We'll make a unique bitly link for this bundle when you complete the share.";return m.replace(b,'<span title="'+v+'" class="shortLink">'+b+"</span>")})};c.prototype.selectText=function(){if(this.user.get("has_twitter_enabled")&&
this.share_message!=null)return this.share_message.selectTitle()||this.share_message.selectShareMessage()};c.prototype.render=function(){var d,b=this;d={characterCount:this.characterCount,message:this._htmlMessage(this.message),extraTcoLengthMessage:this.extraTcoLengthMessage};this.$el.html(Handlebars.templates.share_twitter_preview(d));this.share_message=new App.ShareMessageView({el:this.$(".share-message"),model:this.model,modal_type:"social",network:"twitter",default_message:true});this.share_message.on("ShareMessage:update",
this.update,this);this.share_message.render();return _.defer(function(){return b.selectText()})};return c}(Backbone.View)}).call(this);(function(){var o,f=function(g,c){return function(){return g.apply(c,arguments)}},l={}.hasOwnProperty,i=function(g,c){function d(){this.constructor=g}for(var b in c)if(l.call(c,b))g[b]=c[b];d.prototype=c.prototype;g.prototype=new d;g.__super__=c.prototype;return g};App.ShareMessageView=function(g){function c(){this.guaranteeShortlink=f(this.guaranteeShortlink,this);return o=c.__super__.constructor.apply(this,arguments)}i(c,g);c.prototype.initialize=function(d){var b,h;this.user=App.$User;this.modal_type=
d.modal_type;this.shortLinkRegex=d.shortLinkRegex||RegExp("(?:^|\\s)"+(this.model.shortLink()||this.user.shortLinkPlaceholder())+"(?:\\s|$)","gi");this.message=d.default_message?this.guaranteeShortlink(this._defaultMessage()):d.message||"";this.previousShare=(b=this.model.get("shares"))!=null?(h=b[0])!=null?h.text:void 0:void 0;this.modified=false;this.network=d.network;return this.placeholder=d.placeholder};c.prototype.events={"focusin .textarea-message":"hidePlaceholder","focusout .textarea-message.is-modified":"showPlaceholder",
"input .textarea-message":"updatePlaceholder","keyup .textarea-message":"blurOnEscape","click .placeholder-share":"usePreviousShare","click .placeholder-note":"useNote","click .textarea-placeholder":"focusTextarea"};c.prototype.showPlaceholder=function(d){if($(d.currentTarget).val().length===0&&this.$placeholder.hasClass("is-hidden")){this.$placeholder.removeClass("is-hidden");return this.trigger("placeholder_shown")}};c.prototype.hidePlaceholder=function(){if(!this.$placeholder.hasClass("is-hidden")){this.$placeholder.addClass("is-hidden");
return this.trigger("placeholder_hidden")}};c.prototype.focusTextarea=function(){return this.$textarea.focus()};c.prototype.updatePlaceholder=function(d){var b;if(!this.modified){d=$(d.currentTarget);b=this.message.length;this.message=d.val();if(this.message.length!==b){this.modified=true;return d.addClass("is-modified")}}};c.prototype.blurOnEscape=function(d){if(d.keyCode===27)return $(d.target).blur()};c.prototype.usePreviousShare=function(d){d.stopPropagation();d.preventDefault();this.$(".textarea-placeholder").addClass("is-hidden");
return this.$(".textarea-message").val(this.previousShare).focus().select().trigger("input")};c.prototype.useNote=function(d){d.stopPropagation();d.preventDefault();this.$placeholder.addClass("is-hidden");return this.$textarea.val(this.model.get("note")).focus().select().trigger("input")};c.prototype.selectTitle=function(){var d,b;this.$textarea.focus();b=this._defaultMessage().replace(this.model.shortLink(),"").trim();if(this.$textarea.val().search(b)===-1)return false;else{(d=this.$textarea.get(0))&&
BITLY.util.setSelected(d,0,b.length);return true}};c.prototype.selectShareMessage=function(){this.$textarea.focus();if(this.$textarea.val())return this.$textarea.select()};c.prototype.guaranteeShortlink=function(d){d.match(this.shortLinkRegex)||(d+=" "+this.model.shortLink());return d};c.prototype._defaultMessage=function(){return this.previousShare||this.model.get("note")||this.model.get("title")||"From "+Handlebars.helpers.domainFromUrl(this.model.get("url"))+":"};c.prototype.getMessage=function(){return this.$textarea.val()};
c.prototype.onInput=function(){var d,b,h;d=(h=this.getMessage())||this._defaultMessage();b=this.guaranteeShortlink(d);return this.trigger("ShareMessage:update",h,d,b)};c.prototype.render=function(){var d=this;this.$el.html(Handlebars.templates.share_message({previousShare:this.previousShare,modal_type:this.modal_type,bitmark:this.model.toJSON(),message:this.message,network:this.network,placeholder:this.placeholder||"Include a message?"}));this.$placeholder=this.$(".textarea-placeholder");this.$textarea=
this.$(".textarea-message");this.input_event="oninput"in window?"input":"propertychange";this.$textarea.bind(this.input_event,function(){return d.onInput()});this.onInput();return this.$el};return c}(Backbone.View)}).call(this);(function(){var o,f={}.hasOwnProperty,l=function(i,g){function c(){this.constructor=i}for(var d in g)if(f.call(g,d))i[d]=g[d];c.prototype=g.prototype;i.prototype=new c;i.__super__=g.prototype;return i};App.SocialShareModalView=function(i){function g(){return o=g.__super__.constructor.apply(this,arguments)}l(g,i);g.SUCCESSFUL_SHARE_CLOSE_DELAY=2E3;g.prototype.initialize=function(){g.__super__.initialize.apply(this,arguments);this.user=App.$User;this.model.on("share:success",this.onSuccess,this);this.model.on("share:error",
this.onError,this);this.user.on("change:accounts",this.updateAccounts,this);this.user.on("shareAccounts:new",this.addAccounts,this);return this.shortLinkRegex=RegExp("(?:^|\\s)"+(this.model.shortLink()||this.user.shortLinkPlaceholder())+"(?:\\s|$)","gi")};g.prototype.className="modal share-modal";g.prototype.elements={".share-network-facebook .share-preview":"$facebook_preview",".share-network-twitter .share-preview":"$twitter_preview",".share-btn":"$submit_btn",".social-message":"$social_message",
".bm-info":"$bitmark_info"};g.prototype.events=function(){return _.extend(g.__super__.events.apply(this,arguments),{"click .share-network-header":"toggleAllAccountsForNetwork","change .share-account-checkbox":"toggleShareAccount","click .share-btn":"submitShare","click .add-new-account":"showNewAccountOptions","click .add-facebook-account":function(){return App.oauth.connect("facebook")},"click .add-twitter-account":function(){return App.oauth.connect("twitter")},"click #save-privacy":"toggleSavePrivacy",
"click .share-success-message .btn":"showEmailShareModal"})};g.prototype.toggleSavePrivacy=function(c){c.preventDefault();c=$(c.target);if(c.data("privacy")){c.data("privacy",0);return c.html("public")}else{c.data("privacy",1);return c.html("private")}};g.prototype.toggleAllAccountsForNetwork=function(c){var d;c.preventDefault();c=$(c.currentTarget).closest(".share-network").find(".share-account-checkbox");d=c.filter(function(){return!this.checked});return d.length?d.trigger("click"):c.trigger("click")};
g.prototype.showNewAccountOptions=function(c){var d=this;c.preventDefault();if(this.$(".add-account-popup").length)return false;this.$(".add-new-account").append(Handlebars.templates.add_account_popup());this.add_account_taborder=new App.Lib.Taborder(this.$(".add-new-account"),{focus:[".add-facebook-account",".add-twitter-account"]});return this.$el.bind("click.popup",function(b){if($(b.currentTarget).filter(".add-facebook-account,.add-twitter-account").length===0){d.$el.unbind("click.popup");b.stopPropagation();
d.$(".add-account-popup").remove();return d.add_account_taborder.unbindEvents()}})};g.prototype.updateAccounts=function(){var c;c={has_facebook_enabled:this.user.get("has_facebook_enabled"),has_twitter_enabled:this.user.get("has_twitter_enabled")};this.$(".share-btn").html(Handlebars.templates.share_button(c));this.$submit_btn=this.$(".share-btn");return this.validate()};g.prototype.validate=function(){var c;c=this.user.get("has_twitter_enabled")&&this.twitter_preview.message_too_long;if(this.$submit_btn.hasClass("is-disabled")){if(this.user.hasEnabledAccounts()&&
!c){this.enableSubmit();return true}}else if(!this.user.hasEnabledAccounts()||c){this.disableSubmit();return false}};g.prototype.enableSubmit=function(){return this.$submit_btn.removeClass("is-disabled")};g.prototype.disableSubmit=function(){return this.$submit_btn.addClass("is-disabled")};g.prototype.addAccounts=function(c){var d,b,h,m,v;this.$(".preview-wrapper.is-only").removeClass("is-only").find(".share-account-checkbox").removeAttr("disabled");m=0;for(v=c.length;m<v;m++){b=c[m];d=b.account_type;
d=this.$(".share-network-"+d);h=d.find(".share-account").length;d.find(".share-accounts").append(Handlebars.templates.share_account(b));h===0&&d.removeClass("is-hidden")}return this.taborder.bind()};g.prototype.toggleShareAccount=function(c){c=$(c.currentTarget);c.closest(".share-account").toggleClass("is-selected");return this.user.toggleShareAccount({account_login:String(c.data("login")),account_type:c.data("type"),enabled:c.get(0).checked})};g.prototype.submitShare=function(c){c.preventDefault();
if(!$(c.target).hasClass("is-disabled"))return this.model.get("link")?this._submitShare():this._saveThenShare()};g.prototype._submitShare=function(){var c,d,b;c=this.$(".share-account-checkbox");d=c.filter(function(){return this.checked&&$(this).data("type")==="twitter"}).map(function(){return $(this).data("account-id")}).get();c=c.filter(function(){return this.checked&&$(this).data("type")==="facebook"}).map(function(){return $(this).data("account-id")}).get();b={};if(d.length)b.twitter={account_id:d,
share_text:this.twitter_preview.share_message.getMessage()};if(c.length){b.facebook={account_id:c,share_text:this.facebook_preview.share_message.getMessage()};if(this.model.get("thumbnail"))b.facebook.fb_picture=this.model.get("thumbnail")}this.model.share(b);return this.setLoadingIndicator()};g.prototype._saveThenShare=function(){var c,d,b=this;c=this.$social_message.val();d=!!this.$("#save-privacy").data("privacy");this.model.set("note",c);this.model.set("private",d);c=this.model.save();this.setLoadingIndicator();
return c.done(function(){return b._submitShare()})};g.prototype.render=function(){this.html(Handlebars.templates.modal_social_share({bitmark:this.model.toJSON(),total_accounts:this.user.get("share_accounts").length,accounts:this.user.get("accounts"),has_facebook_enabled:this.user.get("has_facebook_enabled"),has_twitter_enabled:this.user.get("has_twitter_enabled")}));this.refreshElements();this.bitmark_info=new App.BitmarkInfoView({el:this.$bitmark_info,model:this.model,mode:"share"});this.facebook_preview=
new App.FacebookPreviewView({el:this.$facebook_preview,model:this.model,message:""});this.facebook_preview.render();this.twitter_preview=new App.TwitterPreviewView({el:this.$twitter_preview,model:this.model,message:"",shortLinkRegex:this.shortLinkRegex});this.twitter_preview.on("twitterInvalid",this.validate,this);this.twitter_preview.render();this.twitter_preview.share_message.on("placeholder_shown placeholder_hidden",function(){var c;return(c=this.taborder)!=null?c.bind():void 0},this);return this.$el};
g.prototype.onRender=function(){return this.taborder=new App.Lib.Taborder(this.el,{focus:[".placeholder-choice",".social-message",".share-account-checkbox",".share-btn",".modal-actions .cancel",".add-new-account"]})};g.prototype.startCloseTimer=function(){var c=this;return this.close_timer=_.delay(function(){c.clearLoadingIndicator();return App.$ModalFactory.closeStack()},App.SocialShareModalView.SUCCESSFUL_SHARE_CLOSE_DELAY)};g.prototype.clearCloseTimer=function(){return clearTimeout(this.close_timer)};
g.prototype.showSuccessMessage=function(){var c=this;if(this.loading_indicator!=null){this.$success_box=$(Handlebars.templates.share_success_message({bitmark:this.model.toJSON(),share_type:"email",accounts:[]}));this.$el.removeClass("is-loading");this.loading_indicator.el.addClass("is-successful").append(this.$success_box);return this.$success_box.hover(function(){return c.clearCloseTimer()},function(){return c.startCloseTimer()})}};g.prototype.showEmailShareModal=function(c){c.preventDefault();c.stopPropagation();
return this.factory.add("email",{model:this.model})};g.prototype.onClose=function(){var c,d;if((c=this.taborder)!=null)c.unbindEvents();if((c=this.user)!=null)c.off(null,null,this);if((c=this.facebook_preview)!=null)c.close();return(d=this.twitter_preview)!=null?d.close():void 0};g.prototype.onSuccess=function(){this.$submit_btn.removeClass("is-loading is-disabled");this.showSuccessMessage();return this.startCloseTimer()};g.prototype.onError=function(){return this.clearLoadingIndicator()};return g}(App.ShareModalView)}).call(this);(function(){var o,f={}.hasOwnProperty,l=function(i,g){function c(){this.constructor=i}for(var d in g)if(f.call(g,d))i[d]=g[d];c.prototype=g.prototype;i.prototype=new c;i.__super__=g.prototype;return i};App.ConnectAccountsModalView=function(i){function g(){return o=g.__super__.constructor.apply(this,arguments)}l(g,i);g.prototype.initialize=function(){g.__super__.initialize.apply(this,arguments);this.user=App.$User;return this.user.on("shareAccounts:new",this.showSocialShareModal,this)};g.prototype.className=
"modal connect-accounts-modal";g.prototype.events=function(){return _.extend(g.__super__.events.apply(this,arguments),{"click .social-btn[data-network]":"connectNetwork","click .share-email":"showEmailShareModal"})};g.prototype.connectNetwork=function(c){c.preventDefault();return App.oauth.connect($(c.target).data("network"))};g.prototype.showEmailShareModal=function(c){c.preventDefault();return this.factory.add("email",{model:this.model})};g.prototype.showSocialShareModal=function(){return this.factory.add("share",
{model:this.model})};g.prototype.render=function(){return this.$el.html(Handlebars.templates.modal_connect_accounts({heading:"Share...",bitmark:this.model.toJSON()}))};return g}(App.ModalView)}).call(this);(function(){var o,f=function(g,c){return function(){return g.apply(c,arguments)}},l={}.hasOwnProperty,i=function(g,c){function d(){this.constructor=g}for(var b in c)if(l.call(c,b))g[b]=c[b];d.prototype=c.prototype;g.prototype=new d;g.__super__=c.prototype;return g};App.ShareErrorModalView=function(g){function c(){this.retryAll=f(this.retryAll,this);this.retrySingle=f(this.retrySingle,this);this.onSuccess=f(this.onSuccess,this);return o=c.__super__.constructor.apply(this,arguments)}i(c,g);c.prototype.initialize=
function(d){c.__super__.initialize.apply(this,arguments);this.share_params=d.share_params;App.Dispatch.on("bitmark:retry_share",this.retryAll,this);App.Dispatch.on("App.Oauth:success",this.retryAll,this);return this.model.on("share:success",this.onSuccess,this)};c.prototype.className="modal error-state clearfix";c.prototype.render=function(){var d,b,h;return this.$el.html(Handlebars.templates.modal_share_error({errors:(d=this.options.errors)!=null?d:[],successes:(b=this.options.successes)!=null?b:
[],unrecoverable_errors:(h=this.options.unrecoverable_errors)!=null?h:[]}))};c.prototype.events=function(){return _.extend(c.__super__.events.apply(this,arguments),{"click .retry-share":"retryShare"})};c.prototype.closeModal=function(){c.__super__.closeModal.call(this);return this.model.clearShareStatus()};c.prototype.onSuccess=function(){var d=this;return _.delay(function(){return d.closeModal()},2E3)};c.prototype.retryShare=function(d){var b;d.preventDefault();d.stopPropagation();b=$(d.currentTarget);
if(!b.closest("li").hasClass("is-retrying")){d=b.data("account");b=b.data("account_type");return d&&b?this.retrySingle({account_id:d,account_type:b}):this.retryAll()}};c.prototype.retrySingle=function(d){var b,h,m,v,w;this.$("[data-account="+d.account_id+"]").closest("li").addClass("is-retrying");h={};h[d.account_type]=this.share_params[d.account_type];w=this.options.errors;m=0;for(v=w.length;m<v;m++){b=w[m];if(d.account_id===b.account_id||b.email===d.account_id)h[d.account_type].account_id=b.account_id}return this.model.share(h)};
c.prototype.retryAll=function(){var d,b,h,m,v,w;this.$("ul.errors li").addClass("is-retrying");this.$el.addClass("is-retrying");d={};m={};w=this.options.errors;h=0;for(v=w.length;h<v;h++){b=w[h];b.account_type in d||(d[b.account_type]=[]);d[b.account_type].push(b.account_id)}h=v=0;for(w=d.length;v<w;h=++v){b=d[h];m[b]=this.share_params[b];m[b].account_id=h}return this.model.share(m)};return c}(App.ModalView)}).call(this);(function(){var o,f=function(g,c){return function(){return g.apply(c,arguments)}},l={}.hasOwnProperty,i=function(g,c){function d(){this.constructor=g}for(var b in c)if(l.call(c,b))g[b]=c[b];d.prototype=c.prototype;g.prototype=new d;g.__super__=c.prototype;return g};App.OauthTokenShareErrorModalView=function(g){function c(){this.onClose=f(this.onClose,this);this.onRender=f(this.onRender,this);return o=c.__super__.constructor.apply(this,arguments)}i(c,g);c.prototype.initialize=function(d){c.__super__.initialize.apply(this,
arguments);this.require("acct");this.user=App.$User;this.account=d.acct;App.Dispatch.on("App.Oauth:success",this.closeModal,this);return App.Dispatch.on("App.Oauth:error",this.stopLoading,this)};c.prototype.className="modal error-state token-error clearfix";c.prototype.render=function(){return this.$el.html(Handlebars.templates.modal_oauth_token_share_error(this.account))};c.prototype.events=function(){return _.extend(c.__super__.events.apply(this,arguments),{"click .connect-token-error":"removeAccount"})};
c.prototype.stopLoading=function(){return this.$(".connect-token-error").removeClass("is-loading")};c.prototype.removeAccount=function(d){var b;d.preventDefault();d.stopPropagation();b=$(d.currentTarget);if(!b.hasClass("is-loading")){b.addClass("is-loading");d=b.data("account_login");b=b.data("account_type");if(d&&b)return this.reconnectAccount(b)}};c.prototype.reconnectAccount=function(d){return App.oauth.connect(d)};c.prototype.retryShares=function(){return this.closeModal()};c.prototype.onRender=
function(){return this.taborder=new App.Lib.Taborder(this.el,{focus:[".connect-token-error",".contact a"]})};c.prototype.onClose=function(){return this.taborder.unbindEvents()};return c}(App.ModalView)}).call(this);(function(){var o,f=function(g,c){return function(){return g.apply(c,arguments)}},l={}.hasOwnProperty,i=function(g,c){function d(){this.constructor=g}for(var b in c)if(l.call(c,b))g[b]=c[b];d.prototype=c.prototype;g.prototype=new d;g.__super__=c.prototype;return g};App.ThumbnailSelectorView=function(g){function c(){this.onThumbLoad=f(this.onThumbLoad,this);return o=c.__super__.constructor.apply(this,arguments)}i(c,g);c.prototype.IMG_WIDTH=75;c.prototype.IMG_HEIGHT=75;c.prototype.SHIFT_WIDTH=85;c.prototype.initialize=
function(){this.thumbs=[];this.embedly_thumbs=[];return this.model.on("has_thumbnails",this.loadThumbs,this)};c.prototype.elements={".thumb-images":"$thumbs"};c.prototype.events={"click .thumb-prev.is-disabled, .thumb-next.is-disabled":"preventDefault","click .thumb-remove":"disableThumbnail","click .thumb-add":"enableThumbnail","click .thumb-prev:not(.is-disabled)":"prevThumbnail","click .thumb-next:not(.is-disabled)":"nextThumbnail"};c.prototype.render=function(){return this.html(Handlebars.templates.thumb_selector())};
c.prototype.loadThumbs=function(d){var b,h,m,v,w=this;h={};m=0;for(v=d.length;m<v;m++){b=d[m];if(!h[b.url]&&b.height>30&&b.width>30){h[b.url]=true;this.embedly_thumbs.push({src:this.model.normalizeURL(b.url)})}}this.total_thumbs=this.embedly_thumbs.length;this.$thumbs.append(Handlebars.templates.thumbnail_list_items({thumbnails:this.embedly_thumbs}));this.$(".thumb-list-img").load(this.onThumbLoad);return this.$(".thumb-list-img").each(function(s,A){return A.src=w.embedly_thumbs[s].src})};c.prototype.onThumbLoad=
function(d){d=$(d.currentTarget);this.thumbs.push(d.attr("src"));this.showThumbnail(d);this.adjustWidths(d);this.selected_thumb==null&&this.setThumbnail(0);this.thumbs.length>0&&this.$el.addClass("has-thumbnails");if(this.thumbs.length>1)return this.$el.addClass("has-nav")};c.prototype.showThumbnail=function(d){return d.removeClass("is-loading")};c.prototype.adjustWidths=function(d){var b;this.$thumbs.css("width",this.SHIFT_WIDTH*this.$(".thumb-list-img:not(.is-loading)").length);b=0.5*(this.IMG_WIDTH-
d.width());return d.css({"margin-left":b,"margin-right":b})};c.prototype.setThumbnail=function(d){this.selected_thumb=d;this.$(".thumb-prev").toggleClass("is-disabled",d===0);this.$(".thumb-next").toggleClass("is-disabled",d===this.total_thumbs-1);this.model.set("thumbnail",BITLY.util.extractEmbedlySrc(this.embedly_thumbs[d].src));return this.$el.addClass("is-thumbnail-set")};c.prototype.enableThumbnail=function(d){d.preventDefault();return this.setThumbnail(this.selected_thumb)};c.prototype.disableThumbnail=
function(d){d.preventDefault();this.model.unset("thumbnail");return this.$el.removeClass("is-thumbnail-set")};c.prototype.prevThumbnail=function(d){d.preventDefault();this.setThumbnail(--this.selected_thumb);return this.$thumbs.css("margin-left",-1*this.selected_thumb*this.SHIFT_WIDTH)};c.prototype.nextThumbnail=function(d){d.preventDefault();this.setThumbnail(++this.selected_thumb);return this.$thumbs.css("margin-left",-1*this.selected_thumb*this.SHIFT_WIDTH)};c.prototype.preventDefault=function(d){return d.preventDefault()};
return c}(App.BaseView)}).call(this);(function(){var o,f,l=function(c,d){return function(){return c.apply(d,arguments)}},i={}.hasOwnProperty,g=function(c,d){function b(){this.constructor=c}for(var h in d)if(i.call(d,h))c[h]=d[h];b.prototype=d.prototype;c.prototype=new b;c.__super__=d.prototype;return c};o={ESCAPE:27,ENTER:13};App.Partials.InlineForm=function(c){function d(){this.setTabOrder=l(this.setTabOrder,this);this.closeOnAnotherOpening=l(this.closeOnAnotherOpening,this);return f=d.__super__.constructor.apply(this,arguments)}g(d,
c);d.prototype.className="inline-form-container footroom";d.prototype.initialize=function(){this.field=this.options.field;this.save_on_enter=!!this.options.save_on_enter;this.$el.addClass(""+this.options.field+"-form");this.els={};return App.Dispatch.on("UI.InlineForm:open",this.closeOnAnotherOpening)};d.prototype.events={"submit form":"_submitHandler","click a.save":"_saveButtonHandler","click a.cancel":"_cancelButtonHandler","keydown textarea":"_keyDownHandler"};d.prototype._updateMirror=function(b){var h;
b||(b=this.els.$textarea.val()||"-");h=b.match(/\n$/);if(h!==this.ends_in_newline){this.els.$mirror.toggleClass("newline-end",h);this.ends_in_newline=h}return this.els.$mirror.text(b)};d.prototype._submitHandler=function(b){b.preventDefault();return this._save()};d.prototype._saveButtonHandler=function(b){b.preventDefault();return this.$("form").submit()};d.prototype._cancelButtonHandler=function(b){b.preventDefault();return this._close()};d.prototype._keyDownHandler=function(b){var h;h=b.keyCode;
if(h===o.ESCAPE){b.preventDefault();b.stopPropagation();return this._close()}else if(h===o.ENTER)if(this.save_on_enter){b.preventDefault();return this._save()}};d.prototype._save=function(){var b,h,m=this;b={edit:this.field,silent:true};b[this.field]=this.$("textarea").val();(h=this.model.get(this.field))?App.Dispatch.trigger("UI.Bitmark."+this.field+":edit"):App.Dispatch.trigger("UI.Bitmark."+this.field+":add");b=this.model.update(b);b.fail(function(){m.model.set(m.field,h,{silent:true});return notify("Oops... an error occurred saving your "+
m.field+". Please try again!",{type:"error"})});return b.done(function(){m._close();return m.model.change({changes:m.model.changedAttributes()})})};d.prototype.closeOnAnotherOpening=function(b){if(this.is_open&&b!==this)return this._close()};d.prototype.addTo=function(b,h){if(h==null)h="appendTo";this.render();this.container=b;this.$el[h](this.container);this.els.$textarea.focus().select();b.addClass("editing-inline");App.Dispatch.trigger("UI.InlineForm:open",this);return this.is_open=true};d.prototype._close=
function(){this.$el.remove().val("");this.container.removeClass("editing-inline");App.Dispatch.trigger("UI.InlineForm:close",this);this.is_open=false;return this.taborder.unbindEvents()};d.prototype.setFieldValue=function(){var b;b=this.model.get(this.field);this.els.$textarea.val(b);return this._updateMirror(b)};d.prototype._cacheEls=function(){return this.els={$form:this.$("form"),$textarea:this.$("textarea"),$mirror:this.$(".mirror")}};d.prototype._bindEvents=function(){var b=this;this.delegateEvents();
return this.els.$textarea.bind(App.State.input_event,function(){return b._updateMirror()})};d.prototype.render=function(){var b=this;this.html(Handlebars.templates.inline_form({}));this._cacheEls();this.setFieldValue();this._bindEvents();return _.defer(function(){return b.setTabOrder()})};d.prototype.setTabOrder=function(){return this.taborder!=null?this.taborder.bind():this.taborder=new App.Lib.Taborder(this.el,{focus:["textarea",".save",".cancel"]})};return d}(App.BaseView)}).call(this);(function(){var o;App.$AppView=new App.ChromeExtensionView;App.Dispatch.on("App.Bitmark:create",function(f){return chromeSend({method:"bitmarkCreated",params:{link:f.get("link")}})});App.Dispatch.on("App.Bitmark:saveExisting",function(f){return chromeSend({method:"bitmarkAlreadyExists",params:{link:f.get("link")}})});App.Dispatch.on("user:sign_out_intent",function(){return chromeSend({method:"signout"})});App.Dispatch.on("UI.Modal.Stack:empty",function(){return chromeSend({method:"removeIframe"})});
window.chromeSend=function(f,l){var i;i=$.Deferred();chrome.extension.sendMessage(f,function(g){typeof l==="function"&&l(g);!g&&chrome.extension.lastError?i.reject(chrome.extension.lastError.message):i.resolve(g);return true});return i.promise()};o=function(){App.$User.on("change:share_accounts",function(f,l){return chromeSend({method:"updateUser",params:{key:"share_accounts",value:l}})});return App.$User.on("change:preferences",function(f,l){return chromeSend({method:"updateUser",params:{key:"preferences",
value:l}})})};$.when(chromeSend({method:"getDocumentInfo"}),chromeSend({method:"getUserData"}),chromeSend({method:"getSelectedText"})).done(function(f,l,i){App.$User=new App.User(l);f=new App.Bitmark({url:f.url,note:i.note,title:f.title});chromeSend({method:"syncUser"}).done(function(g){g.share_accounts&&App.$User.set("share_accounts",g.share_accounts);g.preferences&&App.$User.set("preferences",g.preferences);return o()});return f.autoSave()})}).call(this);
