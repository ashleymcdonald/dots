(function(){if(!Array.isArray)Array.isArray=function(x){return Object.prototype.toString.call(x)==="[object Array]"||x instanceof Array};if(!Array.prototype.forEach)Array.prototype.forEach=function(x,w){for(var o=this.length>>>0,r=0;r<o;r++)r in this&&x.call(w,this[r],r,this)};if(!Array.prototype.map)Array.prototype.map=function(x,w){for(var o=this.length>>>0,r=Array(o),u=0;u<o;u++)if(u in this)r[u]=x.call(w,this[u],u,this);return r};if(!Array.prototype.filter)Array.prototype.filter=function(x,w){for(var o=
[],r=0;r<this.length;r++)x.call(w,this[r])&&o.push(this[r]);return o};if(!Array.prototype.reduce)Array.prototype.reduce=function(x){var w=this.length>>>0,o=0;if(w===0&&arguments.length===1)throw new TypeError;if(arguments.length>=2)var r=arguments[1];else{do{if(o in this){r=this[o++];break}if(++o>=w)throw new TypeError;}while(1)}for(;o<w;o++)if(o in this)r=x.call(null,r,this[o],o,this);return r};if(!Array.prototype.indexOf)Array.prototype.indexOf=function(x,w){var o=this.length,r=w||0;if(!o)return-1;
if(r>=o)return-1;if(r<0)r+=o;for(;r<o;r++)if(Object.prototype.hasOwnProperty.call(this,r))if(x===this[r])return r;return-1};if(!Object.keys)Object.keys=function(x){var w=[],o;for(o in x)Object.prototype.hasOwnProperty.call(x,o)&&w.push(o);return w};if(!String.prototype.trim)String.prototype.trim=function(){return String(this).replace(/^\s\s*/,"").replace(/\s\s*$/,"")};Function.prototype._scope=function(x){var w=this;return function(){w.apply(x,Array.prototype.slice.call(arguments,0))}}})();(function(x,w){function o(a){var b=na[a]={},g,h;a=a.split(/\s+/);g=0;for(h=a.length;g<h;g++)b[a[g]]=true;return b}function r(a,b,g){if(g===w&&a.nodeType===1){g="data-"+b.replace(Ia,"-$1").toLowerCase();g=a.getAttribute(g);if(typeof g==="string"){try{g=g==="true"?true:g==="false"?false:g==="null"?null:d.isNumeric(g)?parseFloat(g):Ca.test(g)?d.parseJSON(g):g}catch(h){}d.data(a,b,g)}else g=w}return g}function u(a){for(var b in a)if(!(b==="data"&&d.isEmptyObject(a[b])))if(b!=="toJSON")return false;return true}
function t(a,b,g){var h=b+"defer",m=b+"queue",v=b+"mark",D=d._data(a,h);if(D&&(g==="queue"||!d._data(a,m))&&(g==="mark"||!d._data(a,v)))setTimeout(function(){if(!d._data(a,m)&&!d._data(a,v)){d.removeData(a,h,true);D.fire()}},0)}function j(){return false}function c(){return true}function f(a,b,g){b=b||0;if(d.isFunction(b))return d.grep(a,function(m,v){return!!b.call(m,v,m)===g});else if(b.nodeType)return d.grep(a,function(m){return m===b===g});else if(typeof b==="string"){var h=d.grep(a,function(m){return m.nodeType===
1});if(Ea.test(b))return d.filter(b,h,!g);else b=d.filter(b,h)}return d.grep(a,function(m){return d.inArray(m,b)>=0===g})}function l(a){var b=rb.split("|");a=a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());return a}function k(a,b){if(!(b.nodeType!==1||!d.hasData(a))){var g,h,m;h=d._data(a);var v=d._data(b,h),D=h.events;if(D){delete v.handle;v.events={};for(g in D){h=0;for(m=D[g].length;h<m;h++)d.event.add(b,g+(D[g][h].namespace?".":"")+D[g][h].namespace,D[g][h],
D[g][h].data)}}if(v.data)v.data=d.extend({},v.data)}}function q(a,b){var g;if(b.nodeType===1){b.clearAttributes&&b.clearAttributes();b.mergeAttributes&&b.mergeAttributes(a);g=b.nodeName.toLowerCase();if(g==="object")b.outerHTML=a.outerHTML;else if(g==="input"&&(a.type==="checkbox"||a.type==="radio")){if(a.checked)b.defaultChecked=b.checked=a.checked;if(b.value!==a.value)b.value=a.value}else if(g==="option")b.selected=a.defaultSelected;else if(g==="input"||g==="textarea")b.defaultValue=a.defaultValue;
b.removeAttribute(d.expando)}}function n(a){return typeof a.getElementsByTagName!=="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!=="undefined"?a.querySelectorAll("*"):[]}function B(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function I(a){var b=(a.nodeName||"").toLowerCase();if(b==="input")B(a);else b!=="script"&&typeof a.getElementsByTagName!=="undefined"&&d.grep(a.getElementsByTagName("input"),B)}function O(a,b){b.src?d.ajax({url:b.src,async:false,
dataType:"script"}):d.globalEval((b.text||b.textContent||b.innerHTML||"").replace(tc,"/*$0*/"));b.parentNode&&b.parentNode.removeChild(b)}function Z(a,b,g){var h=b==="width"?a.offsetWidth:a.offsetHeight,m=b==="width"?ec:fc,v=0,D=m.length;if(h>0){if(g!=="border")for(;v<D;v++){g||(h-=parseFloat(d.css(a,"padding"+m[v]))||0);if(g==="margin")h+=parseFloat(d.css(a,g+m[v]))||0;else h-=parseFloat(d.css(a,"border"+m[v]+"Width"))||0}return h+"px"}h=bb(a,b,b);if(h<0||h==null)h=a.style[b]||0;h=parseFloat(h)||
0;if(g)for(;v<D;v++){h+=parseFloat(d.css(a,"padding"+m[v]))||0;if(g!=="padding")h+=parseFloat(d.css(a,"border"+m[v]+"Width"))||0;if(g==="margin")h+=parseFloat(d.css(a,g+m[v]))||0}return h+"px"}function ja(a){return function(b,g){if(typeof b!=="string"){g=b;b="*"}if(d.isFunction(g))for(var h=b.toLowerCase().split(Qb),m=0,v=h.length,D,H;m<v;m++){D=h[m];if(H=/^\+/.test(D))D=D.substr(1)||"*";D=a[D]=a[D]||[];D[H?"unshift":"push"](g)}}}function ga(a,b,g,h,m,v){m=m||b.dataTypes[0];v=v||{};v[m]=true;m=a[m];
for(var D=0,H=m?m.length:0,L=a===Gb,S;D<H&&(L||!S);D++){S=m[D](b,g,h);if(typeof S==="string")if(!L||v[S])S=w;else{b.dataTypes.unshift(S);S=ga(a,b,g,h,S,v)}}if((L||!S)&&!v["*"])S=ga(a,b,g,h,"*",v);return S}function ra(a,b){var g,h,m=d.ajaxSettings.flatOptions||{};for(g in b)if(b[g]!==w)(m[g]?a:h||(h={}))[g]=b[g];h&&d.extend(true,a,h)}function ua(a,b,g,h){if(d.isArray(b))d.each(b,function(v,D){g||xb.test(a)?h(a,D):ua(a+"["+(typeof D==="object"||d.isArray(D)?v:"")+"]",D,g,h)});else if(!g&&b!=null&&typeof b===
"object")for(var m in b)ua(a+"["+m+"]",b[m],g,h);else h(a,b)}function Sa(){try{return new x.XMLHttpRequest}catch(a){}}function Wa(){setTimeout(sb,0);return Hb=d.now()}function sb(){Hb=w}function Ga(a,b){var g={};d.each(yb.concat.apply([],yb.slice(0,b)),function(){g[this]=a});return g}function Xa(a){if(!zb[a]){var b=C.body,g=d("<"+a+">").appendTo(b),h=g.css("display");g.remove();if(h==="none"||h===""){if(!Ma){Ma=C.createElement("iframe");Ma.frameBorder=Ma.width=Ma.height=0}b.appendChild(Ma);if(!Ya||
!Ma.createElement){Ya=(Ma.contentWindow||Ma.contentDocument).document;Ya.write((C.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>");Ya.close()}g=Ya.createElement(a);Ya.body.appendChild(g);h=d.css(g,"display");b.removeChild(Ma)}zb[a]=h}return zb[a]}function z(a){return d.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:false}var C=x.document,M=x.navigator,aa=x.location,d=function(){function a(){if(!b.isReady){try{C.documentElement.doScroll("left")}catch(G){setTimeout(a,1);return}b.ready()}}
var b=function(G,U){return new b.fn.init(G,U,m)},g=x.jQuery,h=x.$,m,v=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,D=/\S/,H=/^\s+/,L=/\s+$/,S=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,ea=/^[\],:{}\s]*$/,V=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,ia=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,da=/(?:^|:|,)(?:\s*\[)+/g,qa=/(webkit)[ \/]([\w.]+)/,va=/(opera)(?:.*version)?[ \/]([\w.]+)/,wa=/(msie) ([\w.]+)/,xa=/(mozilla)(?:.*? rv:([\w.]+))?/,Za=/-([a-z]|[0-9])/ig,Qa=/^-ms-/,pa=function(G,U){return(U+
"").toUpperCase()},Na=M.userAgent,A,E,N=Object.prototype.toString,Q=Object.prototype.hasOwnProperty,R=Array.prototype.push,W=Array.prototype.slice,ka=String.prototype.trim,ba=Array.prototype.indexOf,ta={};b.fn=b.prototype={constructor:b,init:function(G,U,ca){var Y;if(!G)return this;if(G.nodeType){this.context=this[0]=G;this.length=1;return this}if(G==="body"&&!U&&C.body){this.context=C;this[0]=C.body;this.selector=G;this.length=1;return this}if(typeof G==="string")if((Y=G.charAt(0)==="<"&&G.charAt(G.length-
1)===">"&&G.length>=3?[null,G,null]:v.exec(G))&&(Y[1]||!U))if(Y[1]){ca=(U=U instanceof b?U[0]:U)?U.ownerDocument||U:C;if(G=S.exec(G))if(b.isPlainObject(U)){G=[C.createElement(G[1])];b.fn.attr.call(G,U,true)}else G=[ca.createElement(G[1])];else{G=b.buildFragment([Y[1]],[ca]);G=(G.cacheable?b.clone(G.fragment):G.fragment).childNodes}return b.merge(this,G)}else{if((U=C.getElementById(Y[2]))&&U.parentNode){if(U.id!==Y[2])return ca.find(G);this.length=1;this[0]=U}this.context=C;this.selector=G;return this}else return!U||
U.jquery?(U||ca).find(G):this.constructor(U).find(G);else if(b.isFunction(G))return ca.ready(G);if(G.selector!==w){this.selector=G.selector;this.context=G.context}return b.makeArray(G,this)},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return W.call(this,0)},get:function(G){return G==null?this.toArray():G<0?this[this.length+G]:this[G]},pushStack:function(G,U,ca){var Y=this.constructor();b.isArray(G)?R.apply(Y,G):b.merge(Y,G);Y.prevObject=this;Y.context=
this.context;if(U==="find")Y.selector=this.selector+(this.selector?" ":"")+ca;else if(U)Y.selector=this.selector+"."+U+"("+ca+")";return Y},each:function(G,U){return b.each(this,G,U)},ready:function(G){b.bindReady();A.add(G);return this},eq:function(G){G=+G;return G===-1?this.slice(G):this.slice(G,G+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(W.apply(this,arguments),"slice",W.call(arguments).join(","))},map:function(G){return this.pushStack(b.map(this,
function(U,ca){return G.call(U,ca,U)}))},end:function(){return this.prevObject||this.constructor(null)},push:R,sort:[].sort,splice:[].splice};b.fn.init.prototype=b.fn;b.extend=b.fn.extend=function(){var G,U,ca,Y,oa,e=arguments[0]||{},i=1,p=arguments.length,y=false;if(typeof e==="boolean"){y=e;e=arguments[1]||{};i=2}if(typeof e!=="object"&&!b.isFunction(e))e={};if(p===i){e=this;--i}for(;i<p;i++)if((G=arguments[i])!=null)for(U in G){ca=e[U];Y=G[U];if(e!==Y)if(y&&Y&&(b.isPlainObject(Y)||(oa=b.isArray(Y)))){if(oa){oa=
false;ca=ca&&b.isArray(ca)?ca:[]}else ca=ca&&b.isPlainObject(ca)?ca:{};e[U]=b.extend(y,ca,Y)}else if(Y!==w)e[U]=Y}return e};b.extend({noConflict:function(G){if(x.$===b)x.$=h;if(G&&x.jQuery===b)x.jQuery=g;return b},isReady:false,readyWait:1,holdReady:function(G){if(G)b.readyWait++;else b.ready(true)},ready:function(G){if(G===true&&!--b.readyWait||G!==true&&!b.isReady){if(!C.body)return setTimeout(b.ready,1);b.isReady=true;if(!(G!==true&&--b.readyWait>0)){A.fireWith(C,[b]);b.fn.trigger&&b(C).trigger("ready").off("ready")}}},
bindReady:function(){if(!A){A=b.Callbacks("once memory");if(C.readyState==="complete")return setTimeout(b.ready,1);if(C.addEventListener){C.addEventListener("DOMContentLoaded",E,false);x.addEventListener("load",b.ready,false)}else if(C.attachEvent){C.attachEvent("onreadystatechange",E);x.attachEvent("onload",b.ready);var G=false;try{G=x.frameElement==null}catch(U){}C.documentElement.doScroll&&G&&a()}}},isFunction:function(G){return b.type(G)==="function"},isArray:Array.isArray||function(G){return b.type(G)===
"array"},isWindow:function(G){return G&&typeof G==="object"&&"setInterval"in G},isNumeric:function(G){return!isNaN(parseFloat(G))&&isFinite(G)},type:function(G){return G==null?String(G):ta[N.call(G)]||"object"},isPlainObject:function(G){if(!G||b.type(G)!=="object"||G.nodeType||b.isWindow(G))return false;try{if(G.constructor&&!Q.call(G,"constructor")&&!Q.call(G.constructor.prototype,"isPrototypeOf"))return false}catch(U){return false}for(var ca in G);return ca===w||Q.call(G,ca)},isEmptyObject:function(G){for(var U in G)return false;
return true},error:function(G){throw Error(G);},parseJSON:function(G){if(typeof G!=="string"||!G)return null;G=b.trim(G);if(x.JSON&&x.JSON.parse)return x.JSON.parse(G);if(ea.test(G.replace(V,"@").replace(ia,"]").replace(da,"")))return(new Function("return "+G))();b.error("Invalid JSON: "+G)},parseXML:function(G){var U,ca;try{if(x.DOMParser){ca=new DOMParser;U=ca.parseFromString(G,"text/xml")}else{U=new ActiveXObject("Microsoft.XMLDOM");U.async="false";U.loadXML(G)}}catch(Y){U=w}if(!U||!U.documentElement||
U.getElementsByTagName("parsererror").length)b.error("Invalid XML: "+G);return U},noop:function(){},globalEval:function(G){if(G&&D.test(G))(x.execScript||function(U){x.eval.call(x,U)})(G)},camelCase:function(G){return G.replace(Qa,"ms-").replace(Za,pa)},nodeName:function(G,U){return G.nodeName&&G.nodeName.toUpperCase()===U.toUpperCase()},each:function(G,U,ca){var Y,oa=0,e=G.length,i=e===w||b.isFunction(G);if(ca)if(i)for(Y in G){if(U.apply(G[Y],ca)===false)break}else for(;oa<e;){if(U.apply(G[oa++],
ca)===false)break}else if(i)for(Y in G){if(U.call(G[Y],Y,G[Y])===false)break}else for(;oa<e;)if(U.call(G[oa],oa,G[oa++])===false)break;return G},trim:ka?function(G){return G==null?"":ka.call(G)}:function(G){return G==null?"":G.toString().replace(H,"").replace(L,"")},makeArray:function(G,U){var ca=U||[];if(G!=null){var Y=b.type(G);G.length==null||Y==="string"||Y==="function"||Y==="regexp"||b.isWindow(G)?R.call(ca,G):b.merge(ca,G)}return ca},inArray:function(G,U,ca){var Y;if(U){if(ba)return ba.call(U,
G,ca);Y=U.length;for(ca=ca?ca<0?Math.max(0,Y+ca):ca:0;ca<Y;ca++)if(ca in U&&U[ca]===G)return ca}return-1},merge:function(G,U){var ca=G.length,Y=0;if(typeof U.length==="number")for(var oa=U.length;Y<oa;Y++)G[ca++]=U[Y];else for(;U[Y]!==w;)G[ca++]=U[Y++];G.length=ca;return G},grep:function(G,U,ca){var Y=[],oa;ca=!!ca;for(var e=0,i=G.length;e<i;e++){oa=!!U(G[e],e);ca!==oa&&Y.push(G[e])}return Y},map:function(G,U,ca){var Y,oa,e=[],i=0,p=G.length;if(G instanceof b||p!==w&&typeof p==="number"&&(p>0&&G[0]&&
G[p-1]||p===0||b.isArray(G)))for(;i<p;i++){Y=U(G[i],i,ca);if(Y!=null)e[e.length]=Y}else for(oa in G){Y=U(G[oa],oa,ca);if(Y!=null)e[e.length]=Y}return e.concat.apply([],e)},guid:1,proxy:function(G,U){if(typeof U==="string"){var ca=G[U];U=G;G=ca}if(!b.isFunction(G))return w;var Y=W.call(arguments,2);ca=function(){return G.apply(U,Y.concat(W.call(arguments)))};ca.guid=G.guid=G.guid||ca.guid||b.guid++;return ca},access:function(G,U,ca,Y,oa,e){var i=G.length;if(typeof U==="object"){for(var p in U)b.access(G,
p,U[p],Y,oa,ca);return G}if(ca!==w){Y=!e&&Y&&b.isFunction(ca);for(p=0;p<i;p++)oa(G[p],U,Y?ca.call(G[p],p,oa(G[p],U)):ca,e);return G}return i?oa(G[0],U):w},now:function(){return(new Date).getTime()},uaMatch:function(G){G=G.toLowerCase();G=qa.exec(G)||va.exec(G)||wa.exec(G)||G.indexOf("compatible")<0&&xa.exec(G)||[];return{browser:G[1]||"",version:G[2]||"0"}},sub:function(){function G(ca,Y){return new G.fn.init(ca,Y)}b.extend(true,G,this);G.superclass=this;G.fn=G.prototype=this();G.fn.constructor=G;
G.sub=this.sub;G.fn.init=function(ca,Y){if(Y&&Y instanceof b&&!(Y instanceof G))Y=G(Y);return b.fn.init.call(this,ca,Y,U)};G.fn.init.prototype=G.fn;var U=G(C);return G},browser:{}});b.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(G,U){ta["[object "+U+"]"]=U.toLowerCase()});Na=b.uaMatch(Na);if(Na.browser){b.browser[Na.browser]=true;b.browser.version=Na.version}if(b.browser.webkit)b.browser.safari=true;if(D.test("\u00a0")){H=/^[\s\xA0]+/;L=/[\s\xA0]+$/}m=b(C);if(C.addEventListener)E=
function(){C.removeEventListener("DOMContentLoaded",E,false);b.ready()};else if(C.attachEvent)E=function(){if(C.readyState==="complete"){C.detachEvent("onreadystatechange",E);b.ready()}};return b}(),na={};d.Callbacks=function(a){a=a?na[a]||o(a):{};var b=[],g=[],h,m,v,D,H,L=function(V){var ia,da,qa,va;ia=0;for(da=V.length;ia<da;ia++){qa=V[ia];va=d.type(qa);if(va==="array")L(qa);else if(va==="function")if(!a.unique||!ea.has(qa))b.push(qa)}},S=function(V,ia){ia=ia||[];h=!a.memory||[V,ia];m=true;H=v||
0;v=0;for(D=b.length;b&&H<D;H++)if(b[H].apply(V,ia)===false&&a.stopOnFalse){h=true;break}m=false;if(b)if(a.once)if(h===true)ea.disable();else b=[];else if(g&&g.length){h=g.shift();ea.fireWith(h[0],h[1])}},ea={add:function(){if(b){var V=b.length;L(arguments);if(m)D=b.length;else if(h&&h!==true){v=V;S(h[0],h[1])}}return this},remove:function(){if(b)for(var V=arguments,ia=0,da=V.length;ia<da;ia++)for(var qa=0;qa<b.length;qa++)if(V[ia]===b[qa]){if(m)if(qa<=D){D--;qa<=H&&H--}b.splice(qa--,1);if(a.unique)break}return this},
has:function(V){if(b)for(var ia=0,da=b.length;ia<da;ia++)if(V===b[ia])return true;return false},empty:function(){b=[];return this},disable:function(){b=g=h=w;return this},disabled:function(){return!b},lock:function(){g=w;if(!h||h===true)ea.disable();return this},locked:function(){return!g},fireWith:function(V,ia){if(g)if(m)a.once||g.push([V,ia]);else a.once&&h||S(V,ia);return this},fire:function(){ea.fireWith(this,arguments);return this},fired:function(){return!!h}};return ea};var za=[].slice;d.extend({Deferred:function(a){var b=
d.Callbacks("once memory"),g=d.Callbacks("once memory"),h=d.Callbacks("memory"),m="pending",v={resolve:b,reject:g,notify:h},D={done:b.add,fail:g.add,progress:h.add,state:function(){return m},isResolved:b.fired,isRejected:g.fired,then:function(S,ea,V){H.done(S).fail(ea).progress(V);return this},always:function(){H.done.apply(H,arguments).fail.apply(H,arguments);return this},pipe:function(S,ea,V){return d.Deferred(function(ia){d.each({done:[S,"resolve"],fail:[ea,"reject"],progress:[V,"notify"]},function(da,
qa){var va=qa[0],wa=qa[1],xa;if(d.isFunction(va))H[da](function(){if((xa=va.apply(this,arguments))&&d.isFunction(xa.promise))xa.promise().then(ia.resolve,ia.reject,ia.notify);else ia[wa+"With"](this===H?ia:this,[xa])});else H[da](ia[wa])})}).promise()},promise:function(S){if(S==null)S=D;else for(var ea in D)S[ea]=D[ea];return S}},H=D.promise({}),L;for(L in v){H[L]=v[L].fire;H[L+"With"]=v[L].fireWith}H.done(function(){m="resolved"},g.disable,h.lock).fail(function(){m="rejected"},b.disable,h.lock);
a&&a.call(H,H);return H},when:function(a){function b(ea){return function(V){h[ea]=arguments.length>1?za.call(arguments,0):V;--H||L.resolveWith(L,h)}}function g(ea){return function(V){D[ea]=arguments.length>1?za.call(arguments,0):V;L.notifyWith(S,D)}}var h=za.call(arguments,0),m=0,v=h.length,D=Array(v),H=v,L=v<=1&&a&&d.isFunction(a.promise)?a:d.Deferred(),S=L.promise();if(v>1){for(;m<v;m++)if(h[m]&&h[m].promise&&d.isFunction(h[m].promise))h[m].promise().then(b(m),L.reject,g(m));else--H;H||L.resolveWith(L,
h)}else if(L!==a)L.resolveWith(L,v?[a]:[]);return S}});d.support=function(){var a,b,g,h,m,v,D,H,L=C.createElement("div");L.setAttribute("className","t");L.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";b=L.getElementsByTagName("*");g=L.getElementsByTagName("a")[0];if(!b||!b.length||!g)return{};h=C.createElement("select");m=h.appendChild(C.createElement("option"));b=L.getElementsByTagName("input")[0];a={leadingWhitespace:L.firstChild.nodeType===
3,tbody:!L.getElementsByTagName("tbody").length,htmlSerialize:!!L.getElementsByTagName("link").length,style:/top/.test(g.getAttribute("style")),hrefNormalized:g.getAttribute("href")==="/a",opacity:/^0.55/.test(g.style.opacity),cssFloat:!!g.style.cssFloat,checkOn:b.value==="on",optSelected:m.selected,getSetAttribute:L.className!=="t",enctype:!!C.createElement("form").enctype,html5Clone:C.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",submitBubbles:true,changeBubbles:true,focusinBubbles:false,
deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true};b.checked=true;a.noCloneChecked=b.cloneNode(true).checked;h.disabled=true;a.optDisabled=!m.disabled;try{delete L.test}catch(S){a.deleteExpando=false}if(!L.addEventListener&&L.attachEvent&&L.fireEvent){L.attachEvent("onclick",function(){a.noCloneEvent=false});L.cloneNode(true).fireEvent("onclick")}b=C.createElement("input");b.value="t";b.setAttribute("type","radio");a.radioValue=b.value===
"t";b.setAttribute("checked","checked");L.appendChild(b);g=C.createDocumentFragment();g.appendChild(L.lastChild);a.checkClone=g.cloneNode(true).cloneNode(true).lastChild.checked;a.appendChecked=b.checked;g.removeChild(b);g.appendChild(L);L.innerHTML="";if(x.getComputedStyle){b=C.createElement("div");b.style.width="0";b.style.marginRight="0";L.style.width="2px";L.appendChild(b);a.reliableMarginRight=(parseInt((x.getComputedStyle(b,null)||{marginRight:0}).marginRight,10)||0)===0}if(L.attachEvent)for(D in{submit:1,
change:1,focusin:1}){b="on"+D;H=b in L;if(!H){L.setAttribute(b,"return;");H=typeof L[b]==="function"}a[D+"Bubbles"]=H}g.removeChild(L);g=h=m=b=L=b=null;d(function(){var ea,V,ia,da,qa=C.getElementsByTagName("body")[0];if(qa){ea=C.createElement("div");ea.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px";qa.insertBefore(ea,qa.firstChild);L=C.createElement("div");ea.appendChild(L);L.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";
v=L.getElementsByTagName("td");H=v[0].offsetHeight===0;v[0].style.display="";v[1].style.display="none";a.reliableHiddenOffsets=H&&v[0].offsetHeight===0;L.innerHTML="";L.style.width=L.style.paddingLeft="1px";d.boxModel=a.boxModel=L.offsetWidth===2;if(typeof L.style.zoom!=="undefined"){L.style.display="inline";L.style.zoom=1;a.inlineBlockNeedsLayout=L.offsetWidth===2;L.style.display="";L.innerHTML="<div style='width:4px;'></div>";a.shrinkWrapBlocks=L.offsetWidth!==2}L.style.cssText="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;visibility:hidden;border:0;";
L.innerHTML="<div style='position:absolute;top:0;left:0;width:1px;height:1px;margin:0;border:5px solid #000;padding:0;'><div></div></div><table style='position:absolute;top:0;left:0;width:1px;height:1px;margin:0;border:5px solid #000;padding:0;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";V=L.firstChild;ia=V.firstChild;da={doesNotAddBorder:ia.offsetTop!==5,doesAddBorderForTableAndCells:V.nextSibling.firstChild.firstChild.offsetTop===5};ia.style.position="fixed";ia.style.top="20px";
da.fixedPosition=ia.offsetTop===20||ia.offsetTop===15;ia.style.position=ia.style.top="";V.style.overflow="hidden";V.style.position="relative";da.subtractsBorderForOverflowNotVisible=ia.offsetTop===-5;da.doesNotIncludeMarginInBodyOffset=qa.offsetTop!==1;qa.removeChild(ea);L=null;d.extend(a,da)}});return a}();var Ca=/^(?:\{.*\}|\[.*\])$/,Ia=/([A-Z])/g;d.extend({cache:{},uuid:0,expando:"jQuery"+(d.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",
applet:true},hasData:function(a){a=a.nodeType?d.cache[a[d.expando]]:a[d.expando];return!!a&&!u(a)},data:function(a,b,g,h){if(d.acceptData(a)){var m;m=d.expando;var v=typeof b==="string",D=a.nodeType,H=D?d.cache:a,L=D?a[m]:a[m]&&m,S=b==="events";if(!((!L||!H[L]||!S&&!h&&!H[L].data)&&v&&g===w)){if(!L)if(D)a[m]=L=++d.uuid;else L=m;if(!H[L]){H[L]={};if(!D)H[L].toJSON=d.noop}if(typeof b==="object"||typeof b==="function")if(h)H[L]=d.extend(H[L],b);else H[L].data=d.extend(H[L].data,b);m=a=H[L];if(!h){if(!a.data)a.data=
{};a=a.data}if(g!==w)a[d.camelCase(b)]=g;if(S&&!a[b])return m.events;if(v){g=a[b];if(g==null)g=a[d.camelCase(b)]}else g=a;return g}}},removeData:function(a,b,g){if(d.acceptData(a)){var h,m,v,D=d.expando,H=a.nodeType,L=H?d.cache:a,S=H?a[D]:D;if(L[S]){if(b)if(h=g?L[S]:L[S].data){if(!d.isArray(b))if(b in h)b=[b];else{b=d.camelCase(b);b=b in h?[b]:b.split(" ")}m=0;for(v=b.length;m<v;m++)delete h[b[m]];if(!(g?u:d.isEmptyObject)(h))return}if(!g){delete L[S].data;if(!u(L[S]))return}if(d.support.deleteExpando||
!L.setInterval)delete L[S];else L[S]=null;if(H)if(d.support.deleteExpando)delete a[D];else if(a.removeAttribute)a.removeAttribute(D);else a[D]=null}}},_data:function(a,b,g){return d.data(a,b,g,true)},acceptData:function(a){if(a.nodeName){var b=d.noData[a.nodeName.toLowerCase()];if(b)return!(b===true||a.getAttribute("classid")!==b)}return true}});d.fn.extend({data:function(a,b){var g,h,m,v=null;if(typeof a==="undefined"){if(this.length){v=d.data(this[0]);if(this[0].nodeType===1&&!d._data(this[0],"parsedAttrs")){h=
this[0].attributes;for(var D=0,H=h.length;D<H;D++){m=h[D].name;if(m.indexOf("data-")===0){m=d.camelCase(m.substring(5));r(this[0],m,v[m])}}d._data(this[0],"parsedAttrs",true)}}return v}else if(typeof a==="object")return this.each(function(){d.data(this,a)});g=a.split(".");g[1]=g[1]?"."+g[1]:"";if(b===w){v=this.triggerHandler("getData"+g[1]+"!",[g[0]]);if(v===w&&this.length){v=d.data(this[0],a);v=r(this[0],a,v)}return v===w&&g[1]?this.data(g[0]):v}else return this.each(function(){var L=d(this),S=[g[0],
b];L.triggerHandler("setData"+g[1]+"!",S);d.data(this,a,b);L.triggerHandler("changeData"+g[1]+"!",S)})},removeData:function(a){return this.each(function(){d.removeData(this,a)})}});d.extend({_mark:function(a,b){if(a){b=(b||"fx")+"mark";d._data(a,b,(d._data(a,b)||0)+1)}},_unmark:function(a,b,g){if(a!==true){g=b;b=a;a=false}if(b){g=g||"fx";var h=g+"mark";if(a=a?0:(d._data(b,h)||1)-1)d._data(b,h,a);else{d.removeData(b,h,true);t(b,g,"mark")}}},queue:function(a,b,g){var h;if(a){b=(b||"fx")+"queue";h=d._data(a,
b);if(g)if(!h||d.isArray(g))h=d._data(a,b,d.makeArray(g));else h.push(g);return h||[]}},dequeue:function(a,b){b=b||"fx";var g=d.queue(a,b),h=g.shift(),m={};if(h==="inprogress")h=g.shift();if(h){b==="fx"&&g.unshift("inprogress");d._data(a,b+".run",m);h.call(a,function(){d.dequeue(a,b)},m)}if(!g.length){d.removeData(a,b+"queue "+b+".run",true);t(a,b,"queue")}}});d.fn.extend({queue:function(a,b){if(typeof a!=="string"){b=a;a="fx"}if(b===w)return d.queue(this[0],a);return this.each(function(){var g=d.queue(this,
a,b);a==="fx"&&g[0]!=="inprogress"&&d.dequeue(this,a)})},dequeue:function(a){return this.each(function(){d.dequeue(this,a)})},delay:function(a,b){a=d.fx?d.fx.speeds[a]||a:a;return this.queue(b||"fx",function(g,h){var m=setTimeout(g,a);h.stop=function(){clearTimeout(m)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a){function b(){--v||g.resolveWith(h,[h])}if(typeof a!=="string")a=w;a=a||"fx";var g=d.Deferred(),h=this,m=h.length,v=1,D=a+"defer",H=a+"queue";a+="mark";for(var L;m--;)if(L=
d.data(h[m],D,w,true)||(d.data(h[m],H,w,true)||d.data(h[m],a,w,true))&&d.data(h[m],D,d.Callbacks("once memory"),true)){v++;L.add(b)}b();return g.promise()}});var Ta=/[\n\t\r]/g,gb=/\s+/,Ab=/\r/g,gc=/^(?:button|input)$/i,Bb=/^(?:button|input|object|select|textarea)$/i,hb=/^a(?:rea)?$/i,tb=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,nb=d.support.getSetAttribute,Ha,Cb,Rb;d.fn.extend({attr:function(a,b){return d.access(this,
a,b,true,d.attr)},removeAttr:function(a){return this.each(function(){d.removeAttr(this,a)})},prop:function(a,b){return d.access(this,a,b,true,d.prop)},removeProp:function(a){a=d.propFix[a]||a;return this.each(function(){try{this[a]=w;delete this[a]}catch(b){}})},addClass:function(a){var b,g,h,m,v,D,H;if(d.isFunction(a))return this.each(function(L){d(this).addClass(a.call(this,L,this.className))});if(a&&typeof a==="string"){b=a.split(gb);g=0;for(h=this.length;g<h;g++){m=this[g];if(m.nodeType===1)if(!m.className&&
b.length===1)m.className=a;else{v=" "+m.className+" ";D=0;for(H=b.length;D<H;D++)~v.indexOf(" "+b[D]+" ")||(v+=b[D]+" ");m.className=d.trim(v)}}}return this},removeClass:function(a){var b,g,h,m,v,D,H;if(d.isFunction(a))return this.each(function(L){d(this).removeClass(a.call(this,L,this.className))});if(a&&typeof a==="string"||a===w){b=(a||"").split(gb);g=0;for(h=this.length;g<h;g++){m=this[g];if(m.nodeType===1&&m.className)if(a){v=(" "+m.className+" ").replace(Ta," ");D=0;for(H=b.length;D<H;D++)v=
v.replace(" "+b[D]+" "," ");m.className=d.trim(v)}else m.className=""}}return this},toggleClass:function(a,b){var g=typeof a,h=typeof b==="boolean";if(d.isFunction(a))return this.each(function(m){d(this).toggleClass(a.call(this,m,this.className,b),b)});return this.each(function(){if(g==="string")for(var m,v=0,D=d(this),H=b,L=a.split(gb);m=L[v++];){H=h?H:!D.hasClass(m);D[H?"addClass":"removeClass"](m)}else if(g==="undefined"||g==="boolean"){this.className&&d._data(this,"__className__",this.className);
this.className=this.className||a===false?"":d._data(this,"__className__")||""}})},hasClass:function(a){a=" "+a+" ";for(var b=0,g=this.length;b<g;b++)if(this[b].nodeType===1&&(" "+this[b].className+" ").replace(Ta," ").indexOf(a)>-1)return true;return false},val:function(a){var b,g,h,m=this[0];if(arguments.length){h=d.isFunction(a);return this.each(function(v){var D=d(this);if(this.nodeType===1){v=h?a.call(this,v,D.val()):a;if(v==null)v="";else if(typeof v==="number")v+="";else if(d.isArray(v))v=d.map(v,
function(H){return H==null?"":H+""});b=d.valHooks[this.nodeName.toLowerCase()]||d.valHooks[this.type];if(!b||!("set"in b)||b.set(this,v,"value")===w)this.value=v}})}else if(m){if((b=d.valHooks[m.nodeName.toLowerCase()]||d.valHooks[m.type])&&"get"in b&&(g=b.get(m,"value"))!==w)return g;g=m.value;return typeof g==="string"?g.replace(Ab,""):g==null?"":g}}});d.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,g,h=a.selectedIndex,
m=[],v=a.options,D=a.type==="select-one";if(h<0)return null;a=D?h:0;for(g=D?h+1:v.length;a<g;a++){b=v[a];if(b.selected&&(d.support.optDisabled?!b.disabled:b.getAttribute("disabled")===null)&&(!b.parentNode.disabled||!d.nodeName(b.parentNode,"optgroup"))){b=d(b).val();if(D)return b;m.push(b)}}if(D&&!m.length&&v.length)return d(v[h]).val();return m},set:function(a,b){var g=d.makeArray(b);d(a).find("option").each(function(){this.selected=d.inArray(d(this).val(),g)>=0});if(!g.length)a.selectedIndex=-1;
return g}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(a,b,g,h){var m,v,D=a.nodeType;if(!(!a||D===3||D===8||D===2)){if(h&&b in d.attrFn)return d(a)[b](g);if(typeof a.getAttribute==="undefined")return d.prop(a,b,g);if(h=D!==1||!d.isXMLDoc(a)){b=b.toLowerCase();v=d.attrHooks[b]||(tb.test(b)?Cb:Ha)}if(g!==w)if(g===null)d.removeAttr(a,b);else if(v&&"set"in v&&h&&(m=v.set(a,g,b))!==w)return m;else{a.setAttribute(b,""+g);return g}else if(v&&
"get"in v&&h&&(m=v.get(a,b))!==null)return m;else{m=a.getAttribute(b);return m===null?w:m}}},removeAttr:function(a,b){var g,h,m,v,D=0;if(b&&a.nodeType===1){h=b.toLowerCase().split(gb);for(v=h.length;D<v;D++)if(m=h[D]){g=d.propFix[m]||m;d.attr(a,m,"");a.removeAttribute(nb?m:g);if(tb.test(m)&&g in a)a[g]=false}}},attrHooks:{type:{set:function(a,b){if(gc.test(a.nodeName)&&a.parentNode)d.error("type property can't be changed");else if(!d.support.radioValue&&b==="radio"&&d.nodeName(a,"input")){var g=a.value;
a.setAttribute("type",b);if(g)a.value=g;return b}}},value:{get:function(a,b){if(Ha&&d.nodeName(a,"button"))return Ha.get(a,b);return b in a?a.value:null},set:function(a,b,g){if(Ha&&d.nodeName(a,"button"))return Ha.set(a,b,g);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},
prop:function(a,b,g){var h,m,v=a.nodeType;if(!(!a||v===3||v===8||v===2)){if(v!==1||!d.isXMLDoc(a)){b=d.propFix[b]||b;m=d.propHooks[b]}return g!==w?m&&"set"in m&&(h=m.set(a,g,b))!==w?h:a[b]=g:m&&"get"in m&&(h=m.get(a,b))!==null?h:a[b]}},propHooks:{tabIndex:{get:function(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?parseInt(b.value,10):Bb.test(a.nodeName)||hb.test(a.nodeName)&&a.href?0:w}}}});d.attrHooks.tabindex=d.propHooks.tabIndex;Cb={get:function(a,b){var g,h=d.prop(a,b);return h===
true||typeof h!=="boolean"&&(g=a.getAttributeNode(b))&&g.nodeValue!==false?b.toLowerCase():w},set:function(a,b,g){if(b===false)d.removeAttr(a,g);else{b=d.propFix[g]||g;if(b in a)a[b]=true;a.setAttribute(g,g.toLowerCase())}return g}};if(!nb){Rb={name:true,id:true};Ha=d.valHooks.button={get:function(a,b){var g;return(g=a.getAttributeNode(b))&&(Rb[b]?g.nodeValue!=="":g.specified)?g.nodeValue:w},set:function(a,b,g){var h=a.getAttributeNode(g);if(!h){h=C.createAttribute(g);a.setAttributeNode(h)}return h.nodeValue=
b+""}};d.attrHooks.tabindex.set=Ha.set;d.each(["width","height"],function(a,b){d.attrHooks[b]=d.extend(d.attrHooks[b],{set:function(g,h){if(h===""){g.setAttribute(b,"auto");return h}}})});d.attrHooks.contenteditable={get:Ha.get,set:function(a,b,g){if(b==="")b="false";Ha.set(a,b,g)}}}d.support.hrefNormalized||d.each(["href","src","width","height"],function(a,b){d.attrHooks[b]=d.extend(d.attrHooks[b],{get:function(g){g=g.getAttribute(b,2);return g===null?w:g}})});if(!d.support.style)d.attrHooks.style=
{get:function(a){return a.style.cssText.toLowerCase()||w},set:function(a,b){return a.style.cssText=""+b}};if(!d.support.optSelected)d.propHooks.selected=d.extend(d.propHooks.selected,{get:function(){return null}});if(!d.support.enctype)d.propFix.enctype="encoding";d.support.checkOn||d.each(["radio","checkbox"],function(){d.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}});d.each(["radio","checkbox"],function(){d.valHooks[this]=d.extend(d.valHooks[this],{set:function(a,
b){if(d.isArray(b))return a.checked=d.inArray(d(a).val(),b)>=0}})});var Ja=/^(?:textarea|input|select)$/i,hc=/^([^\.]*)?(?:\.(.+))?$/,ub=/\bhover(\.\S+)?\b/,Ib=/^key/,Jb=/^(?:mouse|contextmenu)|click/,ic=/^(?:focusinfocus|focusoutblur)$/,vb=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,ib=function(a){if(a=vb.exec(a)){a[1]=(a[1]||"").toLowerCase();a[3]=a[3]&&RegExp("(?:^|\\s)"+a[3]+"(?:\\s|$)")}return a},la=function(a){return d.event.special.hover?a:a.replace(ub,"mouseenter$1 mouseleave$1")};d.event={add:function(a,
b,g,h,m){var v,D,H,L,S,ea,V,ia,da;if(!(a.nodeType===3||a.nodeType===8||!b||!g||!(v=d._data(a)))){if(g.handler){V=g;g=V.handler}if(!g.guid)g.guid=d.guid++;H=v.events;if(!H)v.events=H={};D=v.handle;if(!D){v.handle=D=function(qa){return typeof d!=="undefined"&&(!qa||d.event.triggered!==qa.type)?d.event.dispatch.apply(D.elem,arguments):w};D.elem=a}b=d.trim(la(b)).split(" ");for(v=0;v<b.length;v++){L=hc.exec(b[v])||[];S=L[1];ea=(L[2]||"").split(".").sort();da=d.event.special[S]||{};S=(m?da.delegateType:
da.bindType)||S;da=d.event.special[S]||{};L=d.extend({type:S,origType:L[1],data:h,handler:g,guid:g.guid,selector:m,quick:ib(m),namespace:ea.join(".")},V);ia=H[S];if(!ia){ia=H[S]=[];ia.delegateCount=0;if(!da.setup||da.setup.call(a,h,ea,D)===false)if(a.addEventListener)a.addEventListener(S,D,false);else a.attachEvent&&a.attachEvent("on"+S,D)}if(da.add){da.add.call(a,L);if(!L.handler.guid)L.handler.guid=g.guid}m?ia.splice(ia.delegateCount++,0,L):ia.push(L);d.event.global[S]=true}a=null}},global:{},remove:function(a,
b,g,h,m){var v=d.hasData(a)&&d._data(a),D,H,L,S,ea,V,ia,da,qa,va;if(v&&(ia=v.events)){b=d.trim(la(b||"")).split(" ");for(D=0;D<b.length;D++){H=hc.exec(b[D])||[];L=S=H[1];H=H[2];if(L){da=d.event.special[L]||{};L=(h?da.delegateType:da.bindType)||L;qa=ia[L]||[];ea=qa.length;H=H?RegExp("(^|\\.)"+H.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(V=0;V<qa.length;V++){va=qa[V];if((m||S===va.origType)&&(!g||g.guid===va.guid)&&(!H||H.test(va.namespace))&&(!h||h===va.selector||h==="**"&&va.selector)){qa.splice(V--,
1);va.selector&&qa.delegateCount--;da.remove&&da.remove.call(a,va)}}if(qa.length===0&&ea!==qa.length){if(!da.teardown||da.teardown.call(a,H)===false)d.removeEvent(a,L,v.handle);delete ia[L]}}else for(L in ia)d.event.remove(a,L+b[D],g,h,true)}if(d.isEmptyObject(ia)){if(b=v.handle)b.elem=null;d.removeData(a,["events","handle"],true)}}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(a,b,g,h){if(!(g&&(g.nodeType===3||g.nodeType===8))){var m=a.type||a,v=[],D,H,L,S,ea;if(!ic.test(m+
d.event.triggered)){if(m.indexOf("!")>=0){m=m.slice(0,-1);D=true}if(m.indexOf(".")>=0){v=m.split(".");m=v.shift();v.sort()}if(!((!g||d.event.customEvent[m])&&!d.event.global[m])){a=typeof a==="object"?a[d.expando]?a:new d.Event(m,a):new d.Event(m);a.type=m;a.isTrigger=true;a.exclusive=D;a.namespace=v.join(".");a.namespace_re=a.namespace?RegExp("(^|\\.)"+v.join("\\.(?:.*\\.)?")+"(\\.|$)"):null;D=m.indexOf(":")<0?"on"+m:"";if(g){a.result=w;if(!a.target)a.target=g;b=b!=null?d.makeArray(b):[];b.unshift(a);
L=d.event.special[m]||{};if(!(L.trigger&&L.trigger.apply(g,b)===false)){ea=[[g,L.bindType||m]];if(!h&&!L.noBubble&&!d.isWindow(g)){S=L.delegateType||m;v=ic.test(S+m)?g:g.parentNode;for(H=null;v;v=v.parentNode){ea.push([v,S]);H=v}if(H&&H===g.ownerDocument)ea.push([H.defaultView||H.parentWindow||x,S])}for(H=0;H<ea.length&&!a.isPropagationStopped();H++){v=ea[H][0];a.type=ea[H][1];(S=(d._data(v,"events")||{})[a.type]&&d._data(v,"handle"))&&S.apply(v,b);(S=D&&v[D])&&d.acceptData(v)&&S.apply(v,b)===false&&
a.preventDefault()}a.type=m;if(!h&&!a.isDefaultPrevented())if((!L._default||L._default.apply(g.ownerDocument,b)===false)&&!(m==="click"&&d.nodeName(g,"a"))&&d.acceptData(g))if(D&&g[m]&&(m!=="focus"&&m!=="blur"||a.target.offsetWidth!==0)&&!d.isWindow(g)){if(H=g[D])g[D]=null;d.event.triggered=m;g[m]();d.event.triggered=w;if(H)g[D]=H}return a.result}}else{g=d.cache;for(H in g)g[H].events&&g[H].events[m]&&d.event.trigger(a,b,g[H].handle.elem,true)}}}}},dispatch:function(a){a=d.event.fix(a||x.event);var b=
(d._data(this,"events")||{})[a.type]||[],g=b.delegateCount,h=[].slice.call(arguments,0),m=!a.exclusive&&!a.namespace,v=[],D,H,L,S,ea,V,ia;h[0]=a;a.delegateTarget=this;if(g&&!a.target.disabled&&!(a.button&&a.type==="click")){L=d(this);L.context=this.ownerDocument||this;for(H=a.target;H!=this;H=H.parentNode||this){ea={};V=[];L[0]=H;for(D=0;D<g;D++){S=b[D];ia=S.selector;if(ea[ia]===w){var da=ea,qa=ia,va;if(S.quick){va=S.quick;var wa=H.attributes||{};va=(!va[1]||H.nodeName.toLowerCase()===va[1])&&(!va[2]||
(wa.id||{}).value===va[2])&&(!va[3]||va[3].test((wa["class"]||{}).value))}else va=L.is(ia);da[qa]=va}ea[ia]&&V.push(S)}V.length&&v.push({elem:H,matches:V})}}b.length>g&&v.push({elem:this,matches:b.slice(g)});for(D=0;D<v.length&&!a.isPropagationStopped();D++){g=v[D];a.currentTarget=g.elem;for(b=0;b<g.matches.length&&!a.isImmediatePropagationStopped();b++){S=g.matches[b];if(m||!a.namespace&&!S.namespace||a.namespace_re&&a.namespace_re.test(S.namespace)){a.data=S.data;a.handleObj=S;S=((d.event.special[S.origType]||
{}).handle||S.handler).apply(g.elem,h);if(S!==w){a.result=S;if(S===false){a.preventDefault();a.stopPropagation()}}}}}return a.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){if(a.which==null)a.which=b.charCode!=null?b.charCode:b.keyCode;return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
filter:function(a,b){var g,h,m=b.button,v=b.fromElement;if(a.pageX==null&&b.clientX!=null){g=a.target.ownerDocument||C;h=g.documentElement;g=g.body;a.pageX=b.clientX+(h&&h.scrollLeft||g&&g.scrollLeft||0)-(h&&h.clientLeft||g&&g.clientLeft||0);a.pageY=b.clientY+(h&&h.scrollTop||g&&g.scrollTop||0)-(h&&h.clientTop||g&&g.clientTop||0)}if(!a.relatedTarget&&v)a.relatedTarget=v===a.target?b.toElement:v;if(!a.which&&m!==w)a.which=m&1?1:m&2?3:m&4?2:0;return a}},fix:function(a){if(a[d.expando])return a;var b,
g,h=a,m=d.event.fixHooks[a.type]||{},v=m.props?this.props.concat(m.props):this.props;a=d.Event(h);for(b=v.length;b;){g=v[--b];a[g]=h[g]}if(!a.target)a.target=h.srcElement||C;if(a.target.nodeType===3)a.target=a.target.parentNode;if(a.metaKey===w)a.metaKey=a.ctrlKey;return m.filter?m.filter(a,h):a},special:{ready:{setup:d.bindReady},load:{noBubble:true},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,g){if(d.isWindow(this))this.onbeforeunload=g},teardown:function(a,
b){if(this.onbeforeunload===b)this.onbeforeunload=null}}},simulate:function(a,b,g,h){a=d.extend(new d.Event,g,{type:a,isSimulated:true,originalEvent:{}});h?d.event.trigger(a,null,b):d.event.dispatch.call(b,a);a.isDefaultPrevented()&&g.preventDefault()}};d.event.handle=d.event.dispatch;d.removeEvent=C.removeEventListener?function(a,b,g){a.removeEventListener&&a.removeEventListener(b,g,false)}:function(a,b,g){a.detachEvent&&a.detachEvent("on"+b,g)};d.Event=function(a,b){if(!(this instanceof d.Event))return new d.Event(a,
b);if(a&&a.type){this.originalEvent=a;this.type=a.type;this.isDefaultPrevented=a.defaultPrevented||a.returnValue===false||a.getPreventDefault&&a.getPreventDefault()?c:j}else this.type=a;b&&d.extend(this,b);this.timeStamp=a&&a.timeStamp||d.now();this[d.expando]=true};d.Event.prototype={preventDefault:function(){this.isDefaultPrevented=c;var a=this.originalEvent;if(a)if(a.preventDefault)a.preventDefault();else a.returnValue=false},stopPropagation:function(){this.isPropagationStopped=c;var a=this.originalEvent;
if(a){a.stopPropagation&&a.stopPropagation();a.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=c;this.stopPropagation()},isDefaultPrevented:j,isPropagationStopped:j,isImmediatePropagationStopped:j};d.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){d.event.special[a]={delegateType:b,bindType:b,handle:function(g){var h=g.relatedTarget,m=g.handleObj,v;if(!h||h!==this&&!d.contains(this,h)){g.type=m.origType;v=m.handler.apply(this,arguments);
g.type=b}return v}}});if(!d.support.submitBubbles)d.event.special.submit={setup:function(){if(d.nodeName(this,"form"))return false;d.event.add(this,"click._submit keypress._submit",function(a){a=a.target;if((a=d.nodeName(a,"input")||d.nodeName(a,"button")?a.form:w)&&!a._submit_attached){d.event.add(a,"submit._submit",function(b){this.parentNode&&!b.isTrigger&&d.event.simulate("submit",this.parentNode,b,true)});a._submit_attached=true}})},teardown:function(){if(d.nodeName(this,"form"))return false;
d.event.remove(this,"._submit")}};if(!d.support.changeBubbles)d.event.special.change={setup:function(){if(Ja.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){d.event.add(this,"propertychange._change",function(a){if(a.originalEvent.propertyName==="checked")this._just_changed=true});d.event.add(this,"click._change",function(a){if(this._just_changed&&!a.isTrigger){this._just_changed=false;d.event.simulate("change",this,a,true)}})}return false}d.event.add(this,"beforeactivate._change",
function(a){a=a.target;if(Ja.test(a.nodeName)&&!a._change_attached){d.event.add(a,"change._change",function(b){this.parentNode&&!b.isSimulated&&!b.isTrigger&&d.event.simulate("change",this.parentNode,b,true)});a._change_attached=true}})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){d.event.remove(this,"._change");return Ja.test(this.nodeName)}};d.support.focusinBubbles||
d.each({focus:"focusin",blur:"focusout"},function(a,b){var g=0,h=function(m){d.event.simulate(b,m.target,d.event.fix(m),true)};d.event.special[b]={setup:function(){g++===0&&C.addEventListener(a,h,true)},teardown:function(){--g===0&&C.removeEventListener(a,h,true)}}});d.fn.extend({on:function(a,b,g,h,m){var v,D;if(typeof a==="object"){if(typeof b!=="string"){g=b;b=w}for(D in a)this.on(D,b,g,a[D],m);return this}if(g==null&&h==null){h=b;g=b=w}else if(h==null)if(typeof b==="string"){h=g;g=w}else{h=g;
g=b;b=w}if(h===false)h=j;else if(!h)return this;if(m===1){v=h;h=function(H){d().off(H);return v.apply(this,arguments)};h.guid=v.guid||(v.guid=d.guid++)}return this.each(function(){d.event.add(this,a,h,g,b)})},one:function(a,b,g,h){return this.on.call(this,a,b,g,h,1)},off:function(a,b,g){if(a&&a.preventDefault&&a.handleObj){var h=a.handleObj;d(a.delegateTarget).off(h.namespace?h.type+"."+h.namespace:h.type,h.selector,h.handler);return this}if(typeof a==="object"){for(h in a)this.off(h,b,a[h]);return this}if(b===
false||typeof b==="function"){g=b;b=w}if(g===false)g=j;return this.each(function(){d.event.remove(this,a,g,b)})},bind:function(a,b,g){return this.on(a,null,b,g)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,g){d(this.context).on(a,this.selector,b,g);return this},die:function(a,b){d(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,g,h){return this.on(b,a,g,h)},undelegate:function(a,b,g){return arguments.length==1?this.off(a,"**"):this.off(b,a,g)},trigger:function(a,
b){return this.each(function(){d.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return d.event.trigger(a,b,this[0],true)},toggle:function(a){var b=arguments,g=a.guid||d.guid++,h=0,m=function(v){var D=(d._data(this,"lastToggle"+a.guid)||0)%h;d._data(this,"lastToggle"+a.guid,D+1);v.preventDefault();return b[D].apply(this,arguments)||false};for(m.guid=g;h<b.length;)b[h++].guid=g;return this.click(m)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});d.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),
function(a,b){d.fn[b]=function(g,h){if(h==null){h=g;g=null}return arguments.length>0?this.on(b,null,g,h):this.trigger(b)};if(d.attrFn)d.attrFn[b]=true;if(Ib.test(b))d.event.fixHooks[b]=d.event.keyHooks;if(Jb.test(b))d.event.fixHooks[b]=d.event.mouseHooks});(function(){function a(A,E,N,Q,R,W){R=0;for(var ka=Q.length;R<ka;R++){var ba=Q[R];if(ba){var ta=false;for(ba=ba[A];ba;){if(ba[h]===N){ta=Q[ba.sizset];break}if(ba.nodeType===1&&!W){ba[h]=N;ba.sizset=R}if(ba.nodeName.toLowerCase()===E){ta=ba;break}ba=
ba[A]}Q[R]=ta}}}function b(A,E,N,Q,R,W){R=0;for(var ka=Q.length;R<ka;R++){var ba=Q[R];if(ba){var ta=false;for(ba=ba[A];ba;){if(ba[h]===N){ta=Q[ba.sizset];break}if(ba.nodeType===1){if(!W){ba[h]=N;ba.sizset=R}if(typeof E!=="string"){if(ba===E){ta=true;break}}else if(V.filter(E,[ba]).length>0){ta=ba;break}}ba=ba[A]}Q[R]=ta}}}var g=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,h="sizcache"+(Math.random()+"").replace(".",
""),m=0,v=Object.prototype.toString,D=false,H=true,L=/\\/g,S=/\r\n/g,ea=/\W/;[0,0].sort(function(){H=false;return 0});var V=function(A,E,N,Q){N=N||[];var R=E=E||C;if(E.nodeType!==1&&E.nodeType!==9)return[];if(!A||typeof A!=="string")return N;var W,ka,ba,ta,G,U=true,ca=V.isXML(E),Y=[],oa=A;do{g.exec("");if(W=g.exec(oa)){oa=W[3];Y.push(W[1]);if(W[2]){ta=W[3];break}}}while(W);if(Y.length>1&&qa.exec(A))if(Y.length===2&&da.relative[Y[0]])ka=Na(Y[0]+Y[1],E,Q);else for(ka=da.relative[Y[0]]?[E]:V(Y.shift(),
E);Y.length;){A=Y.shift();if(da.relative[A])A+=Y.shift();ka=Na(A,ka,Q)}else{if(!Q&&Y.length>1&&E.nodeType===9&&!ca&&da.match.ID.test(Y[0])&&!da.match.ID.test(Y[Y.length-1])){W=V.find(Y.shift(),E,ca);E=W.expr?V.filter(W.expr,W.set)[0]:W.set[0]}if(E){W=Q?{expr:Y.pop(),set:xa(Q)}:V.find(Y.pop(),Y.length===1&&(Y[0]==="~"||Y[0]==="+")&&E.parentNode?E.parentNode:E,ca);ka=W.expr?V.filter(W.expr,W.set):W.set;if(Y.length>0)ba=xa(ka);else U=false;for(;Y.length;){W=G=Y.pop();if(da.relative[G])W=Y.pop();else G=
"";if(W==null)W=E;da.relative[G](ba,W,ca)}}else ba=[]}ba||(ba=ka);ba||V.error(G||A);if(v.call(ba)==="[object Array]")if(U)if(E&&E.nodeType===1)for(A=0;ba[A]!=null;A++){if(ba[A]&&(ba[A]===true||ba[A].nodeType===1&&V.contains(E,ba[A])))N.push(ka[A])}else for(A=0;ba[A]!=null;A++)ba[A]&&ba[A].nodeType===1&&N.push(ka[A]);else N.push.apply(N,ba);else xa(ba,N);if(ta){V(ta,R,N,Q);V.uniqueSort(N)}return N};V.uniqueSort=function(A){if(Qa){D=H;A.sort(Qa);if(D)for(var E=1;E<A.length;E++)A[E]===A[E-1]&&A.splice(E--,
1)}return A};V.matches=function(A,E){return V(A,null,null,E)};V.matchesSelector=function(A,E){return V(E,null,null,[A]).length>0};V.find=function(A,E,N){var Q,R,W,ka,ba,ta;if(!A)return[];R=0;for(W=da.order.length;R<W;R++){ba=da.order[R];if(ka=da.leftMatch[ba].exec(A)){ta=ka[1];ka.splice(1,1);if(ta.substr(ta.length-1)!=="\\"){ka[1]=(ka[1]||"").replace(L,"");Q=da.find[ba](ka,E,N);if(Q!=null){A=A.replace(da.match[ba],"");break}}}}Q||(Q=typeof E.getElementsByTagName!=="undefined"?E.getElementsByTagName("*"):
[]);return{set:Q,expr:A}};V.filter=function(A,E,N,Q){for(var R,W,ka,ba,ta,G,U,ca,Y=A,oa=[],e=E,i=E&&E[0]&&V.isXML(E[0]);A&&E.length;){for(ka in da.filter)if((R=da.leftMatch[ka].exec(A))!=null&&R[2]){G=da.filter[ka];ta=R[1];W=false;R.splice(1,1);if(ta.substr(ta.length-1)!=="\\"){if(e===oa)oa=[];if(da.preFilter[ka])if(R=da.preFilter[ka](R,e,N,oa,Q,i)){if(R===true)continue}else W=ba=true;if(R)for(U=0;(ta=e[U])!=null;U++)if(ta){ba=G(ta,R,U,e);ca=Q^ba;if(N&&ba!=null)if(ca)W=true;else e[U]=false;else if(ca){oa.push(ta);
W=true}}if(ba!==w){N||(e=oa);A=A.replace(da.match[ka],"");if(!W)return[];break}}}if(A===Y)if(W==null)V.error(A);else break;Y=A}return e};V.error=function(A){throw Error("Syntax error, unrecognized expression: "+A);};var ia=V.getText=function(A){var E,N;E=A.nodeType;var Q="";if(E)if(E===1||E===9)if(typeof A.textContent==="string")return A.textContent;else if(typeof A.innerText==="string")return A.innerText.replace(S,"");else for(A=A.firstChild;A;A=A.nextSibling)Q+=ia(A);else{if(E===3||E===4)return A.nodeValue}else for(E=
0;N=A[E];E++)if(N.nodeType!==8)Q+=ia(N);return Q},da=V.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,
POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(A){return A.getAttribute("href")},type:function(A){return A.getAttribute("type")}},relative:{"+":function(A,E){var N=typeof E==="string",Q=N&&!ea.test(E);N=N&&!Q;if(Q)E=E.toLowerCase();Q=0;for(var R=A.length,W;Q<R;Q++)if(W=A[Q]){for(;(W=W.previousSibling)&&W.nodeType!==
1;);A[Q]=N||W&&W.nodeName.toLowerCase()===E?W||false:W===E}N&&V.filter(E,A,true)},">":function(A,E){var N,Q=typeof E==="string",R=0,W=A.length;if(Q&&!ea.test(E))for(E=E.toLowerCase();R<W;R++){if(N=A[R]){N=N.parentNode;A[R]=N.nodeName.toLowerCase()===E?N:false}}else{for(;R<W;R++)if(N=A[R])A[R]=Q?N.parentNode:N.parentNode===E;Q&&V.filter(E,A,true)}},"":function(A,E,N){var Q,R=m++,W=b;if(typeof E==="string"&&!ea.test(E)){Q=E=E.toLowerCase();W=a}W("parentNode",E,R,A,Q,N)},"~":function(A,E,N){var Q,R=
m++,W=b;if(typeof E==="string"&&!ea.test(E)){Q=E=E.toLowerCase();W=a}W("previousSibling",E,R,A,Q,N)}},find:{ID:function(A,E,N){if(typeof E.getElementById!=="undefined"&&!N)return(A=E.getElementById(A[1]))&&A.parentNode?[A]:[]},NAME:function(A,E){if(typeof E.getElementsByName!=="undefined"){for(var N=[],Q=E.getElementsByName(A[1]),R=0,W=Q.length;R<W;R++)Q[R].getAttribute("name")===A[1]&&N.push(Q[R]);return N.length===0?null:N}},TAG:function(A,E){if(typeof E.getElementsByTagName!=="undefined")return E.getElementsByTagName(A[1])}},
preFilter:{CLASS:function(A,E,N,Q,R,W){A=" "+A[1].replace(L,"")+" ";if(W)return A;W=0;for(var ka;(ka=E[W])!=null;W++)if(ka)if(R^(ka.className&&(" "+ka.className+" ").replace(/[\t\n\r]/g," ").indexOf(A)>=0))N||Q.push(ka);else if(N)E[W]=false;return false},ID:function(A){return A[1].replace(L,"")},TAG:function(A){return A[1].replace(L,"").toLowerCase()},CHILD:function(A){if(A[1]==="nth"){A[2]||V.error(A[0]);A[2]=A[2].replace(/^\+|\s*/g,"");var E=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(A[2]==="even"&&"2n"||
A[2]==="odd"&&"2n+1"||!/\D/.test(A[2])&&"0n+"+A[2]||A[2]);A[2]=E[1]+(E[2]||1)-0;A[3]=E[3]-0}else A[2]&&V.error(A[0]);A[0]=m++;return A},ATTR:function(A,E,N,Q,R,W){E=A[1]=A[1].replace(L,"");if(!W&&da.attrMap[E])A[1]=da.attrMap[E];A[4]=(A[4]||A[5]||"").replace(L,"");if(A[2]==="~=")A[4]=" "+A[4]+" ";return A},PSEUDO:function(A,E,N,Q,R){if(A[1]==="not")if((g.exec(A[3])||"").length>1||/^\w/.test(A[3]))A[3]=V(A[3],null,null,E);else{A=V.filter(A[3],E,N,true^R);N||Q.push.apply(Q,A);return false}else if(da.match.POS.test(A[0])||
da.match.CHILD.test(A[0]))return true;return A},POS:function(A){A.unshift(true);return A}},filters:{enabled:function(A){return A.disabled===false&&A.type!=="hidden"},disabled:function(A){return A.disabled===true},checked:function(A){return A.checked===true},selected:function(A){return A.selected===true},parent:function(A){return!!A.firstChild},empty:function(A){return!A.firstChild},has:function(A,E,N){return!!V(N[3],A).length},header:function(A){return/h\d/i.test(A.nodeName)},text:function(A){var E=
A.getAttribute("type"),N=A.type;return A.nodeName.toLowerCase()==="input"&&"text"===N&&(E===N||E===null)},radio:function(A){return A.nodeName.toLowerCase()==="input"&&"radio"===A.type},checkbox:function(A){return A.nodeName.toLowerCase()==="input"&&"checkbox"===A.type},file:function(A){return A.nodeName.toLowerCase()==="input"&&"file"===A.type},password:function(A){return A.nodeName.toLowerCase()==="input"&&"password"===A.type},submit:function(A){var E=A.nodeName.toLowerCase();return(E==="input"||
E==="button")&&"submit"===A.type},image:function(A){return A.nodeName.toLowerCase()==="input"&&"image"===A.type},reset:function(A){var E=A.nodeName.toLowerCase();return(E==="input"||E==="button")&&"reset"===A.type},button:function(A){var E=A.nodeName.toLowerCase();return E==="input"&&"button"===A.type||E==="button"},input:function(A){return/input|select|textarea|button/i.test(A.nodeName)},focus:function(A){return A===A.ownerDocument.activeElement}},setFilters:{first:function(A,E){return E===0},last:function(A,
E,N,Q){return E===Q.length-1},even:function(A,E){return E%2===0},odd:function(A,E){return E%2===1},lt:function(A,E,N){return E<N[3]-0},gt:function(A,E,N){return E>N[3]-0},nth:function(A,E,N){return N[3]-0===E},eq:function(A,E,N){return N[3]-0===E}},filter:{PSEUDO:function(A,E,N,Q){var R=E[1],W=da.filters[R];if(W)return W(A,N,E,Q);else if(R==="contains")return(A.textContent||A.innerText||ia([A])||"").indexOf(E[3])>=0;else if(R==="not"){E=E[3];N=0;for(Q=E.length;N<Q;N++)if(E[N]===A)return false;return true}else V.error(R)},
CHILD:function(A,E){var N,Q,R,W,ka,ba;N=E[1];ba=A;switch(N){case "only":case "first":for(;ba=ba.previousSibling;)if(ba.nodeType===1)return false;if(N==="first")return true;ba=A;case "last":for(;ba=ba.nextSibling;)if(ba.nodeType===1)return false;return true;case "nth":N=E[2];Q=E[3];if(N===1&&Q===0)return true;R=E[0];if((W=A.parentNode)&&(W[h]!==R||!A.nodeIndex)){ka=0;for(ba=W.firstChild;ba;ba=ba.nextSibling)if(ba.nodeType===1)ba.nodeIndex=++ka;W[h]=R}ba=A.nodeIndex-Q;return N===0?ba===0:ba%N===0&&
ba/N>=0}},ID:function(A,E){return A.nodeType===1&&A.getAttribute("id")===E},TAG:function(A,E){return E==="*"&&A.nodeType===1||!!A.nodeName&&A.nodeName.toLowerCase()===E},CLASS:function(A,E){return(" "+(A.className||A.getAttribute("class"))+" ").indexOf(E)>-1},ATTR:function(A,E){var N=E[1];N=V.attr?V.attr(A,N):da.attrHandle[N]?da.attrHandle[N](A):A[N]!=null?A[N]:A.getAttribute(N);var Q=N+"",R=E[2],W=E[4];return N==null?R==="!=":!R&&V.attr?N!=null:R==="="?Q===W:R==="*="?Q.indexOf(W)>=0:R==="~="?(" "+
Q+" ").indexOf(W)>=0:!W?Q&&N!==false:R==="!="?Q!==W:R==="^="?Q.indexOf(W)===0:R==="$="?Q.substr(Q.length-W.length)===W:R==="|="?Q===W||Q.substr(0,W.length+1)===W+"-":false},POS:function(A,E,N,Q){var R=da.setFilters[E[2]];if(R)return R(A,N,E,Q)}}},qa=da.match.POS,va=function(A,E){return"\\"+(E-0+1)},wa;for(wa in da.match){da.match[wa]=RegExp(da.match[wa].source+/(?![^\[]*\])(?![^\(]*\))/.source);da.leftMatch[wa]=RegExp(/(^(?:.|\r|\n)*?)/.source+da.match[wa].source.replace(/\\(\d+)/g,va))}var xa=function(A,
E){A=Array.prototype.slice.call(A,0);if(E){E.push.apply(E,A);return E}return A};try{Array.prototype.slice.call(C.documentElement.childNodes,0)}catch(Za){xa=function(A,E){var N=0,Q=E||[];if(v.call(A)==="[object Array]")Array.prototype.push.apply(Q,A);else if(typeof A.length==="number")for(var R=A.length;N<R;N++)Q.push(A[N]);else for(;A[N];N++)Q.push(A[N]);return Q}}var Qa,pa;if(C.documentElement.compareDocumentPosition)Qa=function(A,E){if(A===E){D=true;return 0}if(!A.compareDocumentPosition||!E.compareDocumentPosition)return A.compareDocumentPosition?
-1:1;return A.compareDocumentPosition(E)&4?-1:1};else{Qa=function(A,E){if(A===E){D=true;return 0}else if(A.sourceIndex&&E.sourceIndex)return A.sourceIndex-E.sourceIndex;var N,Q,R=[],W=[];N=A.parentNode;Q=E.parentNode;var ka=N;if(N===Q)return pa(A,E);else if(N){if(!Q)return 1}else return-1;for(;ka;){R.unshift(ka);ka=ka.parentNode}for(ka=Q;ka;){W.unshift(ka);ka=ka.parentNode}N=R.length;Q=W.length;for(ka=0;ka<N&&ka<Q;ka++)if(R[ka]!==W[ka])return pa(R[ka],W[ka]);return ka===N?pa(A,W[ka],-1):pa(R[ka],
E,1)};pa=function(A,E,N){if(A===E)return N;for(A=A.nextSibling;A;){if(A===E)return-1;A=A.nextSibling}return 1}}(function(){var A=C.createElement("div"),E="script"+(new Date).getTime(),N=C.documentElement;A.innerHTML="<a name='"+E+"'/>";N.insertBefore(A,N.firstChild);if(C.getElementById(E)){da.find.ID=function(Q,R,W){if(typeof R.getElementById!=="undefined"&&!W)return(R=R.getElementById(Q[1]))?R.id===Q[1]||typeof R.getAttributeNode!=="undefined"&&R.getAttributeNode("id").nodeValue===Q[1]?[R]:w:[]};
da.filter.ID=function(Q,R){var W=typeof Q.getAttributeNode!=="undefined"&&Q.getAttributeNode("id");return Q.nodeType===1&&W&&W.nodeValue===R}}N.removeChild(A);N=A=null})();(function(){var A=C.createElement("div");A.appendChild(C.createComment(""));if(A.getElementsByTagName("*").length>0)da.find.TAG=function(E,N){var Q=N.getElementsByTagName(E[1]);if(E[1]==="*"){for(var R=[],W=0;Q[W];W++)Q[W].nodeType===1&&R.push(Q[W]);Q=R}return Q};A.innerHTML="<a href='#'></a>";if(A.firstChild&&typeof A.firstChild.getAttribute!==
"undefined"&&A.firstChild.getAttribute("href")!=="#")da.attrHandle.href=function(E){return E.getAttribute("href",2)};A=null})();C.querySelectorAll&&function(){var A=V,E=C.createElement("div");E.innerHTML="<p class='TEST'></p>";if(!(E.querySelectorAll&&E.querySelectorAll(".TEST").length===0)){V=function(Q,R,W,ka){R=R||C;if(!ka&&!V.isXML(R)){var ba=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(Q);if(ba&&(R.nodeType===1||R.nodeType===9))if(ba[1])return xa(R.getElementsByTagName(Q),W);else if(ba[2]&&da.find.CLASS&&
R.getElementsByClassName)return xa(R.getElementsByClassName(ba[2]),W);if(R.nodeType===9){if(Q==="body"&&R.body)return xa([R.body],W);else if(ba&&ba[3]){var ta=R.getElementById(ba[3]);if(ta&&ta.parentNode){if(ta.id===ba[3])return xa([ta],W)}else return xa([],W)}try{return xa(R.querySelectorAll(Q),W)}catch(G){}}else if(R.nodeType===1&&R.nodeName.toLowerCase()!=="object"){ba=R;var U=(ta=R.getAttribute("id"))||"__sizzle__",ca=R.parentNode,Y=/^\s*[+~]/.test(Q);if(ta)U=U.replace(/'/g,"\\$&");else R.setAttribute("id",
U);if(Y&&ca)R=R.parentNode;try{if(!Y||ca)return xa(R.querySelectorAll("[id='"+U+"'] "+Q),W)}catch(oa){}finally{ta||ba.removeAttribute("id")}}}return A(Q,R,W,ka)};for(var N in A)V[N]=A[N];E=null}}();(function(){var A=C.documentElement,E=A.matchesSelector||A.mozMatchesSelector||A.webkitMatchesSelector||A.msMatchesSelector;if(E){var N=!E.call(C.createElement("div"),"div"),Q=false;try{E.call(C.documentElement,"[test!='']:sizzle")}catch(R){Q=true}V.matchesSelector=function(W,ka){ka=ka.replace(/\=\s*([^'"\]]*)\s*\]/g,
"='$1']");if(!V.isXML(W))try{if(Q||!da.match.PSEUDO.test(ka)&&!/!=/.test(ka)){var ba=E.call(W,ka);if(ba||!N||W.document&&W.document.nodeType!==11)return ba}}catch(ta){}return V(ka,null,null,[W]).length>0}}})();(function(){var A=C.createElement("div");A.innerHTML="<div class='test e'></div><div class='test'></div>";if(!(!A.getElementsByClassName||A.getElementsByClassName("e").length===0)){A.lastChild.className="e";if(A.getElementsByClassName("e").length!==1){da.order.splice(1,0,"CLASS");da.find.CLASS=
function(E,N,Q){if(typeof N.getElementsByClassName!=="undefined"&&!Q)return N.getElementsByClassName(E[1])};A=null}}})();V.contains=C.documentElement.contains?function(A,E){return A!==E&&(A.contains?A.contains(E):true)}:C.documentElement.compareDocumentPosition?function(A,E){return!!(A.compareDocumentPosition(E)&16)}:function(){return false};V.isXML=function(A){return(A=(A?A.ownerDocument||A:0).documentElement)?A.nodeName!=="HTML":false};var Na=function(A,E,N){var Q,R=[],W="";for(E=E.nodeType?[E]:
E;Q=da.match.PSEUDO.exec(A);){W+=Q[0];A=A.replace(da.match.PSEUDO,"")}A=da.relative[A]?A+"*":A;Q=0;for(var ka=E.length;Q<ka;Q++)V(A,E[Q],R,N);return V.filter(W,R)};V.attr=d.attr;V.selectors.attrMap={};d.find=V;d.expr=V.selectors;d.expr[":"]=d.expr.filters;d.unique=V.uniqueSort;d.text=V.getText;d.isXMLDoc=V.isXML;d.contains=V.contains})();var J=/Until$/,sa=/^(?:parents|prevUntil|prevAll)/,Aa=/,/,Ea=/^.[^:#\[\.,]*$/,$a=Array.prototype.slice,Fa=d.expr.match.POS,ob={children:true,contents:true,next:true,
prev:true};d.fn.extend({find:function(a){var b=this,g,h;if(typeof a!=="string")return d(a).filter(function(){g=0;for(h=b.length;g<h;g++)if(d.contains(b[g],this))return true});var m=this.pushStack("","find",a),v,D,H;g=0;for(h=this.length;g<h;g++){v=m.length;d.find(a,this[g],m);if(g>0)for(D=v;D<m.length;D++)for(H=0;H<v;H++)if(m[H]===m[D]){m.splice(D--,1);break}}return m},has:function(a){var b=d(a);return this.filter(function(){for(var g=0,h=b.length;g<h;g++)if(d.contains(this,b[g]))return true})},not:function(a){return this.pushStack(f(this,
a,false),"not",a)},filter:function(a){return this.pushStack(f(this,a,true),"filter",a)},is:function(a){return!!a&&(typeof a==="string"?Fa.test(a)?d(a,this.context).index(this[0])>=0:d.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var g=[],h,m,v=this[0];if(d.isArray(a)){for(m=1;v&&v.ownerDocument&&v!==b;){for(h=0;h<a.length;h++)d(v).is(a[h])&&g.push({selector:a[h],elem:v,level:m});v=v.parentNode;m++}return g}var D=Fa.test(a)||typeof a!=="string"?d(a,b||this.context):0;h=0;
for(m=this.length;h<m;h++)for(v=this[h];v;)if(D?D.index(v)>-1:d.find.matchesSelector(v,a)){g.push(v);break}else{v=v.parentNode;if(!v||!v.ownerDocument||v===b||v.nodeType===11)break}g=g.length>1?d.unique(g):g;return this.pushStack(g,"closest",a)},index:function(a){if(!a)return this[0]&&this[0].parentNode?this.prevAll().length:-1;if(typeof a==="string")return d.inArray(this[0],d(a));return d.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var g=typeof a==="string"?d(a,b):d.makeArray(a&&a.nodeType?
[a]:a),h=d.merge(this.get(),g);return this.pushStack(!g[0]||!g[0].parentNode||g[0].parentNode.nodeType===11||!h[0]||!h[0].parentNode||h[0].parentNode.nodeType===11?h:d.unique(h))},andSelf:function(){return this.add(this.prevObject)}});d.each({parent:function(a){return(a=a.parentNode)&&a.nodeType!==11?a:null},parents:function(a){return d.dir(a,"parentNode")},parentsUntil:function(a,b,g){return d.dir(a,"parentNode",g)},next:function(a){return d.nth(a,2,"nextSibling")},prev:function(a){return d.nth(a,
2,"previousSibling")},nextAll:function(a){return d.dir(a,"nextSibling")},prevAll:function(a){return d.dir(a,"previousSibling")},nextUntil:function(a,b,g){return d.dir(a,"nextSibling",g)},prevUntil:function(a,b,g){return d.dir(a,"previousSibling",g)},siblings:function(a){return d.sibling(a.parentNode.firstChild,a)},children:function(a){return d.sibling(a.firstChild)},contents:function(a){return d.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:d.makeArray(a.childNodes)}},function(a,
b){d.fn[a]=function(g,h){var m=d.map(this,b,g);J.test(a)||(h=g);if(h&&typeof h==="string")m=d.filter(h,m);m=this.length>1&&!ob[a]?d.unique(m):m;if((this.length>1||Aa.test(h))&&sa.test(a))m=m.reverse();return this.pushStack(m,a,$a.call(arguments).join(","))}});d.extend({filter:function(a,b,g){if(g)a=":not("+a+")";return b.length===1?d.find.matchesSelector(b[0],a)?[b[0]]:[]:d.find.matches(a,b)},dir:function(a,b,g){var h=[];for(a=a[b];a&&a.nodeType!==9&&(g===w||a.nodeType!==1||!d(a).is(g));){a.nodeType===
1&&h.push(a);a=a[b]}return h},nth:function(a,b,g){b=b||1;for(var h=0;a;a=a[g])if(a.nodeType===1&&++h===b)break;return a},sibling:function(a,b){for(var g=[];a;a=a.nextSibling)a.nodeType===1&&a!==b&&g.push(a);return g}});var rb="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",jb=/ jQuery\d+="(?:\d+|null)"/g,kb=/^\s+/,Sb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Kb=/<([\w:]+)/,
Tb=/<tbody/i,Ub=/<|&#?\w+;/,ab=/<(?:script|style)/i,uc=/<(?:script|object|embed|option|style)/i,Db=RegExp("<(?:"+rb+")","i"),cb=/checked\s*(?:[^=]|=\s*.checked.)/i,jc=/\/(java|ecma)script/i,tc=/^\s*<!(?:\[CDATA\[|\-\-)/,La={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],
area:[1,"<map>","</map>"],_default:[0,"",""]},Vb=l(C);La.optgroup=La.option;La.tbody=La.tfoot=La.colgroup=La.caption=La.thead;La.th=La.td;if(!d.support.htmlSerialize)La._default=[1,"div<div>","</div>"];d.fn.extend({text:function(a){if(d.isFunction(a))return this.each(function(b){var g=d(this);g.text(a.call(this,b,g.text()))});if(typeof a!=="object"&&a!==w)return this.empty().append((this[0]&&this[0].ownerDocument||C).createTextNode(a));return d.text(this)},wrapAll:function(a){if(d.isFunction(a))return this.each(function(g){d(this).wrapAll(a.call(this,
g))});if(this[0]){var b=d(a,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var g=this;g.firstChild&&g.firstChild.nodeType===1;)g=g.firstChild;return g}).append(this)}return this},wrapInner:function(a){if(d.isFunction(a))return this.each(function(b){d(this).wrapInner(a.call(this,b))});return this.each(function(){var b=d(this),g=b.contents();g.length?g.wrapAll(a):b.append(a)})},wrap:function(a){var b=d.isFunction(a);return this.each(function(g){d(this).wrapAll(b?
a.call(this,g):a)})},unwrap:function(){return this.parent().each(function(){d.nodeName(this,"body")||d(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(b){this.parentNode.insertBefore(b,
this)});else if(arguments.length){var a=d.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(b){this.parentNode.insertBefore(b,this.nextSibling)});else if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,d.clean(arguments));return a}},remove:function(a,b){for(var g=0,h;(h=this[g])!=null;g++)if(!a||d.filter(a,[h]).length){if(!b&&h.nodeType===
1){d.cleanData(h.getElementsByTagName("*"));d.cleanData([h])}h.parentNode&&h.parentNode.removeChild(h)}return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++)for(b.nodeType===1&&d.cleanData(b.getElementsByTagName("*"));b.firstChild;)b.removeChild(b.firstChild);return this},clone:function(a,b){a=a==null?false:a;b=b==null?a:b;return this.map(function(){return d.clone(this,a,b)})},html:function(a){if(a===w)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(jb,""):null;else if(typeof a===
"string"&&!ab.test(a)&&(d.support.leadingWhitespace||!kb.test(a))&&!La[(Kb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Sb,"<$1></$2>");try{for(var b=0,g=this.length;b<g;b++)if(this[b].nodeType===1){d.cleanData(this[b].getElementsByTagName("*"));this[b].innerHTML=a}}catch(h){this.empty().append(a)}}else d.isFunction(a)?this.each(function(m){var v=d(this);v.html(a.call(this,m,v.html()))}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(d.isFunction(a))return this.each(function(b){var g=
d(this),h=g.html();g.replaceWith(a.call(this,b,h))});if(typeof a!=="string")a=d(a).detach();return this.each(function(){var b=this.nextSibling,g=this.parentNode;d(this).remove();b?d(b).before(a):d(g).append(a)})}else return this.length?this.pushStack(d(d.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,true)},domManip:function(a,b,g){var h,m,v,D=a[0],H=[];if(!d.support.checkClone&&arguments.length===3&&typeof D==="string"&&cb.test(D))return this.each(function(){d(this).domManip(a,
b,g,true)});if(d.isFunction(D))return this.each(function(ea){var V=d(this);a[0]=D.call(this,ea,b?V.html():w);V.domManip(a,b,g)});if(this[0]){h=D&&D.parentNode;h=d.support.parentNode&&h&&h.nodeType===11&&h.childNodes.length===this.length?{fragment:h}:d.buildFragment(a,this,H);v=h.fragment;if(m=v.childNodes.length===1?v=v.firstChild:v.firstChild){b=b&&d.nodeName(m,"tr");m=0;for(var L=this.length,S=L-1;m<L;m++)g.call(b?d.nodeName(this[m],"table")?this[m].getElementsByTagName("tbody")[0]||this[m].appendChild(this[m].ownerDocument.createElement("tbody")):
this[m]:this[m],h.cacheable||L>1&&m<S?d.clone(v,true,true):v)}H.length&&d.each(H,O)}return this}});d.buildFragment=function(a,b,g){var h,m,v,D,H=a[0];if(b&&b[0])D=b[0].ownerDocument||b[0];D.createDocumentFragment||(D=C);if(a.length===1&&typeof H==="string"&&H.length<512&&D===C&&H.charAt(0)==="<"&&!uc.test(H)&&(d.support.checkClone||!cb.test(H))&&(d.support.html5Clone||!Db.test(H))){m=true;if((v=d.fragments[H])&&v!==1)h=v}if(!h){h=D.createDocumentFragment();d.clean(a,D,h,g)}if(m)d.fragments[H]=v?h:
1;return{fragment:h,cacheable:m}};d.fragments={};d.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){d.fn[a]=function(g){var h=[];g=d(g);var m=this.length===1&&this[0].parentNode;if(m&&m.nodeType===11&&m.childNodes.length===1&&g.length===1){g[b](this[0]);return this}else{m=0;for(var v=g.length;m<v;m++){var D=(m>0?this.clone(true):this).get();d(g[m])[b](D);h=h.concat(D)}return this.pushStack(h,a,g.selector)}}});d.extend({clone:function(a,
b,g){var h,m,v;if(d.support.html5Clone||!Db.test("<"+a.nodeName))h=a.cloneNode(true);else{h=C.createElement("div");Vb.appendChild(h);h.innerHTML=a.outerHTML;h=h.firstChild}var D=h;if((!d.support.noCloneEvent||!d.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!d.isXMLDoc(a)){q(a,D);h=n(a);m=n(D);for(v=0;h[v];++v)m[v]&&q(h[v],m[v])}if(b){k(a,D);if(g){h=n(a);m=n(D);for(v=0;h[v];++v)k(h[v],m[v])}}return D},clean:function(a,b,g,h){b=b||C;if(typeof b.createElement==="undefined")b=b.ownerDocument||
b[0]&&b[0].ownerDocument||C;for(var m=[],v,D=0,H;(H=a[D])!=null;D++){if(typeof H==="number")H+="";if(H){if(typeof H==="string")if(Ub.test(H)){H=H.replace(Sb,"<$1></$2>");v=(Kb.exec(H)||["",""])[1].toLowerCase();var L=La[v]||La._default,S=L[0],ea=b.createElement("div");b===C?Vb.appendChild(ea):l(b).appendChild(ea);for(ea.innerHTML=L[1]+H+L[2];S--;)ea=ea.lastChild;if(!d.support.tbody){S=Tb.test(H);L=v==="table"&&!S?ea.firstChild&&ea.firstChild.childNodes:L[1]==="<table>"&&!S?ea.childNodes:[];for(v=
L.length-1;v>=0;--v)d.nodeName(L[v],"tbody")&&!L[v].childNodes.length&&L[v].parentNode.removeChild(L[v])}!d.support.leadingWhitespace&&kb.test(H)&&ea.insertBefore(b.createTextNode(kb.exec(H)[0]),ea.firstChild);H=ea.childNodes}else H=b.createTextNode(H);var V;if(!d.support.appendChecked)if(H[0]&&typeof(V=H.length)==="number")for(v=0;v<V;v++)I(H[v]);else I(H);if(H.nodeType)m.push(H);else m=d.merge(m,H)}}if(g){a=function(ia){return!ia.type||jc.test(ia.type)};for(D=0;m[D];D++)if(h&&d.nodeName(m[D],"script")&&
(!m[D].type||m[D].type.toLowerCase()==="text/javascript"))h.push(m[D].parentNode?m[D].parentNode.removeChild(m[D]):m[D]);else{if(m[D].nodeType===1){b=d.grep(m[D].getElementsByTagName("script"),a);m.splice.apply(m,[D+1,0].concat(b))}g.appendChild(m[D])}}return m},cleanData:function(a){for(var b,g,h=d.cache,m=d.event.special,v=d.support.deleteExpando,D=0,H;(H=a[D])!=null;D++)if(!(H.nodeName&&d.noData[H.nodeName.toLowerCase()]))if(g=H[d.expando]){if((b=h[g])&&b.events){for(var L in b.events)m[L]?d.event.remove(H,
L):d.removeEvent(H,L,b.handle);if(b.handle)b.handle.elem=null}if(v)delete H[d.expando];else H.removeAttribute&&H.removeAttribute(d.expando);delete h[g]}}});var pb=/alpha\([^)]*\)/i,kc=/opacity=([^)]*)/,Ka=/([A-Z]|^ms)/g,Oa=/^-?\d+(?:px)?$/i,lc=/^-?\d/,Eb=/^([\-+])=([\-+.\de]+)/,Lb={position:"absolute",visibility:"hidden",display:"block"},ec=["Left","Right"],fc=["Top","Bottom"],bb,Mb,Pa;d.fn.css=function(a,b){if(arguments.length===2&&b===w)return this;return d.access(this,a,b,true,function(g,h,m){return m!==
w?d.style(g,h,m):d.css(g,h)})};d.extend({cssHooks:{opacity:{get:function(a,b){if(b){var g=bb(a,"opacity","opacity");return g===""?"1":g}else return a.style.opacity}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":d.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,g,h){if(!(!a||a.nodeType===3||a.nodeType===8||!a.style)){var m,v=d.camelCase(b),D=a.style,H=d.cssHooks[v];b=d.cssProps[v]||v;if(g!==
w){h=typeof g;if(h==="string"&&(m=Eb.exec(g))){g=+(m[1]+1)*+m[2]+parseFloat(d.css(a,b));h="number"}if(!(g==null||h==="number"&&isNaN(g))){if(h==="number"&&!d.cssNumber[v])g+="px";if(!H||!("set"in H)||(g=H.set(a,g))!==w)try{D[b]=g}catch(L){}}}else{if(H&&"get"in H&&(m=H.get(a,false,h))!==w)return m;return D[b]}}},css:function(a,b,g){var h,m;b=d.camelCase(b);m=d.cssHooks[b];b=d.cssProps[b]||b;if(b==="cssFloat")b="float";if(m&&"get"in m&&(h=m.get(a,true,g))!==w)return h;else if(bb)return bb(a,b)},swap:function(a,
b,g){var h={},m;for(m in b){h[m]=a.style[m];a.style[m]=b[m]}g.call(a);for(m in b)a.style[m]=h[m]}});d.curCSS=d.css;d.each(["height","width"],function(a,b){d.cssHooks[b]={get:function(g,h,m){var v;if(h){if(g.offsetWidth!==0)return Z(g,b,m);else d.swap(g,Lb,function(){v=Z(g,b,m)});return v}},set:function(g,h){if(Oa.test(h)){h=parseFloat(h);if(h>=0)return h+"px"}else return h}}});if(!d.support.opacity)d.cssHooks.opacity={get:function(a,b){return kc.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||
"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var g=a.style,h=a.currentStyle,m=d.isNumeric(b)?"alpha(opacity="+b*100+")":"",v=h&&h.filter||g.filter||"";g.zoom=1;if(b>=1&&d.trim(v.replace(pb,""))===""){g.removeAttribute("filter");if(h&&!h.filter)return}g.filter=pb.test(v)?v.replace(pb,m):v+" "+m}};d(function(){if(!d.support.reliableMarginRight)d.cssHooks.marginRight={get:function(a,b){var g;d.swap(a,{display:"inline-block"},function(){g=b?bb(a,"margin-right","marginRight"):a.style.marginRight});
return g}}});if(C.defaultView&&C.defaultView.getComputedStyle)Mb=function(a,b){var g,h,m;b=b.replace(Ka,"-$1").toLowerCase();if((h=a.ownerDocument.defaultView)&&(m=h.getComputedStyle(a,null))){g=m.getPropertyValue(b);if(g===""&&!d.contains(a.ownerDocument.documentElement,a))g=d.style(a,b)}return g};if(C.documentElement.currentStyle)Pa=function(a,b){var g,h,m=a.currentStyle&&a.currentStyle[b],v=a.style;if(m===null&&v&&(g=v[b]))m=g;if(!Oa.test(m)&&lc.test(m)){g=v.left;if(h=a.runtimeStyle&&a.runtimeStyle.left)a.runtimeStyle.left=
a.currentStyle.left;v.left=b==="fontSize"?"1em":m||0;m=v.pixelLeft+"px";v.left=g;if(h)a.runtimeStyle.left=h}return m===""?"auto":m};bb=Mb||Pa;if(d.expr&&d.expr.filters){d.expr.filters.hidden=function(a){var b=a.offsetHeight;return a.offsetWidth===0&&b===0||!d.support.reliableHiddenOffsets&&(a.style&&a.style.display||d.css(a,"display"))==="none"};d.expr.filters.visible=function(a){return!d.expr.filters.hidden(a)}}var Nb=/%20/g,xb=/\[\]$/,Wb=/\r?\n/g,Xb=/#.*$/,mc=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,nc=
/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,oc=/^(?:GET|HEAD)$/,Yb=/^\/\//,Zb=/\?/,$b=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,pc=/^(?:select|textarea)/i,Qb=/\s+/,qc=/([?&])_=[^&]*/,ac=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bc=d.fn.load,Gb={},Ob={},db,lb,cc=["*/"]+["*"];try{db=aa.href}catch(vc){db=C.createElement("a");db.href="";db=db.href}lb=ac.exec(db.toLowerCase())||[];d.fn.extend({load:function(a,b,g){if(typeof a!==
"string"&&bc)return bc.apply(this,arguments);else if(!this.length)return this;var h=a.indexOf(" ");if(h>=0){var m=a.slice(h,a.length);a=a.slice(0,h)}h="GET";if(b)if(d.isFunction(b)){g=b;b=w}else if(typeof b==="object"){b=d.param(b,d.ajaxSettings.traditional);h="POST"}var v=this;d.ajax({url:a,type:h,dataType:"html",data:b,complete:function(D,H,L){L=D.responseText;if(D.isResolved()){D.done(function(S){L=S});v.html(m?d("<div>").append(L.replace($b,"")).find(m):L)}g&&v.each(g,[L,H,D])}});return this},
serialize:function(){return d.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?d.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||pc.test(this.nodeName)||nc.test(this.type))}).map(function(a,b){var g=d(this).val();return g==null?null:d.isArray(g)?d.map(g,function(h){return{name:b.name,value:h.replace(Wb,"\r\n")}}):{name:b.name,value:g.replace(Wb,"\r\n")}}).get()}});d.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),
function(a,b){d.fn[b]=function(g){return this.on(b,g)}});d.each(["get","post"],function(a,b){d[b]=function(g,h,m,v){if(d.isFunction(h)){v=v||m;m=h;h=w}return d.ajax({type:b,url:g,data:h,success:m,dataType:v})}});d.extend({getScript:function(a,b){return d.get(a,w,b,"script")},getJSON:function(a,b,g){return d.get(a,b,g,"json")},ajaxSetup:function(a,b){if(b)ra(a,d.ajaxSettings);else{b=a;a=d.ajaxSettings}ra(a,b);return a},ajaxSettings:{url:db,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(lb[1]),
global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":cc},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":x.String,"text html":true,"text json":d.parseJSON,"text xml":d.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:ja(Gb),ajaxTransport:ja(Ob),ajax:function(a,
b){function g(E,N,Q,R){if(xa!==2){xa=2;va&&clearTimeout(va);qa=w;ia=R||"";pa.readyState=E>0?4:0;var W,ka,ba;R=N;if(Q){var ta=h,G=pa,U=ta.contents,ca=ta.dataTypes,Y=ta.responseFields,oa,e,i,p;for(e in Y)if(e in Q)G[Y[e]]=Q[e];for(;ca[0]==="*";){ca.shift();if(oa===w)oa=ta.mimeType||G.getResponseHeader("content-type")}if(oa)for(e in U)if(U[e]&&U[e].test(oa)){ca.unshift(e);break}if(ca[0]in Q)i=ca[0];else{for(e in Q){if(!ca[0]||ta.converters[e+" "+ca[0]]){i=e;break}p||(p=e)}i=i||p}if(i){i!==ca[0]&&ca.unshift(i);
Q=Q[i]}else Q=void 0}else Q=w;if(E>=200&&E<300||E===304){if(h.ifModified){if(oa=pa.getResponseHeader("Last-Modified"))d.lastModified[S]=oa;if(oa=pa.getResponseHeader("Etag"))d.etag[S]=oa}if(E===304){R="notmodified";W=true}else try{oa=h;if(oa.dataFilter)Q=oa.dataFilter(Q,oa.dataType);var y=oa.dataTypes;e={};var F,K,P=y.length,T,X=y[0],fa,ha,ma,Da,Ba;for(F=1;F<P;F++){if(F===1)for(K in oa.converters)if(typeof K==="string")e[K.toLowerCase()]=oa.converters[K];fa=X;X=y[F];if(X==="*")X=fa;else if(fa!=="*"&&
fa!==X){ha=fa+" "+X;ma=e[ha]||e["* "+X];if(!ma){Ba=w;for(Da in e){T=Da.split(" ");if(T[0]===fa||T[0]==="*")if(Ba=e[T[1]+" "+X]){Da=e[Da];if(Da===true)ma=Ba;else if(Ba===true)ma=Da;break}}}ma||Ba||d.error("No conversion from "+ha.replace(" "," to "));if(ma!==true)Q=ma?ma(Q):Ba(Da(Q))}}ka=Q;R="success";W=true}catch(ya){R="parsererror";ba=ya}}else{ba=R;if(!R||E){R="error";if(E<0)E=0}}pa.status=E;pa.statusText=""+(N||R);W?D.resolveWith(m,[ka,R,pa]):D.rejectWith(m,[pa,R,ba]);pa.statusCode(L);L=w;if(Za)v.trigger("ajax"+
(W?"Success":"Error"),[pa,h,W?ka:ba]);H.fireWith(m,[pa,R]);if(Za){v.trigger("ajaxComplete",[pa,h]);--d.active||d.event.trigger("ajaxStop")}}}if(typeof a==="object"){b=a;a=w}b=b||{};var h=d.ajaxSetup({},b),m=h.context||h,v=m!==h&&(m.nodeType||m instanceof d)?d(m):d.event,D=d.Deferred(),H=d.Callbacks("once memory"),L=h.statusCode||{},S,ea={},V={},ia,da,qa,va,wa,xa=0,Za,Qa,pa={readyState:0,setRequestHeader:function(E,N){if(!xa){var Q=E.toLowerCase();E=V[Q]=V[Q]||E;ea[E]=N}return this},getAllResponseHeaders:function(){return xa===
2?ia:null},getResponseHeader:function(E){var N;if(xa===2){if(!da)for(da={};N=mc.exec(ia);)da[N[1].toLowerCase()]=N[2];N=da[E.toLowerCase()]}return N===w?null:N},overrideMimeType:function(E){if(!xa)h.mimeType=E;return this},abort:function(E){E=E||"abort";qa&&qa.abort(E);g(0,E);return this}};D.promise(pa);pa.success=pa.done;pa.error=pa.fail;pa.complete=H.add;pa.statusCode=function(E){if(E){var N;if(xa<2)for(N in E)L[N]=[L[N],E[N]];else{N=E[pa.status];pa.then(N,N)}}return this};h.url=((a||h.url)+"").replace(Xb,
"").replace(Yb,lb[1]+"//");h.dataTypes=d.trim(h.dataType||"*").toLowerCase().split(Qb);if(h.crossDomain==null){wa=ac.exec(h.url.toLowerCase());h.crossDomain=!!(wa&&(wa[1]!=lb[1]||wa[2]!=lb[2]||(wa[3]||(wa[1]==="http:"?80:443))!=(lb[3]||(lb[1]==="http:"?80:443))))}if(h.data&&h.processData&&typeof h.data!=="string")h.data=d.param(h.data,h.traditional);ga(Gb,h,b,pa);if(xa===2)return false;Za=h.global;h.type=h.type.toUpperCase();h.hasContent=!oc.test(h.type);Za&&d.active++===0&&d.event.trigger("ajaxStart");
if(!h.hasContent){if(h.data){h.url+=(Zb.test(h.url)?"&":"?")+h.data;delete h.data}S=h.url;if(h.cache===false){wa=d.now();var Na=h.url.replace(qc,"$1_="+wa);h.url=Na+(Na===h.url?(Zb.test(h.url)?"&":"?")+"_="+wa:"")}}if(h.data&&h.hasContent&&h.contentType!==false||b.contentType)pa.setRequestHeader("Content-Type",h.contentType);if(h.ifModified){S=S||h.url;d.lastModified[S]&&pa.setRequestHeader("If-Modified-Since",d.lastModified[S]);d.etag[S]&&pa.setRequestHeader("If-None-Match",d.etag[S])}pa.setRequestHeader("Accept",
h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+(h.dataTypes[0]!=="*"?", "+cc+"; q=0.01":""):h.accepts["*"]);for(Qa in h.headers)pa.setRequestHeader(Qa,h.headers[Qa]);if(h.beforeSend&&(h.beforeSend.call(m,pa,h)===false||xa===2)){pa.abort();return false}for(Qa in{success:1,error:1,complete:1})pa[Qa](h[Qa]);if(qa=ga(Ob,h,b,pa)){pa.readyState=1;Za&&v.trigger("ajaxSend",[pa,h]);if(h.async&&h.timeout>0)va=setTimeout(function(){pa.abort("timeout")},h.timeout);try{xa=1;qa.send(ea,g)}catch(A){if(xa<
2)g(-1,A);else throw A;}}else g(-1,"No Transport");return pa},param:function(a,b){var g=[],h=function(v,D){D=d.isFunction(D)?D():D;g[g.length]=encodeURIComponent(v)+"="+encodeURIComponent(D)};if(b===w)b=d.ajaxSettings.traditional;if(d.isArray(a)||a.jquery&&!d.isPlainObject(a))d.each(a,function(){h(this.name,this.value)});else for(var m in a)ua(m,a[m],b,h);return g.join("&").replace(Nb,"+")}});d.extend({active:0,lastModified:{},etag:{}});var Ua=d.now(),wb=/(\=)\?(&|$)|\?\?/i;d.ajaxSetup({jsonp:"callback",
jsonpCallback:function(){return d.expando+"_"+Ua++}});d.ajaxPrefilter("json jsonp",function(a,b,g){b=a.contentType==="application/x-www-form-urlencoded"&&typeof a.data==="string";if(a.dataTypes[0]==="jsonp"||a.jsonp!==false&&(wb.test(a.url)||b&&wb.test(a.data))){var h,m=a.jsonpCallback=d.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,v=x[m],D=a.url,H=a.data,L="$1"+m+"$2";if(a.jsonp!==false){D=D.replace(wb,L);if(a.url===D){if(b)H=H.replace(wb,L);if(a.data===H)D+=(/\?/.test(D)?"&":"?")+
a.jsonp+"="+m}}a.url=D;a.data=H;x[m]=function(S){h=[S]};g.always(function(){x[m]=v;if(h&&d.isFunction(v))x[m](h[0])});a.converters["script json"]=function(){h||d.error(m+" was not called");return h[0]};a.dataTypes[0]="json";return"script"}});d.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){d.globalEval(a);return a}}});d.ajaxPrefilter("script",function(a){if(a.cache===
w)a.cache=false;if(a.crossDomain){a.type="GET";a.global=false}});d.ajaxTransport("script",function(a){if(a.crossDomain){var b,g=C.head||C.getElementsByTagName("head")[0]||C.documentElement;return{send:function(h,m){b=C.createElement("script");b.async="async";if(a.scriptCharset)b.charset=a.scriptCharset;b.src=a.url;b.onload=b.onreadystatechange=function(v,D){if(D||!b.readyState||/loaded|complete/.test(b.readyState)){b.onload=b.onreadystatechange=null;g&&b.parentNode&&g.removeChild(b);b=w;D||m(200,
"success")}};g.insertBefore(b,g.firstChild)},abort:function(){if(b)b.onload(0,1)}}}});var Fb=x.ActiveXObject?function(){for(var a in Va)Va[a](0,1)}:false,Pb=0,Va;d.ajaxSettings.xhr=x.ActiveXObject?function(){var a;if(!(a=!this.isLocal&&Sa()))a:{try{a=new x.ActiveXObject("Microsoft.XMLHTTP");break a}catch(b){}a=void 0}return a}:Sa;(function(a){d.extend(d.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})})(d.ajaxSettings.xhr());d.support.ajax&&d.ajaxTransport(function(a){if(!a.crossDomain||d.support.cors){var b;
return{send:function(g,h){var m=a.xhr(),v,D;a.username?m.open(a.type,a.url,a.async,a.username,a.password):m.open(a.type,a.url,a.async);if(a.xhrFields)for(D in a.xhrFields)m[D]=a.xhrFields[D];a.mimeType&&m.overrideMimeType&&m.overrideMimeType(a.mimeType);if(!a.crossDomain&&!g["X-Requested-With"])g["X-Requested-With"]="XMLHttpRequest";try{for(D in g)m.setRequestHeader(D,g[D])}catch(H){}m.send(a.hasContent&&a.data||null);b=function(L,S){var ea,V,ia,da,qa;try{if(b&&(S||m.readyState===4)){b=w;if(v){m.onreadystatechange=
d.noop;Fb&&delete Va[v]}if(S)m.readyState!==4&&m.abort();else{ea=m.status;ia=m.getAllResponseHeaders();da={};if((qa=m.responseXML)&&qa.documentElement)da.xml=qa;da.text=m.responseText;try{V=m.statusText}catch(va){V=""}if(!ea&&a.isLocal&&!a.crossDomain)ea=da.text?200:404;else if(ea===1223)ea=204}}}catch(wa){S||h(-1,wa)}da&&h(ea,V,da,ia)};if(!a.async||m.readyState===4)b();else{v=++Pb;if(Fb){if(!Va){Va={};d(x).unload(Fb)}Va[v]=b}m.onreadystatechange=b}},abort:function(){b&&b(0,1)}}}});var zb={},Ma,Ya,
mb=/^(?:toggle|show|hide)$/,eb=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,fb,yb=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],Hb;d.fn.extend({show:function(a,b,g){if(a||a===0)return this.animate(Ga("show",3),a,b,g);else{g=0;for(var h=this.length;g<h;g++){a=this[g];if(a.style){b=a.style.display;if(!d._data(a,"olddisplay")&&b==="none")b=a.style.display="";b===""&&d.css(a,"display")==="none"&&d._data(a,"olddisplay",
Xa(a.nodeName))}}for(g=0;g<h;g++){a=this[g];if(a.style){b=a.style.display;if(b===""||b==="none")a.style.display=d._data(a,"olddisplay")||""}}return this}},hide:function(a,b,g){if(a||a===0)return this.animate(Ga("hide",3),a,b,g);else{g=0;for(var h=this.length;g<h;g++){a=this[g];if(a.style){b=d.css(a,"display");b!=="none"&&!d._data(a,"olddisplay")&&d._data(a,"olddisplay",b)}}for(g=0;g<h;g++)if(this[g].style)this[g].style.display="none";return this}},_toggle:d.fn.toggle,toggle:function(a,b,g){var h=
typeof a==="boolean";if(d.isFunction(a)&&d.isFunction(b))this._toggle.apply(this,arguments);else a==null||h?this.each(function(){var m=h?a:d(this).is(":hidden");d(this)[m?"show":"hide"]()}):this.animate(Ga("toggle",3),a,b,g);return this},fadeTo:function(a,b,g,h){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,g,h)},animate:function(a,b,g,h){function m(){v.queue===false&&d._mark(this);var D=d.extend({},v),H=this.nodeType===1,L=H&&d(this).is(":hidden"),S,ea,V,ia,da;
D.animatedProperties={};for(V in a){S=d.camelCase(V);if(V!==S){a[S]=a[V];delete a[V]}ea=a[S];if(d.isArray(ea)){D.animatedProperties[S]=ea[1];ea=a[S]=ea[0]}else D.animatedProperties[S]=D.specialEasing&&D.specialEasing[S]||D.easing||"swing";if(ea==="hide"&&L||ea==="show"&&!L)return D.complete.call(this);if(H&&(S==="height"||S==="width")){D.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(d.css(this,"display")==="inline"&&d.css(this,"float")==="none")if(!d.support.inlineBlockNeedsLayout||
Xa(this.nodeName)==="inline")this.style.display="inline-block";else this.style.zoom=1}}if(D.overflow!=null)this.style.overflow="hidden";for(V in a){H=new d.fx(this,D,V);ea=a[V];if(mb.test(ea))if(S=d._data(this,"toggle"+V)||(ea==="toggle"?L?"show":"hide":0)){d._data(this,"toggle"+V,S==="show"?"hide":"show");H[S]()}else H[ea]();else{S=eb.exec(ea);ia=H.cur();if(S){ea=parseFloat(S[2]);da=S[3]||(d.cssNumber[V]?"":"px");if(da!=="px"){d.style(this,V,(ea||1)+da);ia*=(ea||1)/H.cur();d.style(this,V,ia+da)}if(S[1])ea=
(S[1]==="-="?-1:1)*ea+ia;H.custom(ia,ea,da)}else H.custom(ia,ea,"")}}return true}var v=d.speed(b,g,h);if(d.isEmptyObject(a))return this.each(v.complete,[false]);a=d.extend({},a);return v.queue===false?this.each(m):this.queue(v.queue,m)},stop:function(a,b,g){if(typeof a!=="string"){g=b;b=a;a=w}if(b&&a!==false)this.queue(a||"fx",[]);return this.each(function(){function h(L,S,ea){S=S[ea];d.removeData(L,ea,true);S.stop(g)}var m,v=false,D=d.timers,H=d._data(this);g||d._unmark(true,this);if(a==null)for(m in H)H[m]&&
H[m].stop&&m.indexOf(".run")===m.length-4&&h(this,H,m);else if(H[m=a+".run"]&&H[m].stop)h(this,H,m);for(m=D.length;m--;)if(D[m].elem===this&&(a==null||D[m].queue===a)){if(g)D[m](true);else D[m].saveState();v=true;D.splice(m,1)}g&&v||d.dequeue(this,a)})}});d.each({slideDown:Ga("show",1),slideUp:Ga("hide",1),slideToggle:Ga("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){d.fn[a]=function(g,h,m){return this.animate(b,g,h,m)}});d.extend({speed:function(a,
b,g){var h=a&&typeof a==="object"?d.extend({},a):{complete:g||!g&&b||d.isFunction(a)&&a,duration:a,easing:g&&b||b&&!d.isFunction(b)&&b};h.duration=d.fx.off?0:typeof h.duration==="number"?h.duration:h.duration in d.fx.speeds?d.fx.speeds[h.duration]:d.fx.speeds._default;if(h.queue==null||h.queue===true)h.queue="fx";h.old=h.complete;h.complete=function(m){d.isFunction(h.old)&&h.old.call(this);if(h.queue)d.dequeue(this,h.queue);else m!==false&&d._unmark(this)};return h},easing:{linear:function(a,b,g,
h){return g+h*a},swing:function(a,b,g,h){return(-Math.cos(a*Math.PI)/2+0.5)*h+g}},timers:[],fx:function(a,b,g){this.options=b;this.elem=a;this.prop=g;b.orig=b.orig||{}}});d.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(d.fx.step[this.prop]||d.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,b=d.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?
!b||b==="auto"?0:b:a},custom:function(a,b,g){function h(D){return m.step(D)}var m=this,v=d.fx;this.startTime=Hb||Wa();this.end=b;this.now=this.start=a;this.pos=this.state=0;this.unit=g||this.unit||(d.cssNumber[this.prop]?"":"px");h.queue=this.options.queue;h.elem=this.elem;h.saveState=function(){m.options.hide&&d._data(m.elem,"fxshow"+m.prop)===w&&d._data(m.elem,"fxshow"+m.prop,m.start)};if(h()&&d.timers.push(h)&&!fb)fb=setInterval(v.tick,v.interval)},show:function(){var a=d._data(this.elem,"fxshow"+
this.prop);this.options.orig[this.prop]=a||d.style(this.elem,this.prop);this.options.show=true;a!==w?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());d(this.elem).show()},hide:function(){this.options.orig[this.prop]=d._data(this.elem,"fxshow"+this.prop)||d.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(a){var b,g=Hb||Wa(),h=true,m=this.elem,v=this.options;if(a||g>=v.duration+this.startTime){this.now=this.end;
this.pos=this.state=1;this.update();v.animatedProperties[this.prop]=true;for(b in v.animatedProperties)if(v.animatedProperties[b]!==true)h=false;if(h){v.overflow!=null&&!d.support.shrinkWrapBlocks&&d.each(["","X","Y"],function(D,H){m.style["overflow"+H]=v.overflow[D]});v.hide&&d(m).hide();if(v.hide||v.show)for(b in v.animatedProperties){d.style(m,b,v.orig[b]);d.removeData(m,"fxshow"+b,true);d.removeData(m,"toggle"+b,true)}if(a=v.complete){v.complete=false;a.call(m)}}return false}else{if(v.duration==
Infinity)this.now=g;else{a=g-this.startTime;this.state=a/v.duration;this.pos=d.easing[v.animatedProperties[this.prop]](this.state,a,0,1,v.duration);this.now=this.start+(this.end-this.start)*this.pos}this.update()}return true}};d.extend(d.fx,{tick:function(){for(var a,b=d.timers,g=0;g<b.length;g++){a=b[g];!a()&&b[g]===a&&b.splice(g--,1)}b.length||d.fx.stop()},interval:13,stop:function(){clearInterval(fb);fb=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){d.style(a.elem,"opacity",
a.now)},_default:function(a){if(a.elem.style&&a.elem.style[a.prop]!=null)a.elem.style[a.prop]=a.now+a.unit;else a.elem[a.prop]=a.now}}});d.each(["width","height"],function(a,b){d.fx.step[b]=function(g){d.style(g.elem,b,Math.max(0,g.now)+g.unit)}});if(d.expr&&d.expr.filters)d.expr.filters.animated=function(a){return d.grep(d.timers,function(b){return a===b.elem}).length};var Ra=/^t(?:able|d|h)$/i,rc=/^(?:body|html)$/i;d.fn.offset="getBoundingClientRect"in C.documentElement?function(a){var b=this[0],
g;if(a)return this.each(function(D){d.offset.setOffset(this,a,D)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return d.offset.bodyOffset(b);try{g=b.getBoundingClientRect()}catch(h){}var m=b.ownerDocument,v=m.documentElement;if(!g||!d.contains(v,b))return g?{top:g.top,left:g.left}:{top:0,left:0};b=m.body;m=z(m);return{top:g.top+(m.pageYOffset||d.support.boxModel&&v.scrollTop||b.scrollTop)-(v.clientTop||b.clientTop||0),left:g.left+(m.pageXOffset||d.support.boxModel&&v.scrollLeft||
b.scrollLeft)-(v.clientLeft||b.clientLeft||0)}}:function(a){var b=this[0];if(a)return this.each(function(S){d.offset.setOffset(this,a,S)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return d.offset.bodyOffset(b);var g,h=b.offsetParent,m=b.ownerDocument,v=m.documentElement,D=m.body;g=(m=m.defaultView)?m.getComputedStyle(b,null):b.currentStyle;for(var H=b.offsetTop,L=b.offsetLeft;(b=b.parentNode)&&b!==D&&b!==v;){if(d.support.fixedPosition&&g.position==="fixed")break;g=m?m.getComputedStyle(b,
null):b.currentStyle;H-=b.scrollTop;L-=b.scrollLeft;if(b===h){H+=b.offsetTop;L+=b.offsetLeft;if(d.support.doesNotAddBorder&&!(d.support.doesAddBorderForTableAndCells&&Ra.test(b.nodeName))){H+=parseFloat(g.borderTopWidth)||0;L+=parseFloat(g.borderLeftWidth)||0}h=b.offsetParent}if(d.support.subtractsBorderForOverflowNotVisible&&g.overflow!=="visible"){H+=parseFloat(g.borderTopWidth)||0;L+=parseFloat(g.borderLeftWidth)||0}}if(g.position==="relative"||g.position==="static"){H+=D.offsetTop;L+=D.offsetLeft}if(d.support.fixedPosition&&
g.position==="fixed"){H+=Math.max(v.scrollTop,D.scrollTop);L+=Math.max(v.scrollLeft,D.scrollLeft)}return{top:H,left:L}};d.offset={bodyOffset:function(a){var b=a.offsetTop,g=a.offsetLeft;if(d.support.doesNotIncludeMarginInBodyOffset){b+=parseFloat(d.css(a,"marginTop"))||0;g+=parseFloat(d.css(a,"marginLeft"))||0}return{top:b,left:g}},setOffset:function(a,b,g){var h=d.css(a,"position");if(h==="static")a.style.position="relative";var m=d(a),v=m.offset(),D=d.css(a,"top"),H=d.css(a,"left"),L={},S={};if((h===
"absolute"||h==="fixed")&&d.inArray("auto",[D,H])>-1){S=m.position();h=S.top;H=S.left}else{h=parseFloat(D)||0;H=parseFloat(H)||0}if(d.isFunction(b))b=b.call(a,g,v);if(b.top!=null)L.top=b.top-v.top+h;if(b.left!=null)L.left=b.left-v.left+H;"using"in b?b.using.call(a,L):m.css(L)}};d.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),g=this.offset(),h=rc.test(b[0].nodeName)?{top:0,left:0}:b.offset();g.top-=parseFloat(d.css(a,"marginTop"))||0;g.left-=parseFloat(d.css(a,
"marginLeft"))||0;h.top+=parseFloat(d.css(b[0],"borderTopWidth"))||0;h.left+=parseFloat(d.css(b[0],"borderLeftWidth"))||0;return{top:g.top-h.top,left:g.left-h.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||C.body;a&&!rc.test(a.nodeName)&&d.css(a,"position")==="static";)a=a.offsetParent;return a})}});d.each(["Left","Top"],function(a,b){var g="scroll"+b;d.fn[g]=function(h){var m,v;if(h===w){m=this[0];if(!m)return null;return(v=z(m))?"pageXOffset"in v?v[a?"pageYOffset":
"pageXOffset"]:d.support.boxModel&&v.document.documentElement[g]||v.document.body[g]:m[g]}return this.each(function(){if(v=z(this))v.scrollTo(!a?h:d(v).scrollLeft(),a?h:d(v).scrollTop());else this[g]=h})}});d.each(["Height","Width"],function(a,b){var g=b.toLowerCase();d.fn["inner"+b]=function(){var h=this[0];return h?h.style?parseFloat(d.css(h,g,"padding")):this[g]():null};d.fn["outer"+b]=function(h){var m=this[0];return m?m.style?parseFloat(d.css(m,g,h?"margin":"border")):this[g]():null};d.fn[g]=
function(h){var m=this[0];if(!m)return h==null?null:this;if(d.isFunction(h))return this.each(function(H){var L=d(this);L[g](h.call(this,H,L[g]()))});if(d.isWindow(m)){var v=m.document.documentElement["client"+b],D=m.document.body;return m.document.compatMode==="CSS1Compat"&&v||D&&D["client"+b]||v}else if(m.nodeType===9)return Math.max(m.documentElement["client"+b],m.body["scroll"+b],m.documentElement["scroll"+b],m.body["offset"+b],m.documentElement["offset"+b]);else if(h===w){m=d.css(m,g);v=parseFloat(m);
return d.isNumeric(v)?v:m}else return this.css(g,typeof h==="string"?h:h+"px")}});x.jQuery=x.$=d;typeof define==="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return d})})(window);/*

 Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 Build: `lodash csp`
 Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 Available under MIT license <http://lodash.com/license>
*/
(function(){function x(la,J,sa){sa=(sa||0)-1;for(var Aa=la?la.length:0;++sa<Aa;)if(la[sa]===J)return sa;return-1}function w(la,J){var sa=typeof J;la=la.cache;if(sa=="boolean"||J==null)return la[J]?0:-1;if(sa!="number"&&sa!="string")sa="object";var Aa=sa=="number"?J:ja+J;la=(la=la[sa])&&la[Aa];return sa=="object"?la&&x(la,J)>-1?0:-1:la?0:-1}function o(la){var J=this.cache,sa=typeof la;if(sa=="boolean"||la==null)J[la]=true;else{if(sa!="number"&&sa!="string")sa="object";var Aa=sa=="number"?la:ja+la;
J=J[sa]||(J[sa]={});if(sa=="object")(J[Aa]||(J[Aa]=[])).push(la);else J[Aa]=true}}function r(la){return la.charCodeAt(0)}function u(la,J){for(var sa=la.criteria,Aa=J.criteria,Ea=-1,$a=sa.length;++Ea<$a;){var Fa=sa[Ea],ob=Aa[Ea];if(Fa!==ob){if(Fa>ob||typeof Fa=="undefined")return 1;if(Fa<ob||typeof ob=="undefined")return-1}}return la.index-J.index}function t(la){var J=-1,sa=la.length,Aa=la[0],Ea=la[sa/2|0],$a=la[sa-1];if(Aa&&typeof Aa=="object"&&Ea&&typeof Ea=="object"&&$a&&typeof $a=="object")return false;
Aa=f();Aa["false"]=Aa["null"]=Aa["true"]=Aa.undefined=false;Ea=f();Ea.array=la;Ea.cache=Aa;for(Ea.push=o;++J<sa;)Ea.push(la[J]);return Ea}function j(la){return"\\"+hc[la]}function c(){return I.pop()||[]}function f(){return O.pop()||{array:null,cache:null,criteria:null,"false":false,index:0,"null":false,number:null,object:null,push:null,string:null,"true":false,undefined:false,value:null}}function l(la){la.length=0;I.length<ra&&I.push(la)}function k(la){var J=la.cache;J&&k(J);la.array=la.cache=la.criteria=
la.object=la.number=la.string=la.value=null;O.length<ra&&O.push(la)}function q(la,J,sa){J||(J=0);if(typeof sa=="undefined")sa=la?la.length:0;var Aa=-1;sa=sa-J||0;for(var Ea=Array(sa<0?0:sa);++Aa<sa;)Ea[Aa]=la[J+Aa];return Ea}function n(la){function J(e){return e&&typeof e=="object"&&!E(e)&&v.call(e,"__wrapped__")?e:new sa(e)}function sa(e,i){this.__chain__=!!i;this.__wrapped__=e}function Aa(e){function i(){if(y){var K=q(y);D.apply(K,arguments)}if(this instanceof i){var P=$a(p.prototype);K=p.apply(P,
K||arguments);return Oa(K)?K:P}return p.apply(F,K||arguments)}var p=e[0],y=e[2],F=e[4];A(i,e);return i}function Ea(e,i,p,y,F){if(p){var K=p(e);if(typeof K!="undefined")return K}if(Oa(e)){var P=Ra.call(e);if(!Ha[P])return e;var T=pa[P];switch(P){case gb:case Ab:return new T(+e);case Bb:case nb:return new T(e);case tb:K=T(e.source,Xa.exec(e));K.lastIndex=e.lastIndex;return K}}else return e;P=E(e);if(i){var X=!y;y||(y=c());F||(F=c());for(var fa=y.length;fa--;)if(y[fa]==e)return F[fa];K=P?T(e.length):
{}}else K=P?q(e):ba({},e);if(P){if(v.call(e,"index"))K.index=e.index;if(v.call(e,"input"))K.input=e.input}if(!i)return K;y.push(e);F.push(K);(P?Pa:U)(e,function(ha,ma){K[ma]=Ea(ha,i,p,y,F)});if(X){l(y);l(F)}return K}function $a(e){return Oa(e)?V(e):{}}function Fa(e,i,p){if(typeof e!="function")return Ob;if(typeof i=="undefined"||!("prototype"in e))return e;var y=e.__bindData__;if(typeof y=="undefined"){if(Na.funcNames)y=!e.name;y=y||!Na.funcDecomp;if(!y){var F=h.call(e);Na.funcNames||(y=!z.test(F));
if(!y){y=d.test(F);A(e,y)}}}if(y===false||y!==true&&y[1]&1)return e;switch(p){case 1:return function(K){return e.call(i,K)};case 2:return function(K,P){return e.call(i,K,P)};case 3:return function(K,P,T){return e.call(i,K,P,T)};case 4:return function(K,P,T,X){return e.call(i,K,P,T,X)}}return bc(e,i)}function ob(e){function i(){var Ba=X?P:this;if(F){var ya=q(F);D.apply(ya,arguments)}if(K||ha){ya||(ya=q(arguments));K&&D.apply(ya,K);if(ha&&ya.length<T){y|=16;return ob([p,ma?y:y&-4,ya,null,P,T])}}ya||
(ya=arguments);if(fa)p=Ba[Da];if(this instanceof i){Ba=$a(p.prototype);ya=p.apply(Ba,ya);return Oa(ya)?ya:Ba}return p.apply(Ba,ya)}var p=e[0],y=e[1],F=e[2],K=e[3],P=e[4],T=e[5],X=y&1,fa=y&2,ha=y&4,ma=y&8,Da=p;A(i,e);return i}function rb(e,i){var p=-1,y=Db(),F=e?e.length:0,K=F>=ga&&y===x,P=[];if(K){var T=t(i);if(T){y=w;i=T}else K=false}for(;++p<F;){T=e[p];y(i,T)<0&&P.push(T)}K&&k(i);return P}function jb(e,i,p,y){y=(y||0)-1;for(var F=e?e.length:0,K=[];++y<F;){var P=e[y];if(P&&typeof P=="object"&&typeof P.length==
"number"&&(E(P)||La(P))){i||(P=jb(P,i,p));var T=-1,X=P.length,fa=K.length;for(K.length+=X;++T<X;)K[fa++]=P[T]}else p||K.push(P)}return K}function kb(e,i,p,y,F,K){if(p){var P=p(e,i);if(typeof P!="undefined")return!!P}if(e===i)return e!==0||1/e==1/i;if(e===e&&!(e&&Ja[typeof e])&&!(i&&Ja[typeof i]))return false;if(e==null||i==null)return e===i;var T=Ra.call(e),X=Ra.call(i);if(T==Ia)T=hb;if(X==Ia)X=hb;if(T!=X)return false;switch(T){case gb:case Ab:return+e==+i;case Bb:return e!=+e?i!=+i:e==0?1/e==1/i:
e==+i;case tb:case nb:return e==mb(i)}X=T==Ta;if(!X){var fa=v.call(e,"__wrapped__"),ha=v.call(i,"__wrapped__");if(fa||ha)return kb(fa?e.__wrapped__:e,ha?i.__wrapped__:i,p,y,F,K);if(T!=hb)return false;T=e.constructor;fa=i.constructor;if(T!=fa&&!(Ka(T)&&T instanceof T&&Ka(fa)&&fa instanceof fa)&&"constructor"in e&&"constructor"in i)return false}T=!F;F||(F=c());K||(K=c());for(fa=F.length;fa--;)if(F[fa]==e)return K[fa]==i;var ma=0;P=true;F.push(e);K.push(i);if(X){fa=e.length;ma=i.length;if((P=ma==fa)||
y)for(;ma--;){X=fa;ha=i[ma];if(y)for(;X--;){if(P=kb(e[X],ha,p,y,F,K))break}else if(!(P=kb(e[ma],ha,p,y,F,K)))break}}else{G(i,function(Da,Ba,ya){if(v.call(ya,Ba)){ma++;return P=v.call(e,Ba)&&kb(e[Ba],Da,p,y,F,K)}});P&&!y&&G(e,function(Da,Ba,ya){if(v.call(ya,Ba))return P=--ma>-1})}F.pop();K.pop();if(T){l(F);l(K)}return P}function Sb(e,i,p,y,F){(E(i)?Pa:U)(i,function(K,P){var T,X,fa=K,ha=e[P];if(K&&((X=E(K))||ca(K))){for(fa=y.length;fa--;)if(T=y[fa]==K){ha=F[fa];break}if(!T){var ma;if(p){fa=p(ha,K);
if(ma=typeof fa!="undefined")ha=fa}ma||(ha=X?E(ha)?ha:[]:ca(ha)?ha:{});y.push(K);F.push(ha);ma||Sb(ha,K,p,y,F)}}else{if(p){fa=p(ha,K);if(typeof fa=="undefined")fa=K}if(typeof fa!="undefined")ha=fa}e[P]=ha})}function Kb(e,i){return e+g(Qa()*(i-e+1))}function Tb(e,i,p){var y=-1,F=Db(),K=e?e.length:0,P=[],T=!i&&K>=ga&&F===x,X=p||T?c():P;if(T){X=t(X);F=w}for(;++y<K;){var fa=e[y],ha=p?p(fa,y,e):fa;if(i?!y||X[X.length-1]!==ha:F(X,ha)<0){if(p||T)X.push(ha);P.push(fa)}}if(T){l(X.array);k(X)}else p&&l(X);
return P}function Ub(e){return function(i,p,y){var F={};p=J.createCallback(p,y,3);y=-1;var K=i?i.length:0;if(typeof K=="number")for(;++y<K;){var P=i[y];e(F,P,p(P,y,i),i)}else U(i,function(T,X,fa){e(F,T,p(T,X,fa),fa)});return F}}function ab(e,i,p,y,F,K){var P=i&1,T=i&4,X=i&16,fa=i&32;if(!(i&2)&&!Ka(e))throw new eb;if(X&&!p.length){i&=-17;X=p=false}if(fa&&!y.length){i&=-33;fa=y=false}var ha=e&&e.__bindData__;if(ha&&ha!==true){ha=q(ha);if(ha[2])ha[2]=q(ha[2]);if(ha[3])ha[3]=q(ha[3]);if(P&&!(ha[1]&1))ha[4]=
F;if(!P&&ha[1]&1)i|=8;if(T&&!(ha[1]&4))ha[5]=K;if(X)D.apply(ha[2]||(ha[2]=[]),p);if(fa)S.apply(ha[3]||(ha[3]=[]),y);ha[1]|=i;return ab.apply(null,ha)}return(i==1||i===17?Aa:ob)([e,i,p,y,F,K])}function uc(e){return Q[e]}function Db(){var e=(e=J.indexOf)===Zb?x:e;return e}function cb(e){return typeof e=="function"&&rc.test(e)}function jc(e){var i,p;if(!(e&&Ra.call(e)==hb)||(i=e.constructor,Ka(i)&&!(i instanceof i)))return false;G(e,function(y,F){p=F});return typeof p=="undefined"||v.call(e,p)}function tc(e){return R[e]}
function La(e){return e&&typeof e=="object"&&typeof e.length=="number"&&Ra.call(e)==Ia||false}function Vb(e,i,p){var y=N(e),F=y.length;for(i=Fa(i,p,3);F--;){p=y[F];if(i(e[p],p,e)===false)break}return e}function pb(e){var i=[];G(e,function(p,y){Ka(p)&&i.push(y)});return i.sort()}function kc(e){for(var i=-1,p=N(e),y=p.length,F={};++i<y;){var K=p[i];F[e[K]]=K}return F}function Ka(e){return typeof e=="function"}function Oa(e){return!!(e&&Ja[typeof e])}function lc(e){return typeof e=="number"||e&&typeof e==
"object"&&Ra.call(e)==Bb||false}function Eb(e){return typeof e=="string"||e&&typeof e=="object"&&Ra.call(e)==nb||false}function Lb(e){for(var i=-1,p=N(e),y=p.length,F=Ua(y);++i<y;)F[i]=e[p[i]];return F}function ec(e,i,p){var y=-1,F=Db(),K=e?e.length:0,P=false;p=(p<0?wa(0,K+p):p)||0;if(E(e))P=F(e,i,p)>-1;else if(typeof K=="number")P=(Eb(e)?e.indexOf(i,p):F(e,i,p))>-1;else U(e,function(T){if(++y>=p)return!(P=T===i)});return P}function fc(e,i,p){var y=true;i=J.createCallback(i,p,3);p=-1;var F=e?e.length:
0;if(typeof F=="number")for(;++p<F;){if(!(y=!!i(e[p],p,e)))break}else U(e,function(K,P,T){return y=!!i(K,P,T)});return y}function bb(e,i,p){var y=[];i=J.createCallback(i,p,3);p=-1;var F=e?e.length:0;if(typeof F=="number")for(;++p<F;){var K=e[p];i(K,p,e)&&y.push(K)}else U(e,function(P,T,X){i(P,T,X)&&y.push(P)});return y}function Mb(e,i,p){i=J.createCallback(i,p,3);p=-1;var y=e?e.length:0;if(typeof y=="number")for(;++p<y;){var F=e[p];if(i(F,p,e))return F}else{var K;U(e,function(P,T,X){if(i(P,T,X)){K=
P;return false}});return K}}function Pa(e,i,p){var y=-1,F=e?e.length:0;i=i&&typeof p=="undefined"?i:Fa(i,p,3);if(typeof F=="number")for(;++y<F;){if(i(e[y],y,e)===false)break}else U(e,i);return e}function Nb(e,i,p){var y=e?e.length:0;i=i&&typeof p=="undefined"?i:Fa(i,p,3);if(typeof y=="number")for(;y--;){if(i(e[y],y,e)===false)break}else{var F=N(e);y=F.length;U(e,function(K,P,T){P=F?F[--y]:--y;return i(T[P],P,T)})}return e}function xb(e,i,p){var y=-1,F=e?e.length:0;i=J.createCallback(i,p,3);if(typeof F==
"number")for(var K=Ua(F);++y<F;)K[y]=i(e[y],y,e);else{K=[];U(e,function(P,T,X){K[++y]=i(P,T,X)})}return K}function Wb(e,i,p){var y=-Infinity,F=y;if(typeof i!="function"&&p&&p[i]===e)i=null;if(i==null&&E(e)){p=-1;for(var K=e.length;++p<K;){var P=e[p];if(P>F)F=P}}else{i=i==null&&Eb(e)?r:J.createCallback(i,p,3);Pa(e,function(T,X,fa){X=i(T,X,fa);if(X>y){y=X;F=T}})}return F}function Xb(e,i,p,y){if(!e)return p;var F=arguments.length<3;i=J.createCallback(i,y,4);var K=-1,P=e.length;if(typeof P=="number"){if(F)p=
e[++K];for(;++K<P;)p=i(p,e[K],K,e)}else U(e,function(T,X,fa){p=F?(F=false,T):i(p,T,X,fa)});return p}function mc(e,i,p,y){var F=arguments.length<3;i=J.createCallback(i,y,4);Nb(e,function(K,P,T){p=F?(F=false,K):i(p,K,P,T)});return p}function nc(e){var i=-1,p=e?e.length:0,y=Ua(typeof p=="number"?p:0);Pa(e,function(F){var K=Kb(0,++i);y[i]=y[K];y[K]=F});return y}function oc(e,i,p){var y;i=J.createCallback(i,p,3);p=-1;var F=e?e.length:0;if(typeof F=="number")for(;++p<F;){if(y=i(e[p],p,e))break}else U(e,
function(K,P,T){return!(y=i(K,P,T))});return!!y}function Yb(e,i,p){var y=0,F=e?e.length:0;if(typeof i!="number"&&i!=null){var K=-1;for(i=J.createCallback(i,p,3);++K<F&&i(e[K],K,e);)y++}else{y=i;if(y==null||p)return e?e[0]:B}return q(e,0,xa(wa(0,y),F))}function Zb(e,i,p){if(typeof p=="number"){var y=e?e.length:0;p=p<0?wa(0,y+p):p||0}else if(p){p=pc(e,i);return e[p]===i?p:-1}return x(e,i,p)}function $b(e,i,p){if(typeof i!="number"&&i!=null){var y=0,F=-1,K=e?e.length:0;for(i=J.createCallback(i,p,3);++F<
K&&i(e[F],F,e);)y++}else y=i==null||p?1:wa(0,i);return q(e,y)}function pc(e,i,p,y){var F=0,K=e?e.length:F;p=p?J.createCallback(p,y,1):Ob;for(i=p(i);F<K;){y=F+K>>>1;p(e[y])<i?F=y+1:K=y}return F}function Qb(e,i,p,y){if(typeof i!="boolean"&&i!=null){y=p;p=typeof i!="function"&&y&&y[i]===e?null:i;i=false}if(p!=null)p=J.createCallback(p,y,3);return Tb(e,i,p)}function qc(){for(var e=arguments.length>1?arguments:arguments[0],i=-1,p=e?Wb(Y(e,"length")):0,y=Ua(p<0?0:p);++i<p;)y[i]=Y(e,i);return y}function ac(e,
i){var p=-1,y=e?e.length:0,F={};if(!i&&y&&!E(e[0]))i=[];for(;++p<y;){var K=e[p];if(i)F[K]=i[p];else if(K)F[K[0]]=K[1]}return F}function bc(e,i){return arguments.length>2?ab(e,17,q(arguments,2),null,i):ab(e,1,null,null,i)}function Gb(e,i,p){var y,F,K,P,T,X,fa,ha=0,ma=false,Da=true;if(!Ka(e))throw new eb;i=wa(0,i)||0;if(p===true){var Ba=true;Da=false}else if(Oa(p)){Ba=p.leading;ma="maxWait"in p&&(wa(i,p.maxWait)||0);Da="trailing"in p?p.trailing:Da}var ya=function(){var qb=i-(oa()-P);if(qb<=0){F&&b(F);
qb=fa;F=X=fa=B;if(qb){ha=oa();K=e.apply(T,y);if(!X&&!F)y=T=null}}else X=H(ya,qb)},wc=function(){X&&b(X);F=X=fa=B;if(Da||ma!==i){ha=oa();K=e.apply(T,y);if(!X&&!F)y=T=null}};return function(){y=arguments;P=oa();T=this;fa=Da&&(X||!Ba);if(ma===false)var qb=Ba&&!X;else{if(!F&&!Ba)ha=P;var dc=ma-(P-ha),sc=dc<=0;if(sc){if(F)F=b(F);ha=P;K=e.apply(T,y)}else F||(F=H(wc,dc))}if(sc&&X)X=b(X);else if(!X&&i!==ma)X=H(ya,i);if(qb){sc=true;K=e.apply(T,y)}if(sc&&!X&&!F)y=T=null;return K}}function Ob(e){return e}function db(e,
i,p){var y=true,F=i&&pb(i);if(!i||!p&&!F.length){if(p==null)p=i;K=sa;i=e;e=J;F=pb(i)}if(p===false)y=false;else if(Oa(p)&&"chain"in p)y=p.chain;var K=e,P=Ka(K);Pa(F,function(T){var X=e[T]=i[T];if(P)K.prototype[T]=function(){var fa=this.__chain__,ha=this.__wrapped__,ma=[ha];D.apply(ma,arguments);ma=X.apply(e,ma);if(y||fa){if(ha===ma&&Oa(ma))return this;ma=new K(ma);ma.__chain__=fa}return ma}})}function lb(){}function cc(e){return function(i){return i[e]}}function vc(){return this.__wrapped__}la=la?
ib.defaults(ub.Object(),la,ib.pick(ub,za)):ub;var Ua=la.Array,wb=la.Boolean,Fb=la.Date,Pb=la.Function,Va=la.Math,zb=la.Number,Ma=la.Object,Ya=la.RegExp,mb=la.String,eb=la.TypeError,fb=[],yb=Ma.prototype,Hb=la._,Ra=yb.toString,rc=Ya("^"+mb(Ra).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),a=Va.ceil,b=la.clearTimeout,g=Va.floor,h=Pb.prototype.toString,m=cb(m=Ma.getPrototypeOf)&&m,v=yb.hasOwnProperty,D=fb.push,H=la.setTimeout,L=fb.splice,S=fb.unshift,ea=function(){try{var e=
{},i=cb(i=Ma.defineProperty)&&i,p=i(e,e,e)&&i}catch(y){}return p}(),V=cb(V=Ma.create)&&V,ia=cb(ia=Ua.isArray)&&ia,da=la.isFinite,qa=la.isNaN,va=cb(va=Ma.keys)&&va,wa=Va.max,xa=Va.min,Za=la.parseInt,Qa=Va.random,pa={};pa[Ta]=Ua;pa[gb]=wb;pa[Ab]=Fb;pa[gc]=Pb;pa[hb]=Ma;pa[Bb]=zb;pa[tb]=Ya;pa[nb]=mb;sa.prototype=J.prototype;var Na=J.support={};Na.funcDecomp=!cb(la.WinRTError)&&d.test(n);Na.funcNames=typeof Pb.name=="string";J.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:C,
variable:"",imports:{_:J}};V||($a=function(){function e(){}return function(i){if(Oa(i)){e.prototype=i;var p=new e;e.prototype=null}return p||la.Object()}}());var A=!ea?lb:function(e,i){Rb.value=i;ea(e,"__bindData__",Rb)},E=ia||function(e){return e&&typeof e=="object"&&typeof e.length=="number"&&Ra.call(e)==Ta||false},N=!va?function(e){var i,p=[];if(!e)return p;if(!Ja[typeof e])return p;for(i in e)v.call(e,i)&&p.push(i);return p}:function(e){if(!Oa(e))return[];return va(e)},Q={"&":"&amp;","<":"&lt;",
">":"&gt;",'"':"&quot;","'":"&#39;"},R=kc(Q),W=Ya("("+N(R).join("|")+")","g"),ka=Ya("["+N(Q).join("")+"]","g"),ba=function(e,i,p){var y,F=e,K=F;if(!F)return K;var P=arguments,T=0,X=typeof p=="number"?2:P.length;if(X>3&&typeof P[X-2]=="function")var fa=Fa(P[--X-1],P[X--],2);else if(X>2&&typeof P[X-1]=="function")fa=P[--X];for(;++T<X;)if((F=P[T])&&Ja[typeof F])for(var ha=-1,ma=Ja[typeof F]&&N(F),Da=ma?ma.length:0;++ha<Da;){y=ma[ha];K[y]=fa?fa(K[y],F[y]):F[y]}return K},ta=function(e,i,p){var y,F=e,K=
F;if(!F)return K;for(var P=arguments,T=0,X=typeof p=="number"?2:P.length;++T<X;)if((F=P[T])&&Ja[typeof F])for(var fa=-1,ha=Ja[typeof F]&&N(F),ma=ha?ha.length:0;++fa<ma;){y=ha[fa];if(typeof K[y]=="undefined")K[y]=F[y]}return K},G=function(e,i,p){var y;if(!e)return e;if(!Ja[typeof e])return e;i=i&&typeof p=="undefined"?i:Fa(i,p,3);for(y in e)if(i(e[y],y,e)===false)break;return e},U=function(e,i,p){if(!e)return e;if(!Ja[typeof e])return e;i=i&&typeof p=="undefined"?i:Fa(i,p,3);for(var y=-1,F=Ja[typeof e]&&
N(e),K=F?F.length:0;++y<K;){p=F[y];if(i(e[p],p,e)===false)break}return e},ca=!m?jc:function(e){if(!(e&&Ra.call(e)==hb))return false;var i=e.valueOf,p=cb(i)&&(p=m(i))&&m(p);return p?e==p||m(e)==p:jc(e)};wb=Ub(function(e,i,p){v.call(e,p)?e[p]++:e[p]=1});Va=Ub(function(e,i,p){(v.call(e,p)?e[p]:e[p]=[]).push(i)});zb=Ub(function(e,i,p){e[p]=i});var Y=xb,oa=cb(oa=Fb.now)&&oa||function(){return(new Fb).getTime()};yb=Za(ua+"08")==8?Za:function(e,i){return Za(Eb(e)?e.replace(M,""):e,i||0)};J.after=function(e,
i){if(!Ka(i))throw new eb;return function(){if(--e<1)return i.apply(this,arguments)}};J.assign=ba;J.at=function(e){var i=arguments,p=-1,y=jb(i,true,false,1);i=i[2]&&i[2][i[1]]===e?1:y.length;for(var F=Ua(i);++p<i;)F[p]=e[y[p]];return F};J.bind=bc;J.bindAll=function(e){for(var i=arguments.length>1?jb(arguments,true,false,1):pb(e),p=-1,y=i.length;++p<y;){var F=i[p];e[F]=ab(e[F],1,null,null,e)}return e};J.bindKey=function(e,i){return arguments.length>2?ab(i,19,q(arguments,2),null,e):ab(i,3,null,null,
e)};J.chain=function(e){e=new sa(e);e.__chain__=true;return e};J.compact=function(e){for(var i=-1,p=e?e.length:0,y=[];++i<p;){var F=e[i];F&&y.push(F)}return y};J.compose=function(){for(var e=arguments,i=e.length;i--;)if(!Ka(e[i]))throw new eb;return function(){for(var p=arguments,y=e.length;y--;)p=[e[y].apply(this,p)];return p[0]}};J.constant=function(e){return function(){return e}};J.countBy=wb;J.create=function(e,i){var p=$a(e);return i?ba(p,i):p};J.createCallback=function(e,i,p){var y=typeof e;
if(e==null||y=="function")return Fa(e,i,p);if(y!="object")return cc(e);var F=N(e),K=F[0],P=e[K];if(F.length==1&&P===P&&!Oa(P))return function(T){T=T[K];return P===T&&(P!==0||1/P==1/T)};return function(T){for(var X=F.length,fa=false;X--;)if(!(fa=kb(T[F[X]],e[F[X]],null,true)))break;return fa}};J.curry=function(e,i){i=typeof i=="number"?i:+i||e.length;return ab(e,4,null,null,null,i)};J.debounce=Gb;J.defaults=ta;J.defer=function(e){if(!Ka(e))throw new eb;var i=q(arguments,1);return H(function(){e.apply(B,
i)},1)};J.delay=function(e,i){if(!Ka(e))throw new eb;var p=q(arguments,2);return H(function(){e.apply(B,p)},i)};J.difference=function(e){return rb(e,jb(arguments,true,true,1))};J.filter=bb;J.flatten=function(e,i,p,y){if(typeof i!="boolean"&&i!=null){y=p;p=typeof i!="function"&&y&&y[i]===e?null:i;i=false}if(p!=null)e=xb(e,p,y);return jb(e,i)};J.forEach=Pa;J.forEachRight=Nb;J.forIn=G;J.forInRight=function(e,i,p){var y=[];G(e,function(K,P){y.push(P,K)});var F=y.length;for(i=Fa(i,p,3);F--;)if(i(y[F--],
y[F],e)===false)break;return e};J.forOwn=U;J.forOwnRight=Vb;J.functions=pb;J.groupBy=Va;J.indexBy=zb;J.initial=function(e,i,p){var y=0,F=e?e.length:0;if(typeof i!="number"&&i!=null){var K=F;for(i=J.createCallback(i,p,3);K--&&i(e[K],K,e);)y++}else y=i==null||p?1:i||y;return q(e,0,xa(wa(0,F-y),F))};J.intersection=function(){for(var e=[],i=-1,p=arguments.length,y=c(),F=Db(),K=F===x,P=c();++i<p;){var T=arguments[i];if(E(T)||La(T)){e.push(T);y.push(K&&T.length>=ga&&t(i?e[i]:P))}}K=e[0];var X=-1,fa=K?K.length:
0,ha=[];a:for(;++X<fa;){var ma=y[0];T=K[X];if((ma?w(ma,T):F(P,T))<0){i=p;for((ma||P).push(T);--i;){ma=y[i];if((ma?w(ma,T):F(e[i],T))<0)continue a}ha.push(T)}}for(;p--;)(ma=y[p])&&k(ma);l(y);l(P);return ha};J.invert=kc;J.invoke=function(e,i){var p=q(arguments,2),y=-1,F=typeof i=="function",K=e?e.length:0,P=Ua(typeof K=="number"?K:0);Pa(e,function(T){P[++y]=(F?i:T[i]).apply(T,p)});return P};J.keys=N;J.map=xb;J.mapValues=function(e,i,p){var y={};i=J.createCallback(i,p,3);U(e,function(F,K,P){y[K]=i(F,
K,P)});return y};J.max=Wb;J.memoize=function(e,i){if(!Ka(e))throw new eb;var p=function(){var y=p.cache,F=i?i.apply(this,arguments):ja+arguments[0];return v.call(y,F)?y[F]:y[F]=e.apply(this,arguments)};p.cache={};return p};J.merge=function(e){var i=arguments,p=2;if(!Oa(e))return e;if(typeof i[2]!="number")p=i.length;if(p>3&&typeof i[p-2]=="function")var y=Fa(i[--p-1],i[p--],2);else if(p>2&&typeof i[p-1]=="function")y=i[--p];i=q(arguments,1,p);for(var F=-1,K=c(),P=c();++F<p;)Sb(e,i[F],y,K,P);l(K);
l(P);return e};J.min=function(e,i,p){var y=Infinity,F=y;if(typeof i!="function"&&p&&p[i]===e)i=null;if(i==null&&E(e)){p=-1;for(var K=e.length;++p<K;){var P=e[p];if(P<F)F=P}}else{i=i==null&&Eb(e)?r:J.createCallback(i,p,3);Pa(e,function(T,X,fa){X=i(T,X,fa);if(X<y){y=X;F=T}})}return F};J.omit=function(e,i,p){var y={};if(typeof i!="function"){var F=[];G(e,function(X,fa){F.push(fa)});F=rb(F,jb(arguments,true,false,1));for(var K=-1,P=F.length;++K<P;){var T=F[K];y[T]=e[T]}}else{i=J.createCallback(i,p,3);
G(e,function(X,fa,ha){i(X,fa,ha)||(y[fa]=X)})}return y};J.once=function(e){var i,p;if(!Ka(e))throw new eb;return function(){if(i)return p;i=true;p=e.apply(this,arguments);e=null;return p}};J.pairs=function(e){for(var i=-1,p=N(e),y=p.length,F=Ua(y);++i<y;){var K=p[i];F[i]=[K,e[K]]}return F};J.partial=function(e){return ab(e,16,q(arguments,1))};J.partialRight=function(e){return ab(e,32,null,q(arguments,1))};J.pick=function(e,i,p){var y={};if(typeof i!="function")for(var F=-1,K=jb(arguments,true,false,
1),P=Oa(e)?K.length:0;++F<P;){var T=K[F];if(T in e)y[T]=e[T]}else{i=J.createCallback(i,p,3);G(e,function(X,fa,ha){if(i(X,fa,ha))y[fa]=X})}return y};J.pluck=Y;J.property=cc;J.pull=function(e){for(var i=arguments,p=0,y=i.length,F=e?e.length:0;++p<y;)for(var K=-1,P=i[p];++K<F;)if(e[K]===P){L.call(e,K--,1);F--}return e};J.range=function(e,i,p){e=+e||0;p=typeof p=="number"?p:+p||1;if(i==null){i=e;e=0}var y=-1;i=wa(0,a((i-e)/(p||1)));for(var F=Ua(i);++y<i;){F[y]=e;e+=p}return F};J.reject=function(e,i,p){i=
J.createCallback(i,p,3);return bb(e,function(y,F,K){return!i(y,F,K)})};J.remove=function(e,i,p){var y=-1,F=e?e.length:0,K=[];for(i=J.createCallback(i,p,3);++y<F;){p=e[y];if(i(p,y,e)){K.push(p);L.call(e,y--,1);F--}}return K};J.rest=$b;J.shuffle=nc;J.sortBy=function(e,i,p){var y=-1,F=E(i),K=e?e.length:0,P=Ua(typeof K=="number"?K:0);F||(i=J.createCallback(i,p,3));Pa(e,function(T,X,fa){var ha=P[++y]=f();if(F)ha.criteria=xb(i,function(ma){return T[ma]});else(ha.criteria=c())[0]=i(T,X,fa);ha.index=y;ha.value=
T});K=P.length;for(P.sort(u);K--;){e=P[K];P[K]=e.value;F||l(e.criteria);k(e)}return P};J.tap=function(e,i){i(e);return e};J.throttle=function(e,i,p){var y=true,F=true;if(!Ka(e))throw new eb;if(p===false)y=false;else if(Oa(p)){y="leading"in p?p.leading:y;F="trailing"in p?p.trailing:F}Cb.leading=y;Cb.maxWait=i;Cb.trailing=F;return Gb(e,i,Cb)};J.times=function(e,i,p){e=(e=+e)>-1?e:0;var y=-1,F=Ua(e);for(i=Fa(i,p,1);++y<e;)F[y]=i(y);return F};J.toArray=function(e){if(e&&typeof e.length=="number")return q(e);
return Lb(e)};J.transform=function(e,i,p,y){var F=E(e);if(p==null)if(F)p=[];else{var K=e&&e.constructor;p=$a(K&&K.prototype)}if(i){i=J.createCallback(i,y,4);(F?Pa:U)(e,function(P,T,X){return i(p,P,T,X)})}return p};J.union=function(){return Tb(jb(arguments,true,true))};J.uniq=Qb;J.values=Lb;J.where=bb;J.without=function(e){return rb(e,q(arguments,1))};J.wrap=function(e,i){return ab(i,16,[e])};J.xor=function(){for(var e=-1,i=arguments.length;++e<i;){var p=arguments[e];if(E(p)||La(p))var y=y?Tb(rb(y,
p).concat(rb(p,y))):p}return y||[]};J.zip=qc;J.zipObject=ac;J.collect=xb;J.drop=$b;J.each=Pa;J.eachRight=Nb;J.extend=ba;J.methods=pb;J.object=ac;J.select=bb;J.tail=$b;J.unique=Qb;J.unzip=qc;db(J);J.clone=function(e,i,p,y){if(typeof i!="boolean"&&i!=null){y=p;p=i;i=false}return Ea(e,i,typeof p=="function"&&Fa(p,y,1))};J.cloneDeep=function(e,i,p){return Ea(e,true,typeof i=="function"&&Fa(i,p,1))};J.contains=ec;J.escape=function(e){return e==null?"":mb(e).replace(ka,uc)};J.every=fc;J.find=Mb;J.findIndex=
function(e,i,p){var y=-1,F=e?e.length:0;for(i=J.createCallback(i,p,3);++y<F;)if(i(e[y],y,e))return y;return-1};J.findKey=function(e,i,p){var y;i=J.createCallback(i,p,3);U(e,function(F,K,P){if(i(F,K,P)){y=K;return false}});return y};J.findLast=function(e,i,p){var y;i=J.createCallback(i,p,3);Nb(e,function(F,K,P){if(i(F,K,P)){y=F;return false}});return y};J.findLastIndex=function(e,i,p){var y=e?e.length:0;for(i=J.createCallback(i,p,3);y--;)if(i(e[y],y,e))return y;return-1};J.findLastKey=function(e,i,
p){var y;i=J.createCallback(i,p,3);Vb(e,function(F,K,P){if(i(F,K,P)){y=K;return false}});return y};J.has=function(e,i){return e?v.call(e,i):false};J.identity=Ob;J.indexOf=Zb;J.isArguments=La;J.isArray=E;J.isBoolean=function(e){return e===true||e===false||e&&typeof e=="object"&&Ra.call(e)==gb||false};J.isDate=function(e){return e&&typeof e=="object"&&Ra.call(e)==Ab||false};J.isElement=function(e){return e&&e.nodeType===1||false};J.isEmpty=function(e){var i=true;if(!e)return i;var p=Ra.call(e),y=e.length;
if(p==Ta||p==nb||p==Ia||p==hb&&typeof y=="number"&&Ka(e.splice))return!y;U(e,function(){return i=false});return i};J.isEqual=function(e,i,p,y){return kb(e,i,typeof p=="function"&&Fa(p,y,2))};J.isFinite=function(e){return da(e)&&!qa(parseFloat(e))};J.isFunction=Ka;J.isNaN=function(e){return lc(e)&&e!=+e};J.isNull=function(e){return e===null};J.isNumber=lc;J.isObject=Oa;J.isPlainObject=ca;J.isRegExp=function(e){return e&&typeof e=="object"&&Ra.call(e)==tb||false};J.isString=Eb;J.isUndefined=function(e){return typeof e==
"undefined"};J.lastIndexOf=function(e,i,p){var y=e?e.length:0;if(typeof p=="number")y=(p<0?wa(0,y+p):xa(p,y-1))+1;for(;y--;)if(e[y]===i)return y;return-1};J.mixin=db;J.noConflict=function(){la._=Hb;return this};J.noop=lb;J.now=oa;J.parseInt=yb;J.random=function(e,i,p){var y=e==null,F=i==null;if(p==null)if(typeof e=="boolean"&&F){p=e;e=1}else if(!F&&typeof i=="boolean"){p=i;F=true}if(y&&F)i=1;e=+e||0;if(F){i=e;e=0}else i=+i||0;if(p||e%1||i%1){p=Qa();return xa(e+p*(i-e+parseFloat("1e-"+((p+"").length-
1))),i)}return Kb(e,i)};J.reduce=Xb;J.reduceRight=mc;J.result=function(e,i){if(e){var p=e[i];return Ka(p)?e[i]():p}};J.runInContext=n;J.size=function(e){var i=e?e.length:0;return typeof i=="number"?i:N(e).length};J.some=oc;J.sortedIndex=pc;J.template=function(e,i,p){var y=J.templateSettings;e=mb(e||"");p=ta({},p,y);var F=ta({},p.imports,y.imports);y=N(F);F=Lb(F);var K,P=0,T=p.interpolate||aa,X="__p += '";T=Ya((p.escape||aa).source+"|"+T.source+"|"+(T===C?Ga:aa).source+"|"+(p.evaluate||aa).source+
"|$","g");e.replace(T,function(Da,Ba,ya,wc,qb,dc){ya||(ya=wc);X+=e.slice(P,dc).replace(na,j);if(Ba)X+="' +\n__e("+Ba+") +\n'";if(qb){K=true;X+="';\n"+qb+";\n__p += '"}if(ya)X+="' +\n((__t = ("+ya+")) == null ? '' : __t) +\n'";P=dc+Da.length;return Da});X+="';\n";var fa=T=p.variable;if(!fa){T="obj";X="with ("+T+") {\n"+X+"\n}\n"}X=(K?X.replace(Sa,""):X).replace(Wa,"$1").replace(sb,"$1;");X="function("+T+") {\n"+(fa?"":T+" || ("+T+" = {});\n")+"var __t, __p = '', __e = _.escape"+(K?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":
";\n")+X+"return __p\n}";p="\n/*\n//# sourceURL="+(p.sourceURL||"/lodash/template/source["+Ca++ +"]")+"\n*/";try{var ha=Pb(y,"return "+X+p).apply(B,F)}catch(ma){ma.source=X;throw ma;}if(i)return ha(i);ha.source=X;return ha};J.unescape=function(e){return e==null?"":mb(e).replace(W,tc)};J.uniqueId=function(e){var i=++Z;return mb(e==null?"":e)+i};J.all=fc;J.any=oc;J.detect=Mb;J.findWhere=Mb;J.foldl=Xb;J.foldr=mc;J.include=ec;J.inject=Xb;db(function(){var e={};U(J,function(i,p){J.prototype[p]||(e[p]=
i)});return e}(),false);J.first=Yb;J.last=function(e,i,p){var y=0,F=e?e.length:0;if(typeof i!="number"&&i!=null){var K=F;for(i=J.createCallback(i,p,3);K--&&i(e[K],K,e);)y++}else{y=i;if(y==null||p)return e?e[F-1]:B}return q(e,wa(0,F-y))};J.sample=function(e,i,p){if(e&&typeof e.length!="number")e=Lb(e);if(i==null||p)return e?e[Kb(0,e.length-1)]:B;e=nc(e);e.length=xa(wa(0,i),e.length);return e};J.take=Yb;J.head=Yb;U(J,function(e,i){var p=i!=="sample";J.prototype[i]||(J.prototype[i]=function(y,F){var K=
this.__chain__,P=e(this.__wrapped__,y,F);return!K&&(y==null||F&&!(p&&typeof y=="function"))?P:new sa(P,K)})});J.VERSION="2.4.1";J.prototype.chain=function(){this.__chain__=true;return this};J.prototype.toString=function(){return mb(this.__wrapped__)};J.prototype.value=vc;J.prototype.valueOf=vc;Pa(["join","pop","shift"],function(e){var i=fb[e];J.prototype[e]=function(){var p=this.__chain__,y=i.apply(this.__wrapped__,arguments);return p?new sa(y,p):y}});Pa(["push","reverse","sort","unshift"],function(e){var i=
fb[e];J.prototype[e]=function(){i.apply(this.__wrapped__,arguments);return this}});Pa(["concat","slice","splice"],function(e){var i=fb[e];J.prototype[e]=function(){return new sa(i.apply(this.__wrapped__,arguments),this.__chain__)}});return J}var B,I=[],O=[],Z=0,ja=+new Date+"",ga=75,ra=40,ua=" \t\u000b\u000c\u00a0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",Sa=/\b__p \+= '';/g,Wa=/\b(__p \+=) '' \+/g,sb=/(__e\(.*?\)|\b__t\)) \+\n'';/g,
Ga=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Xa=/\w*$/,z=/^\s*function[ \n\r\t]+\w/,C=/<%=([\s\S]+?)%>/g,M=RegExp("^["+ua+"]*0+(?=.$)"),aa=/($^)/,d=/\bthis\b/,na=/['\n\r\t\u2028\u2029\\]/g,za=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],Ca=0,Ia="[object Arguments]",Ta="[object Array]",gb="[object Boolean]",Ab="[object Date]",gc="[object Function]",Bb="[object Number]",hb="[object Object]",tb="[object RegExp]",
nb="[object String]",Ha={};Ha[gc]=false;Ha[Ia]=Ha[Ta]=Ha[gb]=Ha[Ab]=Ha[Bb]=Ha[hb]=Ha[tb]=Ha[nb]=true;var Cb={leading:false,maxWait:0,trailing:false},Rb={configurable:false,enumerable:false,value:null,writable:false},Ja={"boolean":false,"function":true,object:true,number:false,string:false,undefined:false},hc={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},ub=Ja[typeof window]&&window||this,Ib=Ja[typeof exports]&&exports&&!exports.nodeType&&exports,Jb=Ja[typeof module]&&
module&&!module.nodeType&&module,ic=Jb&&Jb.exports===Ib&&Ib,vb=Ja[typeof global]&&global;if(vb&&(vb.global===vb||vb.window===vb))ub=vb;var ib=n();if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){ub._=ib;define(function(){return ib})}else if(Ib&&Jb)if(ic)(Jb.exports=ib)._=ib;else Ib._=ib;else ub._=ib}).call(this);(function(){var x=this,w=x.Backbone,o=Array.prototype.slice,r=Array.prototype.splice,u;u="undefined"!==typeof exports?exports:x.Backbone={};u.VERSION="0.9.2";var t=x._;!t&&"undefined"!==typeof require&&(t=require("underscore"));var j=x.jQuery||x.Zepto||x.ender;u.setDomLibrary=function(z){j=z};u.noConflict=function(){x.Backbone=w;return this};u.emulateHTTP=false;u.emulateJSON=false;var c=/\s+/,f=u.Events={on:function(z,C,M){var aa,d,na,za,Ca;if(!C)return this;z=z.split(c);for(aa=this._callbacks||(this._callbacks=
{});d=z.shift();){na=(Ca=aa[d])?Ca.tail:{};na.next=za={};na.context=M;na.callback=C;aa[d]={tail:za,next:Ca?Ca.next:na}}return this},off:function(z,C,M){var aa,d,na,za,Ca,Ia;if(d=this._callbacks){if(!z&&!C&&!M)return delete this._callbacks,this;for(z=z?z.split(c):t.keys(d);aa=z.shift();)if(na=d[aa],delete d[aa],na&&(C||M))for(za=na.tail;(na=na.next)!==za;)if(Ca=na.callback,Ia=na.context,C&&Ca!==C||M&&Ia!==M)this.on(aa,Ca,Ia);return this}},trigger:function(z){var C,M,aa,d,na,za;if(!(aa=this._callbacks))return this;
na=aa.all;z=z.split(c);for(za=o.call(arguments,1);C=z.shift();){if(M=aa[C])for(d=M.tail;(M=M.next)!==d;)M.callback.apply(M.context||this,za);if(M=na){d=M.tail;for(C=[C].concat(za);(M=M.next)!==d;)M.callback.apply(M.context||this,C)}}return this}};f.bind=f.on;f.unbind=f.off;var l=u.Model=function(z,C){var M;z||(z={});C&&C.parse&&(z=this.parse(z));if(M=Ga(this,"defaults"))z=t.extend({},M,z);C&&C.collection&&(this.collection=C.collection);this.attributes={};this._escapedAttributes={};this.cid=t.uniqueId("c");
this.changed={};this._silent={};this._pending={};this.set(z,{silent:true});this.changed={};this._silent={};this._pending={};this._previousAttributes=t.clone(this.attributes);this.initialize.apply(this,arguments)};t.extend(l.prototype,f,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(){return t.clone(this.attributes)},get:function(z){return this.attributes[z]},escape:function(z){var C;if(C=this._escapedAttributes[z])return C;C=this.get(z);return this._escapedAttributes[z]=
t.escape(null==C?"":""+C)},has:function(z){return null!=this.get(z)},set:function(z,C,M){var aa,d;t.isObject(z)||null==z?(aa=z,M=C):(aa={},aa[z]=C);M||(M={});if(!aa)return this;aa instanceof l&&(aa=aa.attributes);if(M.unset)for(d in aa)aa[d]=void 0;if(!this._validate(aa,M))return false;this.idAttribute in aa&&(this.id=aa[this.idAttribute]);C=M.changes={};var na=this.attributes,za=this._escapedAttributes,Ca=this._previousAttributes||{};for(d in aa){z=aa[d];if(!t.isEqual(na[d],z)||M.unset&&t.has(na,
d)){delete za[d];(M.silent?this._silent:C)[d]=true}M.unset?delete na[d]:na[d]=z;!t.isEqual(Ca[d],z)||t.has(na,d)!=t.has(Ca,d)?(this.changed[d]=z,M.silent||(this._pending[d]=true)):(delete this.changed[d],delete this._pending[d])}M.silent||this.change(M);return this},unset:function(z,C){(C||(C={})).unset=true;return this.set(z,null,C)},clear:function(z){(z||(z={})).unset=true;return this.set(t.clone(this.attributes),z)},fetch:function(z){z=z?t.clone(z):{};var C=this,M=z.success;z.success=function(aa,
d,na){if(!C.set(C.parse(aa,na),z))return false;M&&M(C,aa)};z.error=u.wrapError(z.error,C,z);return(this.sync||u.sync).call(this,"read",this,z)},save:function(z,C,M){var aa,d;t.isObject(z)||null==z?(aa=z,M=C):(aa={},aa[z]=C);M=M?t.clone(M):{};if(M.wait){if(!this._validate(aa,M))return false;d=t.clone(this.attributes)}z=t.extend({},M,{silent:true});if(aa&&!this.set(aa,M.wait?z:M))return false;var na=this,za=M.success;M.success=function(Ca,Ia,Ta){Ia=na.parse(Ca,Ta);if(M.wait){delete M.wait;Ia=t.extend(aa||
{},Ia)}if(!na.set(Ia,M))return false;za?za(na,Ca):na.trigger("sync",na,Ca,M)};M.error=u.wrapError(M.error,na,M);C=this.isNew()?"create":"update";C=(this.sync||u.sync).call(this,C,this,M);M.wait&&this.set(d,z);return C},destroy:function(z){z=z?t.clone(z):{};var C=this,M=z.success,aa=function(){C.trigger("destroy",C,C.collection,z)};if(this.isNew())return aa(),false;z.success=function(na){z.wait&&aa();M?M(C,na):C.trigger("sync",C,na,z)};z.error=u.wrapError(z.error,C,z);var d=(this.sync||u.sync).call(this,
"delete",this,z);z.wait||aa();return d},url:function(){var z=Ga(this,"urlRoot")||Ga(this.collection,"url")||Xa();return this.isNew()?z:z+("/"==z.charAt(z.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(z){return z},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(z){z||(z={});var C=this._changing;this._changing=true;for(var M in this._silent)this._pending[M]=true;var aa=t.extend({},z.changes,this._silent);this._silent=
{};for(M in aa)this.trigger("change:"+M,this,this.get(M),z);if(C)return this;for(;!t.isEmpty(this._pending);){this._pending={};this.trigger("change",this,z);for(M in this.changed)!this._pending[M]&&!this._silent[M]&&delete this.changed[M];this._previousAttributes=t.clone(this.attributes)}this._changing=false;return this},hasChanged:function(z){return!arguments.length?!t.isEmpty(this.changed):t.has(this.changed,z)},changedAttributes:function(z){if(!z)return this.hasChanged()?t.clone(this.changed):
false;var C,M=false,aa=this._previousAttributes,d;for(d in z)if(!t.isEqual(aa[d],C=z[d]))(M||(M={}))[d]=C;return M},previous:function(z){return!arguments.length||!this._previousAttributes?null:this._previousAttributes[z]},previousAttributes:function(){return t.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(z,C){if(C.silent||!this.validate)return true;z=t.extend({},this.attributes,z);var M=this.validate(z,C);if(!M)return true;C&&C.error?
C.error(this,M,C):this.trigger("error",this,M,C);return false}});var k=u.Collection=function(z,C){C||(C={});C.model&&(this.model=C.model);C.comparator&&(this.comparator=C.comparator);this._reset();this.initialize.apply(this,arguments);z&&this.reset(z,{silent:true,parse:C.parse})};t.extend(k.prototype,f,{model:l,initialize:function(){},toJSON:function(z){return this.map(function(C){return C.toJSON(z)})},add:function(z,C){var M,aa,d,na,za,Ca={},Ia={},Ta=[];C||(C={});z=t.isArray(z)?z.slice():[z];M=0;
for(aa=z.length;M<aa;M++){if(!(d=z[M]=this._prepareModel(z[M],C)))throw Error("Can't add an invalid model to a collection");na=d.cid;za=d.id;Ca[na]||this._byCid[na]||null!=za&&(Ia[za]||this._byId[za])?Ta.push(M):Ca[na]=Ia[za]=d}for(M=Ta.length;M--;)z.splice(Ta[M],1);M=0;for(aa=z.length;M<aa;M++){(d=z[M]).on("all",this._onModelEvent,this);this._byCid[d.cid]=d;null!=d.id&&(this._byId[d.id]=d)}this.length+=aa;r.apply(this.models,[null!=C.at?C.at:this.models.length,0].concat(z));this.comparator&&this.sort({silent:true});
if(C.silent)return this;M=0;for(aa=this.models.length;M<aa;M++)if(Ca[(d=this.models[M]).cid]){C.index=M;d.trigger("add",d,this,C)}return this},remove:function(z,C){var M,aa,d,na;C||(C={});z=t.isArray(z)?z.slice():[z];M=0;for(aa=z.length;M<aa;M++)if(na=this.getByCid(z[M])||this.get(z[M])){delete this._byId[na.id];delete this._byCid[na.cid];d=this.indexOf(na);this.models.splice(d,1);this.length--;C.silent||(C.index=d,na.trigger("remove",na,this,C));this._removeReference(na)}return this},push:function(z,
C){z=this._prepareModel(z,C);this.add(z,C);return z},pop:function(z){var C=this.at(this.length-1);this.remove(C,z);return C},unshift:function(z,C){z=this._prepareModel(z,C);this.add(z,t.extend({at:0},C));return z},shift:function(z){var C=this.at(0);this.remove(C,z);return C},get:function(z){return null==z?void 0:this._byId[null!=z.id?z.id:z]},getByCid:function(z){return z&&this._byCid[z.cid||z]},at:function(z){return this.models[z]},where:function(z){return t.isEmpty(z)?[]:this.filter(function(C){for(var M in z)if(z[M]!==
C.get(M))return false;return true})},sort:function(z){z||(z={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");var C=t.bind(this.comparator,this);1==this.comparator.length?this.models=this.sortBy(C):this.models.sort(C);z.silent||this.trigger("reset",this,z);return this},pluck:function(z){return t.map(this.models,function(C){return C.get(z)})},reset:function(z,C){z||(z=[]);C||(C={});for(var M=0,aa=this.models.length;M<aa;M++)this._removeReference(this.models[M]);this._reset();
this.add(z,t.extend({silent:true},C));C.silent||this.trigger("reset",this,C);return this},fetch:function(z){z=z?t.clone(z):{};void 0===z.parse&&(z.parse=true);var C=this,M=z.success;z.success=function(aa,d,na){C[z.add?"add":"reset"](C.parse(aa,na),z);M&&M(C,aa)};z.error=u.wrapError(z.error,C,z);return(this.sync||u.sync).call(this,"read",this,z)},create:function(z,C){var M=this;C=C?t.clone(C):{};z=this._prepareModel(z,C);if(!z)return false;C.wait||M.add(z,C);var aa=C.success;C.success=function(d,na){C.wait&&
M.add(d,C);aa?aa(d,na):d.trigger("sync",z,na,C)};z.save(null,C);return z},parse:function(z){return z},chain:function(){return t(this.models).chain()},_reset:function(){this.length=0;this.models=[];this._byId={};this._byCid={}},_prepareModel:function(z,C){C||(C={});z instanceof l?z.collection||(z.collection=this):(C.collection=this,z=new this.model(z,C),z._validate(z.attributes,C)||(z=false));return z},_removeReference:function(z){this==z.collection&&delete z.collection;z.off("all",this._onModelEvent,
this)},_onModelEvent:function(z,C,M,aa){("add"==z||"remove"==z)&&M!=this||("destroy"==z&&this.remove(C,aa),C&&z==="change:"+C.idAttribute&&(delete this._byId[C.previous(C.idAttribute)],this._byId[C.id]=C),this.trigger.apply(this,arguments))}});t.each("forEach,each,map,reduce,reduceRight,find,detect,filter,select,reject,every,all,some,any,include,contains,invoke,max,min,sortBy,sortedIndex,toArray,size,first,initial,rest,last,without,indexOf,shuffle,lastIndexOf,isEmpty,groupBy".split(","),function(z){k.prototype[z]=
function(){return t[z].apply(t,[this.models].concat(t.toArray(arguments)))}});var q=u.Router=function(z){z||(z={});z.routes&&(this.routes=z.routes);this._bindRoutes();this.initialize.apply(this,arguments)},n=/:\w+/g,B=/\*\w+/g,I=/[-[\]{}()+?.,\\^$|#\s]/g;t.extend(q.prototype,f,{initialize:function(){},route:function(z,C,M){u.history||(u.history=new O);t.isRegExp(z)||(z=this._routeToRegExp(z));M||(M=this[C]);u.history.route(z,t.bind(function(aa){aa=this._extractParameters(z,aa);M&&M.apply(this,aa);
this.trigger.apply(this,["route:"+C].concat(aa));u.history.trigger("route",this,C,aa)},this));return this},navigate:function(z,C){u.history.navigate(z,C)},_bindRoutes:function(){if(this.routes){var z=[],C;for(C in this.routes)z.unshift([C,this.routes[C]]);C=0;for(var M=z.length;C<M;C++)this.route(z[C][0],z[C][1],this[z[C][1]])}},_routeToRegExp:function(z){z=z.replace(I,"\\$&").replace(n,"([^/]+)").replace(B,"(.*?)");return RegExp("^"+z+"$")},_extractParameters:function(z,C){return z.exec(C).slice(1)}});
var O=u.History=function(){this.handlers=[];t.bindAll(this,"checkUrl")},Z=/^[#\/]/,ja=/msie [\w.]+/;O.started=false;t.extend(O.prototype,f,{interval:50,getHash:function(z){return(z=(z?z.location:window.location).href.match(/#(.*)$/))?z[1]:""},getFragment:function(z,C){if(null==z)if(this._hasPushState||C){z=window.location.pathname;var M=window.location.search;M&&(z+=M)}else z=this.getHash();z.indexOf(this.options.root)||(z=z.substr(this.options.root.length));return z.replace(Z,"")},start:function(z){if(O.started)throw Error("Backbone.history has already been started");
O.started=true;this.options=t.extend({},{root:"/"},this.options,z);this._wantsHashChange=false!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!(!this.options.pushState||!window.history||!window.history.pushState);z=this.getFragment();var C=document.documentMode;if(C=ja.exec(navigator.userAgent.toLowerCase())&&(!C||7>=C)){this.iframe=j('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(z)}this._hasPushState?
j(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!C?j(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=z;z=window.location;C=z.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!C)return this.fragment=this.getFragment(null,true),window.location.replace(this.options.root+"#"+this.fragment),true;this._wantsPushState&&this._hasPushState&&
C&&z.hash&&(this.fragment=this.getHash().replace(Z,""),window.history.replaceState({},document.title,z.protocol+"//"+z.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},stop:function(){j(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);O.started=false},route:function(z,C){this.handlers.unshift({route:z,callback:C})},checkUrl:function(){var z=this.getFragment();z==this.fragment&&this.iframe&&(z=this.getFragment(this.getHash(this.iframe)));
if(z==this.fragment)return false;this.iframe&&this.navigate(z);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(z){var C=this.fragment=this.getFragment(z);return t.any(this.handlers,function(M){if(M.route.test(C))return M.callback(C),true})},navigate:function(z,C){if(!O.started)return false;if(!C||true===C)C={trigger:C};var M=(z||"").replace(Z,"");this.fragment!=M&&(this._hasPushState?(0!=M.indexOf(this.options.root)&&(M=this.options.root+M),this.fragment=M,window.history[C.replace?
"replaceState":"pushState"]({},document.title,M)):this._wantsHashChange?(this.fragment=M,this._updateHash(window.location,M,C.replace),this.iframe&&M!=this.getFragment(this.getHash(this.iframe))&&(C.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,M,C.replace))):window.location.assign(this.options.root+z),C.trigger&&this.loadUrl(z))},_updateHash:function(z,C,M){M?z.replace(z.toString().replace(/(javascript:|#).*$/,"")+"#"+C):z.hash=C}});var ga=u.View=function(z){this.cid=
t.uniqueId("view");this._configure(z||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},ra=/^(\S+)\s*(.*)$/,ua="model,collection,el,id,attributes,className,tagName".split(",");t.extend(ga.prototype,f,{tagName:"div",$:function(z){return this.$el.find(z)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();return this},make:function(z,C,M){z=document.createElement(z);C&&j(z).attr(C);M&&j(z).html(M);return z},setElement:function(z,
C){this.$el&&this.undelegateEvents();this.$el=z instanceof j?z:j(z);this.el=this.$el[0];false!==C&&this.delegateEvents();return this},delegateEvents:function(z){if(z||(z=Ga(this,"events"))){this.undelegateEvents();for(var C in z){var M=z[C];t.isFunction(M)||(M=this[z[C]]);if(!M)throw Error('Method "'+z[C]+'" does not exist');var aa=C.match(ra),d=aa[1];aa=aa[2];M=t.bind(M,this);d+=".delegateEvents"+this.cid;""===aa?this.$el.bind(d,M):this.$el.delegate(aa,d,M)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+
this.cid)},_configure:function(z){this.options&&(z=t.extend({},this.options,z));for(var C=0,M=ua.length;C<M;C++){var aa=ua[C];z[aa]&&(this[aa]=z[aa])}this.options=z},_ensureElement:function(){if(this.el)this.setElement(this.el,false);else{var z=Ga(this,"attributes")||{};this.id&&(z.id=this.id);this.className&&(z["class"]=this.className);this.setElement(this.make(this.tagName,z),false)}}});l.extend=k.extend=q.extend=ga.extend=function(z,C){var M=sb(this,z,C);M.extend=this.extend;return M};var Sa={create:"POST",
update:"PUT","delete":"DELETE",read:"GET"};u.sync=function(z,C,M){var aa=Sa[z];M||(M={});var d={type:aa,dataType:"json"};M.url||(d.url=Ga(C,"url")||Xa());if(!M.data&&C&&("create"==z||"update"==z)){d.contentType="application/json";d.data=JSON.stringify(C.toJSON())}u.emulateJSON&&(d.contentType="application/x-www-form-urlencoded",d.data=d.data?{model:d.data}:{});if(u.emulateHTTP&&("PUT"===aa||"DELETE"===aa)){u.emulateJSON&&(d.data._method=aa);d.type="POST";d.beforeSend=function(na){na.setRequestHeader("X-HTTP-Method-Override",
aa)}}"GET"!==d.type&&!u.emulateJSON&&(d.processData=false);return j.ajax(t.extend(d,M))};u.wrapError=function(z,C,M){return function(aa,d){d=aa===C?d:aa;z?z(C,d,M):C.trigger("error",C,d,M)}};var Wa=function(){},sb=function(z,C,M){var aa;aa=C&&C.hasOwnProperty("constructor")?C.constructor:function(){z.apply(this,arguments)};t.extend(aa,z);Wa.prototype=z.prototype;aa.prototype=new Wa;C&&t.extend(aa.prototype,C);M&&t.extend(aa,M);aa.prototype.constructor=aa;aa.__super__=z.prototype;return aa},Ga=function(z,
C){return!z||!z[C]?null:t.isFunction(z[C])?z[C]():z[C]},Xa=function(){throw Error('A "url" property or function must be specified');}}).call(this);(function(){Backbone.View.prototype.close=function(){var x;this.remove();this.trigger("closed",this);this.unbind();if((x=this.model)!=null)x.off(null,null,this);App.Dispatch.off(null,null,this);return typeof this.onClose==="function"?this.onClose():void 0};Backbone.Model.prototype.unbindAll=function(){this.unbind();return App.Dispatch.off(null,null,this)};Backbone.Model.prototype.toJSON=function(){var x,w,o;if(this._isSerializing)return this.id||this.cid;this._isSerializing=true;x=_.clone(this.attributes);
for(w in x){o=x[w];if(o!=null&&_.isFunction(o.toJSON))x[w]=o.toJSON()}this._isSerializing=false;return x};Backbone.Events.once=function(x,w,o){var r;this.on(x,w,o);r=function(){return this.off(x,w,o).off(x,r)};this.on(x,r,this);return this}}).call(this);(function(x){function w(){return x.mozAnimationStartTime||x.performance&&x.performance.now&&performance.now()||+new Date}var o={util:{},tracking:{},data:{},els:{},state:{},lib:jQuery};o.data.embedly_key="886d8cceec7711df84894040444cdc60";o.util.domain=function(c){return(document.location.host.indexOf("bitly")===-1?"http://bitly.com":"")+c};o.util.log=function(c,f){f||(f="INFO");try{return console?console.log(f+": "+c):false}catch(l){return false}};o.util.inherit=function(c,f){var l=function(){};l.prototype=
f.prototype;c.prototype=new l;c.prototype.constructor=c;c.superclass=f.prototype;if(f.prototype.constructor==Object.prototype.constructor)f.prototype.constructor=f};o.util.argsAsArray=function(c){return Array.prototype.slice.call(c)};o.util.hashToQueryString=function(c,f,l){var k=[];for(key in c)for(var q=$.isArray(c[key])?c[key]:[c[key]],n=0,B=q.length;n<B;n++)q[n]==="?"&&l?k.push(encodeURIComponent(key)+"="+q[n]):k.push(encodeURIComponent(key)+"="+encodeURIComponent(q[n]));c=k.length?"?"+k.join("&"):
"";return(f||"")+c};o.util.queryStringToHash=function(c){c=c||location.href;if(c.indexOf("?")>-1)c=c.substring(c.indexOf("?")+1);else return{};c=c.split("&");for(var f={},l=c.length;l;){var k=c[--l].split("=");f[decodeURIComponent(k[0].replace(/\+/g," "))]=decodeURIComponent(k[1].replace(/\+/g," "))}return f};o.util.stripQueryString=function(c){if(c.indexOf("?")>-1)c=c.substring(0,c.indexOf("?"));return c};o.util.modifyQueryParams=function(c,f){f=f||location.href;var l=o.util.stripQueryString(f),
k=o.util.queryStringToHash(f),q;for(q in c)if(c[q]===null)delete k[q];else k[q]=c[q];return o.util.hashToQueryString(k,l)};o.util.cleanURL=function(c){return c.replace(/https?:\/\//,"")};o.util.relativeTime=function(c,f){function l(Z){var ja="a",ga;ga=Z.getHours();Z=Z.getMinutes();ja=ga>=12?"p":"a";return((ga>=12?ga-12:ga)||12)+":"+(Z<10?"0"+Z:Z)+ja}f=f||{};var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],q=new Date(c*1E3),n=new Date,B=n-q,I="",O=q.getFullYear();n.getFullYear();
n=new Date;n.setHours(0);n.setMinutes(0);n.setSeconds(0);n.setMilliseconds(0);if(B>864E5||+q<+n){I+=k[q.getMonth()];I+=" ";I+=q.getDate();if(B>2592E7){I+=" ";I+=O}if(f.show_ts_for_days&&typeof f.show_ts_for_days==="number"&&f.show_ts_for_days<300&&B<864E5*parseInt(f.show_ts_for_days,10))I+=" "+l(q)}else I+=l(q);return I};o.ajax={GET:function(c){return o.ajax.makeRequest("GET",c)},POST:function(c){return o.ajax.makeRequest("POST",c)},PUT:function(c){return o.ajax.makeRequest("PUT",c)},DELETE:function(c){return o.ajax.makeRequest("DELETE",
c)},makeRequest:function(c,f){var l=new o.ajax.request(f);l.setMethod(c);l.url&&l.execute();return l},requestor:null};o.ajax.request=function(c){this.init(c)};o.ajax.request.prototype={init:function(c){c||(c={});if(o.util.isFunction(c))this._setSuccess(c);else{o.util.simpleExtend(this,c);if(this.url)this.url=this.api_base+this.url;if(!c.scope)this.scope=this;if(this.send_json)this.contentType="application/json";this.deferred=$.Deferred();this.promise=this.deferred.promise();c.error?this._setError(c.error,
this.scope):this._setError(this.error,this.scope);c.success?this._setSuccess(c.success,this.scope):this._setSuccess(this.success,this.scope)}},api_base:"",_setSuccess:function(c,f){if(!f)f=this.scope;var l=this,k=function(){var q=o.util.argsAsArray(arguments);o.util.checkResponseForError(q[0],l.error,f,q)||c.apply(f,q)};this.success=k;this.promise.done(k)},_setError:function(c,f){if(typeof c!=="undefined"){f||(f=this);var l=function(){var k=o.util.argsAsArray(arguments);c.apply(f,k)};this.error=l;
this.promise.fail(l)}else this.error=o.ajax.request.prototype.error},setMethod:function(c){switch(c.toLowerCase()){case "delete":case "put":case "post":this.method=c.toUpperCase();break;default:this.method="GET"}},execute:function(c,f){var l=this;if(c)this.url=c;if(f)this.data=f;if(this.url){var k={type:this.method,url:this.url,data:this.data,success:this.deferred.resolve,dataType:this.dataType,contentType:this.contentType,error:this.deferred.reject,async:this.async,timeout:this.timeout,binary:false,
traditional:this.traditional,beforeSend:function(q){l.binary&&q.overrideMimeType("text/plain; charset=x-user-defined;");$.cookie&&q.setRequestHeader("X-XSRFToken",$.cookie.get("_xsrf"))}};this.singleThreaded&&this.xhr&&this.xhr.abort();this.xhr=o.ajax.requestor(k);return this}else throw"Must have a url set to execute";},abort:function(){this.xhr&&this.xhr.abort()},data:{},timeout:2E4,singleThreaded:false,dataType:"json",contentType:"application/x-www-form-urlencoded",scope:this,async:true,method:"GET",
form:false,traditional:true,success:function(){o.util.log("default success")},error:function(){o.util.log("error making a "+this.method+" request to "+this.url,"ERROR")}};o.util.destroyClass=function(c){c=c||{};if(this.hasOwnProperty("els")){for(var f in this.els){c.remove_els&&this.els[f].remove();this.els[f]=null;delete this.els[f]}delete this.els}if(this.hasOwnProperty("obj")){for(var l in this.obj){this.obj[l].destroy&&this.obj[l].destroy();this.obj[l]=null;delete this.obj[l]}delete this.obj}if(this.hasOwnProperty("data")){for(var k in this.data){this.data[k]=
null;delete this.data[k]}delete this.data}if(this.hasOwnProperty("state")){for(var q in this.state){this.state[q]=null;delete this.state[q]}delete this.state}if(this.hasOwnProperty("util")){for(var n in this.util){this.util[n]=null;delete this.util[n]}delete this.util}this.hasOwnProperty("parents")&&delete this.parents;if(this.hasOwnProperty("el")){this.el.remove();this.el=null;delete this.el}return this};o.util.initClass=function(c){if(c)this.el=$(c);this.data={};this.state={};this.els={};this.obj=
{};this.parents={};return this};o.util.isFunction=o.lib.isFunction;o.util.simpleExtend=o.lib.extend;o.ajax.requestor=o.lib.ajax;o.Eventer={evt:{},delegate:function(c){if(!c)return false;var f=c.del?$(c.del):$("body"),l=c.el?$(c.el):$("body"),k=c.evt,q=c.cb,n=c.scope;c=c.ns||"_default";var B=f.data("bitly_evt_id");if(!B){B=this.createEvtId();f.data("bitly_evt_id",B)}if(l&&k&&q){var I=l.data("bitly_evt_id");if(!I){I=this.createEvtId();l.data("bitly_evt_id",I)}this.evt.hasOwnProperty(B)||(this.evt[B]=
{});if(!this.evt[B].hasOwnProperty(k)){this.evt[B][k]={};this._bind(f,k)}f=this.evt[B][k];f.hasOwnProperty(I)||(f[I]=[]);f[I].push({ns:c,cb:function(O,Z){return q.call(n,O,Z)}})}},undelegate:function(c){var f=c.del?$(c.del):$("body"),l=c.el?$(c.el):$("body"),k=c.evt;c=c.ns||"*";f=f.data("bitly_evt_id");l=l.data("bitly_evt_id");if(f&&l&&this.evt[f]&&this.evt[f][k]&&this.evt[f][k][l]){var q=this.evt[f][k][l];if(c==="*")delete this.evt[f][k][l];else{for(var n=[],B=0,I=q.length;B<I;B++)q[B].ns!==c&&n.push(q[B]);
if(n.length)this.evt[f][k][l]=n;else delete this.evt[f][k][l]}}},_bind:function(c,f){var l=c.data("bitly_evt_id");c.bind(f,function(k,q){if(!l)return true;for(var n=$(k.target),B=n.data("bitly_evt_id");n.length;){if(B&&o.Eventer.evt[l]&&o.Eventer.evt[l][f]&&o.Eventer.evt[l][f][B]&&o.Eventer.evt[l][f][B].length){B=o.Eventer.evt[l][f][B];for(var I=false,O=0,Z=B.length;O<Z;O++){I=B[O].cb(k,q);if(typeof I!=="undefined"&&!I)return I;if(k.isImmediatePropagationStopped())return false}if(k.isPropagationStopped()||
k.isDefaultPrevented())return false}n=n.parent();B=n.data("bitly_evt_id")}})},bind:function(c){c.del=c.el;this.delegate(c);return this},unbind:function(c){c.del=c.el;this.undelegate(c);return this},trigger:function(c,f,l){f=f||{};l=l?$(l):$("body");l.trigger(c,[f]);return this},createEvtId:function(){return"evt_"+Math.random().toString().replace("0.","")}};o.util.checkResponseForError=function(c,f,l,k){if(c&&c.status_code&&c.status_code!=200){f.apply(l||null,k);return true}return false};o.util.timeStamp=
function(c){if(!c)return"A long time ago.";return(new Date(c*1E3)).toDateString()};o.util.preserveNewline=function(c){return c.replace(/\n/g,"<br/>")};o.util.savePreference=function(c,f,l){o.ajax.POST({url:"/data/preferences",data:{key:c,value:f},success:function(k){if(k.data&&k.data.preferences&&k.data.preferences.length){var q=k.data.preferences[0];if(q.history_privacy==="0"||q.history_privacy==="1")q.history_privacy=parseInt(q.history_privacy,10)?"public":"private"}typeof l==="function"?l(k):$.noop()},
error:function(){console.log("Error updating preferences to: ",c,f)}})};o.util.timeAgoInWords=function(c,f){if(typeof c=="string")c=Date.parse(c);else if(typeof c==="undefined")c=+new Date;if(typeof f=="string")f=Date.parse(f);else if(typeof f==="undefined")f=+new Date;if(!c)return"some time ago";var l=f-c,k=Math.floor(l/6E4),q=Math.floor(l/36E5),n=Math.floor(l/864E5);l=Math.floor(l/31536E6);var B="ago";return l&&l>0?"over a year ago":n&&n>0?n+" day"+(n>1?"s ":" ")+B:q&&q>0?"about "+q+" hour"+(q>
1?"s ":" ")+B:k&&k>0?k+" minute"+(k>1?"s ":" ")+B:"just now"};o.util.scrollToTop=function(c,f){o.util.scrollTo({dur:c,interval:f})};o.util.scrollToEl=function(c){c=c||{};if(typeof c==="string"||"nodeType"in c||c instanceof $)c={el:c};if(!c.el)return $.Deferred().reject();var f=$(c.el),l=0;if(!f.length)return $.Deferred().reject();if(typeof c.offset==="number")l=c.offset;if(c.bottom){l=document.body.scrollHeight;var k=document.body.clientHeight;f=l-(f.offset().top+f.outerHeight(true));c.end=l-f-k}else c.end=
f.offset().top+l;return o.util.scrollTo(c)};o.util.scrollTo=function(c){function f(ga){ga=ga||w();var ra=ga-ja,ua=true;if(ra){ja=ga;ga=ra/l*B;I-=ga;if(ga>=0&&I<=k||ga<=0&&I>=k){I=k;ua=false}if(q===document.body)window.scrollTo(0,I);else q.scrollTop=I}if(ua)window.reqAnimFrame(f);else{n&&typeof n==="function"&&n.call(window);Z.resolve(window)}}c=c||{};var l=c.dur||150,k=c.end||0,q=c.scroll_el||document.body,n=c.onfinish,B=c.dist,I,O,Z=$.Deferred();if(q.scrollTop){I=q.scrollTop;c=q.clientHeight;O=q.scrollHeight}else{I=
document.documentElement.scrollTop;c=document.documentElement.clientHeight;O=document.documentElement.scrollHeight}if(B)k=I+B;k=k>=I?Math.min(k,O-c):Math.max(k,0);B=I-k;var ja=w();window.reqAnimFrame(f);return Z.promise()};o.util.displayDomain=function(c,f){if(c&&c.domain)return c.domain;return!f&&o.data.domain_preference||o.data.default_short_domain||"bit.ly"};o.util.formatDate=function(c,f){f||(f=new Date);if(typeof f==="number")f=new Date(f);var l={Month:function(q,n){var B=$._("January February March April May June July August September October November December").split(" ")[q];
if(n&&typeof n==="number")return B.substring(0,n);return B},Day:function(q,n){var B=$._("Sunday Monday Tuesday Wednesday Thursday Friday Saturday").split(" ")[q];if(n&&typeof n==="number")return B.substring(0,n);return B},Hours:function(q){if(q>12)q-=12;else q||(q=12);return q},Date:function(q,n){if(q<10&&!n)q="0"+q;return q},ampm:function(q){if(q<12)return"AM";return"PM"},Minutes:function(q){if(q<10)return"0"+q;return q},zpad:function(q){if(q<10)return"0"+q;return q},zpad1:function(q){return l.zpad(q+
1)}},k={d:{m:"Date"},D:{m:"Date"},m:{m:"Month",d:"zpad1"},b:{m:"Month"},B:{m:"Month"},I:{m:"Hours"},p:{m:"Hours",d:"ampm"},M:{m:"Minutes"},y:{m:"FullYear"},Y:{m:"FullYear"}};return c.replace(/\%(.){1}/g,function(q,n){var B;if(n in k){var I=k[n];if("m"in I&&"get"+I.m in f){B=f["get"+I.m]();I=I.d||I.m;if(I in l){var O=null;if(n==n.toLowerCase())O=3;B=l[I](B,O)}}}return B})};o.util.isUrl=function(c){return c.search(RegExp("^("+r+u+t+")","i"))===-1?false:true};o.util.validateUrl=function(c){matches=c.match(j);
if(!matches)return null;return matches};var r="(?:(https?|ftp|itms)://)?",u="(?:(?:[^\\s\\!\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\\\[\\]\\^\\_`\\{\\|\\}\\~]+\\.)+(?:aero|arpa|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|local|example|invalid|test|\u0645\u0635\u0631|\u0440\u0444|\u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629|\u0627\u0645\u0627\u0631\u0627\u062a|xn--wgbh1c|xn--p1ai|xn--mgberp4a5d4ar|xn--mgbaam7a8h|\u4e2d\u56fd|\u4e2d\u570b|\u9999\u6e2f|\u0627\u0644\u0627\u0631\u062f\u0646|\u0641\u0644\u0633\u0637\u064a\u0646|\u0642\u0637\u0631|\u0dbd\u0d82\u0d9a\u0dcf|\u0b87\u0bb2\u0b99\u0bcd\u0b95\u0bc8|\u53f0\u7063|\u53f0\u6e7e|\u0e44\u0e17\u0e22|\u062a\u0648\u0646\u0633|xn--fiqs8S|xn--fiqz9S|xn--j6w193g|xn--mgbayh7gpa|xn--ygbi2ammx|xn--wgbl6a|xn--fzc2c9e2c|xn--xkc2al3hye2a|xn--kpry57d|xn--kprw13d|xn--o3cw4h|xn--pgbs0dh|\u0625\u062e\u062a\u0628\u0627\u0631|\u0622\u0632\u0645\u0627\u06cc\u0634\u06cc|\u6d4b\u8bd5|\u6e2c\u8a66|\u0438\u0441\u043f\u044b\u0442\u0430\u043d\u0438\u0435|\u092a\u0930\u0940\u0915\u094d\u0937\u093e|\u03b4\u03bf\u03ba\u03b9\u03bc\u03ae|\ud14c\uc2a4\ud2b8|\u05d8\u05e2\u05e1\u05d8|\u30c6\u30b9\u30c8|\u0baa\u0bb0\u0bbf\u0b9f\u0bcd\u0b9a\u0bc8|xn--kgbechtv|xn--hgbk6aj7f53bba|xn--0zwm56d|xn--g6w251d|xn--80akhbyknj4f|xn--11b5bs3a9aj6g|xn--jxalpdlp|xn--9t4b11yi5a|xn--deba0ad|xn--zckzah|xn--hlcj6aya9esc7a|[a-z]{2})(?::[0-9]+)?|(?:[0-9]{1,3}\\.){3}(?:[0-9]{1,3}))",
t="/?(?:\\S*[^\\s\\.,!\\)\\?])?",j=RegExp("("+r+u+t+")","gi");o.util.fullUriRegex=j;if(!window.reqAnimFrame)window.reqAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(c){return window.setTimeout(function(){c((new Date).getTime())},1E3/60)}}();o.util.checkPreviousSave=function(c,f){c.match(/^https?\:\/\//)||(c="http://"+c);o.ajax.POST({url:"/data/beta/user/link_lookup",
data:{url:c},success:function(l){if(l&&l.data&&l.data.link_lookup&&l.data.link_lookup.length&&l.data.link_lookup[0].link){if(f&&f.found)f.found.call(f.scope||window,l.data.link_lookup[0])}else if(f&&f.not_found)f.not_found.call(f.scope||window)},error:function(){if(f&&f.not_found)f.not_found.call(f.scope||window)},scope:f.scope||this})};o.util.extractEmbedlySrc=function(c){if(c.indexOf("i.embed.ly")>-1)return o.util.queryStringToHash(c).url||c;return c};o.util.rebuildEmbedlySrc=function(c,f,l){if(l&&
c===l)return c;if(c.indexOf("embed.ly")<0){c=$.extend({key:o.data.embedly_key,url:c},f);return o.util.hashToQueryString(c,"https://i.embed.ly")}return c};o.util.isFeatureFlagEnabled=function(){var c=Array.prototype.slice.call(arguments);if(!o.data.enabled_feature_flags)return false;for(var f=c.length,l;f--;){l=c[f];if(o.data.enabled_feature_flags.hasOwnProperty(l))return true}return false};o.util.setCaretPosition=function(c,f){c=$(c);if(c.length){c.focus();var l=c[0];if(f===-1)f=c.val().length;if(l.setSelectionRange)try{l.setSelectionRange(f,
f)}catch(k){}else if(l.createTextRange){l=l.createTextRange();l.collapse(true);l.moveEnd("character",f);l.moveStart("character",f);l.select()}}};o.util.doGetCaretPosition=function(c){c=$(c);if(c.length){c=c[0];var f=0;if(document.selection){c.focus();f=document.selection.createRange();f.moveStart("character",-c.value.length);f=f.text.length}else if(c.selectionStart||c.selectionStart=="0")f=c.selectionStart;return f}};o.util.setSelected=function(c,f,l){if(c.setSelectionRange)try{c.setSelectionRange(f,
l)}catch(k){}else if(c.createTextRange){c=c.createTextRange();c.collapse(true);c.moveEnd("character",l);c.moveStart("character",f);c.select()}};o.util.selectText=function(c){var f,l;l=window.getSelection&&window.getSelection();f=document.createRange&&document.createRange()||document.body.createTextRange&&document.body.createTextRange();if(f.moveToElementText&&f.select){f.moveToElementText(c);return f.select()}else if(f.selectNodeContents&&l.removeAllRanges&&l.addRange){f.selectNodeContents(c);l.removeAllRanges();
return l.addRange(f)}else if(l.getBaseAndExtent)return l.setBaseAndExtent(c,0,c,1)};o.util.clearSelectedText=function(){if(window.getSelection)if(window.getSelection().empty)window.getSelection().empty();else window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges();else document.selection&&document.selection.empty()};o.util.collectionSortHandler=function(c){if(!this.sortByField||!this.sortByAdapter)throw Error("SORT INTERFACE NOT SUPPORTED");var f=c.split("_");c=f[0];f=f.length===
1?"desc":f[1];var l={};l.descending=f.toLowerCase()==="asc"?false:true;c=c.toLowerCase();switch(c){case "time":this.sortByField("ts",l);App.Dispatch.trigger("UI.BitmarkList:sort",c+"_"+f);break;case "clicks":this.sortByAdapter(SortAdapters.clicks,l);App.Dispatch.trigger("UI.BitmarkList:sort",c+"_"+f);break;case "title":this.sortByField("title",l);App.Dispatch.trigger("UI.BitmarkList:sort",c+"_"+f)}};window.BITLY=o})(window);(function(){if(window.BITLY==null)window.BITLY={};(function(x){x.post=function(w,o,r){if(o==null)o={};if(r==null)r={};return x.request.call(x.request,w,o,_.defaults({type:"POST"},r))};x.get=function(w,o,r){if(o==null)o={};if(r==null)r={};return x.request.call(x.request,w,o,_.defaults({type:"GET"},r))};return x.request=function(w,o,r){var u,t,j,c,f;j=$.Deferred();u=(f=r.context)!=null?f:this;c=r.success;t=r.error;delete r.success;delete r.error;w=$.ajax(w,_.extend({beforeSend:function(l){$.cookie&&
l.setRequestHeader("X-XSRFToken",$.cookie.get("_xsrf"));if(window.Bitmarklet)if(window.Bitmarklet.is_bitly_for_feelings)return l.setRequestHeader("X-Bitly-Client","bitly_for_feelings");else if(!window.Bitmarklet.is_chrome)return l.setRequestHeader("X-Bitly-Client","bitmarklet")},data:o},r));w.fail(function(){t&&t.apply(u,arguments);return j.reject.apply(u,arguments)});w.done(function(l,k,q){if(r.dataType==="jsonp"||l.status_code===200){c&&c.apply(u,arguments);return j.resolve.apply(u,arguments)}else{t&&
t.call(u,l,"error",q);return j.reject.call(u,l,"error",q)}});return j.promise()}})(BITLY)}).call(this);(function(x){x.nyan={}})(window);(function(x){function w(j,c){j=j||{};if(typeof j==="function"&&typeof c==="undefined"){c=j;j={}}j.which=j.which||"localStorage";this.opt={key_base:"bitly",separator:".",login:"anon"};for(var f in j)this.opt[f]=j[f];this.__setModule(j.which,c)}function o(j){j=j||{};if(typeof j==="function")j={success:j};j.success=j.success||function(){};j.error=j.error||function(c){console.log(c)};return j}w.prototype={constructor:w.prototype.constructor,init:function(j){this._support(j);return this},setUser:function(j){if(!this.support)return null;
this.opt.login=j||"anon";return this},key:function(j){return j},__setModule:function(j,c){var f=r;switch(j.toLowerCase()){case "sessionstorage":this.opt.which="sessionStorage";break;case "file":this.opt.which="fileSystem";f=t;break;default:this.opt.which="localStorage"}this.store_type=this.opt.which;for(method in f)this[method]=f[method];this.init(c)}};var r={_support:function(j){this.support=false;try{this.support=!!(this.opt.which in window&&window[this.opt.which]!==null&&window.JSON)}catch(c){}this.support&&
j&&j.call(window);return this.enabled=this.support},requestPermission:function(){return true},get:function(j,c){if(!this.support)return null;j=this.key(j,true);c=o(c);val=window[this.opt.which].getItem(j);try{val=JSON.parse(val);c&&c.success&&c.success.call(window,val)}catch(f){c&&c.error&&c.error.call(window,f)}return val},set:function(j,c,f){if(!this.support)return null;j=this.key(j,true);f=o(f);if(typeof c!="string")c=JSON.stringify(c);try{window[this.opt.which].setItem(j,c);f&&f.success&&f.success.call(window,
c)}catch(l){f&&f.error&&f.error.call(window,l)}return this},remove:function(j,c){if(!this.support)return null;j=this.key(j,true);var f;c=o(c);try{f=window[this.opt.which].removeItem(j);c&&c.success&&c.success.call(window,f)}catch(l){c&&c.error&&c.error.call(window,l)}return f},clear:function(j){if(!this.support)return null;var c;j=o(j);try{c=window[this.opt.which].clear&&window[this.opt.which].clear();j&&j.success&&j.success.call(window,c)}catch(f){j&&j.error&&j.error.call(window,f)}return c},listKeys:function(j){if(!this.support)return[];
j=o(j);try{keys=[];for(var c in window[this.opt.which])keys.push(c);j&&j.success&&j.success.call(window,keys)}catch(f){j&&j.error&&j.error.call(window,f)}return keys}},u=0,t={_support:function(j){window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem||window.MozRequestFileSystem||window.MSRequestFileSystem;window.StorageInfo=window.StorageInfo||window.webkitStorageInfo||window.MozStorageInfo||window.MSStorageInfo;window.Blob=window.Blob||window.WebKitBlob||window.MozBlob||
window.MSBlob;this.support=!!(window.requestFileSystem&&window.StorageInfo&&window.Blob&&window.JSON);this.enabled=false;this.checkQuota();this.support&&j&&j.call(window);return this.support},checkQuota:function(j,c){var f=this;c=c||function(){};this.support?window.StorageInfo.queryUsageAndQuota(window.PERSISTENT,j||function(l,k){f.enabled=!!k},c):c.call(window,{})},checkQuotaAndRequest:function(j,c){j=o(j);this.support||j.error.call(window);var f=this;this.support&&this.checkQuota(function(l,k){u=
k;if(c||k-l<1048576){f.requestPermission(k+10485760,function(q){j.success&&j.success.call(window,q);notify.hide(0)});setTimeout(function(){notify("My, you have a lot of bitmarks. Please click ok to increase your storage capacity.",{dur:-1,noclose:true})},250)}else j.success&&j.success.call(window,val)},j.error)},requestPermission:function(j,c,f){if(typeof j==="function"&&typeof f==="undefined"){f=c;c=j;j=10485760}window.StorageInfo.requestQuota(window.PERSISTENT,j,c||function(){this.support=true},
f||function(l){this.support=false;console.log("Error requesting storage: ",l.message)})},get:function(j,c){if(!this.support)return null;j=this.key(j,true);c=o(c);window.requestFileSystem(window.PERSISTENT,u,function(f){f.root.getFile(j+".txt",{},function(l){l.file(function(k){var q=new FileReader;q.onloadend=function(){var n={};try{n=JSON.parse(this.result)}catch(B){}c.success&&c.success.call(window,n)};q.readAsText(k)},c.error)},c.error)},c.error)},set:function(j,c,f){if(!this.support)return null;
j=this.key(j,true);f=o(f);window.requestFileSystem(window.PERSISTENT,u,function(l){l.root.getFile(j+".txt",{create:true},function(k){k.createWriter(function(q){q.truncate(0);var n=false;q.onwriteend=function(){if(n)f.success&&f.success.call(window);else{n=true;var B=typeof c!="string"?JSON.stringify(c):c;B=new Blob([B],{type:"application/json"});q.write(B)}};q.onerror=function(B){f.error&&f.error.call(window,B)}},f.error)},f.error)},f.error);return this},remove:function(j,c){if(!this.support)return null;
j=this.key(j,true);c=o(c);window.requestFileSystem(window.PERSISTENT,u,function(f){f.root.getFile(j+".txt",{create:false},function(l){l.remove(function(){c.success&&c.success.call(window)},c.error)},c.error)},c.error)},listKeys:function(j){if(!this.support)return null;j=o(j);window.requestFileSystem(window.PERSISTENT,u,function(c){var f=c.root.createReader(),l=[],k=function(){f.readEntries(function(q){if(q.length){l=l.concat(Array.prototype.slice.call(q||[],0));k()}else j.success&&j.success.call(window,
l.sort())},j.error)};k()},j.error)},clear:function(){var j=this;this.listKeys(function(c){c.map(function(f){return f.name.replace(/\.txt$/,"")}).forEach(function(f){j.remove(f)})})}};x.LocalStore=new w;x.FileStore=new w({which:"file"});x.SessionStore=new w({which:"sessionStorage"});x.Store=x.LocalStore;if(x&&x.nyanUser&&x.nyanUser.data&&x.nyanUser.data.user){x.LocalStore.setUser(x.nyanUser.data.user);x.SessionStore.setUser(x.nyanUser.data.user);x.FileStore.setUser(x.nyanUser.data.user)}})(nyan);(function(x){x=x||"newT";var w=function(f){this.init(f||{})},o=/\<[^\>]+\>|\&[^ ]+;/,r={},u=Array.prototype.slice;w.prototype={constructor:w.prototype.constructor,version:"1.1.3",init:function(f){this.options={if_attr:"when",local_safe:"_safe",safe_mode:true};for(var l in f)this.options[l]=f[l];this.templates={};this.__createMethods();return this},save:function(f,l){var k=f.split("."),q="global";f=k[0];if(k.length>1)q=k[1];this.templates.hasOwnProperty(q)||(this.templates[q]={});this.templates[q][f]=
l;return this},render:function(f,l,k){var q="global",n,B;if(typeof f!=="function"){B=f.split(".");f=B[0];if(B.length>1)q=B[1];f=this.templates[q][f]}k=k||{};k.scope=k.scope||null;k.data=l;if(k.preData)k.data=k.preData.call(k.scope,k.data);k.pre&&k.pre.call(k.scope,k.data);this.cur_options=k;l=f(k.data,k._i,k._idx);if(typeof l==="object"&&l.constructor===[].constructor){f=l;l=document.createDocumentFragment();for(n in f)l.appendChild(f[n])}k.el&&k.el.appendChild(l);k.post&&k.post.call(k.scope,l,k.data);
this.cur_options=null;delete k;return l},renderToString:function(f,l,k){k=k||{};delete k.el;var q=document.createElement("div");q.appendChild(this.render(f,l,k));return q.innerHTML},eachRender:function(f,l,k){k=k||{};if(!this.checkRender(k))return"";var q=document.createDocumentFragment(),n=0,B;k.el=q;for(B in f)if(f.hasOwnProperty(B)){k._i=B;k._idx=n++;this.render(l,f[B],k)}delete k;return q},each:function(f,l,k){k=k||{};if(!this.checkRender(k))return"";this.cur_options=k;k=document.createDocumentFragment();
var q,n=0,B;for(B in f)if(f.hasOwnProperty(B)){(q=l(f[B],B,n))&&k.appendChild(q);n+=1}this.cur_options=null;return k},checkRender:function(f){if(this.options.if_attr in f&&!f[this.options.if_attr])return false;return true},__createMethods:function(){var f="a abbr address area article aside audio b base bdi bdo blockquote body br button canvas caption cite code col colgroup command datalist dd del details device dfn div dl dt em embed fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hgroup hr html i iframe img input ins kbd keygen label legend li link map mark menu meta meter nav noscript object ol optgroup option output p param pre progress q rp rt ruby s samp script section select small source span strong style sub summary sup table tbody td textarea tfoot th thead time title tr track ul var video wbr".split(" ");
f.push("frag");this.addEls(f,true);return this},_createEl:function(f){if(f in r&&r[f].cloneNode)return r[f].cloneNode(false);r[f]=document.createElement(f);return r[f].cloneNode(false)},element:function(f,l,k){var q=u.call(arguments,1),n=f==="frag"?document.createDocumentFragment():this._createEl(f);if(q.length)k=q;else return n;if(l=q[0]&&q[0].toString()==="[object Object]"?k.shift():null){var B;if(!this.checkRender(l))return"";delete l[this.options.if_attr];if(this.options.local_safe in l){B=!!l[this.options.local_safe];
delete l[this.options.local_safe]}for(attr in l)switch(attr.toLowerCase()){case "clss":case "classname":n.className=l[attr].join?l[attr].join(" "):l[attr];break;case "style":n.cssText=n.style.cssText=l[attr];break;default:if(attr.charAt(0)==="_"){q=attr.substring(1);l[attr]&&n.setAttribute(q,q)}else n.setAttribute(attr,l[attr])}}var I;q=0;for(var O=k.length;q<O;q++){I=k[q];switch(typeof I){case "string":this.addText(n,I,B);break;case "number":n.appendChild(document.createTextNode(I));break;case "function":I=
I();typeof I=="string"?this.addText(n,I,B):n.appendChild(I);break;case "undefined":break;default:try{n.appendChild(I)}catch(Z){n.appendChild(document.createTextNode(I))}}}return n},addText:function(f,l,k){if(!this.isSafeMode(k)&&l.match(o))f.innerHTML=l;else f.appendChild(document.createTextNode(l));if(f.type&&f.type.toLowerCase()==="textarea")f.value=l;return this},setOption:function(f,l){if(typeof f==="object")for(var k in f)this.options[k]=f[k];else this.options[f]=l;return this},safeMode:function(f){if(typeof f==
"undefined")f=true;this.options.safe_mode=!!f;return this},isSafeMode:function(f){if(typeof f!="undefined")return!!f;if(this.cur_options&&"safe_mode"in this.cur_options)return!!this.cur_options.safe_mode;return!!this.options.safe_mode},clone:function(f){return new w(f)},extend:function(f,l,k,q){if(q){if(!this.hasOwnProperty(f)||k){this[f]=l;return true}}else if(!(f in w.prototype)||k){w.prototype[f]=l;return true}return false},addEls:function(f,l,k){if(typeof f==="string")f=f.split(" ");for(var q=
this,n,B=w.prototype.element,I=0,O=f.length;I<O;I++)(function(Z){q.extend(Z,function(){n=u.call(arguments);n.unshift(Z);return B.apply(q,n)},l,k)})(f[I]);delete q;return this},noConflict:function(f){f=f||"__newT";try{delete window[c]}catch(l){window[c]=undefined}window[x]=t;window[f]=j;c=f;return this}};if(typeof module!=="undefined"&&module.exports!=null)module.exports=new w;else{var t=window[x],j,c=x;window[x]=j=new w}})();(function(x){function w(n,B,I){var O=0;return function(Z){I._errors.push({error:Z,msg:"ajax.error while syncing"});console.log("Error:",arguments);O+=1;if(O>3)n.stop();else{B.resolve(Z);var ja=["queue_error"];c.apply(ja,arguments);this.trigger.apply(this,ja)}}}function o(n,B){return function(I,O,Z){n.resolve(I,O,Z);B.chkts=(new Date).getTime();var ja=["complete"];c.apply(ja,arguments);B.trigger.apply(B,ja)}}function r(n,B){return B.ts-n.ts}function u(n,B){return B.modified_at-n.modified_at}function t(n){n=
n||{};if(typeof n==="function")n={success:n,error:function(B){console.log(B.message)}};else{n.success=n.success||function(){};n.error=n.error||function(B){console.log(B)}}return n}var j=function(n){n=n||{};this.listen_evts=[];this._call_queues=[];this._errors=[];this.mode=n.mode||"WRITE_MODE";this.keyPrefix=function(){return n.key_prefix||"_bItv07_"};this.storeKeyname=function(B){return this.keyPrefix()+this.userKey(B)};this.allow_storage_write="allow_write"in n?n.allow_write:true;return this},c=
Array.prototype.push,f=Array.prototype.splice,l=Array.prototype.sort,k=Array.prototype.slice,q=Array.prototype.unshift;j.prototype={constructor:j,length:0,splice:[].splice,slice:[].slice,map:Array.prototype.map,chkts:null,rawStringLength:0,allLoaded:false,saved:null,activeUser:null,historyUrl:"/data/beta/history/",quota_exceeded:0,upsell_canceled:0,fields:["title","url","note","user_hash","keyword","ts_string","share_search","link"],find:function(n,B){return this.scanner.find(n,this,B||this.fields)},
keyScan:function(n,B){var I=[].constructor,O=this.getAll(),Z=[],ja=null,ga=O.length,ra=B&&B.constructor!==I&&B||null;for(I=B&&B.constructor==I&&B||null;ga--;){ja=typeof O[ga][n]==="function"?O[ga][n]():O[ga][n];if(!I&&ra&&B&&ja)Z.unshift(O[ga]);else if(!I&&O[ga]&&B==ja)Z.unshift(O[ga]);else I&&O[ga]&&I.indexOf(ja)>-1&&Z.unshift(O[ga])}return Z},info:function(){return{rawStringLength:this.rawStringLength||0,length:this.length||0,url:this.historyUrl}},listen:function(n,B){this.listen_evts.push({name:n,
method:B});return B},trigger:function(n){for(var B,I=Array.prototype.slice.call(arguments,1),O=0,Z=this.listen_evts.length;O<Z;O++)(B=this.listen_evts[O])&&B.name===n&&B.method&&B.method.apply(this,I);return this},unlisten:function(n,B){for(var I=[],O,Z=0,ja=this.listen_evts.length;Z<ja;Z++){O=this.listen_evts[Z];O.name===n&&O.method===B||I.push(this.listen_evts[Z])}return this.listen_evts=I},unlistenAll:function(){return this.listen_evts=[]},__getLatestModified:function(){return Math.max.apply(window,
this.map(function(n){return n.modified_at||0}))},__getLatestCreated:function(){return Math.max.apply(window,this.map(function(n){return n.ts||0}))},update:function(n,B,I){for(var O=false,Z=0,ja,ga=0,ra=this.length;ga<ra;ga++)if(n===this[ga].user_hash||n===this[ga].link){O=true;Z+=1;ja=this[ga];for(var ua in B){if(B[ua]===false)B[ua]=null;if(ua&&B.hasOwnProperty(ua))ja[ua]=B[ua]}}Z>1&&console.log("Your history contains duplicate items by user short url",n);O&&this.storeCompleteList(false,I);return ja},
get:function(n,B){for(var I,O=0,Z=this.length;O<Z;O++)if((I=this[O])&&B===I[n])return I;return null},getByLink:function(n){return this.get("link",n)},getByLinks:function(n){var B=[],I;if(!n)return B;for(var O=this.length;O--;){I=this[O];n.indexOf(I.link)>-1&&B.unshift(I)}return B},removeByLink:function(n){return this.remove("link",n)},remove:function(n,B){for(var I=null,O=this.length;O--;)(I=this[O])&&B===I[n]&&f.call(this,O,1);return this},addList:function(n,B){for(var I=0,O=n.length;I<O;I++)this.add(n[I],
B);return this},dedupe:function(){var n=k.call(this,0),B=[],I=0,O=null;n.sort(u);for(I=n.length;I--;);for(O in n)O&&n.hasOwnProperty(O)&&n[O]&&B.push(n[O]);f.call(this,0,this.length);c.apply(this,B);this.tsSort();return this},add:function(n,B){B||this._dedupe_single_entry(n);return this._add(n)},_dedupe_single_entry:function(n){n=n||{};for(var B=this.length,I;B--;)(I=this[B])&&I.link===n.link&&f.call(this,B,1)},_add:function(n){if((n=n||{})&&n.link&&!n.archived){q.call(this,this.dataModel(n));return true}return false},
dataModel:function(n){return new this.CacheModel(n)},tsSort:function(){l.call(this,r)},getErrors:function(){return this._errors},create:function(n){return new j(n)},getAll:function(){return this.slice(0)},clearAll:function(n){n=t(n);try{nyan.Store.remove(this.storeKeyname(),n);this.rawStringLength=0}catch(B){this._errors.push({error:B,msg:"localStorage.removeItem failed"});console.log("Error during clear",B)}},allowStorageWrites:function(n){return this.allow_storage_write=!!n},isWriteable:function(){return!!(nyan.Store.support&&
nyan.Store.enabled&&this.allow_storage_write)},reset:function(){f.call(this,0,this.length);return this},forceReset:function(){this.clearAll();this.allLoaded=false;this.upsell_canceled=this.quota_exceeded=0;this.saved=this.chkts=null;this.rawStringLength=0;this.reset();return this},userKey:function(n){return(n=n||this.activeUser)&&n.replace(/\W+/gmi,"")},getCacheModel:function(){return this.CacheModel},getRawCache:function(n,B){if(typeof B==="undefined"&&typeof n!="string"){B=n;n=null}B=t(B);var I=
n||this.storeKeyname();nyan.Store.get(I,B)},getCache:function(n,B){if(!n)return false;B=t(B);var I=B.success,O=B.error,Z=this;B.success=function(ga){Z.cache_loaded=true;if(ga&&ga!==""){this.rawStringLength=JSON.stringify(ga).length;var ra=ga;if(n!==ra.user||ra.lst<=0)ra=false;else Z.initialDataLoad(ra)}I.call(window,ra)};B.error=function(ga){O.call(window,ga);I.call(window,null)};try{nyan.Store.get(this.storeKeyname(n),B)}catch(ja){this._errors.push({error:ja,msg:"JSON parse failed"})}return false},
initialDataLoad:function(n){f.call(this,0,this.length);this.quota_exceeded=n.qe||0;this.upsell_canceled=n.uc||0;this.allLoaded=n.all||false;this.saved=n.saved||(new Date).getTime();this.addList(n.lst,true);this.dedupe();this.chkts=n.chkts},storeCompleteList:function(n,B){if(this.mode!=="WRITE_MODE"){B=t(B);B.success&&B.success.call(this);return this}this.saved=(new Date).getTime();this.allLoaded=n;this.writeCache({all:n},B);return this},writeCache:function(n,B){if(this.mode!=="WRITE_MODE")return this;
this.tsSort();var I=(new Date).getTime();this.chkts=this.__getLatestModified()+1;I={qe:this.quota_exceeded,uc:this.upsell_canceled,lst:Array.prototype.slice.call(this,0),user:this.activeUser,saved:I,all:this.allLoaded,chkts:this.chkts||I};$.extend(I,n||{});return this._writeJSONBlob(this.storeKeyname(),I,B)},reSaveWithUpdate:function(n){if(n.hasOwnProperty("quota_exceeded"))this.quota_exceeded=n.quota_exceeded;if(n.hasOwnProperty("upsell_canceled"))this.upsell_canceled=n.upsell_canceled;if(n.hasOwnProperty("allLoaded"))this.allLoaded=
n.allLoaded;var B=this;this.getRawCache({success:function(I){I.qe=B.quota_exceeded;I.uc=B.upsell_canceled;I.all=B.allLoaded;nyan.Store.set(B.storeKeyname(),I)}})},_writeJSONBlob:function(n,B,I){if(!this.allow_storage_write)return this;I=t(I);var O=this,Z=I.error;I.error=function(ga){if(nyan.Store.store_type==="localStorage"&&!O.quota_exceeded){O.reSaveWithUpdate({quota_exceeded:1,allLoaded:true});O.pull_queue&&O.pull_queue.pause();window.fastSearch&&fastSearch.bubbler&&fastSearch.bubbler.stop(400);
O.upsell_canceled||O.promptForFileSystem(function(){this.allLoaded=false;this.storeCompleteList(!!this.allLoaded);this.pull_queue&&this.pull_queue.play();window.fastSearch&&fastSearch.bubbler&&fastSearch.bubbler.start()})}Z.call(window,ga)};try{this.rawStringLength=JSON.stringify(B).length||0;nyan.Store.set(n,B,I)}catch(ja){this._errors.push({error:ja,msg:"localStorage.setItem failed"});console.log("failed to save",ja)}return this},promptForFileSystem:function(n){var B=this;nyan.FileStore.checkQuotaAndRequest({success:function(I){if(I){nyan.Store=
nyan.FileStore;nyan.LocalStore.clear();B.quota_exceeded=0;B.upsell_canceled=0;n&&n.call(B);window.bundleStore&&window.bundleStore.syncAll()}else B.reSaveWithUpdate({quota_exceeded:1,allLoaded:true,upsell_canceled:1})},error:function(I){B._errors.push({error:I,msg:"fileSystem save failed"});console.log("failed to save",I)}})},backwardSync:function(n,B){var I=$.Deferred();n=n||{};var O=this,Z=0,ja=(new Date).getTime();ja=$.extend({created_before:Math.floor(ja/1E3),"private":"both"},n.params);ja=this.fetchAllPages(n.limit||
150,ja);var ga=function(){Z+=1;B&&B.apply(O,arguments)};this.listen("update",ga);ja.done(function(ra){O.storeCompleteList(ra&&ra.data&&true,function(){I.resolve(ra,Z);O.unlisten("update",ga);App.Dispatch.trigger("App.Bitmarks:sync")})});return I.promise()},quietSync:function(){return this.sync()},sync:function(n){var B=this.chkts||this[0]&&this[0].ts;n=n||{};var I=this;n=$.extend(true,{},{params:{modified_after:B,"private":"both",archived:"both"},limit:10,start_page:1,per_page:100},n);if(n.params.modified_after||
n.params.created_before){n=this.pullAndMerge(n);n.done(function(){I.storeCompleteList(false)});return n}},pullAndMerge:function(n){var B=$.Deferred();n=n||{};var I=new BITLY.BatchRequest({url:this.historyUrl,scope:this,data:n.params||{},partialComplete:this.remoteUpdateEvent,responseBatchField:"link_history",error:n.error||w(I,B,this),success:n.complete||o(B,this),start_page:n.start_page||1,per_page:n.per_page||30,limit:n.limit||5});this._call_queues.push(I);I.play();this.pull_queue=I;return B.promise()},
remoteUpdateEvent:function(n,B,I,O){this.addList(n&&n.data&&n.data.link_history||[]);this.tsSort();O>0&&O%7===0&&this.storeCompleteList(false);var Z=["update"];c.apply(Z,arguments);this.trigger.apply(this,Z)},fetchAllPages:function(n,B){var I=I||{};return this.pullAndMerge($.extend(true,{},{params:B,per_page:100,limit:n||10,start_page:1},I))},_stopRunningQueues:function(){for(var n=this._call_queues,B=n.length;B--;)n[B].stop();this._call_queues=[]},NOT_AT_LIMIT:0,QUOTA_EXCEEDED:1,AT_SERVER_MAX:2,
server_max:1E4,isAtLimit:function(){if(this.quota_exceeded)return this.QUOTA_EXCEEDED;if(this.length>=this.server_max-10)return this.AT_SERVER_MAX;return this.NOT_AT_LIMIT}};j.prototype.batchUpdate=function(n,B){for(var I=n.map(function(ga){return ga.link_edit.link}),O=false,Z=0,ja=this.length;Z<ja;Z++)if(_(I).include(this[Z].link)){O=true;_.extend(this[Z],B)}O&&this.storeCompleteList(false)};x.bitlyStore=new j})(window);(function(x){function w(f,l){for(var k=l||[],q=k.length,n;q--;){n=k[q];this[n]=f&&n in f&&f[n]||null}return this}function o(f,l,k){for(var q=f.length,n=null;q--;)if((n=f[q])&&n.key&&n.method)this[n.key]=k?n.method.call(this,l):this[n.key]=n.method;return this}function r(f,l){return l.ts-f.ts}function u(f){f=f||{};return f.ts||f.user_ts||this.ts||this.user_ts||Math.round((new Date).getTime()/1E3)}function t(f){f=f&&f.shares||this.shares||[];for(var l=[],k=[],q=f.length;q--;){l=f[q]&&f[q].text&&f[q].text.replace(this.link,
"").trim();~k.indexOf(l)||k.unshift(l)}return k.length>0&&k.join("\r\n")||null}function j(f,l){w.call(this,f,l||this.__directReadKeys||[]);o.call(this,this.__derivedKeys,f,true);return this}var c=function(f,l){w.call(this,f,l||this.__directReadKeys||[]);o.call(this,this.__derivedKeys,f,true);o.call(this,this.__derivedFuncs,f,false);return this};c.prototype={constructor:c,toJSON:function(){for(var f=this.__saveJSONKeys,l={},k=0,q=f.length;k<q;k++)l[f[k]]=this[f[k]];return l},toCSV:function(){for(var f=
this.__dataStoreKeys,l=[],k=0,q=f.length;k<q;k++)l.push(JSON.stringify(this[f[k]]));return l.join(",")},__derivedFuncs:[{key:"networks",method:function(f,l){l=l||"share_type";for(var k=(f=f||this.shares||null)&&f.length>0?{}:null,q=null,n=f&&f.length||0;n--;)if(q=f[n]&&f[n][l]||null)k[q]=q;return k}},{key:"clicks",method:function(){return fastSearch.bitlyClicks.getByLink(this.link)}},{key:"addShare",method:function(f){f=f&&new j(f);for(var l=this.shares,k=f&&l&&l.length||0,q=false;k--;)if(f.remote_share_link===
l[k].remote_share_link){q=true;break}if(f&&!q){if(!this.shares)this.shares=[];this.shares.unshift(f)}return this.shares}},{key:"addShares",method:function(f){f=f||[];for(var l=0,k=f.length;l<k;l++)this.addShare(f[l]);this.share_search=t.call(this,null);return this.shares}},{key:"hasClicks",method:function(){var f=this.clicks()||{};return(f&&f.user_clicks||0)>0?true:null}},{key:"mostRecentShares",method:function(){return this.shares.sort(r)}},{key:"bundles",method:function(){if(!this.bundle_links||
!this.bundle_links.length||!window.bundleStore)return[];var f=window.bundleStore.get(this.bundle_links)||[],l=[];if(f.constructor===BundleCacheModel)f=[f];for(var k=0,q=f.length;k<q;k++)f[k]&&l.push(f[k]);return l}}],__derivedKeys:[{key:"user_hash",method:function(){return this.link&&this.link.split("/").pop()}},{key:"url",method:function(f){f=f||{};return f.long_url||f.url||this.long_url||this.url||null}},{key:"domain",method:function(){var f=this.keyword_link||this.link;return f&&f.split("/").reverse().slice(1,
2).pop()}},{key:"share_search",method:function(f){return t.call(this,f)}},{key:"shares",method:function(f){var l=(f=f&&f.shares&&f.shares.length>0&&f.shares||null)&&f.length||0;f&&f.sort(r);for(var k=null;l--;)(k=f[l]&&new j(f[l]))&&f.splice(l,1,k);return f}},{key:"ts_string",method:function(f){return u.call(this,f)?(new Date(this.ts*1E3)).toString():null}},{key:"ts",method:function(f){f=f||{};return u.call(this,f)}},{key:"keyword",method:function(){return this.keyword_link&&this.keyword_link.split("/").pop()}},
{key:"global_hash",method:function(){return this.aggregate_link&&this.aggregate_link.split("/").pop()}},{key:"bundle_links",method:function(){return this.bundle_links&&this.bundle_links.map(function(f){return f.split("/").slice(-2).join("/")})||[]}}],__directReadKeys:["modified_at","link","private","keyword_link","archived","note","url","title","aggregate_link","bundle_links"],__saveJSONKeys:["modified_at","link","private","keyword_link","shares","archived","note","url","title","ts","aggregate_link",
"bundle_links"]};j.prototype={constructor:j,toJSON:c.prototype.toJSON,toCSV:c.prototype.toCSV,__derivedKeys:[{key:"remote_share_link",method:function(f){return f.remote_share_link||f.link||this.remote_share_link||this.link||null}},{key:"share_type",method:function(f){return f.share_type||f.account_type||this.share_type||this.account_type||null}},{key:"ts",method:function(f){return f.ts||this.ts||Math.round((new Date).getTime()/1E3)}}],__directReadKeys:["text","account_login","account_name","email"],
__saveJSONKeys:["text","ts","account_login","remote_share_link","account_name","share_type","email"]};BundleCacheModel=function(f,l){w.call(this,f,l||this.__directReadKeys||[]);o.call(this,this.__derivedKeys,f,true);return this};BundleCacheModel.prototype={constructor:BundleCacheModel,toJSON:c.prototype.toJSON,toCSV:c.prototype.toCSV,__derivedKeys:[{key:"bundle_id",method:function(){return this.bundle_id||this.bundle_link&&this.bundle_link.split("/").slice(-2).join("/")||null}},{key:"bundle_link",
method:function(){return this.bundle_id&&[location.origin,"bundles",this.bundle_id].join("/")||this.bundle_link||null}},{key:"global_hash",method:function(){return this.aggregate_link&&this.aggregate_link.split("/").pop()}},{key:"user_hash",method:function(){return this.user_link&&this.user_link.split("/").pop()}}],__directReadKeys:["bundle_id","bundle_link","created_ts","aggregate_link","description","title","last_modified_ts","private","user_link","bundle_owner","collab"],__saveJSONKeys:["aggregate_link",
"bundle_id","bundle_link","created_ts","description","global_hash","last_modified_ts","private","title","user_hash","user_link","bundle_owner","collab"]};x.CacheModel=c;x.ShareCacheModel=j;x.BundleCacheModel=BundleCacheModel})(bitlyStore);(function(x){function w(c,f,l){var k=(c=l.cleanNegation.call(l,c))&&c[1],q=k&&k.length>0?RegExp(k.join("|"),"mi"):null;return{phrase:c&&c[0],has_negatives:k&&k.length>0,is_negative:function(n){var B=k&&f.length||0;if(B<=0)return false;for(;k&&B--;){if(word=n[f[B]])word=word.replace(j,"");if(word&&q&&q.test(word))return true}return false}}}var o=function(){u="_________B1TLYT0K3N_________";quotes_token=".{0,1}";t=RegExp(u,"gmi");this.buildExpressions();return this},r=null,u=null,t=null,j=/^https?:\/\//mi;
o.prototype={find:function(c,f,l){this.scanType=this.regex.isOr.test(c)?"scanOrSearch":"scanAndSearch";c=c&&c.trim()||"";if(!c||c.length===0){r=undefined;return f.slice(0)}c=this[this.scanType](c.replace(j,""),l);l=[];for(var k=0,q=f.length;k<q;k+=1)c(f[k])&&l.push(f[k]);return l},scanType:"scanAndSearch",scanOrSearch:function(c,f){c=this.prepareORQuery(c);var l=this.setRegexp(c);return function(k){for(var q=0,n=f.length;q<n;q++){if(word=k[f[q]])word=word.replace(j,"");if(word&&l.test(word))return true}return false}},
scanAndSearch:function(c,f){var l=null,k=null,q=null;c=this.prepareCombinedANDQuery(c);q=w(c,f,this);c=q.phrase;l=c.split("|");k=this.setRegexp(c);return function(n){var B=0,I,O={};if(q.has_negatives&&q.is_negative(n))return false;for(var Z=0,ja=f.length;Z<ja;Z++){if(I=n[f[Z]])I=I.replace(j,"");I&&I.replace(k,function(ga){ga=ga.toLowerCase();if(!O[ga]){O[ga]=true;B+=1}});if(B>=l.length)return true}return false}},patterns:{isOr:"(\\s+(OR|\\|)\\s+)|(\\b\\s*(OR|\\|)\\s*\\b)",isExactPhrase:'("([^"]+)")',
negative:"(?:\\s|^|\\|)((?:!|-)\\w+)",strayQuotes:"(\"|')+",orReplace:"(\\s+OR\\s+)|(\\s+\\|\\s+)",andReplace:"(\\s+AND\\s+)|(\\s+&\\s+)",spaceReplace:"\\s+"},regex:{isExactPhrase:null,isOr:null,strayQuotes:null,isNegation:null,orReplace:null,andReplace:null,spaceRepace:null,negationMatch:null},getRegexp:function(){return r||null},setRegexp:function(c,f){var l=null;if(r&&r.source===c)l=r;else{try{l=c&&RegExp(c,f||"gmi")}catch(k){l=RegExp(c.replace(/\W+/gmi,""),f||"mi")}r=l}return l},buildExpressions:function(){this.regex.isOr=
RegExp(this.patterns.isOr,"m");this.regex.isExactPhrase=RegExp(this.patterns.isExactPhrase,"mi");this.regex.isNegation=RegExp(this.patterns.negative,"m");this.regex.negationMatch=RegExp(this.patterns.negative,"gm");this.regex.orReplace=RegExp(this.patterns.orReplace,"gm");this.regex.andReplace=RegExp(this.patterns.andReplace,"gmi");this.regex.spaceReplace=RegExp(this.patterns.spaceReplace,"gmi");this.regex.strayQuotes=RegExp(this.patterns.strayQuotes,"gm")},cleanNegation:function(c){c=c&&c.split("|");
for(var f=c.length,l=null,k=[],q=[];f--;)if((l=c[f]||"")&&this.regex.isNegation.test(l))k.unshift(l.substring(1));else l&&l.trim().length>0&&q.unshift(l);clean_word=q.join("|");return[clean_word,k]},prepareCombinedANDQuery:function(c){c=this.prepareANDQuery(c);c=this.protectExactPhrase(c);return c.replace(this.regex.strayQuotes,"")},prepareANDQuery:function(c){var f=this.regex.spaceReplace;return c&&c.replace(f," ").replace(this.regex.andReplace," ")||""},protectExactPhrase:function(c){var f=this.regex.spaceReplace;
return c&&c.replace(this.regex.isExactPhrase,function(l,k,q){return q.replace(f,u)}).replace(f,"|").replace(t," ")||""},prepareORQuery:function(c){var f=this.regex.spaceReplace,l=this.regex.strayQuotes;return(c=c&&c.replace(this.regex.orReplace,"|")||"")&&c.replace(this.regex.isExactPhrase,function(k,q,n){return n.replace(f,u)}).replace(f,"").replace(t," ").replace(l,"")||""},extend:function(c,f){o.prototype[c]=f},clone:function(){return new o}};x.scanner=new o})(bitlyStore);(function(x){var w=function(){};w.prototype={constructor:w.prototype.constructor,allShareEmails:function(){for(var o=bitlyStore.length,r,u,t=[],j={};o--;)if((u=bitlyStore[o].shares)&&u.length)for(r=u.length;r--;)if(u[r].email&&!j.hasOwnProperty(u[r].email)){t.push(u[r].email);j[u[r].email]=1}return t}};x.CustomExtractor=new w})(bitlyStore);(function(x){function w(k){for(var q=k.length,n=$.Deferred(),B=0,I,O=[];q--;){var Z=new FileReader;Z.onload=function(ja){B-=1;console.log(ja);ja=ja.target&&ja.target.result||{};try{var ga=JSON.parse(ja);ga&&ga.history&&ga.user&&ga.history.length>0&&ga.history[0].link&&O.push(ga)}catch(ra){console.log("ERROR!",ra)}B<=0&&n.resolve(O)};Z.onloadstart=function(){B+=1};I=k[q];Z.readAsText(I)}return n.promise()}function o(k,q,n){if((s=(Math.floor(k/q)%n).toString())&&s.length<2)s="0"+s;return s}function r(k){k=
Math.floor((new Date(new Date-new Date(k))).valueOf()/1E3);return{days:o(k,86400,1E5),hours:o(k,3600,24),mins:o(k,60,60),secs:o(k,1,60),format:function(){for(var q=["hours","mins","secs"],n=-1,B=[];++n<q.length;)B.push(this[q[n]]);return B.join(":")}}}function u(k,q,n,B){k=j;B=B||0;B>0&&B%10===0&&k.print("Still syncing. ",B*30);return B}function t(k,q){k=k||{};var n=$.Deferred(),B=j,I=u;if(q&&typeof q==="function")I=function(){u.apply(this,arguments);q.apply(this,arguments)};I=bitlyStore.backwardSync(k,
I);B.print("START::BACKWARD SYNC");I.done(function(O,Z){B.print("STOP::BACKWARD SYNC");B.print("Update display. Pages Fetched: "+Z);B.print("Total links: "+bitlyStore.length);n.resolve(O,Z)});return n.promise()}var j={timers:null,displayed:[],printEvents:[],bindLstEvents:function(k,q){for(var n=q.length;n--;){var B=q[n].evt_method;B&&k.find("."+q[n].css).bind("click",B)}return this},addEvents:function(k){this.bindLstEvents(k,l);this.bindLstEvents(k,f);this.bindLstEvents(k,c);var q=this;k.find(".bs_sync").bind("click",
function(n){n.preventDefault();q.print("Items in storage",bitlyStore.length);bitlyStore.sync().done(function(B,I,O){B.status_code!==200&&q.print("ERROR: ",B.status_txt);q.print("SYNC COMPLETE, All count",bitlyStore.length,"Called:",I,"of limit",O);if(B&&B.data&&B.data.link_history){B=B&&B.data&&B.data.link_history;q.print("LATEST: "+(B[0].title||B[0].url))}})});k.find(".bs_tabsBar li").click(function(){var n=$(this),B=n.parents("ul").find("li");B.removeClass("bs_active_tab");B=$.inArray(this,B);var I=
$(".bs_debugLst").hide();n.addClass("bs_active_tab");I.eq(B).show()}).filter(":nth(1)").click();k.find(".bs_json_file_importer").bind("change",function(){q.print("Attempt to load local JSON history file");w(this.files).done(function(n){n=n&&n.length>0&&n;for(var B=n.length;B--;){var I=n[B].history,O=n[B].user;q.print("Disable writes to localStorage");bitlyStore.allowStorageWrites(false);console.log("item count",n[B].history.length);q.print("Loading:",I.length,"history items");q.print("User",O);bitlyStore.addList(n[B].history);
fastSearch.repeatLastSearch();q.print("Refresh display");fastSearch.play()}})});return this},showPopup:function(k){clearInterval(this.timers);this.refresh=function(){this.clear();this.showPopup(k)};this.refreshTime=function(){var ja=new Date(x.chkts),ga=r(x.chkts),ra=r(x.saved);ra=r(x.saved);ja=newT.render("timedelta.bitlyStore",{last_sync:ja,timedelta:ga.format(),last_saved:B,saved_timedelta:ra.format()});$(".bs_timeSync").replaceWith($(ja))};var q=this,n=new Date(x.chkts),B=new Date(x.saved),I=
r(x.chkts),O=r(x.saved);n=newT.render("dataPayne.bitlyStore",{last_sync:n,importmeta:{name:"Load JSON history file",css:"bs_load_fileblob_json",type:"file"},timedelta:I.format(),last_saved:B,saved_timedelta:O.format(),oldest_link:bitlyStore[bitlyStore.length-1]||{},youngest_link:bitlyStore[0]||{},total:bitlyStore.length});n=$(n).appendTo($(k)).addClass("displayed");this.displayed.push(n);this.addEvents(n);var Z=$(".bs_allowStorageWrites");this.timers=setInterval(function(){q.refreshTime();bitlyStore.isWriteable()?
Z.html("Disable localStorage writes"):Z.html("Allow localStorage writes")},200);this.print("Load debug panel");return this},clear:function(){for(var k=this.displayed.length,q=this.displayed;k--;){q[k]&&q[k].remove();q.splice(k,1)}clearInterval(this.timers);console.log("element clearing completed");return this},print:function(){var k=Array.prototype.join.call(arguments," ");this.printEvents.push(k);k=newT.div((new Date).getTime(),":: ",k);var q=$(".bs_debugWindow");q.append(k);q.animate({scrollTop:q.find("div").filter(":last").offset().top||
0});return this}},c=[{name:"Magic Reset Button",css:"bs_magic_reset",evt_method:function(k){var q=j;k.preventDefault();$(".bs_tabsBar li").filter(":nth(1)").click();q.print("----Begin Reset---");var n=function(B,I,O,Z){B=Z||0;if(B>0&&B%5===0){fastSearch.repeatLastSearch();fastSearch.play()}};bitlyStore.forceReset();q.print("All cleared",bitlyStore.length,bitlyStore.rawStringLength);q.print("Reset Display");fastSearch.repeatLastSearch();fastSearch.play();setTimeout(function(){q.print("Begin data fetch from server. Current count",
bitlyStore.length);t(null,n).done(function(){fastSearch.repeatLastSearch();fastSearch.play()})},900)}}],f=[{name:"Pager Test (get 30+)",css:"bs_pageMostRecentTest",evt_method:function(k){var q=j;k.preventDefault();var n=bitlyStore.getAll();k=prompt("Item number")*1||40;console.log("use pos",k);k=Math.max(k,40);n=n[k]&&n[k].link&&n[k].ts&&n[k]||n[n.length-1];k={limit:Math.max(Math.ceil(k/30),10),params:{modified_after:n.ts}};q.print("Starting sync, use ",n.ts);bitlyStore.sync(k).done(function(B,I,
O){console.log("Completed",arguments);q.print("Completed pager sync test using modified_after",I,O)})}},{name:"Sync: Now -> Epoch",css:"bs_queryToBeginningOfTime",evt_method:function(k){k.preventDefault();t().done(function(){fastSearch.repeatLastSearch();fastSearch.play()})}},{name:"Sync: Oldest -> Epoch",css:"bs_queryEndOfKnownTime",evt_method:function(k){k.preventDefault();k=bitlyStore[bitlyStore.length-1];t({params:{created_before:k&&k.ts||(new Date).getTime()/1E3}}).done(function(){fastSearch.repeatLastSearch();
fastSearch.play()})}},{name:"Write all to localStorage",css:"bs_writeCache",evt_method:function(k){var q=j;k.preventDefault();bitlyStore.writeCache();q.print("Writing cache. String length",bitlyStore.rawStringLength);q.print("Item count",bitlyStore.length)}},{name:"Clear localStorage",css:"bs_clearAll",evt_method:function(k){var q=j;k.preventDefault();bitlyStore.clearAll(function(){q.print("storage Nuked, In memory object remains with ",bitlyStore.length,"items")})}},{name:"Allow localStorage writes",
css:"bs_allowStorageWrites",evt_method:function(k){var q=j;k.preventDefault();k=!~this.innerHTML.indexOf("Disable");q.print("Set storage write",k);bitlyStore.allowStorageWrites(k)}},{name:"Reset All loaded Flag",css:"bs_resetAllLoadedFlag",evt_method:function(k){k.preventDefault();bitlyStore.allLoaded=false;bitlyStore.writeCache()}},{name:"Nuke!",css:"bs_nukeIt",evt_method:function(k){var q=j;k.preventDefault();q.print("Force reset");bitlyStore.forceReset();setTimeout(function(){q.print("All cleared",
bitlyStore.length,bitlyStore.rawStringLength);fastSearch.repeatLastSearch();fastSearch.play()},600)}}],l=[{name:"Hello World",css:"bs_helloworldprintest",evt_method:function(k){k.preventDefault();j.print("Hello, world!")}},{name:"Reload page",css:"bs_reload",evt_method:function(k){var q=j;k.preventDefault();q.print("Reloading page. Open me again with 'v'");setTimeout(function(){document.location.reload()},900)}},{name:"Download history JSON",css:"bs_download_history",evt_method:function(k){var q=
j;k.preventDefault();q.print("Downloading file");k=JSON.stringify({history:bitlyStore.getAll(),user:bitlyStore.activeUser});window.open("data:text/json;charset=utf-8,"+encodeURIComponent(k),bitlyStore.activeUser+".json")}},{name:"Preview raw JSON",css:"bs_preview_history",evt_method:function(k){var q=j;k.preventDefault();q.print("Preview file");k=JSON.stringify({history:bitlyStore.getAll(),user:bitlyStore.activeUser});window.open("data:application/json;charset=utf-8,"+encodeURIComponent(k),bitlyStore.activeUser+
".json")}},{name:"Download history CSV",css:"bs_exportCSV",evt_method:function(k){k.preventDefault();k=j;var q=bitlyStore.getAll(),n=[],B=q[0].dataKeys;console.log("keys",B);for(var I=-1,O=[];++I<B.length;)O.push(JSON.stringify(B[I]));for(B=q.length;B--;)n.push(q[B].toCSV());n.reverse();n.unshift(O.join(","));q=n.join("\r\n");k.print("Exporting csv. Lines:",n.length);window.open("data:text/csv;charset=utf-8,"+encodeURIComponent(q),bitlyStore.activeUser+".json")}}];newT.save("dataPayne.bitlyStore",
function(k){var q=k.youngest_link&&k.youngest_link.ts&&new Date(k.youngest_link.ts*1E3)||new Date,n=q.getMonth()+1+"/"+q.getDate()+" ";n+=q.getHours()+":"+q.getMinutes();return newT.div({clss:"bs_dataPayne"},newT.div({clss:"fs_keys_dimmerBg"}),newT.div({clss:"fs_keys_mainBox bs_dataInner"},newT.div(newT.h3("Cache Sync Manager")),newT.div({clss:"txt_alignLeft"},newT.p("Use with bitly support team. Contact us first, ",newT.a({href:"mailto:support@bitly.com"},"support@bitly.com"),". ","Caution is urged when mucking with this panel.")),
newT.ul({clss:"bs_master_controls_list"},newT.eachRender(c,"actionItem.bitlyStore")),newT.ul({clss:"bs_tabsBar"},newT.li("Timestamps"),newT.li("Debug"),newT.li("Syncing"),newT.li("Dev Tools"),newT.li("Import")),newT.ul({clss:"bs_debugLst1 bs_debugLst"},newT.li("Total: ",k.total),newT.li("Old Link: ",new Date(k.oldest_link.ts*1E3)," "+k.oldest_link.user_hash),newT.li("New Link: ",q," "+k.youngest_link.user_hash),newT.render("timedelta.bitlyStore",k)),newT.div({clss:"bs_debugWindow bs_debugLst2 bs_debugLst"}),
newT.div({clss:"bs_debugLst bs_debugLst5"},newT.ul({clss:"bs_actionsList"},newT.li(newT.a({href:"#",clss:"bs_sync"},"Sync: "+n+" -> Now")),newT.eachRender(f,"actionItem.bitlyStore"))),newT.div({clss:"bs_debugLst bs_debugLst4"},newT.ul({clss:"bs_actionsList"},newT.eachRender(l,"actionItem.bitlyStore"))),newT.div({clss:"bs_debugLst bs_debugLst3"},newT.render("actionUpload.bitlyStore",k.importmeta||{}))))});newT.save("actionItem.bitlyStore",function(k){return newT.li({when:k.name},newT.a({href:"#",clss:k.css},
k.name))});newT.save("actionUpload.bitlyStore",function(k){k=k||{};var q="Info: This will replaces your data. ";q+="It will not sync this data to server. ";q+="Items flagged as archived=true will be ignored. ";q+="Each entry must have a unique 'link' attribute. ";q+="Approximate format:";return newT.div(newT.p(k.title||"Select JSON file to import"),newT.input({when:k.type&&k.type==="file",type:k.type,clss:"bs_json_file_importer "+(k.css||"")}),newT.p(q),newT.div(newT.code("{'history':[{'link':'foo', 'title':'some title'},{ ... }], 'user':'bitlyuser'}")))});
newT.save("timedelta.bitlyStore",function(k){return newT.div({clss:"bs_timeSync"},newT.ul(newT.li("Sync: ",k.last_sync||"stuff"),newT.li("Last sync: ",k.timedelta),newT.li("Saved: ",k.last_saved),newT.li("last saved: ",k.saved_timedelta)))});x.dataIntegrity=j})(bitlyStore);(function(x){bundleStore=function(w){w=w||{};this.listen_evts=[];this._errors=[];this.loaded=false;this.storeKeyname=function(o){return this.keyPrefix()+this.userKey(o)};this.keyPrefix=function(){return w.key_prefix||"_bundlesv02_"}};bundleStore.prototype={constructor:bundleStore.prototype.constructor,length:0,activeUser:null,splice:Array.prototype.splice,slice:Array.prototype.slice,push:Array.prototype.push,pop:Array.prototype.pop,sort:Array.prototype.sort,unshift:Array.prototype.unshift,shift:Array.prototype.shift,
listen:bitlyStore.constructor.prototype.listen,trigger:bitlyStore.constructor.prototype.trigger,unlisten:bitlyStore.constructor.prototype.unlisten,unlistenAll:bitlyStore.constructor.prototype.unlistenAll,userKey:function(w){return(w=w||this.activeUser)&&w.replace(/\W+/gmi,"")},create:function(w){this.activeUser=w;this.syncAll()},get:function(w,o){if(typeof o==="undefined"&&typeof w!="undefined"){o=w;w="bundle_id"}var r="unshift"in o.constructor.prototype?o:[o],u=this.getAll(),t,j,c=[],f=0,l=r.length;
for(;l--;)c.push(null);l=0;for(var k=u.length;l<k;l++){t=u[l];if(w in t&&(j=r.indexOf(t[w]),j>-1)){c[j]=t;if(++f===r.length)return c.length===1?c[0]:c}}c.found_length=f;return r.length===1&&c.length===1?c[0]:c},syncAll:function(w){var o=this;return API.execute("Bundle","history").done(function(r){if(r=r.data&&r.data.bundles){r.sort(function(u,t){return t.last_modified_ts-u.last_modified_ts});o.__saveAll(r);o.trigger("sync_success");window.App&&App.Dispatch.trigger("App.Bundles:sync",o);w&&w.success&&
w.success.call(o)}}).fail(function(){console.log("AN ERROR OCCURRED LOADING BUNDLES");o.trigger("sync_error");w&&w.error&&w.error.call(o)})},dataModel:function(w){return new BundleCacheModel(w)},add:function(w){w=w||{};w=this.dataModel(w);this.push(w);return w},__saveAll:function(w,o){this.reset(true);for(var r=0,u=w.length;r<u;r++)this.add(w[r]);o||this.writeCache();return this},getAll:function(){return this.slice(0)},reset:function(w){for(;this.length;)this.pop();w||this.clearCache()},loadCache:function(w){w=
w||this.storeKeyname();var o=this;nyan.Store.get(w,function(r){if(r)o.__saveAll(r,true);else return false});return true},writeCache:function(w){w=w||this.storeKeyname();nyan.Store.set(w,JSON.stringify(this.getAll()));return this},clearCache:function(w){w=w||this.storeKeyname();nyan.Store.remove(w);return this}};x.bundleStore=new bundleStore})(window);(function(x){KeyMaster=function(w){this.user=w;return this};KeyMaster.prototype={constructor:KeyMaster.prototype.constructor,currentKeys:function(){return[bitlyStore.storeKeyname(this.user),bundleStore.storeKeyname(this.user),"user_data"]},saveKeys:function(){var w=this.currentKeys(),o=["uses_fs_"+this.user];return o=o.concat(w)},cleanUpExisting:function(w){if(!(window.chrome&&window.chrome.extension)){var o=this.saveKeys(),r=this.currentKeys(),u=[],t=false;if(nyan.LocalStore.support){t=nyan.LocalStore.get("uses_fs_"+
this.user);for(var j=nyan.LocalStore.listKeys(),c,f=0,l=j.length;f<l;f++){c=j[f];if(o.indexOf(c)<1||t&&r.indexOf(c)>0)u.push({store:"local",key:c})}}if(nyan.FileStore.support){var k=this;nyan.FileStore.checkQuota(function(q,n){this.enabled=!!n;if(n){nyan.LocalStore.clear();nyan.Store=nyan.FileStore;nyan.Store.listKeys(function(B){for(var I,O=0,Z=B.length;O<Z;O++){I=B[O];I=I.name.replace(/\.txt$/,"");o.indexOf(I)<1&&u.push({store:"file",key:I})}k.deleteStaleKeys(u,w)})}else k.deleteStaleKeys(u,w)},
function(){k.deleteStaleKeys(u,w)})}else this.deleteStaleKeys(u,w)}},deleteStaleKeys:function(w,o,r){o=o||function(){};r=r||0;if(r===w.length)if(typeof o==="function")return o.call(window,w);var u=this,t=w[r],j=nyan.LocalStore;if(t.store==="file")j=nyan.FileStore;j.remove(t.key,function(){u.deleteStaleKeys(w,o,++r)})}};x.histStore={KeyMaster:KeyMaster}})(window);window.start_application=function(x){x=x||{};var w=x.user||null;if(!w)throw Error("USER_REQUIRED");x.noload=true;nyan.nyanUser=new nyan.NyanUser(x);if(!nyan.share)nyan.share={};nyan.share.accounts=nyan.nyanUser.data.share_accounts;if(App.isWebPage)App.$User=new App.User(nyan.nyanUser.data);(new histStore.KeyMaster(w)).cleanUpExisting(function(){if(App.isWebPage){bundleStore.create(w);var o=bitlyStore.info(),r=document.getElementById("fs_headline"),u=document.getElementById("content");fastSearch.autoLoad=
true;fastSearch.dom.addForm(r,{cache_count:o.length,storage_size:o.rawStringLength},u);if(window.App&&App.$User&&(App.$User.get("preferences").is_new_user===1||App.$User.get("preferences").is_new_user==="1"))App.UnauthHistory.shortlinks.length?API.execute("Bitmark","getMultiple",{hash:App.UnauthHistory.getHashes()}).done(function(j){if(j.data.info.length){var c=App.UnauthHistory.hashesToTimestamps();_.each(j.data.info,function(f){f.url=f.long_url;f.ts=c[f.hash]});App.$ModalFactory.add("import",{anon_links:j.data.info})}else fastSearch.getUserHistory("/data/beta/history/",
w)}):API.execute("Bitmark","getAnonHistory",{perpage:10}).done(function(j){j.data.results.length?App.$ModalFactory.add("import",{anon_links:j.data.results}):fastSearch.getUserHistory("/data/beta/history/",w)});else fastSearch.getUserHistory("/data/beta/history/",w);fastSearch.dom.bindDomEvents();fastSearch.listenStorageEvents(w);fastSearch.magicMatchers.init();fastSearch.privacyFilter.init();try{pranks&&pranks.strike()}catch(t){}App.Dispatch.trigger("UI.BitmarkPage:created",$(".dropdown--sort_by"))}})};(function(x){x.share=new function(){this.accounts=[]}})(nyan);(function(){var x=function(w,o){return function(){return w.apply(o,arguments)}};this.V3API=function(){function w(){this.auth=x(this.auth,this);this.get=x(this.get,this);this.execute=x(this.execute,this);var o,r,u,t,j;this.host=this.env==="dev"?"http://api.bitly.org":"https://api-ssl.bitly.com";this.settings={traditional:true};if(this.env==="dev")this.settings.headers={"X-Scheme":"https"};for(r in this.endpoints){this[r]={};t=this.endpoints[r];for(o in t){u=t[o];this[r][o]=_.bind(this.get,this,u)}}this.token=
(j=extension.user)!=null?j.access_token:void 0}w.prototype.execute=function(o,r,u){return this[o][r](u).always(function(t){return extension.trigger("API."+o+"."+r,t.data)})};w.prototype.oauth_credentials={client_id:"298b336871d6aa29e06b3033269f21ced9717625",client_secret:"319b6d82931c7b92bc05d83e005c3f415a66e31b"};w.prototype.env="prod";w.prototype.endpoints={Link:{customizeKeyword:"/private/keyword_api_router"},Bitmark:{expandLink:"/v3/expand",save:"/v3/user/link_save",update:"/v3/user/link_edit",
getInfo:"/v3/info",getTitle:"/beta/title",getClicks:"/v3/clicks",getClickHistory:"/private/link/clicks_range",getSaves:"/v3/link/encoders_count",getHistory:"/v3/user/link_history",getUserLink:"/v3/user/link_lookup",customizeKeyword:"/v3/user/link_customize",share:"/v3/user/share",shareTwitter:"/private/user/share/twitter",shareFacebook:"/private/user/share/facebook",shareEmail:"/private/user/share/email",getFacebookPreview:"/v3/user/facebook_link_preview"},User:{toggleShareAccount:"/v3/user/toggle_share_account",
getAccounts:"/v3/user/share_accounts",getPreferences:"/v3/user/preferences",setPreferences:"/v3/user/preferences",getInfo:"/v3/user/info",getPopularLinks:"/v3/user/popular_links"},Bundle:{create:"/v3/bundle/create",history:"/v3/user/bundle_history?expand_user=true",addLink:"/v3/bundle/link_add",removeLink:"/v3/bundle/link_remove",addCommentToLink:"/v3/bundle/link_comment_add"}};w.prototype.get=function(o,r){var u;if(r==null)r={};u=_.extend({},r,{access_token:this.token});return BITLY.get(this.host+
o,u,this.settings)};w.prototype.auth=function(o){var r=this;_.extend(o,this.oauth_credentials);o=_.extend({},{data:o,type:"POST"},this.settings);return $.ajax(this.host+"/oauth/access_token",o).done(function(u){console.log("auth done",document.location.href);u=BITLY.util.queryStringToHash("?"+u);extension.user={x_login:u.login,x_apiKey:u.apiKey,access_token:u.access_token};Store.set("user_data",extension.user);return r.token=u.access_token})};return w}()}).call(this);(function(){var x,w,o,r;w=window.location.hostname.split(".");x=w.slice(w.length-2).join(".");this.App={Lib:{},Dispatch:_.extend({},Backbone.Events),Partials:{},State:{},Settings:{env:function(){switch(x){case "bitly.org":return"dev";case "bitly.net":return"staging";case "bitly.com":return"prod";default:return"none"}}()}};this.App.State.input_event="oninput"in window?"input":"propertychange";if(App.DEBUG){r=+new Date;o=function(u){if(u>=36E5)return(u/36E5).toFixed(1)+"h";if(u>=6E4)return(u/6E4).toFixed(1)+
"m";if(u>=1E3)return(u/1E3|0)+"s";return u+"ms"};App.Dispatch.on("all",function(){var u;u="+"+o(+new Date-r);return console.log(u,arguments)})}App.notify=function(u){return function(){var t;if(!$("#app-notification:visible").length){t=$("#app-notification");return t.removeClass("warning error success").text(u.msg).addClass(u.type).css("marginLeft",-t.width()/2).slideDown().delay(5E3).slideUp()}}};_.truthy=function(u){return u===true||u==="true"||u===1||u==="1"}}).call(this);(function(){var x,w=function(t,j){return function(){return t.apply(j,arguments)}},o={}.hasOwnProperty,r=function(t,j){function c(){this.constructor=t}for(var f in j)if(o.call(j,f))t[f]=j[f];c.prototype=j.prototype;t.prototype=new c;t.__super__=j.prototype;return t},u=[].indexOf||function(t){for(var j=0,c=this.length;j<c;j++)if(j in this&&this[j]===t)return j;return-1};App.BitmarkRegistry={};App.Bitmark=function(t){function j(){this.autoSave=w(this.autoSave,this);this.customizeKeyword=w(this.customizeKeyword,
this);this.getTitle=w(this.getTitle,this);this.getClicks=w(this.getClicks,this);this.getClickHistory=w(this.getClickHistory,this);this.getSaves=w(this.getSaves,this);this._updateBundles=w(this._updateBundles,this);this.previousShares=w(this.previousShares,this);this.domain=w(this.domain,this);this.hash=w(this.hash,this);this.keyword=w(this.keyword,this);this.shortLink=w(this.shortLink,this);return x=j.__super__.constructor.apply(this,arguments)}r(j,t);j.fromBitlyStore=function(c){var f,l,k;if((l=
App.BitmarkRegistry[c.url])&&c.modified_at!=null&&l.get("modified_at")!=null&&c.modified_at<=l.get("modified_at"))return l;f=c.toJSON();f.shares=f.shares!=null?function(){var q,n,B,I;B=f.shares;I=[];q=0;for(n=B.length;q<n;q++){k=B[q];I.push(k.toJSON())}return I}():[];return new this(f)};j.prototype.defaults=function(){return{modified_at:moment(new Date).unix(),ts:moment(new Date).unix(),archived:false,bundle_links:[],"private":App.$User&&App.$User.get("preferences").history_privacy==="private"?true:
false}};j.prototype.initialize=function(){var c;App.Dispatch.on("App.Bundle.Bitmark:add",this._onAddToBundle,this);this.on("change:bundle_links",this._updateBundles);this.get("bundle_links")&&this._updateBundles(this,this.get("bundle_links"));this.get("url")&&this._normalizeLongUrl();if(c=this.get("link"))this.get("user_hash")||this.set("user_hash",c.split("/").pop());this.saveToBitmarkRegistry();this.on("change:title",function(){return App.Dispatch.trigger("request:updateLink",{user_hash:this.get("user_hash"),
title:this.get("title")})});this.on("change:keyword",function(){return App.Dispatch.trigger("request:updateLink",{user_hash:this.get("user_hash"),keyword:this.get("keyword"),keyword_link:this.get("keyword_link")})});this.on("change:private",function(){return App.Dispatch.trigger("request:updateLink",{user_hash:this.get("user_hash"),"private":this.get("private")})});return this.on("change:note",function(){return App.Dispatch.trigger("request:updateLink",{user_hash:this.get("user_hash"),note:this.get("note")})})};
j.prototype.saveToBitmarkRegistry=function(){var c,f;c=this.get("link");f=this.get("url");if(c&&f)return App.BitmarkRegistry[f]=this};j.prototype.toTemplate=function(){var c;c=this.toJSON();c.previousShares=this.previousShares();c.shortLink=this.shortLink();c.hash=this.hash();c.urlNoProtocol=this.get("url").replace(/^https?:\/\//,"");return c};j.prototype._normalizeLongUrl=function(){var c;c=this.get("url");c=$.trim(c);c.match(/(https?|ftp|itms)\:\/\//i)||(c="http://"+c);if(c.split("/").length===
3)c+="/";return this.set("url",c)};j.prototype.normalizeURL=function(c){var f;if(c.search(/https?|ftp|itms/)===0)return c;if(c.charAt(0)==="/"){if(c.length>1&&c.charAt(1)==="/")return c;return this.get("url").split("/").slice(0,3).join("/")+c}else{f=this.get("url").split("/");f.pop();return f.join("/")+"/"+c}};j.prototype._onAddToBundle=function(c,f){if(f===this){App.Dispatch.trigger("UI.Bundle.Bitmark:add");return this._updateBundleLinks(c)}};j.prototype._updateShares=function(c){var f,l,k;l=0;for(k=
c.length;l<k;l++){f=c[l];f.link=f.remote_share_link;delete f.remote_share_link;f.share_type=App.$User.shareAccountLookup(f.account_id)}return this.set("shares",_.clone(this.get("shares")||[]).concat(c))};j.prototype.replaceShares=function(c){this.set("shares",c);return this.saveToBitlyStore()};j.prototype._updateBundleLinks=function(c){var f;f=_.clone(this.get("bundle_links"));f.push(App.Bundle.getIdFromLink(c.bundle_link));this.set("bundle_links",f);return bitlyStore.add(this.toJSON())};j.prototype.setBundleLinks=
function(c,f){if(f==null)f=false;this.set("bundle_links",c);this._updateBundles(this,c);if(!f)return this.saveToBitlyStore()};j.prototype.shortLink=function(){return this.get("keyword_link")||this.get("link")||""};j.prototype.keyword=function(){var c;return(c=this.shortLink())!=null?c.split("/").pop():void 0};j.prototype.hash=function(){return this.keyword()||this.get("user_hash")};j.prototype.domain=function(){return this.shortLink().split("/").slice(2,3).pop()};j.prototype.isKeywordLink=function(){var c;
if(this.get("keyword_link"))return true;c=this.keyword();if(c===this.get("user_hash"))return false;if(c===this.get("global_hash"))return false;return true};j.prototype.previousShares=function(){var c,f,l,k,q;c={};if(this.get("shares")){q=this.get("shares");l=0;for(k=q.length;l<k;l++){f=q[l];c[f.share_type]=true}}return c};j.prototype._updateBundles=function(c,f){return this.set("bundles",App.Bundle.getById(f))};j.prototype.getSaves=function(){var c,f,l=this;c={link:this.shortLink()};if(((f=window.chrome)!=
null?f.extension:void 0)==null)c.count=true;c=API.execute("Bitmark","getSaves",c);c.done(function(k){var q;k=((q=window.chrome)!=null?q.extension:void 0)!=null?k.data.count:k.data.encode_count.count;return l.set("saves",k)});return c.fail(function(){})};j.prototype.getClickHistory=function(){return API.execute("Bitmark","getClickHistory",{link:this.get("aggregate_link")})};j.prototype.getClicks=function(){var c,f=this;c=API.execute("Bitmark","getClicks",{shortUrl:this.shortLink()});c.done(function(l){f.set("user_hash",
l.data.clicks[0].user_hash);f.set("global_hash",l.data.clicks[0].global_hash);f.set("user_clicks",l.data.clicks[0].user_clicks);f.set("global_clicks",l.data.clicks[0].global_clicks);return bitlyStore.add(f.toJSON())});return c.fail(function(){})};j.prototype.getTitle=function(){var c,f,l=this;f=$.Deferred();c=API.execute("Bitmark","getTitle",{url:this.get("url")});c.done(function(k){if(k.data[0].title){l.set("title",k.data[0].title);return f.resolve(arguments)}else return f.reject(arguments)});c.fail(function(){l.set("title",
null);return f.reject(arguments)});return f};j.prototype.customizeKeyword=function(c){var f=this;c=API.execute("Bitmark","customizeKeyword",{hash:this.get("user_hash"),link:this.get("link"),domain:this.domain(),keyword:c});c.done(function(l){var k,q;if(l.data.keyword_link)q=l.data.keyword_link;else if(l.data.url)q=l.data.url;k=q.split("/")[2];if(l.data.aggregate_link)f.set("aggregate_link",l.data.aggregate_link);else l.data.global_hash&&f.set("aggregate_link","http://"+k+"/"+l.data.global_hash);if(l.data.link)f.set("link",
l.data.link);else l.data.hash&&f.set("link","http://"+k+"/"+l.data.hash);f.set("domain",k);f.set("keyword",l.data.keyword);f.set("keyword_link",q);return f.saveToBitlyStore()});return c.fail(function(l){return l.message=l.status_txt==="KEYWORD_UNAVAILABLE"?"Sorry, that's taken.":"An error occurred."})};j.prototype.addToBundle=function(c,f){var l,k,q,n=this;k=$.Deferred();l=_.clone(this.get("bundle_links"));l.push(c);this.set("bundle_links",l);l=((q=window.chrome)!=null?q.extension:void 0)!=null?{link:this.shortLink(),
title:this.get("title"),bundle_link:f}:{links:[this.shortLink()],titles:this.get("title"),bundle_link:f};q=API.execute("Bundle","addLink",l);q.done(function(){var B;if(B=n.get("note"))return API.execute("Bundle","addCommentToLink",{bundle_link:f,link:n.shortLink(),comment:B}).done(function(){n.saveToBitlyStore();return k.resolve.call(n,n)});else{n.saveToBitlyStore();return k.resolve.call(n,n)}});q.fail(function(){});return k};j.prototype.removeFromBundle=function(c,f){var l,k,q,n=this;this.set("bundle_links",
function(){var B,I,O,Z;O=this.get("bundle_links");Z=[];B=0;for(I=O.length;B<I;B++){k=O[B];k!==c&&Z.push(k)}return Z}.call(this));l=((q=window.chrome)!=null?q.extension:void 0)!=null?{link:this.shortLink(),bundle_link:f}:{link:[this.shortLink()],bundle_link:f};l=API.execute("Bundle","removeLink",l);l.done(function(){return bitlyStore.add(n.toJSON())});return l.fail(function(){})};j.prototype.archive=function(){var c=this;this.update({edit:"archived",archived:true,dont_save_to_storage:true}).fail(function(){c.set("archived",
false);return notify("Failed to archive",{type:"error"})});bitlyStore.removeByLink(this.shortLink());return bitlyStore.storeCompleteList(false)};j.prototype.unarchive=function(){var c=this;this.update({edit:"archived",archived:false,dont_save_to_storage:true}).fail(function(){c.set("archived",true);return notify("Failed to unarchive",{type:"error"})});bitlyStore.add(this.toJSON());return bitlyStore.storeCompleteList(false)};j.prototype.update=function(c){var f,l=this;f={};if(c.silent)f.silent=true;
this.set(c.edit,c[c.edit],f);if(!c.link)c.link=this.get("link");c.dont_save_to_storage||this.saveToBitlyStore(c);return API.execute("Bitmark","update",c).done(function(){return l.trigger("updated",l)}).fail(function(){})};j.prototype.share=function(c){var f,l,k,q,n,B,I=this;f=this.shortLink();B=this.get("title");q=$.Deferred();l=[];for(n in c){k=c[n];if(f)k.share_link=f;if(B)k.share_title=B;l.push(API.execute("Bitmark","share"+n.capitalize(),k))}$.when.apply($,l).done(function(){var O,Z,ja,ga,ra,
ua,Sa,Wa,sb,Ga,Xa,z,C,M;ra=[];if(l.length>1){ga=Array.prototype.slice.call(arguments);ua=0;for(Sa=ga.length;ua<Sa;ua++){ja=ga[ua];if(ja.length&&(O=ja[0].data)!=null&&O.share)ra=ra.concat((Z=ja[0].data)!=null?Z.share:void 0)}}else if(arguments[0]&&(ja=arguments[0].data)!=null&&ja.share)ra=(ga=arguments[0].data)!=null?ga.share:void 0;Z={status_code:200,status_txt:"OK",data:{share:ra}};ua=[];ja=[];Wa=[];Ga=[];Sa=["ACCESS_TOKEN_INVALID","INSUFFICIENT_PERMISSIONS"];sb=["CONTENT_BLOCKED","DUPLICATE_POST"];
Xa=0;for(z=ra.length;Xa<z;Xa++){O=ra[Xa];if(O.error){ga=false;if(C=O.error,u.call(Sa,C)>=0)Wa.push(O);if(M=O.error,u.call(sb,M)>=0){Ga.push(O);ga=true}ga||ja.push(O)}else ua.push(O)}I._updateShareStatus(ja,ua,Ga);if(I.had_share_errors){App.$ModalFactory.pushOrReplace("shareError",{model:I,share_params:c,successes:I.succeeded_accounts,errors:I.error_accounts,unrecoverable_errors:I.unrecoverable_error_accounts,no_transition:true});Wa.length&&App.$ModalFactory.push("oauthTokenShareError",{model:I,acct:Wa[0],
no_transition:true});ja.length||Ga.length?I.trigger("share:error",arguments,c):I._fireGlobalShareSuccess(Z,c)}else I._fireGlobalShareSuccess(Z,c);return q.resolve(Z)});k=0;for(n=l.length;k<n;k++){f=l[k];f.fail(function(){I.trigger("share:error",arguments,c);return q.reject.apply($,arguments)})}return q.promise()};j.prototype._fireGlobalShareSuccess=function(c,f){var l,k,q;q=function(){var n,B,I,O;I=this.succeeded_accounts;O=[];n=0;for(B=I.length;n<B;n++){l=I[n];l.account_type&&O.push(l)}return O}.call(this);
k=function(){var n,B,I,O;I=this.succeeded_accounts;O=[];n=0;for(B=I.length;n<B;n++){l=I[n];l.email&&O.push(l)}return O}.call(this);q!=null&&q.length&&App.Dispatch.trigger("App.Bitmark:socialShare");k!=null&&k.length&&App.Dispatch.trigger("App.Bitmark:emailShare");this.trigger("share:success",c,f);return this._updateShares(this.succeeded_accounts)};j.prototype.clearShareStatus=function(){delete this.error_accounts;delete this.unrecoverable_error_accounts;delete this.succeeded_accounts;return delete this.had_share_errors};
j.prototype._updateShareStatus=function(c,f,l){var k,q,n,B,I,O,Z;if(this.error_accounts==null)this.error_accounts=[];if(this.unrecoverable_error_accounts==null)this.unrecoverable_error_accounts=[];if(this.succeeded_accounts==null)this.succeeded_accounts=[];if(c==null)c=[];if(f==null)f=[];if(l==null)l=[];B={};I={};q={};if(c.length||l.length)this.had_share_errors=true;if(!this.unrecoverable_error_accounts||!this.unrecoverable_error_accounts.length&&l.length)this.unrecoverable_error_accounts=l;if(!this.error_accounts||
!this.error_accounts.length)this.error_accounts=c;else if(f.length||l.length){n=0;for(O=f.length;n<O;n++){k=f[n];B[k.account_id]=k}n=0;for(O=l.length;n<O;n++){k=l[n];I[k.account_id]=k}this.error_accounts=function(){var ja,ga,ra,ua;ra=this.error_accounts;ua=[];ja=0;for(ga=ra.length;ja<ga;ja++){k=ra[ja];B.hasOwnProperty(k.account_id)||ua.push(k)}return ua}.call(this);this.error_accounts=function(){var ja,ga,ra,ua;ra=this.error_accounts;ua=[];ja=0;for(ga=ra.length;ja<ga;ja++){k=ra[ja];I.hasOwnProperty(k.account_id)||
ua.push(k)}return ua}.call(this);O=0;for(Z=c.length;O<Z;O++){n=c[O];q[n.account_id||n.email]=n}n=0;for(O=l.length;n<O;n++){c=l[n];q[c.account_id||c.email]=c}Z=this.error_accounts;l=O=0;for(n=Z.length;O<n;l=++O){c=Z[l];if(q[c.account_id||c.email])this.error_accounts[l]=q[c.account_id||c.email]}}if(!this.succeeded_accounts||!this.succeeded_accounts.length)this.succeeded_accounts=f;else{l=0;for(q=f.length;l<q;l++){k=f[l];this.succeeded_accounts.push(k)}}if(f.length){q=this.shortLink();q=bitlyStore.getByLink(q);
n=0;for(c=f.length;n<c;n++){l=f[n];l.text=l.share_text}q!=null&&q.addShares(f)}return this};j.prototype.autoSave=function(){var c=this;return this.save().done(function(){return c.get("title")?c.trigger("saved",c):c.getTitle().done(function(){c.update({edit:"title",title:c.get("title"),link:c.shortLink()});return c.trigger("saved",c)}).fail(function(){c.trigger("no_title_found",c);return c.trigger("saved",c)})}).fail(function(){return App.Dispatch.trigger("App.Bitmark.save:error")})};j.prototype.save=
function(c){var f,l,k,q,n=this;if(c==null)c=$.Deferred();k={longUrl:this.get("url"),"private":this.get("private")};q=this.get("title");f=this.get("note");if(q!=null)k.title=q;if(f!=null)k.note=f;(l=this.get("deferred_bundles"))&&c.done(function(){return n._addToDeferredBundles(l)});f=API.execute("Bitmark","save",k);f.done(function(B){B=B.data.link_save;n.set("aggregate_link",B.aggregate_link);n.set("link",B.link);n.set("global_hash",n.get("aggregate_link").split("/").pop());n.set("user_hash",n.get("link").split("/").pop());
bitlyStore.add(n.toJSON());n.saveToBitmarkRegistry();App.Dispatch.trigger("App.Bitmark:create",n);return c.resolve.call(n,n)});f.fail(function(B){var I,O,Z,ja,ga,ra;B.status_txt==="INVALID_URI"&&notify("Whoops! That doesn't look like a link. Let's try that again.",{type:"error"});if(B.status_txt==="LINK_ALREADY_EXISTS"){O=bitlyStore.get("url",n.get("url"));if(O!=null){B=App.Bitmark.fromBitlyStore(O);App.Dispatch.trigger("App.Bitmark:saveExisting",B);return c.resolve.call(B,B)}else{O=(ja=B.data)!=
null?(ga=ja.link_save)!=null?ga.link:void 0:void 0;I=(ra=B.data)!=null?ra.link_save:void 0;Z=n.get("url");n.trigger("missingFromLocalStorage",Z);if(O){B=n.fetch(O,c);return B.fail(function(){n.set({aggregate_link:I.aggregate_link,link:I.link,global_hash:I.aggregate_link.split("/").pop(),user_hash:I.link.split("/").pop()});return App.Dispatch.trigger("App.Bitmark:saveMissingFromHistory",n)})}else return n._fetchByLongUrl(Z,c)}}else if(B.status_txt==="ALREADY_A_BITLY_LINK"){O=n.get("url");return API.execute("Bitmark",
"expandLink",{link:O}).done(function(ua){var Sa;if((ua=ua!=null?(Sa=ua.data)!=null?Sa.expand:void 0:void 0)&&ua.length&&ua[0].long_url){Z=ua[0].long_url;n.set("url",Z);return n.save(c)}else return c.reject.call(n,n)}).fail(function(){return c.reject.call(n,n)})}});return c};j.prototype._addToDeferredBundles=function(c){var f;if(c.length){f=c[0];c=f.split("/").slice(4,6).join("/");c=this.addToBundle(c,f);return c.done(function(){return App.Dispatch.trigger("bitmark:added_to_deferred_bundle",this)})}};
j.prototype.checkIfSaved=function(){var c;c=this.get("url");if(!c)throw Error("no long_url");return this._fetchByLongUrl(c,null,"NO_EVENTS")};j.prototype._fetchByLongUrl=function(c,f,l){var k=this;if(f==null)f=$.Deferred();if(l==null)l=false;c=API.execute("Bitmark","getUserLink",{url:c});c.done(function(q){var n,B;if((n=q!=null?(B=q.data)!=null?B.link_lookup:void 0:void 0)&&n.length&&n[0].link){q=n[0].link;return k.fetch(q,f,l)}else return f.reject.call(k,q)});c.fail(function(q){return f.reject.call(k,
q)});return f};j.prototype.fetch=function(c,f,l){var k=this;if(f==null)f=$.Deferred();if(l==null)l=false;c=API.execute("Bitmark","getHistory",{link:c,"private":"both"});c.done(function(q){var n;if((q=q!=null?(n=q.data)!=null?n.link_history:void 0:void 0)&&q.length){n=q[0];n=bitlyStore.dataModel(n);n=App.Bitmark.fromBitlyStore(n);k.set(n.toJSON());l||App.Dispatch.trigger("App.Bitmark:saveExisting",k);return f.resolve.call(k,k)}else return f.reject.call(k,k)});c.fail(function(){return f.reject.call(k,
k)});return f};j.prototype.getFacebookPreview=function(){var c,f,l,k=this;c=App.$User.firstEnabledFacebookAccount();f={url:this.get("url")};if(((l=window.chrome)!=null?l.extension:void 0)!=null)f.account_id=c.account_id;else{f.account_login=c.account_login;f.account_type="facebook"}f=API.execute("Bitmark","getFacebookPreview",f);f.done(function(q){return k.trigger("facebook_preview:success",q.data)});return f.fail(function(q){var n;k.trigger("facebook_preview:error",c);if((n=q.status_txt)==="ACCESS_TOKEN_INVALID"||
n==="INSUFFICIENT_PERMISSIONS")return App.Dispatch.trigger("App.Oauth:token_error",c)})};j.prototype.getThumbnails=function(){var c,f=this;if(!this.thumbnails_fetched){c="https://api.embed.ly/1/preview?callback=?&thumbnail_width=75&thumbnail_height=75&secure=true&key="+BITLY.data.embedly_key+"&url="+encodeURIComponent(this.get("url"));c=$.getJSON(c);c.done(function(l){var k;f.thumbnails_fetched=true;return((k=l.images)!=null?k.length:void 0)>0?f.trigger("has_thumbnails",l.images):f.trigger("no_thumbnails")});
return c.fail(function(){return f.trigger("getThumbnails:error",arguments)})}};j.prototype.toBitlyStoreJSON=function(){var c,f,l,k,q;l=bitlyStore.CacheModel.prototype.__derivedFuncs.slice(0);c=this.toJSON();k=0;for(q=l.length;k<q;k++){f=l[k];f.key in c&&delete c[f.key]}return c};j.prototype.saveToBitlyStore=function(c){var f,l;if(c==null)c=null;l=this.get("link");if(c){f={};f[c.edit]=c[c.edit]}else f=this.toBitlyStoreJSON();return bitlyStore.getByLink(l)?bitlyStore.update(l,f):bitlyStore.add(f)};
j.prototype.toCustomKeywordModel=function(){return{domain:this.domain(),keyword:this.keyword(),link:this.get("link")}};return j}(Backbone.Model)}).call(this);(function(){var x,w,o={}.hasOwnProperty,r=function(u,t){function j(){this.constructor=u}for(var c in t)if(o.call(t,c))u[c]=t[c];j.prototype=t.prototype;u.prototype=new j;u.__super__=t.prototype;return u};App.Bundle=function(u){function t(){return x=t.__super__.constructor.apply(this,arguments)}r(t,u);t.prototype.initialize=function(){return this.on("all",console.log(arguments))};t.getById=function(j){var c,f,l,k;c=window.bundleStore.get(j);if(!c)return[];if($.type(c)==="array"){k=[];f=0;for(l=c.length;f<
l;f++){j=c[f];j!=null&&k.push(j.toJSON())}return k}else return[c.toJSON()]};t.getAll=function(){var j,c,f,l,k;l=window.bundleStore.getAll();k=[];c=0;for(f=l.length;c<f;c++){j=l[c];k.push(j.toJSON())}return k};t.getIdFromLink=function(j){j=j.split("/");return j!=null?j.slice(j.length-2).join("/"):void 0};t.prototype.addCommentToLink=function(j,c){return API.execute("Bundle","addCommentToLink",{bundle_link:this.get("bundle_link"),link:j,comment:c})};t.prototype.addLink=function(j,c){return API.execute("Bundle",
"addLink",{bundle_link:this.get("bundle_link"),link:j,title:c})};t.createAndAddLink=function(j){var c,f,l;if(((f=window.chrome)!=null?f.extension:void 0)!=null){c=$.Deferred();f={"private":j.bundle_privacy,title:j.bundle_title,description:j.bundle_description};l=null;API.execute("Bundle","create",f).done(function(k){l=new App.Bundle(k.data.bundle);return l.addLink(j.links,j.titles).done(function(q){if(j.notes==="_____")return c.resolve(q);else{q=q.data.bundle.links[0].link;return l.addCommentToLink(q,
j.notes).done(function(n){return c.resolve(n)})}})});c.done(function(k){return window.bundleStore.add(k.data.bundle)});return c}else return API.execute("Bundle","createAndAddLink",j).done(function(k){return window.bundleStore.add(k.data.bundle)}).fail(function(){return console.log("error")})};return t}.call(this,Backbone.Model);App.BundleCollection=function(u){function t(){return w=t.__super__.constructor.apply(this,arguments)}r(t,u);t.prototype.model=App.Bundle;return t}(Backbone.Collection)}).call(this);(function(){var x,w=function(u,t){return function(){return u.apply(t,arguments)}},o={}.hasOwnProperty,r=function(u,t){function j(){this.constructor=u}for(var c in t)if(o.call(t,c))u[c]=t[c];j.prototype=t.prototype;u.prototype=new j;u.__super__=t.prototype;return u};App.User=function(u){function t(){this.savePreference=w(this.savePreference,this);return x=t.__super__.constructor.apply(this,arguments)}r(t,u);t.prototype.defaults={has_facebook_enabled:false,has_twitter_enabled:false,share_accounts:[],
preferences:{}};t.prototype.initialize=function(){this.setBundles();this.setShareAccounts();this.on("change:share_accounts",this.setShareAccounts,this);App.Dispatch.on("App.Oauth:success",this.getAccounts,this);App.Dispatch.on("App.Bundle.Bitmark:add",this.setBundles,this);return App.Dispatch.on("App.Bundles:sync",this.setBundles,this)};t.prototype.isVerified=function(){var j;return!!((j=this.get("info"))!=null&&j.is_verified)||!!this.get("is_verified")};t.prototype.shareAccountLookup=function(j){var c,
f,l,k;k=this.get("share_accounts");f=0;for(l=k.length;f<l;f++){c=k[f];if(c.account_id===j)return c.account_type}};t.prototype.customDomain=function(){var j,c;return((j=App.$User.get("info"))!=null?j.custom_short_domain:void 0)||((c=App.$User.get("preferences"))!=null?c.domain_preference:void 0)||"bit.ly"};t.prototype.domainOptions=function(){var j,c,f;c=(j=App.$User.get("preferences"))!=null?j.domain_options:void 0;if(!c){c=["bit.ly","bitly.com","j.mp","bitly.org","bitly.net"];(j=(f=App.$User.get("info"))!=
null?f.custom_short_domain:void 0)&&c.push(j)}return c};t.prototype.shortLinkPlaceholder=function(){return"http://"+this.customDomain()+"/\u2022\u2022\u2022\u2022\u2022\u2022"};t.prototype.firstEnabledFacebookAccount=function(){var j,c,f,l;l=this.get("accounts").facebook;c=0;for(f=l.length;c<f;c++){j=l[c];if(j.primary)return j}};t.prototype.defaultFacebookName=function(){var j;j=this.firstEnabledFacebookAccount();return(j!=null?j.full_name:void 0)||(j!=null?j.account_name:void 0)||""};t.prototype.setBundles=
function(){var j,c,f,l,k,q;f=[];c=[];q=App.Bundle.getAll();l=0;for(k=q.length;l<k;l++){j=q[l];if(j.bundle_id.split("/")[0]===this.get("user")){j.type="own";f.push(j)}else{j.type="curated";c.push(j)}}this.set("own_bundles",f);return this.set("curated_bundles",c)};t.prototype.setShareAccounts=function(){var j,c,f,l,k,q,n;c={facebook:[],twitter:[]};l=f=false;n=this.get("share_accounts");k=0;for(q=n.length;k<q;k++){j=n[k];c[j.account_type].push(_.extend({},j,{only:this.get("share_accounts").length===
1}));if(j.primary)if(j.account_type==="facebook")f=true;else l=true}this.set("accounts",c,{silent:true});this.set("has_facebook_enabled",f,{silent:true});this.set("has_twitter_enabled",l,{silent:true});return this.change()};t.prototype.getAccounts=function(){var j=this;return API.execute("User","getAccounts",{}).done(function(c){var f,l,k,q,n,B,I,O,Z;q=j.get("share_accounts");j.set("share_accounts",c.data.share_accounts);l=[];Z=j.get("share_accounts");n=0;for(I=Z.length;n<I;n++){c=Z[n];f=false;B=
0;for(O=q.length;B<O;B++){k=q[B];if(c.account_id===k.account_id)f=true}f||l.push(c)}console.log(q,j.get("share_accounts"),l);return j.trigger("shareAccounts:new",l)}).fail(function(){return j.trigger("getAccounts:error",arguments)})};t.prototype.toggleShareAccount=function(j){var c=this;return API.execute("User","toggleShareAccount",j).done(function(){var f,l,k,q,n;l=c.get("share_accounts");n=[];k=0;for(q=l.length;k<q;k++){f=l[k];if(f.account_login===j.account_login){j.enabled=f.primary=!f.primary;
c.trigger("change:share_accounts",c,l);c.trigger("change",c);break}else n.push(void 0)}return n})};t.prototype.savePreference=function(j,c){var f,l=this;if(c==="true")c=1;if(c==="false")c=0;if(((f=window.chrome)!=null?f.extension:void 0)!=null){f={edit:j};f[j]=c;f=API.execute("User","setPreferences",f)}else f=API.execute("User","setPreferences",{key:j,value:c});return f.done(function(k){var q;if((k!=null?(q=k.data)!=null?q.preferences:void 0:void 0)!=null){k=k.data.preferences instanceof Array?k.data.preferences[0]:
k.data.preferences;nyan.nyanUser&&_.extend(nyan.nyanUser.data.preferences,k);k=_.extend({},l.get("preferences"),k);return l.set("preferences",k)}})};t.prototype.connectedNetworks=function(){var j,c,f;j=this.get("accounts");f=_.keys(j);return function(){var l,k,q;q=[];l=0;for(k=f.length;l<k;l++){c=f[l];j[c].length&&q.push(c)}return q}()};t.prototype.hasEnabledAccounts=function(){return this.get("has_facebook_enabled")||this.get("has_twitter_enabled")};t.prototype.isEnterprise=function(){var j;return this.get("is_enterprise")||
((j=this.get("info"))!=null?j.is_enterprise:void 0)};return t}(Backbone.Model)}).call(this);(function(){var x,w,o={}.hasOwnProperty,r=function(u,t){function j(){this.constructor=u}for(var c in t)if(o.call(t,c))u[c]=t[c];j.prototype=t.prototype;u.prototype=new j;u.__super__=t.prototype;return u};App.ShareHistory=function(u){function t(){return x=t.__super__.constructor.apply(this,arguments)}r(t,u);return t}(Backbone.Model);App.ShareHistoryCollection=function(u){function t(){return w=t.__super__.constructor.apply(this,arguments)}r(t,u);t.prototype.model=App.ShareHistory;return t}(Backbone.Collection)}).call(this);(function(){function x(w,o){return this.init(w,o)}window.sqlDB=function(w,o){o||(o={});return new x(w,o)};x.prototype={init:function(w,o){this.db=window.openDatabase(w,o.version||1,o.description||"A local SQL DB",o.size||5E6);return this},find:function(w,o){var r="SELECT * FROM "+this.settings.table+" WHERE itemKey=?";this.db.transaction(function(u){u.executeSql(r,[w],function(t,j){for(var c,f,l=0;l<j.rows.length;l++){f=j.rows.item(l);try{c=JSON.parse(f.itemValue)}catch(k){c=f.itemValue}}o&&o(c)},
function(t,j){console.log("error",j,t);throw j.message||"";})})},save:function(w,o,r){var u=this;saved_value=typeof o==="string"?o:JSON.stringify(o);sql="UPDATE "+this.settings.table+" SET itemValue=? WHERE itemKey=?";this.db.transaction(function(t){t.executeSql(sql,[saved_value,w],function(j,c){c.rowsAffected===0?setTimeout(function(){u.add(w,o,r)},15):r(j,c)},function(j,c){console.log("sql error",c,j);c.message.indexOf("no such table")>-1&&u.add(w,o,r)})})},remove:function(w,o){var r="DELETE FROM "+
this.settings.table+" WHERE itemKey=?";this.db.transaction(function(u){u.executeSql(r,[w],o,function(t,j){console.log("error deleting",t,j)})})},add:function(w,o,r){function u(k,q){console.log("error with add_insert_error",k,q,w,o);if(q.message.indexOf(l)>-1){c+=1;f.create_table(function(){c>5||setTimeout(function(){f.insert(j,null,r,u)},20)},u)}else if(q.code>0){c+=1;console.log("error code",q.code,"re-attempt",c);setTimeout(function(){f.save(w,o,r)},30)}}var t=typeof o==="string"?o:JSON.stringify(o),
j=[w,t],c=0,f=this,l="no such table";if(c>5){r&&r({error:"attempt excepted"});console.log("attempts exceeeded",c)}else this.insert(j,null,r,u)},insert:function(w,o,r,u){var t=[],j=0;o=o||["itemKey","itemValue"];for(var c="INSERT INTO "+(this.settings.table||"bitly");j<o.length;j++)t.push("?");c+=" ("+o.join(", ")+") VALUES ("+t.join(",")+")";try{this.db.transaction(function(l){l.executeSql(c,w||[],r,u)})}catch(f){console.log("try/catch error",f,this.db)}},drop_table:function(w){var o="DROP TABLE "+
this.settings.table;w=w||function(){console.log("drop table",arguments)};this.db.transaction(function(r){r.executeSql(o,[],w,function(u,t){console.log("error in drop",t,u)})})},create_table:function(w,o){var r=this;o||(o=function(){console.log("error creating table",o)});console.log(this,"trying to make table now....");this.db.transaction(function(u){u.executeSql("CREATE TABLE "+r.settings.table+" "+r.settings.schema,[],w,o)})},set_table:function(w){this.settings.table=w},settings:{table:"bitly",
schema:"(itemKey UNIQUE, itemValue TEXT)"}}})();(function(){var x=function(o,r){return function(){return o.apply(r,arguments)}},w=[].slice;this.Store=nyan.Store;this.Extension=function(){function o(){this.onContextMenuClick=x(this.onContextMenuClick,this);this.attachContextMenuItem=x(this.attachContextMenuItem,this);this.signout=x(this.signout,this);this.getUser=x(this.getUser,this);this.onMessage=x(this.onMessage,this);this.loadIframe=x(this.loadIframe,this);this.listenIframe=x(this.listenIframe,this);this.browserAction=x(this.browserAction,this);
this.signin=x(this.signin,this);this.initAndShorten=x(this.initAndShorten,this);this.loadUserInfo=x(this.loadUserInfo,this);this.init=x(this.init,this);this.checkAuthentication=x(this.checkAuthentication,this);this.syncUser=x(this.syncUser,this);this.newTab=x(this.newTab,this);this.chromePage=x(this.chromePage,this);this.isTabActive=x(this.isTabActive,this);this.activateTab=x(this.activateTab,this);this.deactivateTab=x(this.deactivateTab,this);var r,u=this;_.extend(this,Backbone.Events);this.on("all",
function(){var t;t=1<=arguments.length?w.call(arguments,0):[];return console.log(t)});chrome.extension.onMessage.addListener(this.onMessage);this.user=Store.get("user_data");this.authenticated=Boolean(((r=this.user)!=null?r.x_login:void 0)&&this.user.x_apiKey);_.defer(function(){u.api=new V3API;return u.checkAuthentication()});this.on("Extension:initialize",function(){u.trends=new Trends;return setInterval(u.syncUser,36E5)})}o.prototype.tabs={};o.prototype.deactivateTab=function(r){return delete this.tabs[r]};
o.prototype.activateTab=function(r){return this.tabs[r]={}};o.prototype.isTabActive=function(r){return this.tabs[r]!=null};o.prototype.bg=chrome.extension.getBackgroundPage();o.prototype.chromePage=function(r){return chrome.extension.getURL("html/"+r+".html")};o.prototype.newTab=function(r){return chrome.tabs.create({url:r})};o.prototype.syncUser=function(){return $.when(this.api.execute("User","getAccounts"),this.api.execute("User","getPreferences")).done(function(r,u){_.isEqual(App.$User.get("share_accounts"),
r[0].data.share_accounts)||App.$User.set("share_accounts",r[0].data.share_accounts);if(!_.isEqual(App.$User.get("preferences"),u[0].data.preferences))return App.$User.set("preferences",u[0].data.preferences)})};o.prototype.checkAuthentication=function(){var r=this;if(this.authenticated)return this.init();else{console.log("not authed, waiting for signin");chrome.browserAction.onClicked.addListener(this.signin);return this.once("Auth:login",function(u){var t;r.user=Store.get("user_data");chrome.browserAction.onClicked.removeListener(r.signin);
r.authenticated=Boolean(((t=r.user)!=null?t.x_login:void 0)&&r.user.x_apiKey);r.init();return r.once("Extension:initialize",function(){return chrome.tabs.getCurrent(function(){return chrome.tabs.update(u.id,{url:r.chromePage("options")})})})})}};o.prototype.init=function(){this.loadUserInfo();return this.on("Iframe:close",this.deactivateTab)};o.prototype.loadUserInfo=function(){var r=this;return this.getUser().done(function(){chrome.browserAction.onClicked.addListener(r.browserAction);return r.attachContextMenuItem()}).done(function(){return r.trigger("Extension:initialize")}).fail(function(u){console.log(["Init failed",
arguments]);if(u.status_code===403){console.log("Authorization rejected. Please sign in again.");return r.signout()}else if(!chrome.browserAction.onClicked.hasListener(r.initAndShorten)){console.log("Will try to init again when extension icon is clicked");return chrome.browserAction.onClicked.addListener(r.initAndShorten)}})};o.prototype.initAndShorten=function(r){var u=this;return this.loadUserInfo().done(function(){chrome.browserAction.onClicked.removeListener(u.initAndShorten);return u.browserAction(r)})};
o.prototype.signin=function(r){var u;u=this.chromePage("signin");u=""+(this.api.env==="dev"?"https://bitly.org":"https://bitly.com")+"/oauth/authorize?client_id="+extension.api.oauth_credentials.client_id+"&redirect_uri="+u;return typeof r==="number"?chrome.tabs.update(r,{url:u}):this.newTab(u)};o.prototype.browserAction=function(r){this.trigger("BrowserAction:click",r.id);if(!this.isTabActive(r.id)){this.activateTab(r.id);this.listenIframe();return this.loadIframe()}};o.prototype.listenIframe=function(){var r,
u,t,j=this;r=function(c){chrome.tabs.onRemoved.removeListener(u);chrome.tabs.onUpdated.removeListener(t);return j.trigger("Iframe:close",c)};t=function(c,f){if(j.isTabActive(c)&&f.status==="loading"){j.trigger("ActiveTab:update",c);return r(c)}};u=function(c){if(j.isTabActive(c)){j.trigger("ActiveTab:close",c);return r(c)}};chrome.tabs.onRemoved.addListener(u);return chrome.tabs.onUpdated.addListener(t)};o.prototype.loadIframe=function(){var r;r='    var iframe = document.createElement("iframe");     iframe.id = "bitly_chrome_extension_iframe";    iframe.style.width = "100%";     iframe.style.height = "100%";     iframe.style.position = "fixed";     iframe.style.top = 0;    iframe.style.left = 0;    iframe.style.border = 0;    iframe.style.zIndex = 2147483647;    iframe.src = "'+
this.chromePage("iframe")+'";     document.body.height = "100%";     document.body.appendChild(iframe);    document.body.className = document.body.className.replace(/(?:^|\\s)bitly\\-extension\\-enabled(?:\\s|$)/g, " ");    document.body.className += " bitly-extension-enabled";';chrome.tabs.executeScript(null,{code:r});return this.trigger("Iframe:open")};o.prototype.onMessage=function(r,u,t){var j,c;if(r.action==="API")if(((j=this.api[r.object])!=null?j[r.method]:void 0)!=null){j=this.api[r.object][r.method](r.params);
j.always(function(f,l){return t({data:f,status:l})});return true}else{j=this.api[r.object]?{missing_object:r.object,missing_method:r.method}:{missing_object:r.object};return t({data:j,status:"error"})}else if(r.method)return(c=MessageHandlers[r.method])!=null?c.apply(this,arguments):void 0};o.prototype.openOauth=function(r,u){chrome.windows.create({url:r.url,width:r.width,height:r.height},function(t){var j,c,f,l;c=t.tabs[0].id;j=function(){chrome.tabs.onRemoved.removeListener(f);return chrome.tabs.onUpdated.removeListener(l)};
f=function(k){if(k===c){j();return u({event:"App.Oauth:error"})}};l=function(k,q){var n;if(r.return_url&&((n=q.url)!=null?n.indexOf(r.return_url):void 0)===0){chrome.tabs.remove(k);j();return u({event:"App.Oauth:success"})}};chrome.tabs.onRemoved.addListener(f);return chrome.tabs.onUpdated.addListener(l)});return true};o.prototype.getUser=function(){var r=this;$.Deferred();$.Deferred();nyan.nyanUser=new nyan.NyanUser({user:this.user.x_login,preferences:{},noload:true});return $.when(this.api.execute("User",
"getPreferences"),this.api.execute("User","getInfo")).done(function(u,t){var j,c;c=t[0].data;j=u[0].data;nyan.share_accounts=c.share_accounts||[];j={user:c.login,info:c,preferences:j.preferences,share_accounts:nyan.share_accounts};start_application(j);App.$User=new App.User(j);return r.trigger("User:initialize")}).fail(function(){return console.log(arguments)})};o.prototype.copyToClipboard=function(r){$("#clipboard").val(r).select();return document.execCommand("copy",false,null)};o.prototype.signout=
function(){var r;this.user=null;this.api.token=null;Store.clear();this.authenticated=false;if((r=this.trends)!=null)r.stop();return this.checkAuthentication()};o.prototype.attachContextMenuItem=function(){if(!this.context_menu){chrome.contextMenus.removeAll();chrome.contextMenus.create({type:"normal",title:"Save Link to bitly",contexts:["link"],onclick:this.onContextMenuClick,documentUrlPatterns:["http://*/*","https://*/*"]});return this.context_menu=true}};o.prototype.onContextMenuClick=function(r){var u,
t=this;if(r=(u=r.linkUrl)!=null?u.trim():void 0)return this.api.execute("Bitmark","save",{longUrl:r}).done(function(j){var c;if(((c=j.data.link_save)!=null?c.link:void 0)!=null&&Store.get("auto_copy"))return t.copyToClipboard(j.data.link_save.link)})};return o}()}).call(this);(function(){this.Plugin=function(){function x(){}x.prototype.active=false;x.prototype.enable=function(){return this.active=true};x.prototype.disable=function(){return this.active=false};x.prototype.toggle=function(w){return w?this.enable():this.disable()};return x}()}).call(this);(function(){var x,w=function(u,t){return function(){return u.apply(t,arguments)}},o={}.hasOwnProperty,r=function(u,t){function j(){this.constructor=u}for(var c in t)if(o.call(t,c))u[c]=t[c];j.prototype=t.prototype;u.prototype=new j;u.__super__=t.prototype;return u};x=chrome.extension.getBackgroundPage();this.Trends=function(u){function t(){this.getTrends=w(this.getTrends,this);this.disable=w(this.disable,this);this.enable=w(this.enable,this);var j,c;this.api=x.extension.api;this.prefs=Store.get("note_preferences");
if(!this.prefs){j={enabled:true,threshold:20,interval:1,interval_type:"hour"};Store.set("note_preferences",j);this.prefs=j}(this.active=Boolean((c=Store.get("note_preferences"))!=null?c.enabled:void 0))&&this.start()}r(t,u);t.prototype.mins=6E4;t.prototype.notifications=[];t.prototype.enable=function(){var j;t.__super__.enable.apply(this,arguments);j=Store.get("note_preferences");j.enabled=true;Store.set("note_preferences",j);this.prefs.enabled=true;return this.start()};t.prototype.disable=function(){var j;
t.__super__.disable.apply(this,arguments);j=Store.get("note_preferences");j.enabled=false;Store.set("note_preferences",j);this.prefs.enabled=false;return this.stop()};t.prototype.start=function(){x.extension.trigger("Trends:start",this);this.getTrends();return this.realtime_poller=setInterval(this.getTrends,5*this.mins)};t.prototype.stop=function(){x.extension.trigger("Trends:stop",this);clearInterval(this.realtime_poller);return this.realtime_poller=null};t.prototype.setThreshold=function(j){var c;
c=Store.get("note_preferences");c.threshold=j;Store.set("note_preferences",c);return this.prefs.threshold=j};t.prototype.getTrends=function(){var j=this;return this.api.User.getPopularLinks({unit:this.prefs.interval_type,units:this.prefs.interval}).done(function(c){var f,l,k,q,n;j.recent=Store.get("recent_notifications")||{};f=+new Date;l=false;n=c.data.popular_links;k=0;for(q=n.length;k<q;k++){c=n[k];if(c.clicks>=j.prefs.threshold)if(!j.recent[c.link]||f-j.recent[c.link]>60*j.mins){j.recent[c.link]=
f;j.notify(c);l=true}}if(l)return Store.set("recent_notifications",j.recent)})};t.prototype.notify=function(j){var c=this;return $.when(this.api.Bitmark.getInfo({shortUrl:j.link}),this.api.Bitmark.expandLink({shortUrl:j.link})).done(function(f,l){j.title=f[0].data.info[0].title;j.long_url=l[0].data.expand[0].long_url;c.notifications.push(j);return chrome.notifications.create("",{type:"basic",iconUrl:"/icons/puffer_48.png",title:""+j.clicks+" clicks on "+(j.title||j.long_url.replace(/^https?:\/\//,
"")),message:""+j.long_url},function(){})})};return t}(this.Plugin)}).call(this);(function(){this.MessageHandlers={bitmarkCreated:function(x){if(x.params.link&&Store.get("auto_copy"))return this.copyToClipboard(x.params.link)},bitmarkAlreadyExists:function(x){if(x.params.link&&Store.get("auto_copy"))return this.copyToClipboard(x.params.link)},syncUser:function(x,w,o){var r,u,t;t={};u=function(j,c){return t.share_accounts=c};r=function(j,c){return t.preferences=c};App.$User.on("change:share_accounts",u);App.$User.on("change:preferences",r);this.syncUser().done(function(){App.$User.off("change:share_accounts",
u);App.$User.off("change:preferences",r);return o(t)});return true},updateUser:function(x,w,o){App.$User.set(x.params.key,x.params.value);return o({msg:"success"})},signout:function(x,w,o){this.signout();this.signin();return o({msg:"success"})},getSelectedText:function(x,w,o){chrome.tabs.executeScript(null,{file:"js/content_text.js"},function(r){return o({note:r!=null?r[0]:void 0})});return true},getDocumentInfo:function(x,w,o){return o({title:w.tab.title,url:w.tab.url})},getUserData:function(x,w,
o){return o(App.$User.toJSON())},openOauth:function(x,w,o){return this.openOauth(x.params,o)},removeIframe:function(x,w){var o=this;return chrome.tabs.executeScript(w.tab.id,{code:'    var iframe = document.getElementById("bitly_chrome_extension_iframe");    iframe.parentNode.removeChild(iframe);    document.body.className = document.body.className.replace(/(?:^|\\s)bitly\\-extension\\-enabled(?:\\s|$)/g, " ");    '},function(){return o.trigger("Iframe:close",w.tab.id)})}}}).call(this);var hexcase=0,b64pad="",chrsz=8;function hex_md5(x){return binl2hex(core_md5(str2binl(x),x.length*chrsz))}function b64_md5(x){return binl2b64(core_md5(str2binl(x),x.length*chrsz))}function str_md5(x){return binl2str(core_md5(str2binl(x),x.length*chrsz))}function hex_hmac_md5(x,w){return binl2hex(core_hmac_md5(x,w))}function b64_hmac_md5(x,w){return binl2b64(core_hmac_md5(x,w))}function str_hmac_md5(x,w){return binl2str(core_hmac_md5(x,w))}
function md5_vm_test(){return hex_md5("abc")=="900150983cd24fb0d6963f7d28e17f72"}
function core_md5(x,w){x[w>>5]|=128<<w%32;x[(w+64>>>9<<4)+14]=w;for(var o=1732584193,r=-271733879,u=-1732584194,t=271733878,j=0;j<x.length;j+=16){var c=o,f=r,l=u,k=t;o=md5_ff(o,r,u,t,x[j+0],7,-680876936);t=md5_ff(t,o,r,u,x[j+1],12,-389564586);u=md5_ff(u,t,o,r,x[j+2],17,606105819);r=md5_ff(r,u,t,o,x[j+3],22,-1044525330);o=md5_ff(o,r,u,t,x[j+4],7,-176418897);t=md5_ff(t,o,r,u,x[j+5],12,1200080426);u=md5_ff(u,t,o,r,x[j+6],17,-1473231341);r=md5_ff(r,u,t,o,x[j+7],22,-45705983);o=md5_ff(o,r,u,t,x[j+8],7,
1770035416);t=md5_ff(t,o,r,u,x[j+9],12,-1958414417);u=md5_ff(u,t,o,r,x[j+10],17,-42063);r=md5_ff(r,u,t,o,x[j+11],22,-1990404162);o=md5_ff(o,r,u,t,x[j+12],7,1804603682);t=md5_ff(t,o,r,u,x[j+13],12,-40341101);u=md5_ff(u,t,o,r,x[j+14],17,-1502002290);r=md5_ff(r,u,t,o,x[j+15],22,1236535329);o=md5_gg(o,r,u,t,x[j+1],5,-165796510);t=md5_gg(t,o,r,u,x[j+6],9,-1069501632);u=md5_gg(u,t,o,r,x[j+11],14,643717713);r=md5_gg(r,u,t,o,x[j+0],20,-373897302);o=md5_gg(o,r,u,t,x[j+5],5,-701558691);t=md5_gg(t,o,r,u,x[j+
10],9,38016083);u=md5_gg(u,t,o,r,x[j+15],14,-660478335);r=md5_gg(r,u,t,o,x[j+4],20,-405537848);o=md5_gg(o,r,u,t,x[j+9],5,568446438);t=md5_gg(t,o,r,u,x[j+14],9,-1019803690);u=md5_gg(u,t,o,r,x[j+3],14,-187363961);r=md5_gg(r,u,t,o,x[j+8],20,1163531501);o=md5_gg(o,r,u,t,x[j+13],5,-1444681467);t=md5_gg(t,o,r,u,x[j+2],9,-51403784);u=md5_gg(u,t,o,r,x[j+7],14,1735328473);r=md5_gg(r,u,t,o,x[j+12],20,-1926607734);o=md5_hh(o,r,u,t,x[j+5],4,-378558);t=md5_hh(t,o,r,u,x[j+8],11,-2022574463);u=md5_hh(u,t,o,r,x[j+
11],16,1839030562);r=md5_hh(r,u,t,o,x[j+14],23,-35309556);o=md5_hh(o,r,u,t,x[j+1],4,-1530992060);t=md5_hh(t,o,r,u,x[j+4],11,1272893353);u=md5_hh(u,t,o,r,x[j+7],16,-155497632);r=md5_hh(r,u,t,o,x[j+10],23,-1094730640);o=md5_hh(o,r,u,t,x[j+13],4,681279174);t=md5_hh(t,o,r,u,x[j+0],11,-358537222);u=md5_hh(u,t,o,r,x[j+3],16,-722521979);r=md5_hh(r,u,t,o,x[j+6],23,76029189);o=md5_hh(o,r,u,t,x[j+9],4,-640364487);t=md5_hh(t,o,r,u,x[j+12],11,-421815835);u=md5_hh(u,t,o,r,x[j+15],16,530742520);r=md5_hh(r,u,t,
o,x[j+2],23,-995338651);o=md5_ii(o,r,u,t,x[j+0],6,-198630844);t=md5_ii(t,o,r,u,x[j+7],10,1126891415);u=md5_ii(u,t,o,r,x[j+14],15,-1416354905);r=md5_ii(r,u,t,o,x[j+5],21,-57434055);o=md5_ii(o,r,u,t,x[j+12],6,1700485571);t=md5_ii(t,o,r,u,x[j+3],10,-1894986606);u=md5_ii(u,t,o,r,x[j+10],15,-1051523);r=md5_ii(r,u,t,o,x[j+1],21,-2054922799);o=md5_ii(o,r,u,t,x[j+8],6,1873313359);t=md5_ii(t,o,r,u,x[j+15],10,-30611744);u=md5_ii(u,t,o,r,x[j+6],15,-1560198380);r=md5_ii(r,u,t,o,x[j+13],21,1309151649);o=md5_ii(o,
r,u,t,x[j+4],6,-145523070);t=md5_ii(t,o,r,u,x[j+11],10,-1120210379);u=md5_ii(u,t,o,r,x[j+2],15,718787259);r=md5_ii(r,u,t,o,x[j+9],21,-343485551);o=safe_add(o,c);r=safe_add(r,f);u=safe_add(u,l);t=safe_add(t,k)}return[o,r,u,t]}function md5_cmn(x,w,o,r,u,t){return safe_add(bit_rol(safe_add(safe_add(w,x),safe_add(r,t)),u),o)}function md5_ff(x,w,o,r,u,t,j){return md5_cmn(w&o|~w&r,x,w,u,t,j)}function md5_gg(x,w,o,r,u,t,j){return md5_cmn(w&r|o&~r,x,w,u,t,j)}
function md5_hh(x,w,o,r,u,t,j){return md5_cmn(w^o^r,x,w,u,t,j)}function md5_ii(x,w,o,r,u,t,j){return md5_cmn(o^(w|~r),x,w,u,t,j)}function core_hmac_md5(x,w){var o=str2binl(x);if(o.length>16)o=core_md5(o,x.length*chrsz);for(var r=Array(16),u=Array(16),t=0;t<16;t++){r[t]=o[t]^909522486;u[t]=o[t]^1549556828}o=core_md5(r.concat(str2binl(w)),512+w.length*chrsz);return core_md5(u.concat(o),640)}function safe_add(x,w){var o=(x&65535)+(w&65535);return(x>>16)+(w>>16)+(o>>16)<<16|o&65535}
function bit_rol(x,w){return x<<w|x>>>32-w}function str2binl(x){for(var w=[],o=(1<<chrsz)-1,r=0;r<x.length*chrsz;r+=chrsz)w[r>>5]|=(x.charCodeAt(r/chrsz)&o)<<r%32;return w}function binl2str(x){for(var w="",o=(1<<chrsz)-1,r=0;r<x.length*32;r+=chrsz)w+=String.fromCharCode(x[r>>5]>>>r%32&o);return w}function binl2hex(x){for(var w=hexcase?"0123456789ABCDEF":"0123456789abcdef",o="",r=0;r<x.length*4;r++)o+=w.charAt(x[r>>2]>>r%4*8+4&15)+w.charAt(x[r>>2]>>r%4*8&15);return o}
function binl2b64(x){for(var w="",o=0;o<x.length*4;o+=3)for(var r=(x[o>>2]>>8*(o%4)&255)<<16|(x[o+1>>2]>>8*((o+1)%4)&255)<<8|x[o+2>>2]>>8*((o+2)%4)&255,u=0;u<4;u++)w+=o*8+u*6>x.length*32?b64pad:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>6*(3-u)&63);return w};(function(){function x(u){var t;if(u&&u.length===undefined){t=w(u);r.appendChild(t)}else{var j=o.createDocumentFragment(),c;for(c in u){t=w(u[c]);j.appendChild(t)}return j}return r}function w(u){var t;if(u.text!==undefined)t=o.createTextNode(u.text||"");else{t=o.createElement(u.type||"div");if(u.attributes||u.attr||u.attrs){var j=u.attributes||u.attr||u.attrs,c;for(c in j)c==="disabled"&&!j[c]||t.setAttribute(c,o.createTextNode(j[c]).nodeValue.toString())}t.id=u.id?u.id:null;t.className=u.css?u.css:
null;j=null;j=typeof u.content;if(j==="object")j=x(u.content);else if(j==="string")j=o.createTextNode(u.content);else{u=u.content!==undefined?u.content.toString()||"":"";j=o.createTextNode(u)}try{t.appendChild(j)}catch(f){}}return t}window.fastFrag={create:function(u){r=o.createDocumentFragment();return x(u)},version:"1.1.2.2"};var o=document,r=null})();(function(){window.nyan||(window.nyan={})}).call(this);(function(x){var w=function(o,r){this.data=o||{};this.data.noload||this.loadUserInfo(r);delete this.data.noload};w.prototype={prefs:function(){return this.data.preferences},displayName:function(){return this.data.display_name||this.data.user},defaultPrivate:function(){var o=this.prefs();return!!("history_privacy"in o&&o.history_privacy==="private")},loadUserInfo:function(o){if(!x.chrome||!x.chrome.extension)BITLY.ajax.POST({url:"/data/beta/user/info",data:{},success:function(r){$.extend(this.data,
r.data);nyan.share.accounts=r&&r.data&&r.data.info&&r.data.info.share_accounts||[];if(x.App){r=$.extend({},this.data.info,this.data);delete r.info;App.$User=new App.User(r)}o&&typeof o==="function"&&o.call(x)},error:function(){console.log("error loading user info",arguments)},scope:this})}};nyan.NyanUser=w})(window);(function(){window.extension=new Extension}).call(this);
